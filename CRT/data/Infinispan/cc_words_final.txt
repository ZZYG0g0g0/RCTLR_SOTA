packag org stream impl import java util abstract map import java util array dequ import java util collect import java util collect import java util hash set import java util queue import java util set import java util concurr executor import java util concurr time unit import java util concurr atom atom boolean import java util concurr atom atom refer array import java util function binari oper import java util function consum import java util function function import java util function predic import java util function supplier import java util stream base stream import java util stream collector import java util stream stream import org cach stream import org common cach except import org common util concurr concurr hash set import org contain entri cach entri import org distribut distribut manag import org distribut local cach topolog import org distribut ch consist hash import org distribut ch key partition import org factori compon registri import org partitionhandl impl partit handl manag import org remot transport address import org statetransf state transfer lock import org stream impl intop intermedi oper import org stream impl termop segment retri oper import org stream impl termop singl run oper import org stream impl termop object flat map iter oper import org stream impl termop object map iter oper import org stream impl termop object map iter oper import org util rang set import org util concurr timeout except import org util log log import org util log log factori abstract stream provid common function requir type stream includ variou primit type param type return stream param stream interfac public abstract class abstract cach stream extend base stream extend implement base stream protect final log log log factori get log get class protect final queue intermedi oper intermedi oper protect final address local address protect final distribut manag dm protect final supplier cach stream cach entri supplier protect final cluster stream manag csm protect final boolean includ loader protect final executor executor protect final compon registri registri protect final partit handl manag partit protect final key partition key partition protect final state transfer lock state transfer lock protect runnabl close runnabl null protect boolean parallel protect boolean parallel distribut protect boolean rehash awar true protect set key filter protect set integ segment filter protect int distribut batch size protect cach stream segment complet listen segment complet listen protect iter oper iter oper iter oper protect long timeout protect time unit timeout unit time unit protect abstract cach stream address local address boolean parallel distribut manag dm supplier cach stream cach entri supplier cluster stream manag object csm boolean includ loader int distribut batch size executor executor compon registri registri local address local address parallel parallel dm dm supplier supplier csm csm includ loader includ loader distribut batch size distribut batch size executor executor registri registri partit registri get compon partit handl manag class key partition registri get compon key partition class state transfer lock registri get compon state transfer lock class intermedi oper new array dequ protect abstract cach stream abstract cach stream intermedi oper intermedi oper local address local address dm dm supplier supplier csm csm includ loader includ loader executor executor registri registri partit partit key partition key partition state transfer lock state transfer lock close runnabl close runnabl parallel parallel parallel distribut parallel distribut rehash awar rehash awar key filter key filter segment filter segment filter distribut batch size distribut batch size segment complet listen segment complet listen iter oper iter oper timeout timeout timeout unit timeout unit protect add intermedi oper intermedi oper intermedi oper intermedi oper handl inject registri add intermedi oper intermedi oper intermedi oper return unwrap protect void add intermedi oper map intermedi oper intermedi oper intermedi oper handl inject registri add intermedi oper intermedi oper intermedi oper protect void add intermedi oper queue intermedi oper intermedi oper intermedi oper intermedi oper intermedi oper add intermedi oper protect abstract unwrap overrid public boolean parallel return parallel boolean get parallel distribut return parallel distribut null true parallel distribut overrid public sequenti parallel fals return unwrap overrid public parallel parallel true return unwrap overrid public unord default alway unord return unwrap overrid public close runnabl close handler close runnabl null close runnabl close handler els close runnabl compos except close runnabl close handler return unwrap overrid public void close close runnabl null close runnabl run perform oper function super extend function boolean retri rehash binari oper accumul predic super earli termin predic result accumul remot result new result accumul accumul rehash awar return perform oper rehash awar function retri rehash remot result earli termin predic els return perform oper function remot result earli termin predic perform oper function super extend function result accumul remot result predic super earli termin predic consist hash ch dm get write consist hash termin oper op new singl run oper intermedi oper supplier segment ch segment filter null function object id csm remot stream oper get parallel distribut parallel ch segment filter key filter collect empti map includ loader op remot result earli termin predic tri local valu op perform oper remot result complet null collect empti set local valu id null tri earli termin predic null earli termin predic test local valu csm await complet id timeout timeout unit throw new timeout except catch interrupt except e throw new cach except e log tracef finish oper id id return remot result current valu final csm forget oper id perform oper rehash awar function super extend function boolean retri rehash result accumul remot result predic super earli termin predic set integ segment process segment filter termin oper op local cach topolog cach topolog dm get cach topolog consist hash ch cach topolog get read consist hash retri rehash op new segment retri oper intermedi oper supplier segment ch segment process null function els op new singl run oper intermedi oper supplier segment ch segment process null function object id csm remot stream oper rehash awar get parallel distribut parallel ch segment process key filter collect empti map includ loader op remot result earli termin predic tri local valu boolean local run ch get member contain local address local run local valu op perform oper effici sinc drop result local dm get read consist hash equal ch set integ segment ch get primari segment owner local address segment process null segment retain segment process remot result complet null segment local valu els segment process null set integ segment ch get primari segment owner local address segment retain segment process remot result segment lose segment els remot result segment lose ch get primari segment owner local address els n actual use local run short circuit first local valu null id null tri local run earli termin predic null earli termin predic test local valu csm await complet id timeout timeout unit throw new timeout except catch interrupt except e throw new cach except e remot result lose segment empti segment process new hash set remot result lose segment remot result lose segment clear log tracef find lose segment identifi segment process id remot result requir next topolog tri state transfer lock wait topolog cach topolog get topolog id timeout timeout unit catch interrupt except java util concurr timeout except e throw new cach except e els n lose segment n need process anymor segment process null segment process null log tracef finish rehash awar oper id id final csm forget oper id segment process null segment process empti return remot result current valu void perform rehash key track oper function supplier stream cach entri key track termin oper object extend object function final atom boolean complet new atom boolean consist hash segment info dm get read consist hash key track consum object object result new key track consum key partition segment info get num segment c c c null set integ segment process segment filter null new rang set segment info get num segment segment filter local cach topolog cach topolog dm get cach topolog consist hash ch cach topolog get read consist hash boolean local run ch get member contain local address set integ segment set object exclud key local run segment ch get primari segment owner local address segment retain segment process exclud key segment stream flat map result refer array get stream collect collector set els null okay refer local run segment null exclud key collect empti set key track termin oper object extend object op function appli supplier segment ch segment process exclud key op handl inject registri object id csm remot stream oper rehash awar get parallel distribut parallel ch segment process key filter new atom refer array map result refer array includ loader op result tri local run collect cach entri object object local valu op perform oper rehash awar result effici hamper perform rehash dm get read consist hash equal ch log tracef find local valu id local valu size id result complet null segment local valu els set integ segment ch get primari segment owner local address segment retain segment process log tracef chang make segment suspect identifi segment id result segment lose segment keep track key n fire result intermedi result null local valu id null tri csm await complet id timeout timeout unit throw new timeout except catch interrupt except e throw new cach except e result lose segment empti segment process new hash set result lose segment result lose segment clear log tracef find lose segment identifi segment process id result requir next topolog tri state transfer lock wait topolog cach topolog get topolog id timeout timeout unit result requir next topolog fals catch interrupt except java util concurr timeout except e throw new cach except e els log tracef finish rehash awar oper id id complet set true final csm forget oper id complet get protect boolean primari owner consist hash ch cach entri e return local address equal ch locat primari owner segment key partition get segment e get key static class atom refer array map extend abstract map integ final atom refer array array atom refer array map atom refer array array array array overrid public boolean contain key object instanceof integ return fals int int return array length overrid public get object key key instanceof integ return null int int key array length return array get return null overrid public int size return array length overrid public boolean remov object key object valu throw new unsupport oper except overrid public void clear throw new unsupport oper except overrid public set entri integ entri set want implement later throw new unsupport oper except class key track consum implement cluster stream manag result callback collect cach entri object key track termin oper intermedi collector collect cach entri object final key partition key partition final consum consum final set integ lose segment new concurr hash set final function cach entri object valu function boolean requir next topolog final atom refer array set refer array final distribut cach stream segment listen notifi listen notifi key track consum key partition key partition int num segment consum consum function cach entri object valu function distribut cach stream segment listen notifi complet segment key partition key partition consum consum valu function valu function listen notifi complet segment refer array new atom refer array num segment int refer array length allow request per id refer array set new hash set overrid public set integ intermedi result address address collect cach entri object result result null log tracef respons result address result size set integ segment complet cach entri object last complet new cach entri listen notifi null segment complet new hash set els segment complet null result e key e get key int segment key partition get segment key set key refer array get segment complet null first thu n need add key null key add key els segment complet null segment complet add segment last complet e consum accept valu function appli e last complet null listen notifi add segment object valu function appli last complet segment complet return segment complet return null overrid public void complet address address set integ complet segment collect cach entri object result complet segment empti log tracef complet segment complet segment null first intermedi result n add reason complet segment refer array set null els log tracef segment complet address set integ valu segment intermedi result address result valu segment null n want modifi complet segment caller may need set integ empti complet segment new hash set complet segment size complet segment first complet segment n key complet segment wait user retriev valu segment contain empti complet segment add listen notifi complet segment result empti complet segment overrid public void segment lose set integ segment use loop sinc concurr hash set n support add integ segment segment lose segment add segment overrid public void request futur topolog requir next topolog true overrid public void send data resons collect cach entri object respons intermedi result null respons static class result accumul implement cluster stream manag result callback privat final binari oper binari oper privat final set integ lose segment new concurr hash set current valu boolean requir next topolog result accumul binari oper binari oper binari oper binari oper overrid public set integ intermedi result address address result result null synchron current valu null current valu binari oper appli current valu result els current valu result return null overrid public void complet address address set integ complet segment result intermedi result address result overrid public void segment lose set integ segment use loop sinc concurr hash set n support add integ segment segment lose segment add segment overrid public void request futur topolog requir next topolog true static class collect consum implement cluster stream manag result callback collect key track termin oper intermedi collector collect privat final consum consum collect consum consum consum consum consum overrid public set integ intermedi result address address collect result result null result consum return null overrid public void complet address address set integ complet segment collect result intermedi result address result overrid public void segment lose set integ segment overrid public void request futur topolog overrid public void send data resons collect respons intermedi result null respons protect supplier stream cach entri supplier segment consist hash ch set integ target segment set object exclud key return supplier segment ch target segment exclud key true code use primari code true segment primari segment exist target segment howev code use primari code fals code target segment code must provid non null use specif param ch param target segment param exclud key param use primari determin whether util primari segment return protect supplier stream cach entri supplier segment consist hash ch set integ target segment set object exclud key boolean use primari ch get member contain local address return stream empti set integ segment use primari segment ch get primari segment owner local address target segment null segment retain target segment els segment target segment return segment empti return stream empti cach stream cach entri stream supplier get filter key segment segment key filter null stream stream filter key key filter exclud key null return stream filter e exclud key contain e get key make sure stream set parallel return parallel stream parallel stream sequenti give two runnabl return runnabl execut sequenc even first throw except throw except add except throw second suppress except first static runnabl compos except runnabl runnabl b return tri run catch throwabl e tri b run catch throwabl e tri e add suppress e catch throwabl ignor throw e b run enum iter oper overrid public key track termin oper get oper iter intermedi oper intermedi oper supplier stream cach entri supplier int batch size return new map iter oper intermedi oper supplier batch size overrid public function cach entri get function return e e overrid public key track termin oper get oper iter intermedi oper intermedi oper supplier stream cach entri supplier int batch size return new map iter oper intermedi oper supplier batch size overrid public key track termin oper get oper iter intermedi oper intermedi oper supplier stream cach entri supplier int batch size return new flat map iter oper intermedi oper supplier batch size overrid public consum wrap consum consum consum return new collect decompos consum consum public abstract key track termin oper get oper iter intermedi oper intermedi oper supplier stream cach entri supplier int batch size public function cach entri get function return e e get valu public consum wrap consum consum consum return consum consum static class collect decompos consum implement consum iter privat final consum consum collect decompos consum consum consum consum consum overrid public void accept iter es es consum give two segment complet listen return segment complet listen execut sequenc even first throw except throw except add except throw second suppress except first protect static cach stream segment complet listen compos except cach stream segment complet listen cach stream segment complet listen b return segment tri segment complet segment catch throwabl e tri b segment complet segment catch throwabl e tri e add suppress e catch throwabl ignor throw e b segment complet segment 
packag org command read import java util abstract collect import java util array import java util collect import java util iter import org cach import org common util closeabl iter import org common util closeabl iter collect import org common util closeabl spliter abstract collect use underli cach instanc variou oper use back collect entri set key set valu map interfac implementor need implement individu method link collect contain object link collect remov object link org common util closeabl iter collect iter link collect add object default throw link java lang unsupport oper except author wburn sinc public abstract class abstract closeabl iter collect extend abstract collect implement closeabl iter collect protect final cach cach public abstract closeabl iter collect cach cach cach cach overrid public abstract closeabl iter iter overrid public abstract closeabl spliter spliter overrid public abstract boolean contain object overrid public abstract boolean remov object overrid public int size return cach size overrid public boolean empti return cach empti copi abstract collect sinc need close iter overrid public object array estim size array prepar see few element object be new object size tri closeabl iter iter int r length next few element expect return array copi r be next return next finish array r r copi abstract collect sinc need close iter overrid public array estim size array prepar see few element int size size r length size java lang reflect array new instanc get class get compon type size tri closeabl iter iter int r length next few element expect be r null null termin els length return array copi r els system arraycopi r length null return r next element expect return next finish array r be overrid public boolean remov collect c boolean modifi fals object c remov modifi true return modifi copi abstract collect sinc need close iter overrid public boolean retain collect c boolean modifi fals tri closeabl iter iter next c contain next remov modifi true return modifi overrid public void clear cach clear copi abstract collect support array method suppress warn uncheck privat static finish array be iter int r length next int cap r length cap int new cap cap cap overflow consciou code new cap new cap huge capac cap r array copi be new cap r next trim overalloc return r length r array copi r copi abstract collect support array method privat static int huge capac int min capac min capac overflow throw new memori error requir array size larg return min capac integ privat static final int integ 
packag org configur cach abstract class abstract cluster configur child builder extend abstract configur child builder implement cluster configur child builder privat final cluster configur builder cluster builder protect abstract cluster configur child builder cluster configur builder builder super builder get builder cluster builder builder overrid public hash configur builder hash return cluster builder hash overrid public configur builder l return cluster builder l overrid public state transfer configur builder state transfer return cluster builder state transfer overrid public sync configur builder sync return cluster builder sync overrid public partit handl configur builder partit handl return cluster builder partit handl protect cluster configur builder get cluster builder return cluster builder 
packag org factori import static org common util reflect util invok access import java lang reflect invoc target except import java lang reflect method import java secur access control import java secur privileg action import java secur privileg except action import java util array list import java util array import java util collect import java util hash set import java util list import java util option import java util set import java util stack import java util concurr concurr hash map import java util concurr concurr map import java util concurr time unit import org illeg lifecycl state except import org common cach configur except import org common cach except import org common api lifecycl import org common util reflect util import org common util util import org configur cach configur import org factori annot default factori import org factori annot inject import org factori annot surviv restart import org factori compon compon metadata import org factori compon compon metadata repo import org factori scope scope import org factori scope scope import org lifecycl compon statu import org util time servic import org util log log registri compon creat store compon store singleton regist specif name p compon retriev registri use link get compon class p compon regist use link regist compon object class caus depend wire well compon need creat result wire do use link get creat compon class look default factori compon type factori annot appropri link default factori annot p default factori treat compon need wire use p registri exist one sever state defin link org lifecycl compon statu enumer term cach state chang follow manner ul li first construct li li creat use default cach factori li li link org cach start call li li link org cach stop call li ul p cach configur chang inject cach link org lifecycl compon statu state thread safeti instanc link global compon registri concurr updat write oper serial class intrins lock author manik surtani author galder zamarr sinc surviv restart scope scope public abstract class abstract compon registri implement lifecycl cloneabl privat final boolean trace get log trace enabl privat static final string debug depend set system properti li debug depend li li true li enabl extra inform error gener compon factori public static final boolean boolean get boolean privat stack string debug stack new stack null contain class definit compon factori use construct certain compon privat map string class extend abstract compon factori default factori null privat static final object new object compon method contain privat final concurr map string compon compon lookup new concurr hash map protect volatil compon statu state compon statu privat static final priorit method retriev state registri return state registri public compon statu get statu return state protect abstract class loader get class loader protect abstract log get log public abstract compon metadata repo get compon metadata repo wire object instanc depend annot link inject annot creat compon need base configur pass addit compon n exist link compon registri strictli compon n otherwis live registri lifecycl command param target object wire throw cach configur except problem wire instanc public void wire depend object target throw cach configur except tri class target class target get class compon metadata metadata get compon metadata repo find compon metadata target class metadata null metadata get inject method null metadatum get inject method length search anyth need inject compon metadata inject metadata inject metadata metadata get inject method class method paramet inject metadata get paramet class method paramet null system get secur manag null method paramet reflect util class array inject metadata get paramet get class loader els method paramet access control privileg privileg except action class reflect util class array inject metadata get paramet get class loader inject metadata set paramet class method paramet method method inject metadata get method method null system get secur manag null method reflect util find method target class inject metadata get method name inject metadata get paramet class els method access control privileg privileg except action method reflect util find method target class inject metadata get method name inject metadata get paramet class inject metadata set method method invok inject method target inject metadata catch illeg lifecycl state except e throw e catch except e throw new cach configur except unabl configur compon type target get class instanc target e regist compon registri give type inject depend need compon type alreadi exist overwritten param compon compon regist param type type compon public synchron final void regist compon object compon class type regist compon compon type get name type equal compon get class public synchron final void regist compon object compon string name regist compon compon name name equal compon get class get name public synchron final void regist compon object compon string name boolean name regist compon intern compon name name protect synchron final void regist non volatil compon object compon string name regist compon intern compon name fals protect synchron final void regist non volatil compon object compon class type regist compon intern compon type get name true protect synchron void regist compon intern object compon string name boolean name state stop state termin throw new illeg lifecycl state except tri regist compon stop name compon null throw new null pointer except regist null compon name name compon old compon lookup get name old null equal n bother old instanc equal compon get log tracef attempt regist compon equal one alreadi exist name anyth name return compon c old null get log tracef replac old compon new instanc old compon old instanc compon old method scan fals c old els c new compon c name name c instanc compon compon lookup put name c c metadata get compon metadata repo find compon metadata compon get class tri c build inject method list catch class find except cnfe throw new cach except error inject depend compon name cnfe inject depend compon inject depend compon alreadi map support cyclic depend c inject depend old null get log tracef regist compon name c name state compon statu state compon statu popul life cycl method c tri invok priorit method array list c start method catch throwabl compon n start properli remov registr compon lookup remov name caller log except handl lifecycl transit failur suppress warn uncheck privat void invok inject method object compon metadata inject metadata inject metadata class depend inject metadata get paramet class depend length object param new object depend length trace get log tracef inject depend method instanc inject metadata get class get name int depend length string name inject metadata get paramet name boolean name inject metadata paramet name set param get creat compon depend name name system get secur manag null invok access inject metadata get method param els access control privileg privileg action object invok access inject metadata get method param retriev compon one exist attempt find factori capabl construct compon factori annot link default factori annot capabl creat compon class p instanc need construct depend automat wire instanc base method compon type annot link inject p sum compon retriev happen follow order br look compon alreadi creat regist look appropri compon exist link configur may inject extern system look class definit pass link configur evict polici implement attempt creat look appropri factori annot link default factori p param compon class type compon retriev null return fulli wire compon instanc null one find construct throw cach configur except problem construct wire instanc protect synchron get creat compon class compon class return get creat compon compon class compon class get name true protect get creat compon class compon class string name return get creat compon compon class name fals suppress warn uncheck protect synchron get creat compon class compon class string name boolean name debug stack push name object compon compon old wrapper lookup compon compon class get name name name old wrapper null compon unwrap compon old wrapper els creat compon add registri abstract compon factori factori get factori compon class get log tracef creat compon factori name factori get class compon factori instanceof name compon factori name compon factori factori construct compon class name factori construct compon class compon null regist compon compon name name els get log tracef regist null compon name regist null compon name debug stack pop return compon retriev compon factori instanc capabl construct compon specifi type factori n exist registri one creat param compon class type compon construct return compon factori capabl construct compon protect synchron abstract compon factori get factori class compon class get log tracef look factori class compon class string cf class get compon metadata repo find factori compon compon class cf class null throw stack awar configur except regist default factori compon compon class find compon factori compon see one creat exist registri abstract compon factori cf get compon cf class cf null cf creat compon factori intern compon class cf class ensur compon factori state compon c lookup compon cf class cf class true c instanc cf throw stack awar configur except compon factori cf class incorrectli regist return cf protect synchron abstract compon factori creat compon factori intern class compon class string cf class first check might creat anoth thread abstract compon factori compon get compon cf class compon null return compon n yet creat creat put registri get log tracef creat factori compon cf class compon class abstract compon factori cf instanti factori cf class cf null throw stack awar configur except unabl locat compon factori compon compon class simpli regist factori registr take care construct depend regist compon cf cf class return cf protect compon lookup compon string compon class name string compon name boolean name return compon lookup get compon name thing meta factori yet factori creat use method attempt use empti public constructor param factori name classnam factori creat return factori instanc abstract compon factori instanti factori string factori name class factori util load class factori name get class get class loader auto instanti factori class assign factori tri return abstract compon factori factori new instanc catch except e unabl get hold instanc throw new cach configur except unabl instanti factori factori debug stack debug stack e els throw new cach configur except auto instanti factori factori n implement auto instanti factori class get simpl name debug stack debug stack regist special null compon depend param name name compon regist null protect synchron final void regist null compon string name regist compon name fals retriev configur compon return configur object protect configur get configur assum alway present part bootstrap construct compon registri return get compon configur class retriev compon specifi type registri null find param type type find return compon null suppress warn uncheck public get compon class type string class name type get name return get compon class name class name true suppress warn uncheck public get compon string compon class name return get compon compon class name compon class name true suppress warn uncheck public get compon string compon class name string name return get compon compon class name name fals suppress warn uncheck public get compon class compon class string name return get compon compon class get name name fals suppress warn uncheck public get compon string compon class name string name boolean name compon wrapper lookup compon compon class name name name wrapper null return null return unwrap compon wrapper public option get option compon class type return option nullabl get compon type get compon wrapper properli handl code null code compon privat object unwrap compon compon wrapper return wrapper instanc null wrapper instanc regist default class loader method must call compon regist typic call bootstrap code defens call constructor compon registri null paramet param loader class loader use default null class loader use load instanc compon registri use protect class loader regist default class loader class loader loader class loader loader use loader null get class get class loader loader regist compon loader use class loader class make sure class loader non volatil surviv restart compon lookup get class loader class get name surviv restart true return loader use rewir compon use rewir compon cach stop move state would almost empti registri compon rewir inject depend cach start p public void rewir need inject everyth compon c new hash set compon lookup valu inject depend compon c inject depend scan regist compon lifecycl method add appropri list sort prioriti privat void popul lifecycl method compon c compon lookup valu popul life cycl method c privat priorit method process priorit method compon metadata priorit method metadata method metadata class compon class compon c priorit method retval int num start method method metadata length num start method retval els retval new priorit method num start method int num start method retval new priorit method retval compon c retval metadata method metadata method metadata get method null method method reflect util find method compon class method metadata get method name method metadata set method method retval length array sort retval return retval privat void popul life cycl method compon c c method scan c method scan true class compon class c instanc get class method first c start method process priorit method c metadata get start method compon class c method next c post start method process priorit method c metadata get post start method compon class c method c stop method process priorit method c metadata get stop method compon class c remov compon annot surviv restart public synchron void reset volatil compon destroy compon clean resourc get log tracef reset volatil compon compon c new hash set compon lookup valu compon volatil c metadata surviv restart get log tracef remov volatil compon c name compon lookup remov c name trace get log tracef reset volatil compon registri contain compon lookup key set publicli avail lifecycl method method perform check appropri transit deleg similarli name intern method start compon registri connect channel start servic thread etc compon link org lifecycl compon statu state initi first overrid public void start state compon statu tri intern start catch throwabl handl lifecycl transit failur protect void post start list priorit method method new array list compon lookup size compon c compon lookup valu collect add method c post start method fire method accord prioriti invok priorit method method stop compon set statu link org lifecycl compon statu do compon link org lifecycl compon statu state op overrid public synchron void stop state stop allow get log debugf ignor call stop current state state return tri stop valid may work boolean fail state compon statu tri intern stop catch throwabl fail get log fail call stop failur fail true handl lifecycl transit failur final fail state compon statu publicli avail lifecycl method actual intern lifecycl method set cach statu throw problem one declar type convert non runtim except except cach except param throwabl throw failur privat void handl lifecycl transit failur throwabl state compon statu get caus null get caus instanceof cach configur except throw cach configur except get caus els get caus null get caus instanceof invoc target except get caus get caus null get caus get caus instanceof cach configur except throw cach configur except get caus get caus els instanceof cach except throw cach except els instanceof runtim except throw runtim except els instanceof error throw error els throw new cach except privat void intern start throw cach except illeg argument except start intern compon first cach start stop destroy method popul lifecycl method list priorit method method new array list compon lookup size compon c compon lookup valu collect add method c start method fire method accord prioriti invok priorit method method add shutdown hook state compon statu privat void invok priorit method list priorit method method boolean trace enabl get log trace enabl sort method prioriti collect sort method priorit method em method trace enabl get log tracef invok method compon em metadata em compon get name em invok protect void add shutdown hook op overrid need protect void remov shutdown hook op overrid need actual stop privat void intern stop state compon statu remov shutdown hook list priorit method stop method new array list compon lookup size compon c compon lookup valu one compon throw except startup stop method list may initi c stop method null collect add stop method c stop method collect sort stop method fire method accord prioriti boolean trace enabl get log trace enabl priorit method em stop method trace enabl get log tracef invok stop method compon em metadata em compon get name tri em invok catch throwabl get log compon fail stop reset volatil compon actual intern lifecycl method assert whether invoc allow cach return tt true tt invoc allow tt fals tt otherwis origin call remot cach statu link org lifecycl compon statu method block link org configur cach state transfer configur timeout milli check valid state param origin local true call origin local e link org cach impl cach impl fals origin remot e link org remot inboundhandl inbound invoc handler return true invoc allow fals otherwis public boolean invoc allow boolean origin local get log trace test invoc allow state allow invoc return true local origin call cach valid state return fals origin local return fals get log trace remot origin els remot call statu wait cach start state compon statu get log trace cach initi block tri block cach start return true catch interrupt except e thread current thread interrupt els get log cach start return fals block current cach instanc link org lifecycl compon statu start phase block link org configur cach state transfer configur timeout millisecond throw illeg state except cach n reach state even maximum wait time throw interrupt except interrupt wait throw illeg state except even wait cach start privat void block cach start throw interrupt except illeg state except int poll frequenc time servic time servic get time servic final long startup wait time get configur cluster state transfer timeout final long give time time servic expect end time startup wait time time unit time servic time expir give time state allow invoc break thread sleep poll frequenc check start state allow invoc throw new illeg state except cach state even wait startup wait time milli return immut set contain compon exist repositori moment return set compon public set compon get regist compon hash set compon defens copi new hash set compon lookup valu return collect unmodifi set defens copi overrid public abstract compon registri clone throw clone support except abstract compon registri dolli abstract compon registri super clone dolli state compon statu return dolli public abstract time servic get time servic wrapper repres compon registri public class compon refer object instanc compon object instanc name compon string name boolean method scan list inject method use inject depend compon compon metadata inject metadata inject method priorit method start method priorit method post start method priorit method stop method compon metadata metadata overrid public string string return compon instanc instanc name name inject depend compon public void inject depend inject method null inject method length compon metadata inject metadata inject metadata inject method invok inject method instanc inject metadata public object get instanc return instanc public string get name return name public compon metadata get metadata return metadata public void build inject method list throw class find except inject method metadata get inject method inject method null inject method length class clazz instanc get class compon metadata inject metadata meta inject method class paramet class meta get paramet class paramet class null paramet class reflect util class array meta get paramet get class loader meta set paramet class paramet class method meta get method null tri reflect util find method clazz meta get method name paramet class catch cach except e throw new cach except inject method find class clazz meta get method name array string paramet class e meta set method wrapper encapsul method along prioriti static class priorit method implement compar priorit method compon metadata priorit method metadata metadata compon compon overrid public int compar priorit method int val metadata get prioriti int anoth val metadata get prioriti return val anoth val val anoth val overrid public boolean equal object return true instanceof priorit method return fals priorit method priorit method compon null compon equal compon compon null return fals return metadata null metadata equal metadata metadata null overrid public int hash code int result metadata null metadata hash code result result compon null compon hash code return result void invok invok access compon instanc metadata get method null overrid public string string return priorit method method metadata prioriti metadata get prioriti protect void throw stack awar configur except string messag debug stack null throw new cach configur except messag get detail set system properti true els throw new cach configur except messag debug stack debug stack 
packag org client hotrod configur import java util properti import org client hotrod protocol version import org client hotrod impl consistenthash consist hash import org client hotrod impl transport transport factori import org client hotrod impl transport tcp failov request balanc strategi import org common marshal marshal abstract configur child builder author tristan tarrant sinc public abstract class abstract configur child builder implement configur child builder final configur builder builder protect abstract configur child builder configur builder builder builder builder overrid public server configur builder add server return builder add server overrid public cluster configur builder add cluster string cluster name return builder add cluster cluster name overrid public configur builder add server string server return builder add server server overrid public executor factori configur builder async executor factori return builder async executor factori overrid public configur builder balanc strategi string balanc strategi return builder balanc strategi balanc strategi overrid public configur builder balanc strategi class extend failov request balanc strategi balanc strategi return builder balanc strategi balanc strategi overrid public configur builder balanc strategi failov request balanc strategi balanc strategi return builder balanc strategi balanc strategi overrid public configur builder class loader class loader class loader return builder class loader class loader overrid public configur builder client intellig client intellig client intellig return builder client intellig client intellig overrid public connect pool configur builder connect pool return builder connect pool overrid public configur builder connect timeout int connect timeout return builder connect timeout connect timeout overrid public configur builder consist hash impl int version class extend consist hash consist hash class return builder consist hash impl version consist hash class overrid public configur builder consist hash impl int version string consist hash class return builder consist hash impl version consist hash class overrid public configur builder forc return valu boolean forc return valu return builder forc return valu forc return valu overrid public configur builder key size estim int key size estim return builder key size estim key size estim overrid public configur builder marshal string marshal return builder marshal marshal overrid public configur builder marshal class extend marshal marshal return builder marshal marshal overrid public configur builder marshal marshal marshal return builder marshal marshal deprec use link version protocol version instead deprec overrid public configur builder protocol version string protocol version return builder version protocol version pars version protocol version overrid public configur builder version protocol version protocol version return builder version protocol version overrid public configur builder socket timeout int socket timeout return builder socket timeout socket timeout overrid public secur configur builder secur return builder secur overrid public configur builder tcp delay boolean tcp delay return builder tcp delay tcp delay overrid public configur builder tcp keep aliv boolean tcp keep aliv return builder tcp keep aliv tcp keep aliv overrid public configur builder transport factori string transport factori return builder transport factori transport factori overrid public configur builder transport factori class extend transport factori transport factori return builder transport factori transport factori overrid public configur builder valu size estim int valu size estim return builder valu size estim valu size estim overrid public configur builder max retri int retri per server return builder max retri retri per server overrid public configur builder add java serial white list string reg ex return builder add java serial white list reg ex overrid public configur builder batch size int batch size return builder batch size batch size overrid public configur builder properti properti properti return builder properti properti overrid public configur build return builder build 
packag org command read import static org common util enum util pretti print bit set import static org common util util str import java util object import org command data command import org context flag author mircea marku jboss com author sann grinovero sann hibern org red hat inc sinc public abstract class abstract data command implement data command protect object key privat long flag privat int topolog id protect abstract data command object key long flag bit set key key flag flag bit set protect abstract data command overrid public int get topolog id return topolog id overrid public void set topolog id int topolog id topolog id topolog id overrid public long get flag bit set return flag overrid public void set flag bit set long bit set flag bit set overrid public object get key return key public void set key object key key key overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals abstract data command abstract data command obj return flag flag object equal key key overrid public int hash code return key null key hash code overrid public string string return get class get simpl name key str key flag print flag overrid public boolean return valu expect return true overrid public boolean block return fals protect final string print flag return pretti print bit set flag flag class 
packag org command write import java util collect import java util collect import org command command invoc id import org command read abstract data command import org context impl flag bit set import org util concurr lock remot lock command stuff common write command author manik surtani sinc public abstract class abstract data write command extend abstract data command implement datum write command remot lock command protect command invoc id command invoc id protect abstract data write command protect abstract data write command object key long flag bit set command invoc id command invoc id super key flag bit set command invoc id command invoc id overrid public collect get affect key return collect singleton key overrid public boolean return valu expect return flag flag bit set flag bit set overrid public boolean block return true overrid public collect get key lock return get affect key overrid public final object get key lock owner return command invoc id overrid public final boolean zero lock acquisit return flag flag bit set overrid public final boolean skip lock return flag flag bit set overrid public command invoc id get command invoc id return command invoc id 
packag org deprec extend link org cach impl abstract deleg advanc cach instead class remov futur deprec public class abstract deleg advanc cach extend org cach impl abstract deleg advanc cach public abstract deleg advanc cach advanc cach cach super cach public abstract deleg advanc cach advanc cach cach advanc cach wrapper wrapper super cach wrapper 
packag org deprec extend link org cach impl abstract deleg cach instead class remov futur deprec public class abstract deleg cach extend org cach impl abstract deleg cach public abstract deleg cach cach cach super cach 
packag org common marshal base class link advanc extern implement offer default implement method particular base class offer default implement link org common marshal advanc extern get id return null particularli use advanc extern whose id provid programmat configur rather extern implement author galder zamarr sinc public abstract class abstract extern implement advanc extern overrid public integ get id return null 
packag org configur global import java util list import org common configur builder abstract class abstract global configur builder implement global configur child builder privat final global configur builder global config protect abstract global configur builder global configur builder global config global config global config protect global configur builder get global config return global config overrid public transport configur builder transport return global config transport overrid public global jmx statist configur builder global jmx statist global config global jmx statist enabl return global config global jmx statist overrid public global state configur builder global state global config global state enabl return global config global state overrid public serial configur builder serial return global config serial overrid public thread pool configur builder listen thread pool return global config listen thread pool overrid public thread pool configur builder async thread pool return global config async thread pool overrid public thread pool configur builder replic queue thread pool return global config replic queue thread pool deprec overrid public thread pool configur builder evict thread pool return global config expir thread pool overrid public thread pool configur builder expir thread pool return global config expir thread pool overrid public thread pool configur builder persist thread pool return global config persist thread pool overrid public thread pool configur builder state transfer thread pool return global config state transfer thread pool overrid public global secur configur builder secur return global config secur overrid public shutdown configur builder shutdown return global config shutdown overrid public site configur builder site return global config site overrid public list builder modul return global config modul overrid public global configur builder default cach name string default cach name return global config default cach name default cach name overrid public global configur build return global config build 
packag org contain entri import java util map import java util object import org contain data contain import org metadata metadata abstract intern cach entri typic store datum contain author manik surtani sinc public abstract class abstract intern cach entri implement intern cach entri protect object key protect abstract intern cach entri protect abstract intern cach entri object key key key overrid public final void commit data contain contain op overrid public void set chang boolean chang op overrid public final void set creat boolean creat op overrid public final void set remov boolean remov op overrid public final void set evict boolean evict op overrid public void set skip lookup boolean skip lookup op overrid public final boolean null return fals overrid public final boolean chang return fals overrid public final boolean creat return fals overrid public final boolean remov return fals overrid public final boolean evict return true overrid public boolean skip lookup return true overrid public metadata get metadata return null overrid public void set metadata metadata metadata op overrid public final object get key return key overrid public boolean entri return fals overrid public string string return get class get simpl name key key overrid public abstract intern cach entri clone tri return abstract intern cach entri super clone catch clone support except e throw new runtim except never happen e overrid public final boolean equal object return true null instanceof map entri return fals map entri map entri return object equal get key get key object equal get valu get valu overrid public final int hash code return object hash code get key object hash code get valu 
packag org context impl import org contain entri cach entri import org contain entri intern cach entri import org context invoc context import org remot transport address common featur transact invoc context author manik surtani author mircea marku jboss com sinc public abstract class abstract invoc context implement invoc context privat final address origin protect abstract invoc context address origin origin origin overrid public final address get origin return origin overrid public boolean origin local return origin null overrid public boolean lock key object key return get lock key contain key overrid public final class loader get class loader return null overrid public final void set class loader final class loader class loader op overrid public boolean entri remov context final object key cach entri ce lookup entri key return ce null ce remov ce chang deprec sinc long use deprec protect void entri valu replac final object key final intern cach entri cach entri overrid public invoc context clone tri return invoc context super clone catch clone support except e throw new illeg state except imposs e 
packag org common marshal jboss import static org common util reflect util import static org common util util import java io byte array input stream import java io except import java io input stream import java io object input import java io object output import java io output stream import java io serializ import java lang reflect method import java net import org common io byte buffer import org common io byte buffer impl import org common io expos byte array output stream import org common log log import org common log log factori import org common marshal abstract marshal import org common marshal stream marshal import org common util concurr concurr weak key hash map import org jboss marshal except listen import org jboss marshal marshal import org jboss marshal marshal configur import org jboss marshal trace inform import org jboss marshal unmarshal common parent emb standalon boss marshal base marshal author galder zamarr author sann grinovero author dan berindei sinc public abstract class abstract boss marshal extend abstract marshal implement stream marshal protect static final log log log factori get log abstract boss marshal class protect static final boolean trace log trace enabl protect static final boss marshal factori factori new boss marshal factori protect static final int protect static final int privat static final int privat static final int protect final marshal configur base cfg marshal thread local non intern marshal usag java hot rod client singleton share urgent need static clear pretti much state finish urgent need clear thread local sinc n leak might take long time warmup pre initi need instanc privat final concurr weak key hash map thread per thread instanc holder marshal new concurr weak key hash map thread per thread instanc holder public abstract boss marshal class resolv set marshal unmarshal creat base cfg new marshal configur base cfg set except listen new debug except listen base cfg set class extern factori new serial ext factori base cfg set instanc count base cfg set class count base cfg set version overrid final public void object object stream final object obj final object output throw except write object obj overrid final protect byte buffer object buffer final object final int estim size throw except expos byte array output stream bao new expos byte array output stream estim size object output marshal start object output bao fals estim size tri object object stream marshal final finish object output marshal return new byte buffer impl bao get raw buffer bao size overrid final public object output start object output final output stream os final boolean reentrant final int estim size throw except per thread instanc holder instanc holder get per thread instanc holder org jboss marshal marshal marshal instanc holder get marshal estim size marshal start marshal creat byte output os return marshal overrid final public void finish object output final object output oo tri trace log trace stop marshal org jboss marshal marshal oo finish catch except ignor overrid final public object object byte buffer final byte buf final int offset final int length throw except class find except byte array input stream new byte array input stream buf offset length object input unmarshal start object input fals object null tri object object stream unmarshal final finish object input unmarshal return overrid final public object input start object input final input stream final boolean reentrant throw except per thread instanc holder instanc holder get per thread instanc holder unmarshal unmarshal instanc holder get unmarshal trace log tracef start unmarshal retriev marshal reentrant factori thread local unmarshal start marshal creat byte input return unmarshal overrid final public object object object stream final object input throw except class find except return read object overrid final public void finish object input final object input oi tri trace log trace stop unmarshal oi null unmarshal oi finish catch except ignor overrid public boolean marshal object throw except class clazz get class boolean contain marshal marshal type hint know marshal clazz contain marshal boolean marshal marshal type hint marshal clazz trace log tracef marshal type know marshal b clazz get name marshal return marshal els marshal candid boolean marshal true tri object buffer catch except e marshal fals throw e final marshal type hint mark marshal clazz marshal return marshal return fals overrid public void start op overrid public void stop clear class cach marshal type hint clear marshal clear protect boolean marshal candid object return instanceof serializ privat per thread instanc holder get per thread instanc holder final thread thread thread current thread per thread instanc holder holder marshal get thread holder null holder new per thread instanc holder base cfg clone marshal put thread holder null throw new illeg state except return holder protect static final class debug except listen implement except listen privat static final overrid public void handl marshal except final throwabl problem final object subject log debug enabl trace inform add user inform problem string subject string overrid public void handl unmarshal except final throwabl problem final class subject class log debug enabl string builder builder new string builder class loader cl subject class get class loader builder append classload hierarchi class loader parent cl parent null parent equal cl builder append n type classload append parent els builder append n parent classload append parent url get class loader ls parent url null u url builder append n append u parent parent get parent trace inform add user inform problem builder string overrid public void handl unmarshal except throwabl problem op privat static get class loader ls final class loader cl url tri class return type url get class class paramet type method get ls cl get class get method get l paramet type return type assign get l get return type object arg url get l invok cl arg catch except ignor return url privat static final class per thread instanc holder implement river close listen final marshal configur configur final extend river marshal reusabl marshal new extend river marshal int avail marshal index final extend river unmarshal reusabl un marshal new extend river unmarshal int avail un marshal index per thread instanc holder final marshal configur thread dedic configur configur thread dedic configur unmarshal get unmarshal throw except oppos get marshal int case n good hint initi buffer size avail un marshal index pool threshold make throw away usag marshal configur set buffer size reset default might chang get marshal return factori creat unmarshal configur els extend river unmarshal un marshal reusabl un marshal avail un marshal index un marshal null avail un marshal index return un marshal els configur set buffer size reset default might chang get marshal un marshal factori creat unmarshal configur un marshal set close listen reusabl un marshal avail un marshal index un marshal avail un marshal index return un marshal extend river marshal get marshal int estim size throw except avail marshal index pool threshold make throw away usag marshal set buffer cheap possibl configur set buffer size estim size return factori creat marshal configur els extend river marshal marshal reusabl marshal avail marshal index marshal null avail marshal index return marshal els go pool one make sure buffer size set reason valu might chang previous configur set buffer size marshal factori creat marshal configur marshal set close listen reusabl marshal avail marshal index marshal avail marshal index return marshal overrid public void close marshal avail marshal index overrid public void close unmarshal avail un marshal index 
packag org jmx import java util set import javax manag bean server import org configur global global configur import org factori abstract compon registri parent class top level compon registr author galder zamarr sinc public abstract class abstract jmx registr string jmx domain bean server bean server global configur global config protect abstract compon jmx registr build registrar set abstract compon registri compon compon regist set bean compon return true success regist fals otherwis param compon compon regist param global config global configur return true success regist fals otherwis protect boolean regist bean set abstract compon registri compon compon global configur global config tri bean server jmx util lookup bean server global config catch except e bean server null bean server null compon jmx registr registrar build registrar compon registrar regist bean return true els return fals protect void unregist bean set abstract compon registri compon compon bean server null compon jmx registr registrar build registrar compon registrar unregist bean 
packag org notif impl import java lang annot annot import java lang ref weak refer import java lang reflect invoc target except import java lang reflect method import java secur access control import java secur privileg action import java secur privileg action except import java secur privileg except action import java util collect import java util hash map import java util hash set import java util list import java util map import java util set import java util concurr executor servic import javax secur auth subject import javax transact transact import org common cach except import org common util reflect util import org factori know compon name import org factori annot compon name import org factori annot inject import org factori annot start import org factori annot stop import org notif incorrect listen except import org notif listen import org notif cachelisten annot cach entri creat import org notif cachelisten annot cach entri expir import org notif cachelisten annot cach entri modifi import org notif cachelisten annot cach entri remov import org secur secur import org util concurr within thread executor import org util log log function common link org notif cachemanagerlisten cach manag notifi impl link org notif cachelisten cach notifi impl param defin type event use subclass param defin type listen invoc subclass use author manik surtani author william burn public abstract class abstract listen impl extend listen invoc protect final map class extend annot list listen map new hash map f protect abstract class abstract invoc builder protect object target protect method method protect class extend annot annot protect boolean sync protect class loader class loader protect subject subject public object get target return target public method get method return method public abstract invoc builder set annot class extend annot annot annot annot return public boolean sync return sync public class loader get class loader return class loader public subject get subject return subject public abstract invoc builder set target object target target target return public abstract invoc builder set method method method method method return public abstract invoc builder set sync boolean sync sync sync return public abstract invoc builder set class loader class loader class loader class loader class loader return public abstract invoc builder set subject subject subject subject subject return public abstract build two separ executor servic one sync one async listen protect executor servic sync processor protect executor servic async processor inject suppress warn unus void inject executor compon name known compon name executor servic executor async processor executor start prioriti public void start sync processor new within thread executor remov listen notifi stop prioriti public void stop list list listen map valu list null list clear sync processor null sync processor shutdown protect abstract log get log protect abstract map class extend annot class get allow method annot listen l protect list get listen collect annot class extend annot annot list list listen map get annot list null throw new cach except unknown listen annot annot return list public void remov listen object listen class extend annot annot get allow method annot test listen class valid listen get class key set remov listen invoc annot listen protect set remov listen invoc class extend annot annot object listen list l get listen collect annot annot set mark remov new hash set li l listen equal li get target mark remov add li l remov mark remov return mark remov public set object get listen set object result new hash set object listen map size list list listen map valu listen invoc li list result add li get target return collect unmodifi set result loop valid method object pass cach relev method link listen invoc invoc reflect builder provid use creat listen invoc method set target subject sync method need valu need set invok pass method param listen object consid listen param builder builder use build invoc return code true annot listen method find code fals otherwis protect boolean valid add listen invoc object listen abstract invoc builder builder listen l test listen class valid listen get class boolean find method fals builder set target listen builder set subject secur get subject builder set sync l sync map class extend annot class allow listen get allow method annot l tri method listen anyth like note method scan method listen get class get method skip bridg method n want count well synthet bridg loop valid method annot map entri class extend annot class annot entri allow listen entri set final class extend annot annot class annot entri get key annot present annot class final class event class annot entri get valu test listen method valid event class annot class get name system get secur manag null set access true els access control privileg privileg action void set access true return null builder set method builder set annot annot class invoc builder build get log tracef add listen invoc invoc annot class get listen collect annot annot class add invoc find method true find method get log annot method find listen listen get class return find method protect boolean valid add filter listen invoc object listen abstract invoc builder builder set class extend annot filter annot listen l test listen class valid listen get class boolean find method fals builder set target listen builder set subject secur get subject builder set sync l sync map class extend annot class allow listen get allow method annot l tri method listen anyth like note method scan method listen get class get method skip bridg method n want count well synthet bridg loop valid method annot map entri class extend annot class annot entri allow listen entri set final class extend annot annot class annot entri get key annot present annot class appli filter annot annot class final class event class annot entri get valu test listen method valid event class annot class get name system get secur manag null set access true els access control privileg privileg action void set access true return null builder set method builder set annot annot class invoc builder build get log tracef add listen invoc invoc annot class get listen collect annot annot class add invoc find method true find method get log annot method find listen listen get class return find method public boolean appli set class extend annot filter annot class extend annot annot class annot view chang transact complet appli regardless return annot class cach entri creat class annot class cach entri modifi class annot class cach entri remov class annot class cach entri expir class filter annot contain annot class protect set class extend annot find listen callback object listen partli duplic valid add listen invoc set class extend annot listen interest new hash set listen l test listen class valid listen get class map class extend annot class allow listen get allow method annot l method listen get class get method skip bridg method n want count well synthet bridg loop valid method annot map entri class extend annot class annot entri allow listen entri set final class extend annot annot class annot entri get key annot present annot class final class event class annot entri get valu test listen method valid event class annot class get name system get secur manag null set access true els access control privileg privileg action void set access true return null listen interest add annot class return listen interest test class properli annot cach listen return listen annot param listen class class inspect return listen annot protect static listen test listen class valid class listen class listen l reflect util get annot listen class listen class l null throw new incorrect listen except string format cach listen class must annot org notif listen listen class get name return l protect static void test listen method valid method class allow paramet string annot name get paramet type length get paramet type assign allow paramet throw new incorrect listen except method annot annot name must accept exactli one paramet assign type allow paramet get name get return type equal void class throw new incorrect listen except method annot annot name return type void protect abstract transact suspend need protect abstract void resum need transact transact class encapsul valid invoc give regist listen contain refer method invok well target object protect class listen invoc impl implement listen invoc public final object target public final method method public final boolean sync public final weak refer class loader class loader public final subject subject public listen invoc impl object target method method boolean sync class loader class loader subject subject target target method method sync sync class loader new weak refer class loader subject subject overrid public void invok final event runnabl r class loader context class loader null transact transact suspend need class loader get null context class loader secur action set context class loader class loader get tri subject null tri secur subject privileg except action void n want print subject could sensit inform get log tracef invok listen pass event use subject target event method invok target event return null catch privileg action except e throwabl caus e get caus caus instanceof invoc target except throw invoc target except caus els caus instanceof illeg access except throw illeg access except caus els throw new invoc target except caus els get log tracef invok listen pass event target event method invok target event catch invoc target except except throwabl caus get real except except sync throw get log except invok listen caus get class get name method target caus els get log unabl invok listen method method target caus catch illeg access except except get log unabl invok listen method remov listen method target except remov listen target final class loader get null secur action set context class loader context class loader resum need transact sync sync processor execut r els async processor execut r overrid public object get target return target privat throwabl get real except throwabl get caus null return throwabl caus get caus caus instanceof runtim except caus instanceof error return get real except caus els return 
packag org stream impl local import java util array dequ import java util array list import java util collect import java util queue import java util set import java util stream base stream import org common util closeabl iter import org factori compon registri import org stream impl intop intermedi oper import org stream impl intop unord oper import org util log log import org util log log factori implement base oper requir local stream stream popul public abstract class abstract local cach stream extend base stream extend implement base stream protect final log log log factori get log get class protect final stream supplier stream supplier protect final compon registri registri protect final collect runnabl close runnabl protect final queue intermedi oper intermedi oper protect set integ segment filter protect set key filter protect boolean parallel public interfac stream supplier extend base stream build stream set integ segment filter set key filter closeabl iter remov iter closeabl iter real iter param stream supplier param parallel param registri public abstract local cach stream stream supplier stream supplier boolean parallel compon registri registri stream supplier stream supplier registri registri close runnabl new array list intermedi oper new array dequ parallel parallel abstract local cach stream abstract local cach stream origin stream supplier stream supplier origin stream supplier registri origin registri close runnabl origin close runnabl intermedi oper origin intermedi oper segment filter origin segment filter key filter origin key filter parallel origin parallel protect final creat stream base stream stream stream supplier build stream segment filter key filter parallel stream stream parallel intermedi oper int op intermedi oper int op handl inject registri stream int op perform stream return stream overrid public boolean parallel return parallel overrid public sequenti parallel fals return overrid public parallel parallel true return overrid public unord intermedi oper add new unord oper return overrid public close runnabl close handler close runnabl add close handler return overrid public void close close runnabl runnabl run 
packag org command read import java io except import java io object input import java io object output import org command abstract flag affect command import org command local command abstract class author manik surtani author mircea marku jboss com sinc public abstract class abstract local command extend abstract flag affect command implement local command public byte get command id return op public final void write object output output throw except op public final void read object input input throw except class find except op public boolean return valu expect return fals public boolean block return fals 
packag org interceptor lock import static org common util util str import java util array list import java util array import java util collect import java util concurr time unit import java util stream collector import java util stream stream import org command data command import org command flag affect command import org command visit command import org command function read key command import org command function read mani command import org command function read write key command import org command function read write key valu command import org command function read write mani command import org command function read write mani entri command import org command function write key command import org command function write key valu command import org command function write mani command import org command function write mani entri command import org command read get command import org command read get cach entri command import org command read get key valu command import org command write clear command import org command write comput command import org command write comput absent command import org command write datum write command import org command write invalid command import org command write invalid command import org command write put key valu command import org command write put map command import org command write remov command import org command write replac command import org context invoc context import org context impl flag bit set import org factori annot inject import org interceptor async interceptor import org interceptor invoc final action import org util concurr timeout except import org util concurr lock lock manag import org util log log base class variou lock interceptor packag author mircea marku public abstract class abstract lock interceptor extend async interceptor privat final boolean trace get log trace enabl protect lock manag lock manag protect cluster depend logic cdl protect final invoc final action unlock return handler new invoc final action overrid public void accept invoc context be ctx visit command r command object rv throwabl throwabl throw throwabl lock manag unlock be ctx protect abstract log get log inject public void set depend lock manag lock manag cluster depend logic cdl lock manag lock manag cdl cdl overrid public final object visit clear command invoc context ctx clear command command throw throwabl return invok next ctx command overrid public object visit put key valu command invoc context ctx put key valu command command throw throwabl command flag flag bit set cach put extern read non transact return visit non tx data write command ctx command return visit datum write command ctx command overrid public object visit replac command invoc context ctx replac command command throw throwabl return visit datum write command ctx command overrid public object visit comput command invoc context ctx comput command command throw throwabl return visit datum write command ctx command overrid public object visit comput absent command invoc context ctx comput absent command command throw throwabl return visit datum write command ctx command overrid public object visit remov command invoc context ctx remov command command throw throwabl return visit datum write command ctx command overrid public object visit get key valu command invoc context ctx get key valu command command throw throwabl return visit data read command ctx command overrid public object visit get cach entri command invoc context ctx get cach entri command command throw throwabl return visit data read command ctx command protect abstract object visit datum read command invoc context ctx data command command throw throwabl protect abstract object visit datum write command invoc context ctx data write command command throw throwabl need method put extern read protect final object visit non tx data write command invoc context ctx data write command command throw throwabl object key skip lock command lock key key command get key return invok next ctx command tri lock record ctx key get lock timeout milli command catch throwabl lock manag unlock ctx throw return invok next final ctx command unlock return handler overrid public final object visit invalid command invoc context ctx invalid command command throw throwabl skip lock command return invok next ctx command tri lock record ctx array list command get key get lock timeout milli command catch throwabl lock manag unlock ctx return invok next final ctx command unlock return handler overrid public final object visit invalid command invoc context ctx invalid command command throw throwabl command caus local write cdl get address trace get log trace skip invalid write oper origin return null skip lock command return invok next ctx command final object key command get key key null key length return null array list object key invalid new array list key length object key key tri lock record ctx key key invalid add key catch timeout except te get log unabl lock invalid key cdl get address key invalid empti return null command set key key invalid array return invok next final ctx command r ctx be command rv invalid command be command set key key be ctx tx scope lock manag unlock r ctx overrid public object visit put map command invoc context ctx put map command command throw throwabl return handl write mani command ctx command command get map key set command forward overrid public object visit read write key valu command invoc context ctx read write key valu command command throw throwabl return visit datum write command ctx command overrid public object visit read write key command invoc context ctx read write key command command throw throwabl return visit datum write command ctx command overrid public object visit write key valu command invoc context ctx write key valu command command throw throwabl return visit datum write command ctx command overrid public object visit write key command invoc context ctx write key command command throw throwabl return visit datum write command ctx command overrid public object visit read key command invoc context ctx read key command command throw throwabl return visit data read command ctx command overrid public object visit write mani entri command invoc context ctx write mani entri command command throw throwabl return handl write mani command ctx command command get affect key command forward overrid public object visit write mani command invoc context ctx write mani command command throw throwabl return handl write mani command ctx command command get affect key command forward overrid public object visit read write mani command invoc context ctx read write mani command command throw throwabl return handl write mani command ctx command command get affect key command forward overrid public object visit read write mani entri command invoc context ctx read write mani entri command command throw throwabl return handl write mani command ctx command command get affect key command forward overrid public object visit get command invoc context ctx get command command throw throwabl return handl read mani command ctx command command get key overrid public object visit read mani command invoc context ctx read mani command command throw throwabl return handl read mani command ctx command command get key protect abstract object handl read mani command invoc context ctx flag affect command command collect key throw throwabl protect abstract object handl write mani command invoc context ctx flag affect command command collect key boolean forward throw throwabl protect final long get lock timeout milli flag affect command command return command flag flag bit set cach configur lock lock acquisit timeout protect final boolean lock key object key primari owner acquir lock boolean lock lock owner key trace get log tracef lock owner key cdl get address str key lock return lock protect final boolean lock owner object key return cdl get cach topolog get distribut key primari protect final void lock record invoc context context object key long timeout throw interrupt except context add lock key key lock manag lock key context get lock owner timeout time unit lock protect final void lock record invoc context context stream key long timeout throw interrupt except lock record context key collect collector list timeout protect final void lock record invoc context context collect key long timeout throw interrupt except key context add lock key lock manag lock key context get lock owner timeout time unit lock protect final boolean skip lock flag affect command command return command flag flag bit set 
packag org lifecycl import org configur cach configur import org configur global global configur import org factori compon registri import org factori global compon registri default op implement link org lifecycl modul lifecycl interfac design easi extens author manik surtani version deprec sinc implement link modul lifecycl instead deprec public class abstract modul lifecycl implement modul lifecycl overrid public void cach manag start global compon registri gcr global configur global configur op overrid public void cach manag start global compon registri gcr op overrid public void cach manag stop global compon registri gcr op overrid public void cach manag stop global compon registri gcr op overrid public void cach start compon registri cr configur configur string cach name op overrid public void cach start compon registri cr string cach name op overrid public void cach stop compon registri cr string cach name op overrid public void cach stop compon registri cr string cach name op 
packag org client hotrod impl transport import org client hotrod impl protocol hot rod constant import org client hotrod log log import org client hotrod log log factori support class transport implement author mircea marku jboss com sinc public abstract class abstract transport implement transport privat static final log log log factori get log abstract transport class privat static final boolean trace log trace enabl privat final transport factori transport factori privat boolean busi protect abstract transport transport factori transport factori transport factori transport factori overrid public void set busi boolean busi busi busi overrid public boolean busi return busi overrid public byte read array int respons length read int return read byte array respons length overrid public string read string byte str content read array string read string new string str content hot rod constant trace log tracef read string read string return read string overrid public long read long byte long byte read byte array long result byte long byte long byte result result long long byte x return result overrid public void write long long long valu byte b new byte int b byte long valu write byte b overrid public int read unsign short byte short byte read byte array int result byte long byte short byte result result long long byte x return result overrid public int read byte int byte b read byte array int valu int int shift valu b x shift return valu overrid public void write string string string string null string empti write array string get byte hot rod constant els write int overrid public void write option string string string string null write sign int els write option array string get byte hot rod constant overrid public transport factori get transport factori return transport factori overrid public void write array byte append write int append length write byte append public void write array byte append int offset int count write int count write byte append offset count overrid public void write option array byte append write sign int append length write byte append protect abstract void write byte byte append protect abstract void write byte byte append int offset int count 
packag org common configur import static org common util immut immut type properti import java util properti import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut initi import org common configur attribut attribut set import org common configur attribut type properti attribut copier import org common util type properti public abstract class abstract type properti configur public static final attribut definit type properti attribut definit builder properti null type properti class copier type properti attribut copier initi new attribut initi type properti overrid public type properti initi return new type properti build public static attribut set attribut set return new attribut set abstract type properti configur class protect attribut set attribut privat final attribut type properti properti deprec use link abstract type properti configur abstract type properti configur attribut set instead deprec protect abstract type properti configur properti properti attribut attribut set attribut attribut protect properti attribut attribut attribut attribut set immut type properti type properti type properti properti protect abstract type properti configur attribut set attribut attribut attribut check protect properti attribut attribut properti modifi properti set immut type properti properti get overrid public string string return abstract type properti configur attribut attribut public type properti properti return properti get overrid public final boolean equal object obj obj return true obj null return fals get class obj get class return fals abstract type properti configur abstract type properti configur obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public final int hash code final int prime int result result prime result attribut null attribut hash code return result 
packag org command import java util collect import org command control lock control command import org command function read key command import org command function read mani command import org command function read write key command import org command function read write key valu command import org command function read write mani command import org command function read write mani entri command import org command function write key command import org command function write key valu command import org command function write mani command import org command function write mani entri command import org command read distribut execut command import org command read entri set command import org command read get command import org command read get cach entri command import org command read get key valu command import org command read key set command import org command read size command import org command remot get key group command import org command tx commit command import org command tx prepar command import org command tx rollback command import org command write clear command import org command write comput command import org command write comput absent command import org command write evict command import org command write invalid command import org command write invalid command import org command write put key valu command import org command write put map command import org command write remov command import org command write replac command import org context invoc context import org context impl tx invoc context abstract implement visitor deleg visit call default handler overrid author mircea marku jboss com author manik surtani author galder zamarr sinc public abstract class abstract visitor implement visitor write command overrid public object visit put key valu command invoc context ctx put key valu command command throw throwabl return handl default ctx command overrid public object visit remov command invoc context ctx remov command command throw throwabl return handl default ctx command overrid public object visit replac command invoc context ctx replac command command throw throwabl return handl default ctx command overrid public object visit comput command invoc context ctx comput command command throw throwabl return handl default ctx command overrid public object visit comput absent command invoc context ctx comput absent command command throw throwabl return handl default ctx command overrid public object visit clear command invoc context ctx clear command command throw throwabl return handl default ctx command overrid public object visit put map command invoc context ctx put map command command throw throwabl return handl default ctx command overrid public object visit evict command invoc context ctx evict command command throw throwabl return handl default ctx command read command overrid public object visit size command invoc context ctx size command command throw throwabl return handl default ctx command overrid public object visit get key valu command invoc context ctx get key valu command command throw throwabl return handl default ctx command overrid public object visit get cach entri command invoc context ctx get cach entri command command throw throwabl return handl default ctx command overrid public object visit get command invoc context ctx get command command throw throwabl return handl default ctx command overrid public object visit key set command invoc context ctx key set command command throw throwabl return handl default ctx command overrid public object visit entri set command invoc context ctx entri set command command throw throwabl return handl default ctx command tx command overrid public object visit prepar command tx invoc context ctx prepar command command throw throwabl return handl default ctx command overrid public object visit rollback command tx invoc context ctx rollback command command throw throwabl return handl default ctx command overrid public object visit commit command tx invoc context ctx commit command command throw throwabl return handl default ctx command overrid public object visit invalid command invoc context ctx invalid command invalid command throw throwabl return handl default ctx invalid command overrid public object visit invalid command invoc context ctx invalid command invalid command throw throwabl return visit invalid command ctx invalid command default handler command visit call visit method call unless visit command appropri overrid param ctx invoc context param command command handl return return valu throw throwabl case problem protect object handl default invoc context ctx visit command command throw throwabl return null helper method visit collect visit command param ctx invoc context param visit collect command visit throw throwabl event problem public void visit collect invoc context ctx collect extend visit command visit throw throwabl visit command command visit command accept visitor ctx overrid public object visit lock control command tx invoc context ctx lock control command command throw throwabl return handl default ctx command overrid public object visit unknown command invoc context ctx visit command command throw throwabl return handl default ctx command overrid public object visit distribut execut command invoc context ctx distribut execut command command throw throwabl return handl default ctx command overrid public object visit get key group command invoc context ctx get key group command command throw throwabl return handl default ctx command overrid public object visit read key command invoc context ctx read key command command throw throwabl return handl default ctx command overrid public object visit read mani command invoc context ctx read mani command command throw throwabl return handl default ctx command overrid public object visit write key command invoc context ctx write key command command throw throwabl return handl default ctx command overrid public object visit read write key valu command invoc context ctx read write key valu command command throw throwabl return handl default ctx command overrid public object visit read write key command invoc context ctx read write key command command throw throwabl return handl default ctx command overrid public object visit write mani entri command invoc context ctx write mani entri command command throw throwabl return handl default ctx command overrid public object visit write key valu command invoc context ctx write key valu command command throw throwabl return handl default ctx command overrid public object visit write mani command invoc context ctx write mani command command throw throwabl return handl default ctx command overrid public object visit read write mani command invoc context ctx read write mani command command throw throwabl return handl default ctx command overrid public object visit read write mani entri command invoc context ctx read write mani entri command command throw throwabl return handl default ctx command 
packag org evict impl import static org persist manag persist manag access mode import static org persist manag persist manag access mode import static org persist manag persist manag access mode import static org persist manag persist manag access mode import java util concurr atom atom long import org common cach except import org configur cach configur import org evict activ manag import org factori annot inject import org factori annot start import org interceptor lock cluster depend logic import org jmx annot bean import org jmx annot manag attribut import org jmx annot manag oper import org jmx annot measur type import org persist manag persist manag import org util log log import org util log log factori concret implement activ logic manag author galder zamarr sinc bean object name activ descript compon handl activ entri passiv cach store load memori public class activ manag impl implement activ manag privat static final log log log factori get log activ manag impl class privat final atom long activ new atom long privat persist manag persist manag privat configur cfg privat cluster depend logic cluster depend logic privat boolean passiv manag attribut descript enabl disabl gather statist compon display name statist enabl writabl true privat boolean statist enabl fals inject public void inject persist manag clm configur cfg cluster depend logic cdl persist manag clm cfg cfg cluster depend logic cdl start prioriti cach loader manag passiv manag public void start statist enabl cfg jmx statist enabl passiv cfg persist passiv overrid public void updat object key boolean new entri passiv new entri n passiv entri alreadi exist contain return tri persist manag delet store key statist enabl activ increment get catch cach except e log unabl remov entri activ key e overrid public void remov object key boolean new entri passiv return primari owner need remov share store final boolean primari owner cluster depend logic get cach topolog get distribut key primari tri new entri entri exist datum contain need remov privat share store primari owner access mode mode primari owner persist manag delet store key mode statist enabl activ increment get els entri alreadi exist datum contain may put load cach loader interceptor alreadi activ privat store primari owner persist manag delet store key statist enabl activ increment get catch cach except e log unabl remov entri activ key e overrid public long get activ count return activ get manag attribut descript number activ event display name number cach entri activ measur type measur type public string get activ statist enabl return return string valu get activ count manag oper descript reset statist gather compon display name reset statist public void reset statist activ set 
packag org counter configur import java util hash map import java util map author pedro ruivo sinc public enum attribut must first null concurr level initi valu name num owner reliabl storag valu privat static final map string attribut static final map string attribut map new hash map attribut attribut valu final string name attribut name name null map put name attribut map privat final string name attribut final string name name name public static attribut name string local name final attribut attribut get local name return attribut null attribut overrid public string string return name 
packag org common configur attribut import org common cach configur except import org common util util attribut definit defin characterist configur attribut use construct actual link attribut holder attribut definit follow characterist ul li name li li default valu valu initi li li type need specifi infer default valu e null li li whether attribut immut e whether valu constant initi chang li li valid intercept invalid valu li ul author tristan tarrant sinc public final class attribut definit privat final string name privat final string xml name privat final default valu privat final boolean immut privat final boolean auto persist privat final attribut copier copier privat final attribut initi extend initi privat final attribut valid super valid privat final class type attribut definit string name string xml name initi valu class type boolean immut boolean auto persist attribut copier copier attribut valid super valid attribut initi extend initi name name xml name xml name default valu initi valu immut immut auto persist auto persist copier copier initi initi valid valid type type public string name return name public string xml name return xml name public class get type return type public get default valu return initi null initi initi default valu public boolean immut return immut public boolean auto persist return auto persist public attribut copier copier return copier public attribut initi extend initi return initi attribut valid super valid return valid public attribut attribut return new attribut public void valid valu valid null valid valid valu public static builder builder string name default valu default valu null return new builder name default valu class default valu get class els throw new cach configur except must specifi type pass null attribut definit name public static builder builder string name default valu class klass return new builder name default valu klass public static final class builder privat final string name privat final default valu privat final class type privat boolean immut fals privat boolean auto persist true privat string xml name privat attribut copier copier null privat attribut initi extend initi privat attribut valid super valid privat builder string name default valu class type name name default valu default valu type type public builder immut immut true return public builder copier attribut copier copier copier copier return public builder initi attribut initi extend initi initi initi return public builder auto persist boolean auto persist auto persist auto persist return public builder valid attribut valid super valid valid valid return public builder xml name string xml name xml name xml name return public attribut definit build return new attribut definit name xml name null util xmlifi name xml name default valu type immut auto persist copier valid initi 
packag org common configur attribut import java util collect import java util iter import java util link hash map import java util map import javax xml stream stream except import javax xml stream stream writer import org common log log import org common log log factori attribut set contain link attribut construct pass list link attribut definit attribut set initi unprotect mean contain attribut modifi link protect method invok attribut link attribut definit immut modifi author tristan tarrant sinc public class attribut set implement attribut listen object privat static final log log log factori get log attribut set class privat final class klass privat final string name privat final map string attribut attribut privat boolean protect public attribut set class klass attribut definit attribut definit klass klass get simpl name null attribut definit public attribut set string name attribut definit attribut definit name null attribut definit public attribut set class klass attribut set attribut set attribut definit attribut definit klass klass get simpl name attribut set attribut definit public attribut set string name attribut set attribut set attribut definit attribut definit null name attribut set attribut definit privat attribut set class klass string name attribut set attribut set attribut definit attribut definit klass klass name name attribut set null attribut new link hash map attribut definit length attribut set attribut size attribut attribut attribut set attribut valu attribut put attribut name attribut get attribut definit attribut els attribut new link hash map attribut definit length attribut definit def attribut definit attribut contain key def name throw log attribut set duplic attribut def name name attribut object attribut attribut object def attribut attribut immut attribut add listen attribut put def name attribut public class get klass return klass public string get name return name return whether attribut set contain specifi name attribut param name name attribut public boolean contain string name return attribut contain key name return whether set contain specifi attribut definit param def link attribut definit public boolean contain attribut definit def return contain def name return name attribut param name name attribut return return attribut suppress warn uncheck public attribut attribut string name return attribut attribut get name return attribut identifi suppli link attribut definit param def attribut definit return attribut public attribut attribut attribut definit def attribut attribut attribut def name attribut null return attribut els throw log attribut def name name copi attribut anoth attribut set param sourc attribut set public void read attribut set iter attribut iter attribut valu iter iter next attribut object attribut attribut object iter next attribut object attribut attribut name modifi attribut read return new valu set immut link attribut write protect return public attribut set protect attribut definit attr def new attribut definit attribut size int attribut attribut attribut valu attr def attribut get attribut definit attribut set protect set new attribut set klass name null attr def attribut attribut protect set attribut valu attribut local attr attribut get attribut name attribut read attribut local attr attribut protect protect set protect true return protect set return whether attribut set modifi public boolean modifi attribut attribut attribut valu attribut modifi return true return fals return whether attribut set protect public boolean protect return protect writer singl attribut specifi link stream writer use attribut xml name param writer writer param def attribut definit throw stream except public void write stream writer writer attribut definit def throw stream except write writer def def xml name writer singl attribut specifi link stream writer use suppli name param writer writer param def attribut definit param name tag name attribut throw stream except public void write stream writer writer attribut definit def enum name throw stream except write writer def name string writer singl attribut specifi link stream writer use suppli name param writer writer param def attribut definit param name tag name attribut throw stream except public void write stream writer writer attribut definit def string name throw stream except attribut attribut attribut def attribut write writer name write attributeset specifi stream writer element param writer public void write stream writer writer string xml element name throw stream except modifi writer write start element xml element name write writer writer write end element write specifi attribut attributeset specifi stream writer element param writer public void write stream writer writer string xml element name attribut definit def throw stream except boolean skip true attribut definit def def skip skip attribut def modifi skip writer write start element xml element name attribut definit def def attribut attr attribut def attr write writer attr get attribut definit xml name writer write end element write attribut attributeset part current element param writer public void write stream writer writer throw stream except attribut attr attribut valu attr persist attr write writer attr get attribut definit xml name overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals attribut set attribut set obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public string string return string name public string string string name string builder sb new string builder name null sb append name sb append sb append boolean comma fals attribut valu attribut valu comma sb append els comma true sb append valu string sb append return sb string public attribut set check protect protect throw log unprotect attribut set name return public void reset protect throw log protect attribut set name attribut attribut attribut valu attribut reset overrid public void attribut chang attribut object attribut object old valu public collect attribut attribut return attribut valu 
packag org secur impl import java secur access control except import java secur princip import java secur acl group import java util hash set import java util map import java util set import java util concurr concurr map import javax secur auth subject import org common util collect factori import org common util util import org configur cach author configur import org configur global global secur configur import org secur audit context import org secur audit logger import org secur audit respons import org secur author permiss import org secur princip role mapper import org secur role import org secur secur import org util log log import org util log log factori author helper util method comput access mask verifi permiss author tristan tarrant sinc public class author helper privat static final log log log factori get log author helper class privat static final boolean trace log trace enabl privat final global secur configur global configur privat final audit logger audit privat final audit context context privat final string name privat final concurr map cach princip pair subject acl cach public author helper global secur configur global configur audit context context string name concurr map cach princip pair subject acl cach global configur global configur audit global configur author audit logger context context name name acl cach acl cach public author helper global secur configur secur audit context context string name secur context name collect factori make bound concurr map public void check permiss author permiss perm check permiss null null perm null public void check permiss author permiss perm string role check permiss null null perm role public void check permiss author configur configur author permiss perm check permiss configur null perm null public void check permiss author configur configur subject subject author permiss perm string role global configur author enabl secur privileg secur check permiss perm get secur permiss els subject subject null subject secur get subject tri subject null check subject permiss role subject configur perm role audit audit subject context name perm audit respons els check secur manag permiss perm els check secur manag permiss perm catch secur except e audit audit subject context name perm audit respons throw log unauthor access util pretti print subject subject perm string privat void check secur manag permiss author permiss perm system get secur manag null system get secur manag check permiss perm get secur permiss els throw new access control except perm get secur permiss privat boolean check subject permiss role subject subject author configur configur author permiss requir permiss string request role princip user princip get user princip subject user princip null cach princip pair cpp new cach princip pair user princip name subject subject acl cach null subject acl cach comput absent cpp comput subject subject configur els subject comput subject subject configur int permiss mask requir permiss get mask boolean author subject match permiss mask request role null subject contain role request role true trace log tracef check subject permiss role b subject subject requir permiss request role author return author els return fals privat subject comput subject subject subject author configur configur princip role mapper role mapper global configur author princip role mapper set princip princip subject get princip set string role new hash set princip size princip princip princip set string role name role mapper princip role princip role name null role add role name int subject mask map string role global role global configur author role string role role configur null configur role contain role role global role global role get role global role null subject mask global role get mask trace log tracef subject role permiss mask subject role subject mask return new subject role subject mask privat princip get user princip subject subject subject null set princip princip subject get princip princip null princip empti princip p princip p instanceof group return p return null 
packag org xsite import static org util log event messag import java util array list import java util array import java util collect import java util hash map import java util hash set import java util list import java util list iter import java util map import java util set import java util concurr concurr map import javax transact transact import org cach import org command abstract visitor import org command command factori import org command visit command import org command function read write key command import org command function read write key valu command import org command function read write mani command import org command function read write mani entri command import org command function write key command import org command function write key valu command import org command function write mani command import org command function write mani entri command import org command tx commit command import org command tx prepar command import org command tx rollback command import org command write clear command import org command write comput command import org command write comput absent command import org command write put key valu command import org command write put map command import org command write remov command import org command write replac command import org command write write command import org common util collect factori import org common util util import org configur cach backup configur import org configur cach backup failur polici import org configur cach configur import org configur cach site configur import org configur global global configur import org contain entri cach entri import org context invoc context import org context impl flag bit set import org context impl tx invoc context import org factori annot inject import org factori annot start import org remot transport aggreg backup respons import org remot transport backup respons import org remot transport transport import org transact impl abstract cach transact import org transact impl local transact import org transact impl transact tabl import org util time servic import org util log log import org util log log factori import org util log event event log categori import org util log event event log manag import org util log event event logger import org xsite notif site statu listen author mircea marku sinc public class backup sender impl implement backup sender privat static log log log factori get log backup sender impl class privat static final backup respons new empti backup respons privat cach cach privat transport transport privat configur config privat transact tabl tx tabl privat time servic time servic privat command factori command factori privat final map string custom failur polici site failur polici new hash map privat final concurr map string offlin statu offlin statu collect factori make concurr map privat event log manag event log manag privat final string local site name privat string cach name privat global configur global config privat enum backup filter public backup sender impl string local site name local site name local site name inject public void init cach cach transport transport transact tabl tx tabl global configur gc time servic time servic command factori command factori event log manag event log manag cach cach transport transport tx tabl tx tabl global config gc time servic time servic command factori command factori event log manag event log manag start public void start config cach get cach configur cach name cach get name backup configur bc config site enabl backup final string site name bc site bc backup failur polici backup failur polici string backup polici bc failur polici class backup polici null throw new illeg state except backup polici class miss custom failur polici custom failur polici instanc util get instanc backup polici global config class loader instanc init cach site failur polici put bc site instanc offlin statu offlin new offlin statu bc take offlin time servic new site statu listen overrid public void site onlin backup sender impl site onlin site name overrid public void site offlin backup sender impl site offlin site name offlin statu put site name offlin overrid public backup respons backup prepar prepar command command abstract cach transact cach transact throw except list write command modif filter modif command get modif cach transact get look entri modif empti return prepar command prepar command factori build prepar command command get global transact modif command one phase commit run filter prepar backup call happen local commit phase backup filter filter prepar one phase commit backup filter backup filter list site backup backup calcul backup info filter return backup command prepar backup overrid public void process respons backup respons backup respons visit command command throw throwabl process respons backup respons command null overrid public void process respons backup respons backup respons visit command command transact transact throw throwabl log tracef process backup respons command backup respons command backup respons wait backup finish updat offlin site backup respons process fail respons backup respons command transact privat void updat offlin site backup respons backup respons offlin statu empti backup respons empti return set string commun error backup respons get commun error map entri string offlin statu statu entri offlin statu entri set offlin statu statu statu entri get valu statu enabl continu commun error contain statu entri get key statu updat commun failur backup respons get send time milli log tracef offlin statu updat statu els statu offlin statu reset overrid public backup respons backup write write command command throw except list site backup x site backup calcul backup info backup filter return backup command command x site backup overrid public backup respons backup commit commit command command throw except n backup stuff prepar need backup respons one pc respons send backup command list site backup x site backup calcul backup info backup filter backup respons two pc respons backup command command x site backup return new aggreg backup respons one pc respons two pc respons overrid public backup respons backup rollback rollback command command throw except list site backup x site backup calcul backup info backup filter log tracef back rollback command x site backup return backup command command x site backup overrid public bring site onlin respons bring site onlin string site name config site use backup site name log tri bring onlin nonexist site site name return bring site onlin respons els offlin statu offlin offlin statu get site name boolean bring onlin offlin bring onlin return bring onlin bring site onlin respons bring site onlin respons overrid public take site offlin respons take site offlin string site name config site use backup site name return take site offlin respons els offlin statu offlin offlin statu get site name return offlin forc offlin take site offlin respons take site offlin respons privat backup respons backup command visit command command list site backup x site backup throw except return transport backup remot x site backup command factori build singl site rpc command command privat backup respons send backup commit command command throw except final local transact local tx tx tabl get local transact command get global transact list write command modif filter modif local tx get modif local tx get look entri modif empti return list site backup backup calcul backup info backup filter prepar command prepar command factori build prepar command command get global transact modif true return backup command prepar backup privat void process fail respons backup respons backup respons visit command command transact transact throw throwabl site configur site configur config site map string throwabl failur backup respons get fail backup backup failur except backup except null map entri string throwabl failur failur entri set backup failur polici polici site configur get failur polici failur get key polici backup failur polici custom failur polici custom failur polici site failur polici get failur get key command accept visitor null new custom backup polici invok failur get key custom failur polici transact polici backup failur polici log warn xsite backup fail cach name failur get key failur get valu els polici backup failur polici backup except null backup except new backup failur except cach name backup except add failur failur get key failur get valu backup except null throw backup except privat list site backup calcul backup info backup filter backup filter list site backup backup info new array list site configur site config site backup configur bc site enabl backup bc site equal local site name log cach backup data site local site name continu boolean sync bc strategi backup configur backup strategi backup filter backup filter sync bc two phase commit continu backup filter backup filter sync bc two phase commit continu offlin bc site log tracef site offlin back inform bc site continu site backup bi new site backup bc site sync bc replic timeout backup info add bi return backup info privat boolean offlin string site offlin statu offlin offlin statu get site return offlin null offlin offlin privat list write command filter modif write command modif map object cach entri look entri modif null modif length return collect empti list return filter modif array list modif look entri privat list write command filter modif list write command modif map object cach entri look entri modif null modif empti return collect empti list list write command filter new array list modif size set object filter key new hash set modif size note result replic transact flag oper may actual differ use last flag bit set win strategi assum user play unsaf flag will n modifi entri replic anoth time non replic way list iter write command modif list iter modif size previou write command write command previou write command success write command flag flag bit set continu note clear command replic transact object key write command get affect key filter key contain key continu cach entri entri look entri get key entri null function command alway fetch remot valu origin xsite enabl throw new illeg state except write command replic command entri remov replic command command factori build remov command key null write command get flag bit set els replic command command factori build put key valu command key entri get valu entri get metadata write command get flag bit set filter add replic command filter key add key return filter privat void site onlin string site name get event logger info event log categori site onlin site name privat void site offlin string site name get event logger info event log categori site offlin site name privat event logger get event logger return event log manag get event logger context cach name scope transport get address privat static final class custom backup polici invok extend abstract visitor privat final string site privat final custom failur polici object object failur polici privat final transact tx public custom backup polici invok string site custom failur polici failur polici transact tx site site noinspect uncheck failur polici failur polici tx tx overrid public object visit put key valu command invoc context ctx put key valu command command throw throwabl failur polici handl put failur site command get key command get valu command put absent return null overrid public object visit remov command invoc context ctx remov command command throw throwabl failur polici handl remov failur site command get key command get valu return null overrid public object visit replac command invoc context ctx replac command command throw throwabl failur polici handl replac failur site command get key command get old valu command get new valu return null overrid public object visit comput command invoc context ctx comput command command throw throwabl failur polici handl comput failur site command get key command get remap bi function command comput present return null overrid public object visit comput absent command invoc context ctx comput absent command command throw throwabl failur polici handl comput absent failur site command get key command get map function return null overrid public object visit write key command invoc context ctx write key command command throw throwabl failur polici handl write key failur site command get key return null overrid public object visit read write key valu command invoc context ctx read write key valu command command throw throwabl failur polici handl read write key valu failur site command get key return null overrid public object visit read write key command invoc context ctx read write key command command throw throwabl failur polici handl read write key failur site command get key return null overrid public object visit write mani entri command invoc context ctx write mani entri command command throw throwabl failur polici handl write mani entri failur site command get entri return null overrid public object visit write key valu command invoc context ctx write key valu command command throw throwabl failur polici handl write key valu failur site command get key return null overrid public object visit write mani command invoc context ctx write mani command command throw throwabl failur polici handl write mani failur site command get affect key return null overrid public object visit read write mani command invoc context ctx read write mani command command throw throwabl failur polici handl read write mani failur site command get affect key return null overrid public object visit read write mani entri command invoc context ctx read write mani entri command command throw throwabl failur polici handl read write mani entri failur site command get entri return null overrid public object visit clear command invoc context ctx clear command command throw throwabl failur polici handl clear failur site return null overrid public object visit put map command invoc context ctx put map command command throw throwabl failur polici handl put failur site command get map return null overrid public object visit prepar command tx invoc context ctx prepar command command throw throwabl failur polici handl prepar failur site tx return null overrid public object visit rollback command tx invoc context ctx rollback command command throw throwabl failur polici handl rollback failur site tx return null overrid public object visit commit command tx invoc context ctx commit command command throw throwabl failur polici handl commit failur site tx return null overrid protect object handl default invoc context ctx visit command command throw throwabl super handl default ctx command throw new illeg state except unknown command command public offlin statu get offlin statu string site return offlin statu get site overrid public map string boolean statu map string boolean result new hash map offlin statu size map entri string offlin statu os offlin statu entri set result put os get key os get valu offlin return result privat static class empti backup respons implement backup respons overrid public void wait backup finish throw except op noth send overrid public map string throwabl get fail backup op noth send return collect empti map overrid public set string get commun error op noth send return collect empti set overrid public long get send time milli op never invok return overrid public boolean empti return true 
packag org interceptor distribut import java util array list import java util array import java util collect import java util collect import java util hash map import java util hash set import java util list import java util map import java util set import java util concurr complet futur import java util function bi consum import java util stream stream import org command flag affect command import org command replic command import org command topolog affect command import org command visit command import org command function read key command import org command function read mani command import org command read abstract data command import org command read get command import org command read get cach entri command import org command read get key valu command import org command read size command import org command remot cluster get command import org command remot cluster get command import org command remot get key group command import org command write abstract data write command import org command write clear command import org command write datum write command import org command write valu matcher import org common cach except import org common util array collector import org contain entri cach entri import org contain entri intern cach entri import org contain entri intern cach valu import org contain entri null cach entri import org context invoc context import org context impl flag bit set import org context impl tx invoc context import org distribut distribut info import org distribut distribut manag import org distribut local cach topolog import org distribut remot valu retriev listen import org distribut ch consist hash import org distribut ch key partition import org factori annot inject import org factori annot start import org interceptor invoc success function import org interceptor impl cluster interceptor import org remot remot except import org remot respons respons import org remot respons success respons import org remot respons unsur respons import org remot respons valid respons import org remot rpc respons mode import org remot rpc rpc manag import org remot rpc rpc option import org remot transport address import org statetransf outdat topolog except import org statetransf owner lose except import org transact xa global transact import org util concurr complet futur import org util log log import org util log log factori import net jcip annot guard base class distribut entri across cluster author manik surtani author mircea marku jboss com author pete muir author dan berindei dan org public abstract class base distribut interceptor extend cluster interceptor privat static final log log log factori get log base distribut interceptor class privat static final boolean trace log trace enabl privat static final object new object protect distribut manag dm protect remot valu retriev listen rvrl protect key partition key partition protect boolean enabl protect boolean replic privat final read mani helper read mani helper new read mani helper privat final invoc success function primari return handler primari return handler overrid protect log get log return log inject public void inject depend distribut manag distribut manag remot valu retriev listen rvrl key partition key partition dm distribut manag rvrl rvrl key partition key partition start public void configur ca n reli super inject configur call inject depend method enabl cach configur cluster l enabl replic cach configur cluster cach mode replic overrid public object visit size command invoc context ctx size command command throw throwabl replic replic size command reason distribut count entri process do upon entri overhead coordin remot node network call expens command set flag bit set command get flag bit set flag bit set return super visit size command ctx command overrid public final object visit get key group command invoc context ctx get key group command command throw throwabl command group owner n go remot owner return invok next ctx command address primari owner dm get cach topolog get distribut command get group name primari complet futur map address respons futur rpc manag invok remot async collect singleton primari owner command default sync option return async invok next ctx command futur accept respons respons empti respons respons respons valu iter next respons instanceof success respons noinspect uncheck list cach entri cach entri list cach entri success respons respons get respons valu cach entri entri cach entri wrap remot entri ctx entri get key entri fals overrid public final object visit clear command invoc context ctx clear command command throw throwabl ctx origin local local mode forc command rpc option rpc option rpc manag get rpc option builder synchron command respons mode respons mode build return async invok next ctx command rpc manag invok remot async null command rpc option return invok next ctx command protect extend flag affect command topolog affect command complet futur void remot get invoc context ctx command object key boolean write local cach topolog cach topolog check topolog id command int topolog id cach topolog get topolog id distribut info info cach topolog get distribut key info read owner trace log tracef key becom local wrap retri command command topolog current topolog key command get topolog id topolog id topolog chang let retri command get topolog id topolog id throw new illeg state except throw new outdat topolog except topolog id trace log tracef perform remot get key current topolog id owner key topolog id info read owner cluster get command get command cf build cluster get command key command get flag bit set get command set topolog id topolog id get command set write write return rpc manag invok remot async info read owner get command get stagger option info read owner size accept respons respons r respons valu be instanceof success respons success respons respons success respons r object respons valu respons get respons valu respons valu null rvrl null rvrl remot valu find key wrap remot entri ctx key null cach entri get instanc write return intern cach entri ice intern cach valu respons valu intern cach entri key rvrl null rvrl remot valu find ice wrap remot entri ctx key ice write return throw handl miss success respons respons protect static cach except handl miss success respons map address respons respons respons map contain except respons rethrown except respons valu stream match unsur respons class instanc get unsur respons node read owner time send request progress new topolog howev guarante progress topolog one old immedi retri return outdat topolog except els anoth instanc n get success respons owner lose handl late state transfer interceptor signal partit handl interceptor present return owner lose except protect void wrap remot entri invoc context ctx object key cach entri ice boolean write entri factori wrap extern entri ctx key ice true write protect final object handl non tx write command invoc context ctx abstract data write command command throw throwabl object key command get key cach entri entri ctx lookup entri key local mode forc command entri null entri factori wrap extern entri ctx key null fals true return invok next ctx command local cach topolog cach topolog check topolog id command distribut info info cach topolog get distribut key entri null boolean load load ctx command info info primari throw new illeg state except primari owner write alway owner read well els ctx origin local return invok remot command info primari els load complet futur get futur remot get ctx command command get key true return async invok next ctx command get futur els entri factori wrap extern entri ctx key null fals true return invok next ctx command els info primari return invok next appli ctx command primari return handler els ctx origin local return invok remot command info primari els return invok next ctx command privat boolean load invoc context ctx abstract data write command command distribut info info command flag flag bit set visit command load type load type command load type switch load type case return fals case return info primari info write owner ctx origin local case return info primari default throw new illeg state except els return fals privat object invok remot datum write command command address primari owner trace log tracef primari owner send command primari owner order forward primari owner boolean sync forward synchron command command return valu expect complet futur map address respons remot invoc tri remot invoc rpc manag invok remot async collect singleton list primari owner command sync forward default sync option default async option catch throwabl command set valu matcher command get valu matcher matcher retri throw sync forward return async valu remot invoc handl respons command set valu matcher command get valu matcher matcher retri complet futur rethrow except respons respons get singl respons respons respons success command fail els respons instanceof valid respons throw unexpect respons expect success unsuccess respons unsur return valid respons respons get respons valu els return null privat object primari return handler invoc context ctx visit command visit command object local result datum write command command datum write command visit command command success trace log tracef skip replic condit command succeed primari owner command return local result local cach topolog cach topolog check topolog id command distribut info distribut info cach topolog get distribut command get key collect address owner distribut info write owner owner size backup skip replic part return local result collect address recipi replic null owner cach matcher reset get except backup valu matcher origin matcher command get valu matcher ignor previou valu backup owner command set valu matcher valu matcher rpc option rpc option determin rpc option backup replic rpc manag synchron command recipi complet futur map address respons remot invoc rpc manag invok remot async recipi command rpc option return async valu remot invoc handl respons switch retri polici case primari owner chang write alreadi succeed new primari command set valu matcher origin matcher matcher retri complet futur rethrow except instanceof remot except get caus return local result privat rpc option determin rpc option backup replic rpc manag rpc boolean sync collect address recipi sync recipi mean broadcast ignor leaver return recipi null rpc get rpc option builder respons mode build default sync option els return default async option overrid public object visit get command invoc context ctx get command command throw throwabl command flag flag bit set flag bit set return invok next ctx command ctx origin local object key command get key ctx lookup entri key null return unsur respons return invok next ctx command get success handler get success handler new get success handler command complet futur void futur remot get ctx command command get key get success handler return async valu futur appli ctx command get success handler protect extend flag affect command topolog affect command complet futur void remot get invoc context ctx command collect key remot get handler remot get handler map address list object request key get key owner ctx key check topolog id command null null request key empti return complet futur complet null global transact gtx ctx tx scope tx invoc context ctx get global transact null cluster get futur futur new cluster get futur request key size map entri address list object pair request key entri set cluster get command cluster get command cf build cluster get command pair get valu command get flag bit set gtx cluster get command set topolog id command get topolog id rpc manag invok remot async collect singleton pair get key cluster get command sync ignor leaver complet new cluster get handler pair get key futur ctx command pair get valu null remot get handler return futur protect void handl remot retriev key invoc context ctx list remot key privat class cluster get handler extend flag affect command topolog affect command implement bi consum map address respons throwabl privat final address target privat final cluster get futur futur privat final invoc context ctx privat final command privat final list key privat final map object collect address contact node privat final remot get handler remot get handler privat cluster get handler address target cluster get futur futur invoc context ctx command list key map object collect address contact node remot get handler remot get handler target target futur futur key key ctx ctx command command contact node contact node remot get handler remot get handler overrid public void accept map address respons respons map throwabl throwabl throwabl null futur complet except throwabl return success respons respons get success respons fail respons map futur handl miss respons respons null return object respons valu respons get respons valu respons valu instanceof intern cach valu futur complet except new illeg state except unexpect respons valu respons valu return intern cach valu valu intern cach valu respons valu check handler n finish except without block except current process interceptor stack callback futur done return synchron futur check handler n finish except futur do return int key size object key key get intern cach valu valu valu cach entri entri valu null null cach entri get instanc valu intern cach entri key wrap remot entri ctx key entri fals handl remot retriev key ctx key futur counter futur complet null privat void handl miss respons respons respons respons instanceof unsur respons remot get handler unsur respons global transact gtx ctx tx scope tx invoc context ctx get global transact null map object collect address contact node contact node null new hash map contact node map address list object request key synchron contact node object key key contact node comput absent key k new array list add target request key get key owner ctx key check topolog id command null contact node synchron futur futur counter request key size map entri address list object pair request key entri set cluster get command cluster get command cf build cluster get command pair get valu command get flag bit set gtx cluster get command set topolog id command get topolog id note key subset key request node send valid respons key remov pair get valu rpc manag invok remot async collect singleton pair get key cluster get command sync ignor leaver complet new cluster get handler pair get key futur ctx command pair get valu contact node remot get handler key empti synchron futur tri remot get handler key lost key catch throwabl futur complet except synchron futur futur counter futur complet null protect interfac remot get handler void unsur respons void key lost collect lose key privat class get success handler implement remot get handler invoc success function privat get command local command privat boolean lose datum privat boolean unsur respons public get success handler get command local command local command local command overrid public void unsur respons unsur respons true guard futur handler execut within synchron futur overrid public void key lost collect lose key get command requir key wrap come execut perform method therefor need remov receiv entri lose datum true set strip key new hash set local command get key strip key remov lose key can n call command set key interceptor might compar key actual result set local command cf build get command strip key local command get flag bit set local command return entri overrid public object appli invoc context be ctx visit command r command object rv throw throwabl assert rv null valu futur complet unsur respons lose datum throw outdat topolog except return invok next r ctx local command overrid public object visit read mani command invoc context ctx read mani command command throw throwabl return handl function read mani command ctx command read mani helper protect extend topolog affect command flag affect command object handl function read mani command invoc context ctx command read mani command helper helper merg method visit get command can n wrap entri context repeat read implement see visit read key command command flag flag bit set flag bit set return handl local read mani command ctx command helper key command local cach topolog cach topolog check topolog id command collect key helper key command ctx origin local return handl remot read mani command ctx command key helper key empti return stream empti consist hash ch cach topolog get read consist hash int estim one node key size ch get member size list object avail key new array list estim one node map address list object request key get key owner ctx key cach topolog avail key null work non block way return stream lazi function contract suggest travers also honor execut local origin futur mode one command per target node go top level allow retri state transfer interceptor case topolog chang merg complet futur object futur new merg complet futur request key size avail key empti new object key size helper transform result handl local avail key ctx command avail key futur helper int po avail key size map entri address list object address key request key entri set list object key address address key get valu replic command remot command helper copi remot command key address ctx set address target collect singleton address key get key rpc manag invok remot async target remot command sync ignor leaver complet new read mani handler address key get key futur ctx command key address null po helper po key address size return async valu futur privat object handl local read mani command invoc context ctx visit command command collect key object key key ctx lookup entri key null entri factori wrap extern entri ctx key null cach entri get instanc true fals return invok next ctx command privat extend topolog affect command visit command object handl remot read mani command invoc context ctx command collect key invoc success function remot return handler object key key ctx lookup entri key null return unsur respons return invok next appli ctx command remot return handler privat class read mani handler extend flag affect command topolog affect command implement bi consum map address respons throwabl privat final address target privat final merg complet futur object futur privat final invoc context ctx privat final command privat final list object key privat final int destin index privat final map object collect address contact node privat final read mani command helper helper privat read mani handler address target merg complet futur object futur invoc context ctx command list object key map object collect address contact node int destin index read mani command helper helper target target futur futur ctx ctx command command key key destin index destin index contact node contact node helper helper overrid public void accept map address respons respons map throwabl throwabl throwabl null futur complet except throwabl return success respons respons get success respons fail respons map futur handl miss respons respons null return tri object respons valu respons get respons valu object valu unwrap function mani result origin ctx key respons valu valu null system arraycopi valu futur result destin index valu length futur count els futur complet except new illeg state except unexpect respons valu respons valu catch throwabl futur complet except privat void handl miss respons respons respons respons instanceof unsur respons futur unsur respons true map object collect address contact node contact node null new hash map contact node map address list object request key synchron contact node object key key contact node comput absent key k new array list add target request key get key owner ctx key check topolog id command null contact node int po destin index map entri address list object address key request key entri set futur increment list object key address address key get valu replic command remot command helper copi remot command key address ctx set address target collect singleton address key get key rpc manag invok remot async target remot command sync ignor leaver complet new read mani handler address key get key futur ctx command key address contact node po helper po key address size array fill futur result po destin index key size futur lose datum true futur count privat extend visit command void handl local avail key invoc context ctx command list object avail key merg complet futur object futur read mani command helper helper avail key empti return local command helper copi local command avail key invok next handl ctx local command r ctx r command rv throwabl throwabl null futur complet except throwabl els tri helper appli local result futur rv futur count catch throwabl futur complet except return async valu futur privat map address list object get key owner invoc context ctx collect key local cach topolog cach topolog list object avail key map object collect address ignor owner int capac cach topolog get member size map address list object request key new hash map capac int estim one node key size capac object key key cach entri entri ctx lookup entri key entri null distribut info distribut info cach topolog get distribut key let tri minim number messag prefer owner alreadi decid send messag boolean find exist fals collect address ignor key null address address distribut info read owner address equal rpc manag get address throw new illeg state except entri alway wrap els ignor owner null ignor key null ignor key ignor owner get key ignor key null ignor key contain address continu list object list request key get address list null list add key find exist true break find exist address target null ignor owner null target distribut info primari els address address distribut info read owner ignor key null ignor key ignor owner get key ignor key null ignor key contain address target address break read owner ignor wo n put entri anywher target null list object list new array list estim one node list add key request key put target list els avail key null avail key add key return request key protect object wrap function mani result non origin invoc context be ctx collect key object valu return valu protect object unwrap function mani result origin invoc context ctx list object key object respons valu return respons valu instanceof object object respons valu null privat object visit get command invoc context ctx abstract data command command throw throwabl return ctx lookup entri command get key null entri miss ctx command invok next ctx command privat object entri miss invoc context ctx abstract data command command return ctx origin local handl miss entri local read ctx command unsur respons privat object handl miss entri local read invoc context ctx abstract data command command return read need remot valu command async invok next ctx command remot get ctx command command get key fals null overrid public object visit get key valu command invoc context ctx get key valu command command throw throwabl return visit get command ctx command overrid public object visit get cach entri command invoc context ctx get cach entri command command throw throwabl return visit get command ctx command overrid public object visit read key command invoc context ctx read key command command throw throwabl repeat read implement need keep read valu remot side durat transact requir synchron invoc readonli command owner good consist use version write skew check fail transact appli function differ version entri one previous read object key command get key cach entri entri ctx lookup entri key entri null ctx origin local entri own local null cach entri find need go remot return invok next ctx command els return invok next appli ctx command r ctx r command rv wrap function result non origin return rv entri ctx origin local return unsur respons read need remot valu command local cach topolog cach topolog check topolog id command collect address owner cach topolog get distribut key read owner trace log tracef remot get key topolog key cach topolog get topolog id owner read key command remot command remot read command ctx command make sure command topolog set valu accord rout remot command set topolog id cach topolog get topolog id complet futur map address respons rpc rpc manag invok remot async owner remot command get stagger option owner size return async valu rpc appli respons respons rsp respons valu rsp success return unwrap function result origin ctx key success respons rsp get respons valu throw handl miss success respons respons els flag wrap null cach entri let command run entri factori wrap extern entri ctx key null cach entri get instanc true fals return invok next ctx command protect read key command remot read command invoc context ctx read key command command return command protect object wrap function result non origin return object rv cach entri entri return rv protect object unwrap function result origin invoc context ctx object key object respons valu return respons valu protect local cach topolog check topolog id topolog affect command command local cach topolog cach topolog dm get cach topolog int current topolog id cach topolog get topolog id int cmd topolog command get topolog id command instanceof flag affect command flag affect command command flag flag bit set flag bit set log tracef skip topolog check command command return cach topolog cmd topolog current topolog id cmd topolog throw new outdat topolog except cach topolog chang command execut expect cmd topolog get current topolog id trace log tracef current topolog command topolog current topolog id cmd topolog return cach topolog return code true valu avail local node read command allow fetch remot node check valu alreadi context protect boolean read need remot valu abstract data command command return command flag flag bit set flag bit set protect interfac read mani command helper extend invoc success function collect key command copi local command list object key replic command copi remot command list object key invoc context ctx void appli local result merg complet futur futur object rv object transform result object result protect class read mani helper implement read mani command helper read mani command overrid public object appli invoc context be ctx visit command r command object rv throw throwabl return wrap function mani result non origin be ctx read mani command be command get key stream rv array overrid public collect key read mani command command return command get key overrid public read mani command copi local read mani command command list object key return new read mani command command key key overrid public replic command copi remot read mani command command list object key invoc context ctx return new read mani command command key key overrid public void appli local result merg complet futur futur object rv stream rv collect new array collector futur result overrid public object transform result object result return array stream result filter 
packag org remot inboundhandl import static org factori know compon name import java util concurr complet futur import org command cancel command import org command cancel servic import org command replic command import org command topolog affect command import org command remot cach rpc command import org command remot cluster get command import org command remot cluster get command import org command remot singl rpc command import org common cach except import org factori annot compon name import org factori annot inject import org factori annot stop import org remot inboundhandl action readi action import org remot respons cach find respons import org remot respons except respons import org remot respons respons import org remot respons respons gener import org statetransf outdat topolog except import org statetransf state transfer lock import org statetransf state transfer manag import org util concurr block runnabl import org util concurr block task awar executor servic import org util concurr complet futur import org util log log implement default handl method util method author pedro ruivo sinc public abstract class base per cach inbound invoc handler implement per cach inbound invoc handler privat static final int integ protect block task awar executor servic remot command executor privat state transfer lock state transfer lock protect state transfer manag state transfer manag privat respons gener respons gener privat cancel servic cancel servic privat volatil boolean stop fals privat static int extract command topolog id singl rpc command command replic command inner cmd command get command inner cmd instanceof topolog affect command return topolog affect command inner cmd get topolog id return static int extract command topolog id cach rpc command command switch command get command id case singl rpc command return extract command topolog id singl rpc command command case cluster get command case cluster get command command topolog awar n block topolog id logic handl state transfer interceptor return default command instanceof topolog affect command return topolog affect command command get topolog id return inject public void inject depend compon name block task awar executor servic remot command executor respons gener respons gener cancel servic cancel servic state transfer lock state transfer lock state transfer manag state transfer manag remot command executor remot command executor respons gener respons gener cancel servic cancel servic state transfer lock state transfer lock state transfer manag state transfer manag stop public void stop stop true public boolean stop return stop final complet futur respons invok command cach rpc command cmd throw throwabl tri trace enabl get log tracef call perform cmd cmd instanceof cancel command cancel servic regist thread current thread cancel command cmd get complet futur object futur cmd invok async return futur handl rv throwabl cmd instanceof cancel command cancel servic unregist cancel command cmd get complet futur rethrow except throwabl return respons gener get respons cmd rv catch throwabl throwabl cmd instanceof cancel command cancel servic unregist cancel command cmd get throw throwabl final state transfer lock get state transfer lock return state transfer lock final except respons except handl command cach rpc command command throwabl throwabl get log except handl command command throwabl throwabl instanceof except return new except respons except throwabl els return new except respons new cach except problem invok command throwabl final except respons outdat topolog outdat topolog except except get log tracef topolog chang retri except return new except respons except final respons interrupt except cach rpc command command get log shutdown handl command command return cach find respons final void unexpect deliv mode replic command command deliv order deliv order throw new illeg argument except string format unexpect deliv mode command deliv order command final void handl runnabl block runnabl runnabl boolean executor servic executor servic remot command executor execut runnabl els runnabl run public final boolean command send first topolog int command topolog id command topolog id command topolog id state transfer manag get first topolog member trace enabl get log tracef ignor command send local node member command topolog id command topolog id return true return fals final block runnabl creat default runnabl cach rpc command command repli repli int command topolog id boolean wait transact data boolean executor servic boolean sync return new default topolog runnabl command repli topolog mode creat executor servic wait transact data command topolog id sync final block runnabl creat default runnabl final cach rpc command command final repli repli final int command topolog id topolog mode topolog mode boolean sync return new default topolog runnabl command repli topolog mode command topolog id sync protect abstract log get log protect abstract boolean trace enabl final boolean execut executor servic deliv order order cach rpc command command return order preserv order command block final block runnabl creat readi action runnabl cach rpc command command repli repli int command topolog id boolean sync readi action readi action readi action null return creat non null readi action runnabl command repli command topolog id sync readi action els return new default topolog runnabl command repli topolog mode command topolog id sync final block runnabl creat non null readi action runnabl cach rpc command command repli repli int command topolog id boolean sync readi action readi action readi action add listen remot command executor check readi task return new default topolog runnabl command repli topolog mode command topolog id sync overrid public boolean readi return super readi readi action readi overrid protect void except throwabl throwabl super except throwabl readi action except overrid protect void final super final readi action final 
packag org interceptor impl import java util collect import java util hash set import java util map import java util set import java util concurr complet futur import org command flag affect command import org command tx prepar command import org configur cach cluster configur import org context flag import org context impl flag bit set import org context impl local tx invoc context import org context impl tx invoc context import org factori compon registri import org factori annot inject import org factori annot start import org interceptor async interceptor import org remot inboundhandl deliv order import org remot respons except respons import org remot respons respons import org remot rpc respons filter import org remot rpc respons mode import org remot rpc rpc manag import org remot rpc rpc option import org remot rpc rpc option builder import org remot transport address import org transact impl local transact import org util concurr complet futur import org util log log act base call author href mailto manik jboss org manik surtani manik jboss org author mircea marku jboss com sinc public abstract class base rpc interceptor extend async interceptor privat final static respons filter new respons filter overrid public boolean accept respons respons address sender return respons success respons instanceof except respons overrid public boolean need respons return true protect final boolean trace get log trace enabl protect rpc manag rpc manag protect compon registri compon registri protect boolean default synchron protect volatil rpc option singl target stagger option protect volatil rpc option multi target stagger option protect volatil rpc option default sync option protect volatil rpc option sync ignor leaver protect rpc option default async option protect abstract log get log inject public void inject rpc manag rpc manag compon registri compon registri rpc manag rpc manag compon registri compon registri start public void init default synchron cach configur cluster cach mode synchron cach configur cluster attribut attribut cluster configur add listen init rpc option init rpc option async option n depend remot timeout default async option rpc manag get default rpc option fals privat void init rpc option singl target stagger option rpc manag get rpc option builder respons mode build multi target stagger option rpc manag get rpc option builder respons mode respons filter build default sync option rpc manag get default rpc option true sync ignor leaver rpc manag get rpc option builder respons mode deliv order build protect rpc option get stagger option int num target handl good drop messag dispatch base somwhat hack way stagger read implement intend keep sender wait receiv success respons receiv success respons return unsuccess one stagger get use filter add non accept respons respons anyway group transport later will n filter unaccept valu get unsucces one singl target process use group request would n return filter valu add therefor omit filter regrett handl properli current filter option return num target singl target stagger option multi target stagger option protect final boolean synchron flag affect command command command flag flag bit set return true els command flag flag bit set return fals return default synchron protect final boolean local mode forc flag affect command command command flag flag bit set trace get log trace mode forc invoc suppress cluster event return true return fals protect boolean invok remot tx command tx invoc context ctx ctx origin local return fals skip remot invoc state transfer transact local tx invoc context local ctx local tx invoc context ctx local ctx get cach transact get state transfer flag flag return fals test empti modif n enough lock may acquir lock key will n regist modif see boolean invok remot ctx modif local ctx get remot lock acquir empti local ctx get cach transact get topolog id rpc manag get topolog id trace get log tracef invok remot b modif b remot lock acquir b invok remot ctx modif local ctx get remot lock acquir empti return invok remot protect static void transact remot prepar tx invoc context ctx ctx origin local local transact ctx get cach transact mark prepar send protect static void total order tx commit tx invoc context ctx ctx origin local local transact ctx get cach transact mark commit rollback send protect static void total order tx rollback tx invoc context ctx ctx origin local local transact ctx get cach transact mark commit rollback send protect static boolean total order rollback invok remot tx invoc context ctx return ctx origin local local transact ctx get cach transact prepar send local transact ctx get cach transact commit rollback send protect complet futur object total order prepar tx invoc context ctx prepar command command collect address recipi tri set address real recipi null recipi null real recipi new hash set recipi real recipi add rpc manag get address complet futur map address respons remot invoc intern total order prepar real recipi command return remot invoc handl respons transact remot prepar ctx complet futur rethrow except return null catch throwabl transact remot prepar ctx throw privat complet futur map address respons intern total order prepar collect address recipi prepar command prepar command rpc option builder builder rpc manag get rpc option builder respons mode deliv order return rpc manag invok remot async recipi prepar command builder build 
packag org interceptor impl import java util concurr complet futur import java util concurr executor import java util concurr schedul executor servic import java util concurr schedul futur import java util concurr time unit import java util concurr atom atom refer field updat import java util function bi function import org command abstract visitor import org command flag affect command import org command topolog affect command import org command visit command import org command function read key command import org command function read mani command import org command read get command import org command read get cach entri command import org command read get key valu command import org command remot get key group command import org configur cach configur import org context invoc context import org context impl flag bit set import org distribut distribut manag import org factori know compon name import org factori annot compon name import org factori annot inject import org interceptor async interceptor import org interceptor invoc final function import org remot remot except import org remot transport jgroup suspect except import org statetransf owner lose except import org statetransf outdat topolog except import org statetransf state transfer lock import org statetransf state transfer manag import org topolog cach topolog import org util concurr complet futur import org util concurr timeout except import org util log log import org util log log factori base class state transfer interceptor contain base code avoid duplic two current differ implement p also util method common logic author pedro ruivo sinc public abstract class base state transfer interceptor extend async interceptor privat final boolean trace get log trace enabl privat final invoc final function handl read command return handl read command return privat state transfer manag state transfer manag protect state transfer lock state transfer lock privat executor remot executor privat distribut manag distribut manag privat schedul executor servic timeout executor privat long transact datum timeout privat final invoc final function handl local get key group return handl local get key group return inject public void init state transfer lock state transfer lock configur configur state transfer manag state transfer manag distribut manag distribut manag compon name know compon name schedul executor servic timeout executor compon name know compon name executor remot executor state transfer lock state transfer lock state transfer manag state transfer manag distribut manag distribut manag timeout executor timeout executor remot executor remot executor transact datum timeout configur cluster remot timeout overrid public object visit get key group command invoc context ctx get key group command command throw throwabl updat topolog id command ctx origin local return invok next handl ctx command handl local get key group return els return invok next accept ctx command be ctx be command rv get key group command cmd get key group command be command final int command topolog id cmd get topolog id current topolog id command topolog id distribut manag get cach topolog write owner cmd get group name throw new outdat topolog except cach topolog chang command execut expect command topolog id get current topolog id privat object handl local get key group return invoc context ctx visit command command object rv throwabl throwabl throw throwabl get key group command cmd get key group command command final int command topolog id cmd get topolog id boolean retri throwabl null must retri get outdat topolog except suspect except throwabl ce throwabl ce instanceof remot except ce ce get caus retri ce instanceof outdat topolog except ce instanceof suspect except els check topolog id owner retri current topolog id command topolog id distribut manag get cach topolog write owner cmd get group name retri log retri current topolog id cmd increment topolog id updat topolog id wait transact data wait next topolog without could retri command fast could get outdat topolog except int new topolog id math max current topolog id command topolog id cmd set topolog id new topolog id complet futur void transact datum futur state transfer lock transact data futur new topolog id return retri do transact datum futur new topolog id ctx command handl local get key group return els return valu except rv throwabl protect final void log retri int current topolog id topolog affect command cmd trace get log tracef retri command topolog chang current topolog command topolog current topolog id cmd get topolog id cmd protect final int current topolog id final cach topolog cach topolog state transfer manag get cach topolog return cach topolog null cach topolog get topolog id protect final void updat topolog id topolog affect command command set topolog id set ie local command make tx command extend flag affect command use transact tabl cleanup stale transact command get topolog id cach topolog cach topolog state transfer manag get cach topolog topolog set state consum topolog distribut manag int topolog id cach topolog null cach topolog get topolog id trace get log tracef set command topolog topolog id command set topolog id topolog id protect extend visit command object retri do complet futur void futur int topolog id invoc context ctx command invoc final function callback futur do get log tracef retri command topolog command topolog id return invok next handl ctx command callback els cancel retri cancel retri new cancel retri command topolog id use handl async rethrow except handler rather compos async futur complet except want continu remot executor complet futur void retri futur futur handl async cancel retri remot executor cancel retri set retri futur retri futur want time current command futur main topolog wait futur command futur take long time finish schedul futur timeout futur timeout executor schedul cancel retri transact datum timeout time unit cancel retri set timeout futur timeout futur return make stage async invok next ctx command retri futur handl ctx command callback overrid public object visit get key valu command invoc context ctx get key valu command command throw throwabl return handl read command ctx command overrid public object visit get cach entri command invoc context ctx get cach entri command command throw throwabl return handl read command ctx command overrid public object visit get command invoc context ctx get command command throw throwabl return handl read command ctx command protect extend visit command topolog affect command flag affect command object handl read command invoc context ctx command updat topolog id command return invok next handl ctx command handl read command return privat object handl read command return invoc context be ctx visit command r command object rv throwabl throw throwabl null return rv throwabl ce ce instanceof remot except ce ce get caus topolog affect command cmd topolog affect command be command final cach topolog cach topolog state transfer manag get cach topolog int current topolog id cach topolog null cach topolog get topolog id int request topolog id current topolog id ce instanceof suspect except trace get log tracef retri command suspect node current topolog current topolog id be command possibl current topolog actual view still contain node leav broadcast node end suspect except wo n get new topolog exampl situat node send leav topolog instal new view prevent suspect except use respons mode current topolog id cmd get topolog id cach topolog get actual member contain suspect except ce get suspect throw new illeg state except command send els ce instanceof outdat topolog except log retri current topolog id cmd scatter cach contact primari owner current topolog respond unsur respons n know read owner need wait next topolog cach configur cluster cach mode scatter outdat topolog except ote outdat topolog except ce ote request topolog id request topolog id math max current topolog id ote request topolog id els es without request topolog result unsur respons base old command topolog would prone race request topolog id math max current topolog id cmd get topolog id els ce instanceof owner lose except trace get log tracef owner command lose cmd scatter cach might common lose singl owner need retri find return null next topolog instal partit handl enabl decid base avail statu cach mode partit except alreadi handl partit handl interceptor handl enabl can n return null cach configur cluster cach mode scatter request topolog id math max current topolog id cmd get topolog id els return r command accept visitor be ctx lost data visitor els throw get even current topolog inform suffici topolog phase send messag old owner new old topolog respond unsur respons updat topolog updat receiv read alreadi can n read respond unsur respons receiv two unsur respons throw howev sure immedi retri request must updat topolog cmd set topolog id request topolog id flag affect command cmd add flag flag bit set request topolog id current topolog id return invok next handl r ctx be command handl read command return els return make stage async invok next r ctx be command state transfer lock transact datum futur request topolog id handl r ctx be command handl read command return protect int get new topolog id throwabl ce int current topolog id topolog affect command command int request topolog id command get topolog id ce instanceof outdat topolog except outdat topolog except ote outdat topolog except ce ote request topolog id request topolog id ote request topolog id return math max current topolog id request topolog id overrid public object visit read key command invoc context ctx read key command command throw throwabl return handl read command ctx command overrid public object visit read mani command invoc context ctx read mani command command throw throwabl return handl read command ctx command protect abstract log get log privat static class cancel retri extend visit command implement bi function void throwabl void runnabl privat static final atom refer field updat cancel retri throwabl cancel retri updat atom refer field updat new updat cancel retri class throwabl class cancel privat static final atom refer field updat cancel retri object timeout futur updat atom refer field updat new updat cancel retri class object class timeout futur privat static final log log log factori get log cancel retri class privat static final throwabl new throwabl command retri ever throw privat final command privat final int topolog id privat volatil throwabl cancel null retri futur volatil use timeout handler run schedul retri futur set privat complet futur void retri futur schedul futur dummi implement use plain object field suppress warn unus privat volatil object timeout futur cancel retri command int topolog id command command topolog id topolog id call topolog futur complet success except overrid public void appli void nil throwabl throwabl timeout futur updat compar set null schedul futur timeout futur cancel fals throwabl null throw complet futur complet except throwabl cancel retri updat compar set null log tracef retri command cancel command throw complet futur complet except cancel log tracef retri command topolog command topolog id return null call timeout elaps overrid public void run timeout except timeout except new timeout except time wait topolog topolog id cancel retri updat compar set null timeout except retri futur complet except timeout except void set retri futur complet futur void retri futur retri futur retri futur void set timeout futur schedul futur timeout futur timeout futur updat compar set null timeout futur timeout futur cancel fals n need implement get command read mani command n throw owner lose except protect static class lost data visitor extend abstract visitor public static final lost data visitor new lost data visitor overrid public object visit get key valu command invoc context ctx get key valu command command throw throwabl return null overrid public object visit get cach entri command invoc context ctx get cach entri command command throw throwabl return null overrid public object visit read key command invoc context ctx read key command command throw throwabl return command perform lost data 
packag org stream impl termop import java util function supplier import java util stream base stream import java util stream stream import org factori compon registri import org stream impl intop intermedi oper abstract instanc provid common code need termin oper note class n extend interfac due fact differ termin oper possibl differ interfac implement howev requir inform store public abstract class base termin oper protect final iter intermedi oper intermedi oper protect transient supplier extend base stream supplier protect base termin oper iter intermedi oper intermedi oper supplier extend base stream supplier intermedi oper intermedi oper supplier supplier public iter intermedi oper get intermedi oper return intermedi oper public void set supplier supplier extend stream supplier supplier supplier public void handl inject compon registri registri intermedi oper handl inject registri 
packag org util log event impl import java time instant import java util collect import java util list import java util option import org util log log factori import org util log event event log import org util log event event log categori import org util log event event log level import org util log event event logger basic event logger event logger n anyth asid send event logger author tristan tarrant sinc public class basic event logger implement event logger overrid public event logger scope string scope return new decor event logger scope scope overrid public event logger context string context return new decor event logger context context overrid public event logger detail string detail return new decor event logger detail detail overrid public event logger string return new decor event logger overrid public void log event log level level event log categori categori string messag log factori get logger categori string log level logger level messag basic event logger n collect anyth overrid public list event log get event instant start int count option event log categori categori option event log level level return collect empti list 
packag org batch import javax transact transact import javax transact transact manag import org common cach except import org factori annot inject contain hold thread local batch use link org cach start batch link org cach end batch boolean call author manik surtani href mailto manik jboss org manik jboss org sinc public class batch contain transact manag transact manag privat final thread local batch detail batch detail tl new thread local batch detail inject void inject transact manag transact manag transact manag transact manag start batch return true batch start fals one alreadi avail public boolean start batch throw cach except return start batch fals public boolean start batch boolean auto batch throw cach except batch detail bd batch detail tl get bd null bd new batch detail tri transact manag get transact null bd tx null transact manag begin bd nest invoc count bd suspend tx invoc auto batch bd thread thread current thread suspend auto batch auto batch bd tx transact manag get transact els bd tx transact manag suspend batch detail tl set bd return true els bd nest invoc count batch detail tl set bd return fals catch except e batch detail tl remov throw new cach except unabl start batch e public void end batch boolean success end batch fals success public void end batch boolean auto batch boolean success batch detail bd batch detail tl get bd null return bd tx null batch detail tl remov return auto batch bd nest invoc count auto batch bd nest invoc count transact exist tx null tri exist tx transact manag get transact exist tx null auto batch bd tx equal exist tx transact manag resum bd tx resolv transact bd success catch except e throw new cach except unabl end batch e final batch detail tl remov tri auto batch exist tx null transact manag resum exist tx catch except e throw new cach except fail resum exist transact exist tx e privat void resolv transact batch detail bd boolean success throw except thread current thread thread current thread bd thread equal current thread success transact manag commit els transact manag rollback els success bd tx commit els bd tx rollback public transact get batch transact transact tx null batch detail bd batch detail tl get bd null tx bd tx tx null batch detail tl remov return tx public boolean suspend tx invoc batch detail bd batch detail tl get return bd null bd suspend tx invoc privat static class batch detail int nest invoc count boolean suspend tx invoc transact tx thread thread 
packag org util concurr import java util array dequ import java util iter import java util link list import java util list import java util queue import java util concurr abstract executor servic import java util concurr concurr link queue import java util concurr executor servic import java util concurr reject execut except import java util concurr semaphor import java util concurr time unit import org util time servic import org util log log import org util log log factori special executor servic accept code block runnabl special runnabl give hint code run order avoid put runnabl block thread way runnabl say readi send real executor servic author pedro ruivo sinc public class block task awar executor servic impl extend abstract executor servic implement block task awar executor servic privat static final log log log factori get log block task awar executor servic impl class privat static final boolean trace log trace enabl privat final queue block runnabl block task privat final executor servic executor servic privat final time servic time servic privat final control thread control thread privat volatil boolean shutdown public block task awar executor servic impl string control thread name executor servic executor servic time servic time servic block task new concurr link queue executor servic executor servic time servic time servic shutdown fals control thread new control thread control thread name control thread start overrid public final void execut block runnabl runnabl shutdown throw new reject execut except executor servic alreadi shutdown runnabl readi execut runnabl trace log tracef add new task directli task wait block task size els long submit directli executor servic block task offer runnabl control thread check readi task trace log tracef add new task queue task wait block task size overrid public void shutdown shutdown true overrid public list runnabl shutdown shutdown true control thread interrupt list runnabl runnabl list new link list runnabl list add executor servic shutdown runnabl list add block task return runnabl list overrid public boolean shutdown return shutdown overrid public boolean termin return shutdown block task empti executor servic termin overrid public boolean await termin long timeout time unit unit throw interrupt except final long end time time servic expect end time timeout unit long wait time time servic remain time end time time unit block task empti wait time thread sleep wait time wait time time servic remain time end time time unit return termin overrid public final void check readi task control thread check readi task overrid public void execut runnabl command shutdown throw new reject execut except executor servic alreadi shutdown command instanceof block runnabl execut block runnabl command els execut new runnabl wrapper command public executor servic get executor servic return executor servic privat void execut block runnabl runnabl tri executor servic execut runnabl catch reject execut except reject put back block task offer runnabl privat class control thread extend thread privat final semaphor semaphor privat volatil boolean interrupt public control thread string control thread name super control thread name set uncaught except handler e log errorf e except thread get name semaphor new semaphor public void check readi task semaphor releas overrid public void interrupt interrupt true super interrupt semaphor releas overrid public void run interrupt tri semaphor acquir catch interrupt except e return semaphor drain permit int size block task size size continu array dequ block runnabl readi list new array dequ size iter block runnabl iter block task iter iter next block runnabl runnabl iter next boolean readi tri readi runnabl readi catch except e log debugf e fail check readi state drop runnabl iter remov continu readi iter remov readi list add last runnabl trace log tracef task execut still pend readi list size size block runnabl runnabl runnabl readi list poll first null execut runnabl privat static class runnabl wrapper implement block runnabl privat final runnabl runnabl privat runnabl wrapper runnabl runnabl runnabl runnabl overrid public boolean readi return true overrid public void run runnabl run overrid public string string return runnabl wrapper runnabl 
packag org common executor import java util concurr block queue import java util concurr executor servic import java util concurr link block queue import java util concurr synchron queue import java util concurr thread factori import java util concurr thread pool executor import java util concurr time unit import org common log log import org common log log factori author galder zamarr public class block thread pool executor factori implement thread pool executor factori executor servic privat static final log log log factori get log block thread pool executor factori class privat final int max thread privat final int core thread privat final int queue length privat final long keep aliv public block thread pool executor factori int max thread int core thread int queue length long keep aliv max thread max thread core thread core thread queue length queue length keep aliv keep aliv public int max thread return max thread public int core thread return core thread public int queue length return queue length public long keep aliv return keep aliv overrid public executor servic creat executor thread factori thread factori block queue runnabl queue queue length new synchron queue runnabl new link block queue runnabl queue length return new thread pool executor core thread max thread keep aliv time unit queue thread factori new thread pool executor caller run polici overrid public void valid core thread throw log illeg valu thread pool paramet core thread max thread throw log illeg valu thread pool paramet max thread max thread core thread throw log illeg valu thread pool paramet max thread core thread max thread core thread keep aliv throw log illeg valu thread pool paramet keep aliv time queue length throw log illeg valu thread pool paramet work queue length overrid public string string return block thread pool executor factori max thread max thread core thread core thread queue length queue length keep aliv keep aliv public static block thread pool executor factori creat int max thread int queue size int core thread queue size max thread return new block thread pool executor factori max thread core thread queue size 
packag org stream import java io except import java io object input import java io object output import java util set import java util function bi consum import java util function binari oper import java util function function import java util function supplier import java util stream collector import org common marshal extern import org common marshal serial import org util function serializ supplier helper class design use creat serializ collector use link org cach stream collect collector supplier collector problem standard link java util stream collector class n provid serializ collector way extend function class use instead public class cach collector privat cach collector creat collector serializ upon usag creat collector use serializ supplier provid user param supplier supplier crate collector specif serializ param input type collector param result type collector return collector serializ see serializ supplier public static collector serializ collector serializ supplier collector supplier return new collector supplier supplier similar link cach collector serializ collector serializ supplier except supplier provid must marshabl marshal techniqu note detect runtim param supplier marshal supplier collector param input type collector param result type collector return collector serializ see extern see org common marshal advanc extern public static collector collector supplier collector supplier return new collector supplier supplier serial valu collector supplier collector supplier extern class privat static final class collector supplier implement collector object privat final supplier collector supplier privat transient collector object collector privat collector object get collector collector null collector collector object supplier get return collector collector supplier supplier collector supplier supplier supplier overrid public supplier object supplier return get collector supplier overrid public bi consum object accumul return get collector accumul overrid public binari oper object combin return get collector combin overrid public function object finish return get collector finish overrid public set characterist characterist return get collector characterist public static final class collector supplier extern implement extern collector supplier overrid public void write object object output output collector supplier object throw except output write object object supplier overrid public collector supplier read object object input input throw except class find except return new collector supplier supplier collector input read object 
packag org cach impl import org configur cach configur import org factori annot inject import org jmx annot display type import org jmx annot bean import org jmx annot manag attribut import org jmx annot unit cach configur bean impl author tristan tarrant sinc bean object name configur descript runtim cach configur attribut public class cach configur bean privat configur configur inject public void inject depend configur configur configur configur manag attribut descript get evict size cach display name get evict size cach unit unit display type display type writabl true public long get evict size return configur memori size public void set evict size long new size configur memori size new size 
packag org stat impl import java util hash set import java util set import java util concurr time unit import java util concurr atom atom long import org advanc cach import org configur cach configur import org factori annot inject import org jmx jmx statist expos import org jmx annot data type import org jmx annot display type import org jmx annot bean import org jmx annot manag attribut import org jmx annot measur type import org jmx annot unit import org manag emb cach manag import org stat cach contain stat import org stat stat import org util time servic cach contain statist need admin consol author vladimir blagojev sinc bean object name cach contain stat descript gener cach contain statist time hit miss ratio etc public class cach contain stat impl implement cach contain stat jmx statist expos privat emb cach manag cm privat final atom long reset nanosecond new atom long privat boolean statist enabl fals privat time servic time servic public cach contain stat impl emb cach manag cm cm cm cm get global compon registri regist compon cach contain stat class boolean global jmx stat enabl cm get cach manag configur global jmx statist enabl set statist enabl global jmx stat enabl inject public void set depend time servic time servic time servic time servic overrid public void set statist enabl boolean enabl statist enabl enabl enabl ye technic reset stat initi reset nanosecond set time servic time overrid public boolean get statist enabl return statist enabl overrid public void reset statist get statist enabl get enabl stat stat stat reset reset nanosecond set time servic time manag attribut descript enabl disabl gather statist compon display name statist enabl datum type data type writabl true public boolean statist enabl return get statist enabl manag attribut descript cach contain total averag number nanosecond read oper cach contain display name cach contain total averag read time unit unit display type display type overrid public long get averag read time long result get statist enabl result calcul averag read time return result protect long calcul averag read time long total averag read time int includ cach counter stat stat get enabl stat long averag read time stat get averag read time averag read time includ cach counter total averag read time averag read time includ cach counter total averag read time total averag read time includ cach counter return total averag read time manag attribut descript cach contain total averag number nanosecond remov oper cach contain display name cach contain total averag remov time unit unit display type display type overrid public long get averag remov time long result get statist enabl result calcul averag remov time return result protect long calcul averag remov time long total averag remov time int includ cach counter stat stat get enabl stat long averag remov time stat get averag remov time averag remov time includ cach counter total averag remov time averag remov time includ cach counter total averag remov time total averag remov time includ cach counter return total averag remov time manag attribut descript cach contain averag number nanosecond write oper cach contain display name cach contain averag write time unit unit display type display type overrid public long get averag write time long result get statist enabl result calcul averag write time return result protect long calcul averag write time long total averag write time int includ cach counter stat stat get enabl stat long averag write time stat get averag write time averag write time includ cach counter total averag write time averag write time includ cach counter total averag write time total averag write time includ cach counter return total averag write time manag attribut descript cach contain total number cach evict oper display name cach contain total number cach evict measur type measur type display type display type overrid public long get evict long result get statist enabl result calcul evict return result protect long calcul evict long total evict stat stat get enabl stat long evict stat get evict evict total evict evict return total evict manag attribut descript cach contain total number cach attribut hit display name cach contain total number cach hit measur type measur type display type display type overrid public long get hit long result get statist enabl result calcul hit return result protect long calcul hit long total hit stat stat get enabl stat long hit stat get hit hit total hit hit return total hit manag attribut descript cach contain total percentag hit hit miss ratio cach display name cach contain total hit ratio unit unit display type display type overrid public doubl get hit ratio doubl result get statist enabl result calcul hit ratio return result protect doubl calcul hit ratio long total hit doubl total request doubl rw ratio stat stat get enabl stat long request stat get retriev request total hit stat get hit total request request total request rw ratio total hit total request return rw ratio manag attribut descript cach contain total number cach attribut miss display name cach contain total number cach miss measur type measur type display type display type overrid public long get miss long result get statist enabl result calcul miss return result protect long calcul miss long total misess stat stat get enabl stat long miss stat get miss miss total misess miss return total misess manag attribut descript cach contain total number entri current cach cach contain display name cach contain total number cach entri display type display type public int get number entri int result statist enabl statist enabl stat stat get enabl stat int num entri stat get current number entri num entri result num entri return result manag attribut descript cach contain total number entri current memori cach cach contain display name cach contain total number memori cach entri display type display type public int get current number entri memori int result statist enabl statist enabl stat stat get enabl stat int num entri stat get current number entri memori num entri result num entri return result manag attribut descript cach contain read write ratio cach cach contain display name cach contain read write ratio unit unit display type display type overrid public doubl get read write ratio doubl result get statist enabl result calcul read write ratio return result protect doubl calcul read write ratio long sum read long sum write doubl rw ratio stat stat get enabl stat long store stat get store store sum read stat get retriev sum write store sum write rw ratio doubl sum read sum write return rw ratio manag attribut descript cach contain total number cach remov hit display name cach contain total number cach remov hit measur type measur type display type display type overrid public long get remov hit long result get statist enabl result calcul remov hit return result protect long calcul remov hit long total remov hit stat stat get enabl stat long remov hit stat get remov hit remov hit total remov hit remov hit return total remov hit manag attribut descript cach contain total number cach remov key find display name cach contain total number cach remov miss measur type measur type display type display type overrid public long get remov miss long result get statist enabl result calcul remov miss return result protect long calcul remov miss long total remov miss stat stat get enabl stat long remov miss stat get remov miss remov miss total remov miss remov miss return total remov miss manag attribut descript cach contain total number cach attribut put oper display name cach contain total number cach put measur type measur type display type display type overrid public long get store long result get statist enabl result calcul store return result overrid manag attribut descript number second sinc cach contain statist last reset display name second sinc cach contain statist reset unit unit display type display type public long get time sinc reset long result get statist enabl result time servic time durat reset nanosecond get time unit return result protect long calcul store long total store stat stat get enabl stat long store stat get store store total store store return total store overrid public long get time sinc start long result get statist enabl result calcul time sinc start return result protect long calcul time sinc start long long run stat stat get enabl stat long run time stat get time sinc start run time long run long run run time return long run overrid public int get current number entri return get number entri overrid public long get total number entri return get store overrid manag attribut descript amount byte heap memori use cach contain display name heap memori use display type display type public long get heap memori use return calcul heap use protect long calcul heap use long total heap use stat stat get enabl stat long heap use stat get heap memori use heap use total heap use heap use return total heap use overrid public long get retriev return get hit get miss overrid public void reset reset statist privat set stat get enabl stat set stat stat new hash set stat string cn cm get cach name cm cach exist cn advanc cach cach cm get cach cn get advanc cach configur cfg secur action get cach configur cach cfg jmx statist enabl stat add cach get stat return stat 
packag org cach impl import static java util object requir non null import static java util concurr time unit import static org context flag import static org context flag import static org context flag import static org context flag import static org context flag import static org context invoc context factori import java lang annot annot import java util array list import java util array import java util collect import java util collect import java util iter import java util list import java util map import java util object import java util properti import java util set import java util concurr complet futur import java util concurr time unit import java util function bi function import java util function function import javax secur auth subject import javax transact system except import javax transact transact import javax transact transact manag import javax transact xa resourc import org advanc cach import org cach collect import org cach set import org lock stream import org version import org atom delta import org atom delta awar import org atom impl appli delta import org batch batch contain import org command command factori import org command visit command import org command control lock control command import org command function read write key command import org command function read write key valu command import org command function function merg function import org command read entri set command import org command read get command import org command read get cach entri command import org command read get key valu command import org command read key set command import org command read size command import org command remot get key group command import org command write clear command import org command write comput command import org command write comput absent command import org command write datum write command import org command write evict command import org command write put key valu command import org command write put map command import org command write remov command import org command write remov expir command import org command write replac command import org command write valu matcher import org common cach except import org common api basic cach contain import org common dataconvers encod import org common dataconvers wrapper import org common marshal stream marshal import org common util enum util import org common util collect import org common util util import org configur cach configur import org configur format properti formatt import org configur global global configur import org contain data contain import org contain entri cach entri import org context flag import org context invoc context import org context invoc context contain import org context invoc context factori import org context impl flag bit set import org context impl tx invoc context import org distribut distribut manag import org encod datum convers import org evict evict manag import org evict passiv manag import org expir expir manag import org factori compon registri import org factori annot inject import org factori annot surviv restart import org filter key filter import org function impl param import org interceptor async interceptor import org interceptor async interceptor chain import org interceptor base command interceptor import org jmx annot data type import org jmx annot display type import org jmx annot bean import org jmx annot manag attribut import org jmx annot manag oper import org lifecycl compon statu import org manag emb cach manag import org metadata emb metadata import org metadata metadata import org notif cachelisten cach notifi import org notif cachelisten listen holder import org notif cachelisten filter cach event convert import org notif cachelisten filter cach event filter import org partitionhandl avail mode import org partitionhandl impl partit handl manag import org remot rpc rpc manag import org secur author manag import org stat stat import org stat impl stat impl import org stream stream marshal import org stream impl lock stream impl import org stream impl tx lock stream impl import org stream impl local valu cach collect import org topolog local topolog manag import org transact lock mode import org transact impl transact tabl import org transact xa transact xa adapt import org transact xa xa transact tabl import org util concurr complet futur import org util concurr lock lock manag import org util log log import org util log log factori author mircea marku jboss com author galder zamarr author sann grinovero author href http gleamynod net trustin lee sinc surviv restart bean object name cach impl descript compon repres individu cach instanc public class cach impl implement advanc cach public static final string cach privat static final long enum util bit set protect invoc context factori invoc context factori protect command factori command factori protect async interceptor chain invok protect configur config protect cach notifi notifi protect batch contain batch contain protect compon registri compon registri protect transact manag transact manag protect rpc manag rpc manag protect stream marshal marshal protect metadata default metadata privat final string name privat evict manag evict manag privat expir manag expir manag privat data contain datum contain privat static final log log log factori get log cach impl class privat static final boolean trace log trace enabl privat emb cach manag cach manag privat lock manag lock manag privat distribut manag distribut manag privat transact tabl tx tabl privat author manag author manag privat partit handl manag partit handl manag privat global configur global cfg privat local topolog manag local topolog manag privat volatil boolean stop fals privat boolean transact privat boolean batch enabl public cach impl string name name name inject public void inject depend evict manag evict manag expir manag expir manag invoc context factori invoc context factori command factori command factori async interceptor chain interceptor chain configur configur cach notifi notifi compon registri compon registri transact manag transact manag batch contain batch contain rpc manag rpc manag data contain datum contain stream marshal marshal distribut manag distribut manag emb cach manag cach manag transact tabl tx tabl lock manag lock manag author manag author manag global configur global cfg partit handl manag partit handl manag local topolog manag local topolog manag command factori command factori invok interceptor chain config configur notifi notifi compon registri compon registri transact manag transact manag batch contain batch contain rpc manag rpc manag evict manag evict manag expir manag expir manag datum contain datum contain marshal marshal cach manag cach manag invoc context factori invoc context factori distribut manag distribut manag tx tabl tx tabl lock manag lock manag author manag author manag global cfg global cfg partit handl manag partit handl manag local topolog manag local topolog manag start sinc compon may start actual cach access default metadata oper default metadata new emb metadata builder lifespan config expir lifespan max idl config expir max idl build transact config transact transact mode transact batch enabl config invoc batch enabl privat void assert key null object key requir non null key null key support privat void assert valu null object valu requir non null valu null valu support void assert key valu null object key object valu assert key null key assert valu null valu privat void assert function null object function requir non null function null function support cach support extend advanc cach realli call cach method take metadata paramet sinc cach support method declar final easi cach impl stop extend cach support implement base method directli overrid public final put key valu return put key valu default metadata overrid public final put key valu long lifespan time unit unit return put key valu lifespan unit default metadata max idl overrid public final put absent key valu long lifespan time unit unit return put absent key valu lifespan unit default metadata max idl overrid public final void put map extend extend map long lifespan time unit unit put map lifespan unit default metadata max idl overrid public final replac key valu long lifespan time unit unit return replac key valu lifespan unit default metadata max idl overrid public final boolean replac key old valu valu long lifespan time unit unit return replac key old valu valu lifespan unit default metadata max idl overrid public final put absent key valu return put absent key valu default metadata overrid public final boolean replac key old valu new valu return replac key old valu new valu default metadata overrid public final replac key valu return replac key valu default metadata overrid public comput key bi function super super extend remap function return comput key remap function fals overrid public comput key bi function super super extend remap function metadata metadata return comput intern key remap function fals metadata add unsaf flag enum util overrid public comput present key bi function super super extend remap function return comput key remap function true overrid public comput present key bi function super super extend remap function metadata metadata return comput intern key remap function true metadata add unsaf flag enum util privat comput key bi function super super extend remap function boolean comput present return comput intern key remap function comput present appli default metadata default metadata add unsaf flag enum util privat comput intern key bi function super super extend remap function boolean comput present metadata metadata long flag return comput intern key remap function comput present metadata flag get invoc context implicit transact fals comput intern key bi function super super extend remap function boolean comput present metadata metadata long flag invoc context ctx assert key null key assert function null remap function comput command command command factori build comput command key remap function comput present metadata flag ctx get lock owner null ctx set lock owner command get key lock owner return execut command commit need ctx command overrid public final comput absent key function super extend map function return comput absent key map function default metadata overrid public comput absent key function super extend map function metadata metadata return comput absent intern key map function metadata add unsaf flag enum util get invoc context implicit transact fals comput absent intern key function super extend map function metadata metadata long flag invoc context ctx assert key null key assert function null map function comput absent command command command factori build comput absent command key map function metadata flag ctx get lock owner null ctx set lock owner command get key lock owner return execut command commit need ctx command overrid public merg key valu bi function super super extend remap function return merg intern key valu remap function default metadata add unsaf flag enum util get invoc context implicit transact fals overrid public merg key valu bi function super super extend remap function metadata metadata return merg intern key valu remap function metadata add unsaf flag enum util get invoc context implicit transact fals merg intern key valu bi function super super extend remap function metadata metadata long flag invoc context ctx assert key null key assert valu null valu assert function null remap function read write key command command command factori build read write key command key new merg function valu remap function metadata param flag bit set flag get key data convers get valu data convers ctx get lock owner null ctx set lock owner command get key lock owner return execut command commit need ctx command overrid public final complet futur put async key valu return put async key valu default metadata overrid public final complet futur put async key valu long lifespan time unit unit return put async key valu lifespan unit default metadata max idl overrid public final complet futur void put async map extend extend datum return put async datum default metadata overrid public final complet futur void put async map extend extend datum long lifespan time unit unit return put async datum lifespan default metadata max idl overrid public final complet futur put absent async key valu return put absent async key valu default metadata overrid public final complet futur put absent async key valu long lifespan time unit unit return put absent async key valu lifespan unit default metadata max idl overrid public final complet futur replac async key valu return replac async key valu default metadata overrid public final complet futur replac async key valu long lifespan time unit unit return replac async key valu lifespan unit default metadata max idl overrid public final complet futur boolean replac async key old valu new valu return replac async key old valu new valu default metadata overrid public final complet futur boolean replac async key old valu new valu long lifespan time unit unit return replac async key old valu new valu lifespan unit default metadata max idl overrid public final void put map extend extend put default metadata overrid public final boolean remov object key object valu return remov key valu enum util get invoc context implicit transact fals final boolean remov object key object valu long explicit flag invoc context ctx assert key valu null key valu remov command command creat remov condit command key valu explicit flag ctx return boolean execut command commit need ctx command privat remov command creat remov condit command object key object valu long explicit flag invoc context ctx remov command command command factori build remov command key valu explicit flag ctx get lock owner null ctx set lock owner command get key lock owner return command overrid public final int size return size enum util final int size long explicit flag size command command command factori build size command explicit flag return integ invok invok invoc context factori creat invoc context fals command overrid public final boolean empti return empti enum util final boolean empti long explicit flag return entri set explicit flag stream match stream marshal alway true predic overrid public final boolean contain key object key return contain key key enum util invoc context factori creat invoc context fals final boolean contain key object key long explicit flag invoc context ctx return get key explicit flag ctx null overrid public final boolean contain valu object valu assert valu null valu return valu stream match stream marshal equal predic valu overrid public final get object key return get key enum util invoc context factori creat invoc context fals suppress warn uncheck final get object key long explicit flag invoc context ctx assert key null key get key valu command command command factori build get key valu command key explicit flag return invok invok ctx command final cach entri get cach entri object key long explicit flag invoc context ctx assert key null key get cach entri command command command factori build get cach entri command key explicit flag object ret invok invok ctx command return cach entri ret overrid public final cach entri get cach entri object key return get cach entri key enum util invoc context factori creat invoc context fals overrid public map get set key return get key enum util invoc context factori creat invoc context fals key size final map get set key long explicit flag invoc context ctx get command command command factori build get command key explicit flag fals map map map invok invok ctx command return drop null entri map privat map drop null entri map map iter entri entri iter map entri set iter entri iter next entri entri entri iter next entri get valu null entri iter remov return map overrid public map cach entri get cach entri set key return get cach entri key enum util invoc context factori creat invoc context fals key size public final map cach entri get cach entri set key long explicit flag invoc context ctx get command command command factori build get command key explicit flag true map cach entri map map cach entri invok invok ctx command iter map entri cach entri entri iter map entri set iter entri iter next map entri cach entri entri entri iter next entri get valu null entri iter remov return map overrid public map get group string group name return get group group name enum util final map get group string group name long explicit flag invoc context ctx invoc context factori creat invoc context fals return collect unmodifi map intern get group group name explicit flag ctx privat map intern get group string group name long explicit flag bit set invoc context ctx get key group command command command factori build get key group command explicit flag bit set group name noinspect uncheck return map invok invok ctx command overrid public void remov group string group name remov group group name enum util final void remov group string group name long explicit flag transact non transact remov group group name explicit flag els transact remov group group name explicit flag privat void transact remov group string group name long explicit flag bit set final boolean go transact get ongo transact null go transact tri begin tri invoc context context get invoc context implicit transact fals map key intern get group group name explicit flag bit set context long remov flag add ignor return valu flag explicit flag bit set key key key set remov command command creat remov command key remov flag context execut command commit need context command go transact tri commit catch runtim except e go transact tri rollback throw e privat void non transact remov group string group name long explicit flag invoc context context invoc context factori creat invoc context fals map key intern get group group name explicit flag context long remov flag add ignor return valu flag explicit flag key key key set new context need remov sinc non owner command send primari owner execut context alreadi popul throw class cast except wrap remov invok assert key null key invoc context ctx get invoc context implicit transact fals remov command command creat remov command key remov flag ctx execut command commit need ctx command overrid public final remov object key return remov key enum util get invoc context implicit transact fals final remov object key long explicit flag invoc context ctx assert key null key remov command command creat remov command key explicit flag ctx return execut command commit need ctx command suppress warn uncheck privat remov command creat remov command object key long explicit flag invoc context ctx long flag add unsaf flag explicit flag remov command command command factori build remov command key null flag ctx get lock owner null ctx set lock owner command get key lock owner return command overrid public void remov expir key valu long lifespan invoc context ctx get invoc context implicit transact fals remov expir command command command factori build remov expir command key valu lifespan ctx get lock owner null ctx set lock owner command get key lock owner send expir remov command everyon execut command commit need ctx command overrid public advanc cach encod class extend encod encod class return new encod cach data convers encod encod class data convers encod encod class overrid public advanc cach encod class extend encod key encod class class extend encod valu encod class return new encod cach data convers encod key encod class data convers encod valu encod class overrid public advanc cach wrap class extend wrapper wrapper class return new encod cach data convers wrap wrapper class data convers wrap wrapper class overrid public encod get key encod return get key data convers get encod overrid public encod get valu encod return get valu data convers get encod overrid public wrapper get key wrapper return get key data convers get wrapper overrid public wrapper get valu wrapper return get valu data convers get wrapper overrid public advanc cach wrap class extend wrapper key wrapper class class extend wrapper valu wrapper class return new encod cach data convers wrap key wrapper class data convers wrap valu wrapper class overrid public datum convers get key data convers return data convers overrid public datum convers get valu data convers return data convers manag oper descript clear cach display name clear cach name clear public final void clear oper clear enum util overrid public final void clear clear enum util final void clear long explicit flag final transact tx suspend ongo transact exist tri invoc context context invoc context factori creat clear non tx invoc context clear command command command factori build clear command explicit flag invok invok context command final resum previou ongo transact tx true problem tri resum transact clear overrid public cach set key set return key set enum util suppress warn uncheck cach set key set long explicit flag invoc context ctx invoc context factori creat invoc context fals key set command command command factori build key set command explicit flag return cach set invok invok ctx command overrid public cach collect valu return valu enum util cach collect valu long explicit flag return new valu cach collect cach entri set explicit flag overrid public cach set cach entri cach entri set return cach entri set enum util overrid public lock stream lock stream transact config transact lock mode lock mode throw new unsupport oper except method lock stream support transact cach return new tx lock stream impl transact manag cach entri set stream config lock lock acquisit timeout time unit return new lock stream impl cach entri set stream config lock lock acquisit timeout time unit suppress warn uncheck cach set cach entri cach entri set long explicit flag return cach entri set explicit flag invoc context factori creat invoc context fals suppress warn uncheck cach set cach entri cach entri set long explicit flag invoc context ctx entri set command command command factori build entri set command explicit flag return cach set cach entri invok invok ctx command overrid public cach set entri entri set return entri set enum util suppress warn uncheck cach set map entri entri set long explicit flag invoc context ctx invoc context factori creat invoc context fals entri set command command command factori build entri set command explicit flag return cach set map entri invok invok ctx command overrid public final void put extern read key valu put extern read key valu enum util overrid public void put extern read key valu long lifespan time unit lifespan unit put extern read key valu lifespan lifespan unit default metadata max idl overrid public void put extern read key valu long lifespan time unit lifespan unit long max idl time time unit idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time idl time unit build put extern read key valu metadata overrid public void put extern read key valu metadata metadata metadata merg appli default metadata metadata put extern read key valu merg enum util final void put extern read key valu long explicit flag put extern read key valu default metadata explicit flag final void put extern read key valu metadata metadata long explicit flag transact ongo transact null tri ongo transact suspend ongo transact exist entri exist op put absent key valu metadata enum util merg bit set explicit flag catch except e log debug enabl log debug caught except put extern read e final resum previou ongo transact ongo transact true problem tri resum transact put extern read overrid public final void evict key evict key enum util final void evict key long explicit flag assert key null key config memori evict enabl log evict disabl name invoc context ctx creat singl key non tx invoc context evict command command command factori build evict command key explicit flag invok invok ctx command privat invoc context creat singl key non tx invoc context return invoc context factori creat singl key non tx invoc context overrid public configur get cach configur return config overrid public void add listen object listen notifi add listen listen void add listen listen holder listen holder notifi add listen listen holder null null null void add listen listen holder listen holder cach event filter super super filter cach event convert super super convert notifi add listen listen holder filter convert null overrid public void add listen object listen key filter super filter notifi add listen listen filter overrid public void add listen object listen cach event filter super super filter cach event convert super super convert notifi add listen listen filter convert overrid public void remov listen object listen notifi remov listen listen overrid public set object get listen return notifi get listen overrid public void add filter listen object listen cach event filter super super filter cach event convert super super convert set class extend annot filter annot notifi add filter listen listen filter convert filter annot void add filter listen listen holder listen cach event filter super super filter cach event convert super super convert set class extend annot filter annot notifi add filter listen listen filter convert filter annot transact cach auto commit set true start transact transact call invoc context get invoc context implicit transact boolean put extern read int key count invoc context invoc context boolean tx inject fals transact put extern read transact transact get ongo transact transact null config transact auto commit transact tri begin tx inject true invoc context invoc context factori creat invoc context transact tx inject els invoc context invoc context factori creat singl key non tx invoc context els invoc context invoc context factori creat invoc context true key count return invoc context overrid public boolean lock key assert key null key return lock array list key enum util overrid public boolean lock collect extend key return lock key enum util boolean lock collect extend key long flag bit set transact throw new unsupport oper except call lock non transact cach allow key null key empti throw new illeg argument except lock empti list key invoc context ctx invoc context factori creat invoc context true lock control command command command factori build lock control command key flag bit set ctx get lock owner null ctx set lock owner command get key lock owner return boolean invok invok ctx command overrid public void appli delta delta awar valu key delta delta object lock acquir lock acquir null lock acquir length throw new illeg argument except lock empti list key els lock acquir length throw new illeg argument except one lock permit els object equal lock acquir delta awar valu key throw new illeg argument except delta awar key lock key must match assert key null delta awar valu key invoc context ctx invoc context factori creat invoc context true read write key valu command object object command creat appli delta delta awar valu key delta flag bit set ctx invok invok ctx command privat read write key valu command object object creat appli delta delta awar valu key delta delta long explicit flag invoc context ctx read write key valu command object object command command factori build read write key valu command delta awar valu key delta new appli delta marshal param creat get key data convers get valu data convers command set flag bit set explicit flag ctx get lock owner null ctx set lock owner command get key lock owner return command overrid manag oper descript start cach display name start cach public void start compon registri start log debug enabl log debugf start cach get name get cach manag get address overrid manag oper descript stop cach display name stop cach public void stop perform immedi shutdown overrid manag oper descript shut cach across cluster display name cluster cach shutdown public void shutdown log debug enabl log debugf shut cach get name get cach manag get address synchron stop compon registri get statu compon statu stop true request cluster wide shutdown privat void request cluster wide shutdown cach cluster perform cluster wide shutdown otherwis immedi config cluster cach mode cluster tri local topolog manag cach shutdown name catch except e throw new cach except e perform immedi shutdown privat void perform immedi shutdown log debug enabl log debugf stop cach get name get cach manag get address compon registri stop public void perform grace shutdown perform orderli shutdown oper passiv manag passiv manag compon registri get compon passiv manag class passiv manag null passiv manag passiv overrid public list command interceptor get interceptor chain list async interceptor interceptor invok get interceptor array list command interceptor list new array list interceptor size interceptor interceptor interceptor instanceof command interceptor list add command interceptor interceptor return list overrid public void add interceptor command interceptor int posit invok add interceptor posit overrid public async interceptor chain get async interceptor chain return invok overrid public boolean add interceptor command interceptor class extend command interceptor interceptor return invok add interceptor interceptor overrid public boolean add interceptor command interceptor class extend command interceptor interceptor return invok add interceptor interceptor overrid public void remov interceptor int posit invok remov interceptor posit overrid public void remov interceptor class extend command interceptor interceptor type invok remov interceptor interceptor type overrid public evict manag get evict manag return evict manag overrid public expir manag get expir manag return expir manag overrid public compon registri get compon registri return compon registri overrid public distribut manag get distribut manag return distribut manag overrid public author manag get author manag return author manag overrid public advanc cach lock object lock owner object non null lock owner return new decor cach lock owner overrid public compon statu get statu return compon registri get statu return string represent compon statu enumer order avoid class find except tool n access class manag attribut descript return cach statu display name cach statu datum type data type display type display type public string get cach statu return get statu string overrid public avail mode get avail return partit handl manag get avail mode overrid public void set avail avail mode avail local topolog manag null tri local topolog manag set cach avail get name avail catch except e throw new cach except e manag attribut descript return cach avail display name cach avail datum type data type writabl true public string get cach avail return get avail string public void set cach avail string avail string throw except set avail avail mode valu avail string manag attribut descript return whether cach rebalanc enabl display name cach rebalac datum type data type writabl true public boolean rebalanc enabl local topolog manag null tri return local topolog manag cach rebalanc enabl get name catch except e throw new cach except e els return fals public void set rebalanc enabl boolean enabl local topolog manag null tri local topolog manag set cach rebalanc enabl get name enabl catch except e throw new cach except e overrid public boolean start batch batch enabl throw log invoc batch enabl return batch contain start batch overrid public void end batch boolean success batch enabl throw log invoc batch enabl batch contain end batch success overrid public string get name return name return cach name default cach return friendli name manag attribut descript return cach name display name cach name datum type data type display type display type public string get cach name string name get name equal basic cach contain default cach get name return name get cach configur cluster cach mode string lower case return version manag attribut descript return version display name version datum type data type display type display type overrid public string get version return version get version overrid public string string return cach name config null config cluster cach mode cluster get cach manag get address util hex id hash code get cach manag overrid public batch contain get batch contain return batch contain overrid public invoc context contain get invoc context contain return null overrid public data contain get data contain return datum contain overrid public transact manag get transact manag return transact manag overrid public lock manag get lock manag return lock manag overrid public emb cach manag get cach manag return cach manag overrid public stat get stat return new stat impl invok overrid public resourc get resourc return new transact xa adapt xa transact tabl tx tabl overrid public final put key valu long lifespan time unit lifespan unit long max idl time time unit idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time idl time unit build return put key valu metadata suppress warn uncheck final put key valu metadata metadata long explicit flag invoc context ctx assert key valu null key valu datum write command command use exampl preload entri empti changeset unless good defin would n store valu properli valu instanceof delta command creat appli delta key delta valu explicit flag ctx els valu instanceof delta awar explicit flag flag bit set command creat appli delta key delta awar valu delta explicit flag ctx els command creat put command key valu metadata explicit flag ctx return execut command commit need ctx command suppress warn uncheck privat put key valu command creat put command key valu metadata metadata long explicit flag invoc context ctx long flag add unsaf flag explicit flag metadata merg appli default metadata metadata put key valu command command command factori build put key valu command key valu merg flag ctx get lock owner null ctx set lock owner command get key lock owner return command privat long add ignor return valu flag long flag bit set return enum util merg bit set flag bit set flag bit set privat long add unsaf flag long flag bit set return config unsaf unreli return valu add ignor return valu flag flag bit set flag bit set overrid public final put absent key valu long lifespan time unit lifespan unit long max idl time time unit idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time idl time unit build return put absent key valu metadata enum util privat final put absent key valu metadata metadata long explicit flag return put absent key valu metadata explicit flag get invoc context implicit transact enum util contain explicit flag flag bit set suppress warn uncheck final put absent key valu metadata metadata long explicit flag invoc context ctx assert key valu null key valu datum write command command valu instanceof delta command creat appli delta key delta valu explicit flag ctx els valu instanceof delta awar explicit flag flag bit set command creat appli delta key delta awar valu delta explicit flag ctx els command creat put absent command key valu metadata explicit flag ctx return execut command commit need ctx command suppress warn uncheck privat put key valu command creat put absent command key valu metadata metadata long explicit flag invoc context ctx long flag add unsaf flag explicit flag metadata merg appli default metadata metadata put key valu command command command factori build put key valu command key valu merg flag command set put absent true command set valu matcher valu matcher ctx get lock owner null ctx set lock owner command get key lock owner return command overrid public final void put map extend extend map long lifespan time unit lifespan unit long max idl time time unit idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time idl time unit build put map metadata final void put map extend extend map metadata metadata long explicit flag invoc context ctx vanilla put map command return previou valu add drop return valu interceptor free clear flag appropri sinc interceptor consum return valu explicit flag enum util merg bit set explicit flag flag bit set put map command command creat put command map metadata explicit flag ctx execut command commit need ctx command public final map get put map extend extend map return get put map default metadata enum util get invoc context implicit transact fals map size final map get put map extend extend map metadata metadata long explicit flag invoc context ctx put map command command creat put command map metadata explicit flag ctx return drop null entri map execut command commit need ctx command privat put map command creat put command map extend extend map metadata metadata long explicit flag invoc context ctx collect assert null entri map map metadata merg appli default metadata metadata put map command command command factori build put map command map merg explicit flag ctx get lock owner null ctx set lock owner command get key lock owner return command overrid public final replac key valu long lifespan time unit lifespan unit long max idl time time unit idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time idl time unit build return replac key valu metadata suppress warn uncheck final replac key valu metadata metadata long explicit flag invoc context ctx assert key valu null key valu replac command command creat replac command key valu metadata explicit flag ctx return execut command commit need ctx command suppress warn uncheck privat replac command creat replac command key valu metadata metadata long explicit flag invoc context ctx long flag add unsaf flag explicit flag metadata merg appli default metadata metadata replac command command command factori build replac command key null valu merg flag ctx get lock owner null ctx set lock owner command get key lock owner return command overrid public final boolean replac key old valu valu long lifespan time unit lifespan unit long max idl time time unit idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time idl time unit build return replac key old valu valu metadata final boolean replac key old valu valu metadata metadata long explicit flag invoc context ctx assert key valu null key valu assert valu null old valu replac command command creat replac condit command key old valu valu metadata explicit flag ctx return boolean execut command commit need ctx command privat replac command creat replac condit command key old valu valu metadata metadata long explicit flag invoc context ctx metadata merg appli default metadata metadata replac command command command factori build replac command key old valu valu merg explicit flag ctx get lock owner null ctx set lock owner command get key lock owner return command wrap return valu futur need typic stack oper configur support handl futur retval alreadi futur case method noth except cast futur p otherwis futur wrapper creat alreadi complet simpli return retval use consist param retval return valu wrap param content futur return futur suppress warn uncheck privat complet futur wrap futur final object retval retval instanceof complet futur return complet futur retval els return complet futur complet futur retval overrid public final complet futur put async key valu long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build return put async key valu metadata final complet futur put async final key final valu final metadata metadata final long explicit flag invoc context ctx assert key valu null key valu put key valu command command creat put command key valu metadata explicit flag ctx return execut command commit need async ctx command overrid public final complet futur void put async map extend extend datum long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build return put async datum metadata final complet futur void put async final map extend extend datum final metadata metadata return put async datum metadata enum util get invoc context implicit transact fals datum size final complet futur void put async final map extend extend datum final metadata metadata long explicit flag invoc context ctx explicit flag enum util merg bit set explicit flag flag bit set put map command command creat put command datum metadata explicit flag ctx return execut command commit need async ctx command overrid public final complet futur void clear async return clear async enum util final complet futur void clear async final long explicit flag invoc context context invoc context factori creat clear non tx invoc context clear command command command factori build clear command explicit flag return invok invok async context command appli nil null overrid public final complet futur put absent async key valu long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build return put absent async key valu metadata final complet futur put absent async final key final valu final metadata metadata return put absent async key valu metadata enum util get invoc context implicit transact fals final complet futur put absent async final key final valu final metadata metadata final long explicit flag invoc context ctx assert key valu null key valu put key valu command command creat put absent command key valu metadata explicit flag ctx return execut command commit need async ctx command overrid public final complet futur remov async object key return remov async key enum util get invoc context implicit transact fals final complet futur remov async final object key final long explicit flag invoc context ctx assert key null key remov command command creat remov command key explicit flag ctx return execut command commit need async ctx command overrid public final complet futur boolean remov async object key object valu return remov async key valu enum util get invoc context implicit transact fals final complet futur boolean remov async final object key final object valu final long explicit flag invoc context ctx assert key valu null key valu remov command command creat remov condit command key valu explicit flag ctx return execut command commit need async ctx command overrid public final complet futur replac async key valu long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build return replac async key valu metadata final complet futur replac async final key final valu final metadata metadata return replac async key valu metadata enum util get invoc context implicit transact fals final complet futur replac async final key final valu final metadata metadata final long explicit flag invoc context ctx assert key valu null key valu replac command command creat replac command key valu metadata explicit flag ctx return execut command commit need async ctx command overrid public final complet futur boolean replac async key old valu new valu long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build return replac async key old valu new valu metadata final complet futur boolean replac async final key final old valu final new valu final metadata metadata return replac async key old valu new valu metadata enum util get invoc context implicit transact fals final complet futur boolean replac async final key final old valu final new valu final metadata metadata final long explicit flag invoc context ctx assert key valu null key new valu assert valu null old valu replac command command creat replac condit command key old valu new valu metadata explicit flag ctx return execut command commit need async ctx command overrid public complet futur get async key return get async key enum util invoc context factori creat invoc context fals suppress warn uncheck complet futur get async final key final long explicit flag invoc context ctx assert key null key get key valu command command command factori build get key valu command key explicit flag return complet futur invok invok async ctx command overrid public advanc cach get a dvanc cach return overrid public rpc manag get rpc manag return rpc manag overrid public advanc cach flag final flag flag flag null flag length return els return new decor cach flag overrid public advanc cach subject subject subject return privat transact get ongo transact tri transact transact null transact manag null transact transact manag get transact transact null batch enabl transact batch contain get batch transact return transact catch system except e throw new cach except unabl get transact e object execut command commit need invoc context ctx visit command command final boolean tx inject tx inject ctx object result tri result invok invok ctx command catch throwabl e tx inject tri rollback throw e tx inject tri commit return result privat complet futur execut command commit need async invoc context ctx visit command command final boolean tx inject tx inject ctx complet futur cf final transact implicit transact tri interceptor must access thread local transact anyway tx inject implicit transact transact manag suspend assert implicit transact null els implicit transact null cf complet futur invok invok async ctx command catch system except e throw new cach except suspend implicit transact e catch throwabl e tx inject tri rollback throw e tx inject return cf handl result throwabl throwabl null tri implicit transact rollback catch system except e log trace could rollback e throwabl add suppress e throw complet futur complet except throwabl tri implicit transact commit catch except e log could complet inject transact e throw complet futur complet except e return result els return cf privat boolean tx inject invoc context ctx return ctx tx scope tx invoc context ctx implicit transact privat transact tri begin transact manag null return null tri transact manag begin final transact transact get ongo transact trace log tracef implicit transact start transact transact return transact catch runtim except e throw e catch except e throw new cach except unabl begin implicit transact e privat void tri rollback tri transact manag null transact manag rollback catch throwabl trace log trace could rollback good effort privat void tri commit transact manag null return trace log tracef commit transact implicit get ongo transact tri transact manag commit catch throwabl e log could complet inject transact e throw new cach except could commit implicit transact e overrid public class loader get class loader class loader class loader global cfg class loader return class loader null class loader thread current thread get context class loader overrid public advanc cach class loader class loader return overrid public put key valu metadata metadata return put key valu metadata enum util get invoc context implicit transact fals overrid public void put map extend extend map metadata metadata put map metadata enum util get invoc context implicit transact fals map size privat metadata appli default metadata metadata metadata metadata null return default metadata metadata builder builder metadata builder return builder null builder merg default metadata build metadata overrid public replac key valu metadata metadata return replac key valu metadata enum util get invoc context implicit transact fals overrid public boolean replac key old valu valu metadata metadata return replac key old valu valu metadata enum util get invoc context implicit transact fals overrid public put absent key valu metadata metadata return put absent key valu metadata enum util overrid public complet futur put async key valu metadata metadata return put async key valu metadata enum util get invoc context implicit transact fals privat transact suspend ongo transact exist final transact tx get ongo transact tx null tri transact manag suspend catch system except e throw new cach except unabl suspend transact e return tx privat void resum previou ongo transact transact transact boolean fail silent string fail messag transact null tri transact manag resum transact catch except e fail silent log debug enabl log debug fail messag els throw new cach except fail messag e manag attribut descript return cach configur form properti display name cach configur properti datum type data type display type display type public properti get configur properti return new properti formatt format config 
packag org jmx import java util hash set import java util set import javax manag instanc find except import javax manag bean registr except import javax manag bean server import javax manag malform object name except import javax manag object name import org advanc cach import org cach import org common cach except import org common api basic cach contain import org configur global global configur import org factori abstract compon registri import org factori abstract compon registri compon import org factori global compon registri import org factori annot inject import org factori annot start import org factori annot stop import org factori annot surviv restart import org util log log import org util log log factori link org configur cach configur jmx statist enabl class regist bean cach local configur registri bean server author mircea marku jboss com author galder zamarr see java lang manag manag factori get platform bean server sinc surviv restart public class cach jmx registr extend abstract jmx registr privat static final log log log factori get log cach jmx registr class public static final string type cach privat advanc cach cach privat set compon non cach compon privat boolean need unregist fals privat volatil boolean unregist cach bean inject public void initi cach cach global configur global config cach cach get advanc cach global config global config registr perform start prioriti public void start cach null throw new illeg state except cach inject call method set compon compon cach get compon registri get regist compon non cach compon get non cach compon compon regist bean compon cach get cach manag get cach manag configur need unregist true log mbean success regist els cach get name equal basic cach contain log unabl regist bean els log unabl regist bean cach get name unregist cach stop stop public void stop method might get call sever time first call cach becom null guard cach null return need unregist unregist non cach bean restart tri unregist bean non cach compon need unregist fals catch except e log problem unregist bean e remov cach also remov cach bean unregist cach bean unregist cach bean make sure n set cach null case need restart via public void unregist cach bean bean server null string group name get cach jmx name manag object name quot global config global jmx statist cach manag name string pattern jmx domain group name tri set object name name secur action queri name new object name pattern null bean server object name name name jmx util unregist bean name bean server catch bean registr except e log unabl unregist bean pattern pattern e catch instanc find except e ignor cach bean present catch malform object name except e string messag malform pattern pattern throw new cach except messag e catch except e throw new cach except e public void set unregist cach bean boolean unregist cach bean unregist cach bean unregist cach bean overrid protect compon jmx registr build registrar set abstract compon registri compon compon quot group name handl invalid object name charact string group name get cach jmx name manag object name quot global config global jmx statist cach manag name compon jmx registr registrar new compon jmx registr bean server compon group name updat domain registrar cach get compon registri get global compon registri bean server group name return registrar privat string get cach jmx name return compon jmx registr object name quot cach get name cach get cach configur cluster cach mode string lower case protect void updat domain compon jmx registr registrar global compon registri compon registri bean server bean server string group name cach manag jmx registr manag jmx reg compon registri get compon cach manag jmx registr class global config global jmx statist enabl jmx domain null string tmp jmx domain jmx util build jmx domain global config bean server group name synchron manag jmx reg manag jmx reg jmx domain null tmp jmx domain equal global config global jmx statist domain global config global jmx statist allow duplic domain throw log jmx bean alreadi regist tmp jmx domain global config global jmx statist domain set manag compon jmx domain cach manag see particularli import jmx enabl cach level manag jmx reg jmx domain tmp jmx domain cach share domain regardless whether dup allow simpli assign manag calcul jmx domain jmx domain manag jmx reg jmx domain els global stat enabl manag jmx domain would popul cach manag start need synchron jmx domain manag jmx reg jmx domain null global config global jmx statist domain manag jmx reg jmx domain registrar set jmx domain jmx domain protect set compon get non cach compon set compon compon set compon compon except cach new hash set abstract compon registri compon abstract compon registri compon compon compon string name compon get name name equal cach class get name name equal advanc cach class get name compon except cach add compon return compon except cach 
packag org topolog import java io except import java io object input import java io object output import java util collect import java util option import java util set import org common hash hash import org common marshal abstract extern import org common marshal marshal util import org configur cach cach mode import org distribut ch consist hash factori import org marshal core id class contain inform cach need suppli coordin start author dan berindei sinc public class cach join info global configur privat final consist hash factori consist hash factori privat final hash hash function privat final int num segment privat final int num owner privat final long timeout privat final boolean total order privat final cach mode cach mode privat final boolean partit handl per node configur privat final float capac factor per node state info privat final persist persist privat final option integ persist state checksum public cach join info consist hash factori consist hash factori hash hash function int num segment int num owner long timeout boolean total order cach mode cach mode boolean partit handl float capac factor persist persist option integ persist state checksum consist hash factori consist hash factori hash function hash function num segment num segment num owner num owner timeout timeout total order total order cach mode cach mode partit handl partit handl capac factor capac factor persist persist persist state checksum persist state checksum public consist hash factori get consist hash factori return consist hash factori public hash get hash function return hash function public int get num segment return num segment public int get num owner return num owner public long get timeout return timeout public boolean total order return total order public cach mode get cach mode return cach mode public boolean partit handl return partit handl public float get capac factor return capac factor public persist get persist return persist public option integ get persist state checksum return persist state checksum overrid public int hash code final int prime int result result prime result float float int bit capac factor result prime result consist hash factori null consist hash factori hash code result prime result cach mode hash code result prime result partit handl result prime result hash function null hash function hash code result prime result num owner result prime result num segment result prime result int timeout timeout result prime result total order result prime result persist null persist hash code result prime result persist state checksum null persist state checksum hash code return result overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals cach join info cach join info obj float float int bit capac factor float float int bit capac factor return fals consist hash factori null consist hash factori null return fals els consist hash factori equal consist hash factori return fals cach mode cach mode return fals partit handl partit handl return fals hash function null hash function null return fals els hash function equal hash function return fals num owner num owner return fals num segment num segment return fals timeout timeout return fals total order total order return fals persist null persist null return fals els persist equal persist return fals persist state checksum null persist state checksum null return fals els persist state checksum equal persist state checksum return fals return true overrid public string string return cach join info consist hash factori consist hash factori hash function hash function num segment num segment num owner num owner timeout timeout total order total order cach mode cach mode partit handl partit handl persist persist persist state checksum persist state checksum public static class extern extend abstract extern cach join info overrid public void write object object output output cach join info cach join info throw except output write object cach join info consist hash factori output write object cach join info hash function output write int cach join info num segment output write int cach join info num owner output write long cach join info timeout output write boolean cach join info total order marshal util marshal enum cach join info cach mode output output write boolean cach join info partit handl output write float cach join info capac factor output write object cach join info persist output write object cach join info persist state checksum overrid public cach join info read object object input unmarshal throw except class find except consist hash factori consist hash factori consist hash factori unmarshal read object hash hash function hash unmarshal read object int num segment unmarshal read int int num owner unmarshal read int long timeout unmarshal read long boolean total order unmarshal read boolean cach mode cach mode marshal util unmarshal enum unmarshal cach mode valu boolean partit handl unmarshal read boolean float capac factor unmarshal read float persist persist persist unmarshal read object option integ persist state checksum option integ unmarshal read object return new cach join info consist hash factori hash function num segment num owner timeout total order cach mode partit handl capac factor persist persist state checksum overrid public integ get id return id overrid public set class extend cach join info get type class return collect class extend cach join info singleton cach join info class 
packag org jmx import java util set import javax manag bean server import javax manag object name import org configur global global configur import org factori abstract compon registri import org factori global compon registri import org factori annot inject import org factori annot surviv restart import org util log log import org util log log factori regist compon global compon registri mbean server author mircea marku jboss com author galder zamarr sinc surviv restart public class cach manag jmx registr extend abstract jmx registr privat static final log log log factori get log cach manag jmx registr class public static final string type cach manag privat global compon registri global reg privat boolean need unregist fals privat boolean stop inject public void init global compon registri registri global configur configur global reg registri global config configur start mbean regist public void start regist bean global reg get regist compon global config need unregist true els log unabl regist cach manag bean stop fals stop mbean unregist public void stop method might get call sever time stop return need unregist tri unregist bean global reg get regist compon need unregist fals catch except e log problem unregist bean e stop true overrid protect compon jmx registr build registrar set abstract compon registri compon compon quot group name handl invalid object name charact string group name compon jmx registr object name quot global config global jmx statist cach manag name compon jmx registr registrar new compon jmx registr bean server compon group name updat domain registrar bean server group name return registrar protect void updat domain compon jmx registr registrar bean server bean server string group name jmx domain null jmx domain jmx util build jmx domain global config bean server group name string config jmx domain global config global jmx statist domain jmx domain equal config jmx domain global config global jmx statist allow duplic domain throw log jmx bean alreadi regist group name config jmx domain registrar set jmx domain jmx domain 
packag org notif cachemanagerlisten import java lang annot annot import java util hash map import java util list import java util map import java util concurr copi write array list import javax transact transact import org factori annot inject import org manag emb cach manag import org notif listen import org notif cachemanagerlisten annot cach start import org notif cachemanagerlisten annot cach stop import org notif cachemanagerlisten annot merg import org notif cachemanagerlisten annot view chang import org notif cachemanagerlisten event cach start event import org notif cachemanagerlisten event cach stop event import org notif cachemanagerlisten event event import org notif cachemanagerlisten event merg event import org notif cachemanagerlisten event view chang event import org notif cachemanagerlisten event impl event impl import org notif impl abstract listen impl import org notif impl listen invoc import org remot transport address import org util log log import org util log log factori global share notif cach manag author manik surtani sinc public class cach manag notifi impl extend abstract listen impl event listen invoc event implement cach manag notifi privat static final log log log factori get log cach manag notifi impl class privat static final map class extend annot class allow listen new hash map class extend annot class static allow listen put cach start class cach start event class allow listen put cach stop class cach stop event class allow listen put view chang class view chang event class allow listen put merg class merg event class final list listen invoc event cach start listen new copi write array list listen invoc event final list listen invoc event cach stop listen new copi write array list listen invoc event final list listen invoc event view chang listen new copi write array list listen invoc event final list listen invoc event merg listen new copi write array list listen invoc event privat emb cach manag cach manag public cach manag notifi impl listen map put cach start class cach start listen listen map put cach stop class cach stop listen listen map put view chang class view chang listen listen map put merg class merg listen protect class default builder extend abstract invoc builder overrid public listen invoc event build return new listen invoc impl target method sync class loader subject inject public void inject cach manag emb cach manag cach manag cach manag cach manag overrid public void notifi view chang list address member list address old member address address int view id view chang listen empti event impl e new event impl e set local address address e set merg view fals e set view id view id e set new member member e set old member old member e set cach manag cach manag e set type event type listen invoc listen view chang listen invok listen listen e overrid public void notifi merg list address member list address old member address address int view id list list address subgroup merg merg listen empti event impl e new event impl e set local address address e set view id view id e set merg view true e set new member member e set old member old member e set cach manag cach manag e set subgroup merg subgroup merg e set type event type listen invoc listen merg listen invok listen listen e overrid public void notifi cach start string cach name cach start listen empti event impl e new event impl e set cach name cach name e set cach manag cach manag e set type event type listen invoc listen cach start listen invok listen listen e overrid public void notifi cach stop string cach name cach stop listen empti event impl e new event impl e set cach name cach name e set cach manag cach manag e set type event type listen invoc listen cach stop listen invok listen listen e privat void invok listen listen invoc listen event impl e tri listen invok e catch except x cach entri relat listen abl throw except veto oper log except throw invok contain relev inform log fail invok cach manag listen x overrid public void add listen object listen valid add listen invoc listen new default builder overrid protect log get log return log overrid protect map class extend annot class get allow method annot listen l return allow listen overrid protect final transact suspend need return null op overrid protect final void resum need transact transact op 
packag org interceptor impl import java util map import java util map entri import java util concurr time unit import java util concurr atom atom long import java util concurr atom atom long field updat import org advanc cach import org command flag affect command import org command read abstract data command import org command read get command import org command read get cach entri command import org command read get key valu command import org command write comput command import org command write comput absent command import org command write evict command import org command write put key valu command import org command write put map command import org command write remov command import org command write replac command import org command write write command import org contain data contain import org contain offheap heap memori alloc import org context flag import org context invoc context import org context impl flag bit set import org factori annot inject import org factori annot start import org jmx annot display type import org jmx annot bean import org jmx annot manag attribut import org jmx annot manag oper import org jmx annot measur type import org jmx annot unit import org util time servic import org util concurr stripe counter captur cach manag statist author jerri gauthier sinc bean object name statist descript gener statist time hit miss ratio etc public class cach mgmt interceptor extend jmx stat command interceptor privat advanc cach cach privat data contain datum contain privat time servic time servic privat heap memori alloc alloc privat final atom long start nanosecond new atom long privat volatil atom long reset nanosecond new atom long privat stripe counter stripe counter new stripe counter stripe new inject suppress warn unus public void set depend advanc cach cach data contain datum contain time servic time servic heap memori alloc alloc cach cach datum contain datum contain time servic time servic alloc alloc start public void start start nanosecond set time servic time reset nanosecond set start nanosecond get overrid public object visit evict command invoc context ctx evict command command throw throwabl get statist enabl command return invok next ctx command return invok next final ctx command r ctx be command rv counter increment stripe evict field updat counter stripe current thread overrid public final object visit get key valu command invoc context ctx get key valu command command throw throwabl return visit data read command ctx command overrid public final object visit get cach entri command invoc context ctx get cach entri command command throw throwabl return visit data read command ctx command privat object visit datum read command invoc context ctx abstract data command command throw throwabl boolean statist enabl get statist enabl command statist enabl ctx origin local return invok next ctx command long start time servic time return invok next final ctx command r ctx r command rv stripe stripe counter stripe current thread long interv nanosecond time servic time durat start time unit rv null counter add stripe miss time field updat stripe interv nanosecond counter increment stripe miss field updat stripe els counter add stripe hit time field updat stripe interv nanosecond counter increment stripe hit field updat stripe suppress warn uncheck overrid public object visit get command invoc context ctx get command command throw throwabl boolean statist enabl get statist enabl command statist enabl ctx origin local return invok next ctx command long start time servic time return invok next final ctx command r ctx r command rv long interv nanosecond time servic time durat start time unit int request get command r command get key size int hit count entri object object entri map object object rv entri set entri get valu null hit count int miss count request hit count stripe stripe counter stripe current thread hit count counter add stripe hit field updat stripe hit count counter add stripe hit time field updat stripe interv nanosecond hit count request miss count counter add stripe miss field updat stripe miss count counter add stripe miss time field updat stripe interv nanosecond miss count request overrid public object visit put map command invoc context ctx put map command command throw throwabl boolean statist enabl get statist enabl command statist enabl ctx origin local return invok next ctx command long start time servic time return invok next final ctx command r ctx r command rv final long interv nanosecond time servic time durat start time unit final map object object datum put map command be command get map datum null datum empti stripe stripe counter stripe current thread counter add stripe store time field updat stripe interv nanosecond counter add stripe store field updat stripe datum size overrid map put key valu old valu public object visit put key valu command invoc context ctx put key valu command command throw throwabl return updat store statist ctx command overrid public object visit replac command invoc context ctx replac command command throw throwabl return updat store statist ctx command overrid public object visit comput command invoc context ctx comput command command throw throwabl boolean statist enabl get statist enabl command statist enabl ctx origin local return invok next ctx command long start time servic time return invok next final ctx command r ctx r command rv rv null command success increas remov miss els command success long interv millisecond time servic time durat start time unit stripe stripe counter stripe current thread counter add stripe store time field updat stripe interv millisecond counter increment stripe store field updat stripe overrid public object visit comput absent command invoc context ctx comput absent command command throw throwabl return updat store statist ctx command privat object updat store statist invoc context ctx write command command throw throwabl boolean statist enabl get statist enabl command statist enabl ctx origin local return invok next ctx command long start time servic time return invok next final ctx command r ctx r command rv command success long interv nanosecond time servic time durat start time unit stripe stripe counter stripe current thread counter add stripe store time field updat stripe interv nanosecond counter increment stripe store field updat stripe overrid public object visit remov command invoc context ctx remov command command throw throwabl boolean statist enabl get statist enabl command statist enabl ctx origin local return invok next ctx command long start time servic time return invok next final ctx command r ctx r command rv remov command remov command remov command r command remov command condit remov command success increas remov hit start els increas remov miss els rv null increas remov miss els increas remov hit start privat void increas remov hit long start long interv nanosecond time servic time durat start time unit stripe stripe counter stripe current thread counter add stripe remov time field updat stripe interv nanosecond counter increment stripe remov hit field updat stripe privat void increas remov miss counter increment stripe remov miss field updat counter stripe current thread manag attribut descript number cach attribut hit display name number cach hit measur type measur type display type display type public long get hit return counter get stripe hit field updat manag attribut descript number cach attribut miss display name number cach miss measur type measur type display type display type public long get miss return counter get stripe miss field updat manag attribut descript number cach remov hit display name number cach remov hit measur type measur type display type display type public long get remov hit return counter get stripe remov hit field updat manag attribut descript number cach remov key find display name number cach remov miss measur type measur type display type display type public long get remov miss return counter get stripe remov miss field updat manag attribut descript number cach attribut put oper display name number cach put measur type measur type display type display type public long get store return counter get stripe store field updat manag attribut descript number cach evict oper display name number cach evict measur type measur type display type display type public long get evict return counter get stripe evict field updat manag attribut descript percentag hit hit miss ratio cach display name hit ratio unit unit display type display type suppress warn unus public doubl get hit ratio long hit counter get stripe hit field updat doubl total hit counter get stripe miss field updat reason equal check avoid float point number total return return hit total manag attribut descript read write ratio cach display name read write ratio unit unit display type display type suppress warn unus public doubl get read write ratio long sum counter get stripe store field updat sum return return doubl counter get stripe hit field updat counter get stripe miss field updat doubl sum manag attribut descript averag number nanosecond read oper cach display name averag read time unit unit display type display type suppress warn unus public long get averag read time long total counter get stripe hit field updat counter get stripe miss field updat total return return counter get stripe hit time field updat counter get stripe miss time field updat total manag attribut descript averag number nanosecond write oper cach display name averag write time unit unit display type display type suppress warn unus public long get averag write time long sum counter get stripe store field updat sum return return counter get stripe store time field updat sum manag attribut descript averag number nanosecond remov oper cach display name averag remov time unit unit display type display type suppress warn unus public long get averag remov time long remov get remov hit remov return return counter get stripe remov time field updat remov manag attribut descript number entri cach includ passiv entri display name number current cach entri display type display type public int get number entri return cach flag flag size manag attribut descript number entri current memori exclud expir entri display name number memori cach entri display type display type public int get number entri memori return datum contain size manag attribut descript amount memori byte alloc heap display name heap memori use display type display type public long get heap memori use return alloc get alloc amount manag attribut descript number second sinc cach start display name second sinc cach start unit unit measur type measur type display type display type public long get time sinc start return time servic time durat start nanosecond get time unit return number second sinc cach start deprec use link get time sinc start instead return number second sinc cach start manag attribut descript number second sinc cach start display name second sinc cach start unit unit measur type measur type display type display type deprec public long get elaps time backward compat renam elaps time time sinc start return get time sinc start manag attribut descript number second sinc cach statist last reset display name second sinc cach statist reset unit unit display type display type suppress warn unus public long get time sinc reset return time servic time durat reset nanosecond get time unit overrid manag oper descript reset statist gather compon display name reset statist statist public void reset statist counter reset stripe hit field updat counter reset stripe miss field updat counter reset stripe store field updat counter reset stripe evict field updat counter reset stripe hit time field updat counter reset stripe miss time field updat counter reset stripe store time field updat counter reset stripe remov hit field updat counter reset stripe remov time field updat counter reset stripe remov miss field updat reset nanosecond set time servic time privat boolean get statist enabl flag affect command cmd return super get statist enabl cmd flag flag bit set public void add evict long num evict counter add stripe evict field updat counter stripe current thread num evict suppress warn unus privat static class stripe privat long slack slack slack slack slack slack slack slack suppress warn unus volatil long doubl field privat static class stripe extend stripe static final atom long field updat stripe hit time field updat atom long field updat new updat stripe class hit time static final atom long field updat stripe miss time field updat atom long field updat new updat stripe class miss time static final atom long field updat stripe store time field updat atom long field updat new updat stripe class store time static final atom long field updat stripe remov hit field updat atom long field updat new updat stripe class remov hit static final atom long field updat stripe remov miss field updat atom long field updat new updat stripe class remov miss static final atom long field updat stripe store field updat atom long field updat new updat stripe class store static final atom long field updat stripe evict field updat atom long field updat new updat stripe class evict static final atom long field updat stripe miss field updat atom long field updat new updat stripe class miss static final atom long field updat stripe hit field updat atom long field updat new updat stripe class hit static final atom long field updat stripe remov time field updat atom long field updat new updat stripe class remov time privat volatil long hit privat volatil long hit time privat volatil long miss privat volatil long miss time privat volatil long store privat volatil long store time privat volatil long evict privat volatil long remov hit privat volatil long remov miss privat volatil long remov time suppress warn unus privat static class stripe extend stripe privat long slack slack slack slack slack slack slack slack 
packag org configur cach cach replic mode public enum cach mode data replic datum replic synchron data replic asynchron data invalid synchron data invalid asynchron synchron async synchron scatter cach privat static cach mode cach valu valu public static cach mode valu int order return cach valu order return true mode invalid either sync async public boolean invalid return public boolean synchron return public boolean cluster return public boolean distribut return public boolean replic return public boolean scatter return public boolean need state transfer return replic distribut scatter public cach mode sync switch case return case return case return default return public cach mode async switch case return case return case return case throw new illeg argument except scatter mode asynchron mode default return public string friendli cach mode string switch case case return case case return case case return case return case return throw new illeg argument except unknown cach mode 
packag org notif cachelisten import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import static org notif cachelisten event event type import java lang annot annot import java util array list import java util collect import java util hash map import java util hash set import java util iter import java util list import java util map import java util set import java util import java util concurr callabl import java util concurr concurr hash map import java util concurr concurr map import java util concurr copi write array list import java util concurr execut except import java util concurr futur import java util stream stream import javax transact statu import javax transact transact import javax transact transact manag import org cach import org cach stream import org command flag affect command import org common cach listen except import org common dataconvers byte array wrapper import org common dataconvers encod import org common dataconvers ident encod import org common dataconvers wrapper import org common util servic finder import org configur cach cach mode import org configur cach configur import org contain intern entri factori import org contain entri cach entri import org contain entri intern cach entri import org context invoc context import org context impl flag bit set import org context impl tx invoc context import org distexec distribut callabl import org distexec distribut execut complet servic import org distexec distribut executor servic import org distribut distribut manag import org distribut ch consist hash import org encod datum convers import org factori compon registri import org factori annot inject import org filter cach filter import org filter key filter import org interceptor async interceptor chain import org interceptor lock cluster depend logic import org manag emb cach manag import org metadata metadata import org notif listen import org notif cachelisten annot cach entri evict import org notif cachelisten annot cach entri activ import org notif cachelisten annot cach entri creat import org notif cachelisten annot cach entri expir import org notif cachelisten annot cach entri invalid import org notif cachelisten annot cach entri load import org notif cachelisten annot cach entri modifi import org notif cachelisten annot cach entri passiv import org notif cachelisten annot cach entri remov import org notif cachelisten annot cach entri visit import org notif cachelisten annot datum rehash import org notif cachelisten annot partit statu chang import org notif cachelisten annot topolog chang import org notif cachelisten annot transact complet import org notif cachelisten annot transact regist import org notif cachelisten cluster cluster cach notifi import org notif cachelisten cluster cluster event manag import org notif cachelisten cluster cluster listen remov callabl import org notif cachelisten cluster cluster listen replic callabl import org notif cachelisten cluster remot cluster listen import org notif cachelisten event cach entri evict event import org notif cachelisten event cach entri activ event import org notif cachelisten event cach entri creat event import org notif cachelisten event cach entri event import org notif cachelisten event cach entri expir event import org notif cachelisten event cach entri invalid event import org notif cachelisten event cach entri load event import org notif cachelisten event cach entri modifi event import org notif cachelisten event cach entri passiv event import org notif cachelisten event cach entri remov event import org notif cachelisten event cach entri visit event import org notif cachelisten event datum rehash event import org notif cachelisten event event import org notif cachelisten event partit statu chang event import org notif cachelisten event topolog chang event import org notif cachelisten event transact complet event import org notif cachelisten event transact regist event import org notif cachelisten event impl event impl import org notif cachelisten filter cach event convert import org notif cachelisten filter cach event convert convert import org notif cachelisten filter cach event filter import org notif cachelisten filter cach event filter key valu filter import org notif cachelisten filter cach event filter convert import org notif cachelisten filter cach event filter convert key valu filter convert import org notif cachelisten filter deleg cach entri listen invoc import org notif cachelisten filter event type import org notif cachelisten filter filter index servic provid import org notif cachelisten filter index filter import org notif cachelisten filter key filter cach event filter import org notif impl abstract listen impl import org notif impl listen invoc import org partitionhandl avail mode import org remot transport address import org remot transport jgroup suspect except import org topolog cach topolog import org transact xa global transact import org util log log import org util log log factori helper class handl notif regist listen author manik surtani manik org author mircea marku jboss com author william burn author anistor redhat com sinc public final class cach notifi impl extend abstract listen impl event cach entri listen invoc implement cluster cach notifi privat static final log log log factori get log cach notifi impl class privat static final boolean trace log trace enabl privat static final map class extend annot class allow listen new hash map privat static final map class extend annot class cluster allow listen new hash map static allow listen put cach entri creat class cach entri creat event class allow listen put cach entri remov class cach entri remov event class allow listen put cach entri visit class cach entri visit event class allow listen put cach entri modifi class cach entri modifi event class allow listen put cach entri activ class cach entri activ event class allow listen put cach entri passiv class cach entri passiv event class allow listen put cach entri load class cach entri load event class allow listen put cach entri evict class cach entri evict event class allow listen put transact regist class transact regist event class allow listen put transact complet class transact complet event class allow listen put cach entri invalid class cach entri invalid event class allow listen put cach entri expir class cach entri expir event class allow listen put datum rehash class datum rehash event class allow listen put topolog chang class topolog chang event class allow listen put partit statu chang class partit statu chang event class cluster allow listen put cach entri creat class cach entri creat event class cluster allow listen put cach entri modifi class cach entri modifi event class cluster allow listen put cach entri remov class cach entri remov event class cluster allow listen put cach entri expir class cach entri expir event class final list cach entri listen invoc cach entri creat listen new copi write array list final list cach entri listen invoc cach entri remov listen new copi write array list final list cach entri listen invoc cach entri visit listen new copi write array list final list cach entri listen invoc cach entri modifi listen new copi write array list final list cach entri listen invoc cach entri activ listen new copi write array list final list cach entri listen invoc cach entri passiv listen new copi write array list final list cach entri listen invoc cach entri load listen new copi write array list final list cach entri listen invoc cach entri invalid listen new copi write array list final list cach entri listen invoc cach entri expir listen new copi write array list final list cach entri listen invoc cach entri evict listen new copi write array list final list cach entri listen invoc transact regist listen new copi write array list final list cach entri listen invoc transact complet listen new copi write array list final list cach entri listen invoc datum rehash listen new copi write array list final list cach entri listen invoc topolog chang listen new copi write array list final list cach entri listen invoc partit chang listen new copi write array list privat cach cach privat cluster depend logic cluster depend logic privat transact manag transact manag privat distribut executor servic dist executor servic privat configur config privat distribut manag distribut manag privat intern entri factori entri factori privat cluster event manag event manag privat compon registri compon registri privat final map object cluster listen d new concurr hash map privat final encod default encod ident encod privat final wrapper default wrapper byte array wrapper privat collect filter index servic provid filter index servic provid map use store handler use listen regist includ current state use listen initi state transfer privat final concurr map queue segment listen extend event segment handler public cach notifi impl new concurr hash map cach notifi impl concurr map queue segment listen extend event handler segment handler handler listen map put cach entri creat class cach entri creat listen listen map put cach entri remov class cach entri remov listen listen map put cach entri visit class cach entri visit listen listen map put cach entri modifi class cach entri modifi listen listen map put cach entri activ class cach entri activ listen listen map put cach entri passiv class cach entri passiv listen listen map put cach entri load class cach entri load listen listen map put cach entri evict class cach entri evict listen listen map put cach entri expir class cach entri expir listen listen map put transact regist class transact regist listen listen map put transact complet class transact complet listen listen map put cach entri invalid class cach entri invalid listen listen map put datum rehash class datum rehash listen listen map put topolog chang class topolog chang listen listen map put partit statu chang class partit chang listen inject void inject depend cach cach cluster depend logic cluster depend logic transact manag transact manag configur config distribut manag distribut manag intern entri factori entri factori cluster event manag event manag compon registri compon registri cach cach cluster depend logic cluster depend logic transact manag transact manag config config distribut manag distribut manag entri factori entri factori event manag event manag compon registri compon registri overrid public void start super start async interceptor chain interceptor chain secur action get async interceptor chain cach interceptor chain null interceptor chain get interceptor empti dist executor servic secur action get default executor servic cach execut twice compon cach notifi also cluster cach notifi see http issu jboss org brows filter index servic provid null filter index servic provid servic finder load filter index servic provid class filter index servic provid provid filter index servic provid compon registri wire depend provid provid start overrid public void stop super stop execut twice compon cach notifi also cluster cach notifi see http issu jboss org brows filter index servic provid null filter index servic provid provid filter index servic provid provid stop filter index servic provid null overrid protect log get log return log overrid protect map class extend annot class get allow method annot listen l l cluster cluster listen allow subset type return cluster allow listen return allow listen privat convert key data convers key datum convers key key null return null wrapper wrp key datum convers null key datum convers get wrapper default wrapper encod enc key datum convers null key datum convers get encod default encod object unwrap key wrp unwrap key return enc storag format filter unwrap key enc storag unwrap key privat convert valu data convers valu data convers valu valu null return null wrapper wrp valu data convers null valu datum convers get wrapper default wrapper encod enc valu data convers null valu datum convers get encod default encod object unwrap valu wrp unwrap valu return enc storag format filter unwrap valu enc storag unwrap valu overrid protect final transact suspend need transact manag null return null tri switch transact manag get statu case statu case statu return null case statu case statu case statu case statu case statu case statu case statu case statu default suspend default unknown statu safe return transact manag suspend catch except e trace log trace error occur tri suspend transact e return null overrid protect final void resum need transact transact transact null transact manag null return tri transact manag resum transact catch except e trace log tracef e error occur tri resum suspend transact tx transact overrid public void notifi cach entri creat key valu metadata metadata boolean pre invoc context ctx flag affect command command cach entri creat listen empti cluster depend logic commit type command ctx key fals local command null command flag flag bit set return event impl e event impl creat event cach boolean local node primari owner cluster depend logic get cach topolog get distribut key primari boolean send event ctx tx scope tri cach entri listen invoc listen cach entri creat listen need wrapper per invoc sinc convert could modifi entri configur event listen get key data convers listen get valu data convers e key valu metadata pre ctx command null null listen invok new event wrapper key e local node primari owner send event event manag send event send event fals final send event event manag drop event overrid public void notifi cach entri modifi key valu metadata metadata previou valu metadata previou metadata boolean pre invoc context ctx flag affect command command cach entri modifi listen empti cluster depend logic commit type command ctx key fals local command null command flag flag bit set return event impl e event impl creat event cach boolean local node primari owner cluster depend logic get cach topolog get distribut key primari boolean send event ctx tx scope tri cach entri listen invoc listen cach entri modifi listen need wrapper per invoc sinc convert could modifi entri configur event listen get key data convers listen get valu data convers e key valu metadata pre ctx command previou valu previou metadata listen invok new event wrapper key e local node primari owner send event event manag send event send event fals final send event event manag drop event overrid public void notifi cach entri remov key previou valu metadata previou metadata boolean pre invoc context ctx flag affect command command notif allow command cach entri remov listen cluster depend logic commit type command ctx key true local event impl e event impl creat event cach boolean local node primari owner cluster depend logic get cach topolog get distribut key primari boolean send event ctx tx scope tri cach entri listen invoc listen cach entri remov listen need wrapper per invoc sinc convert could modifi entri pre configur event listen get key data convers listen get valu data convers e key previou valu previou metadata true ctx command previou valu previou metadata els consist would well pass null previou metadata certain server code depend abil retriev metadata pre fals cach entri event get metadata instead proper method get old metadata configur event listen get key data convers listen get valu data convers e key null previou metadata fals ctx command previou valu previou metadata listen invok new event wrapper key e local node primari owner send event event manag send event send event fals final send event event manag drop event configur event datum current use creat modifi remov invalid event privat void configur event data convers key datum convers data convers valu datum convers event impl e key valu metadata metadata boolean pre invoc context ctx flag affect command command previou valu metadata previou metadata key convert key key datum convers key valu convert valu valu data convers valu previou valu convert valu valu datum convers previou valu e set origin local ctx origin local e set valu pre previou valu valu e set pre pre e set old valu previou valu e set old metadata previou metadata e set metadata metadata command null command flag flag bit set e set command retri true e set key key set tx ctx e configur event datum current use activ load visit event privat void configur event data convers key datum convers data convers valu datum convers event impl e key valu boolean pre invoc context ctx e set pre pre e set key convert key key datum convers key e set valu convert valu valu data convers valu e set origin local ctx origin local set tx ctx e configur event datum current use expir event privat void configur event data convers key datum convers data convers valu datum convers event impl e key valu metadata metadata e set key convert key key datum convers key e set valu convert valu valu data convers valu e set metadata metadata e set origin local true e set pre fals overrid public void notifi cach entri visit key valu boolean pre invoc context ctx flag affect command command notif allow command cach entri visit listen event impl e event impl creat event cach boolean local node primari owner cluster depend logic get cach topolog get distribut key primari cach entri listen invoc listen cach entri visit listen need wrapper per invoc sinc convert could modifi entri configur event listen get key data convers listen get valu data convers e key valu pre ctx listen invok new event wrapper key e local node primari owner overrid public void notifi cach entri evict collect intern cach entri extend extend entri invoc context ctx flag affect command command entri empti notif allow command cach entri evict listen event impl e event impl creat event cach cach entri listen invoc listen cach entri evict listen map evict key valu new hash map map entri extend extend entri entri evict key valu put convert key listen get key data convers entri get key convert valu listen get valu data convers entri get valu e set entri evict key valu listen invok e overrid public void notifi cach entri expir key valu metadata metadata invoc context ctx notif allow null cach entri expir listen event impl e event impl creat event cach boolean local node primari owner cluster depend logic get cach topolog get distribut key primari boolean send event ctx null ctx tx scope tri cach entri listen invoc listen cach entri expir listen need wrapper per invoc sinc convert could modifi entri configur event listen get key data convers listen get valu data convers e key valu metadata listen invok new event wrapper key e local node primari owner send event event manag send event send event fals final send event event manag drop event overrid public void notifi cach entri invalid final key valu metadata metadata final boolean pre invoc context ctx flag affect command command notif allow command cach entri invalid listen event impl e event impl creat event cach boolean local node primari owner cluster depend logic get cach topolog get distribut key primari cach entri listen invoc listen cach entri invalid listen need wrapper per invoc sinc convert could modifi entri configur event listen get key data convers listen get valu data convers e key valu metadata pre ctx command valu metadata listen invok new event wrapper key e local node primari owner overrid public void notifi cach entri load key valu boolean pre invoc context ctx flag affect command command notif allow command cach entri load listen event impl e event impl creat event cach boolean local node primari owner cluster depend logic get cach topolog get distribut key primari cach entri listen invoc listen cach entri load listen need wrapper per invoc sinc convert could modifi entri configur event listen get key data convers listen get valu data convers e key valu pre ctx listen invok new event wrapper key e local node primari owner overrid public void notifi cach entri activ key valu boolean pre invoc context ctx flag affect command command notif allow command cach entri activ listen event impl e event impl creat event cach boolean local node primari owner cluster depend logic get cach topolog get distribut key primari cach entri listen invoc listen cach entri activ listen need wrapper per invoc sinc convert could modifi entri configur event listen get key data convers listen get valu data convers e key valu pre ctx listen invok new event wrapper key e local node primari owner privat void set tx invoc context ctx event impl e ctx null ctx tx scope global transact tx tx invoc context ctx get global transact e set transact id tx overrid public void notifi cach entri passiv key valu boolean pre invoc context ctx flag affect command command notif allow command cach entri passiv listen event impl e event impl creat event cach boolean local node primari owner cluster depend logic get cach topolog get distribut key primari cach entri listen invoc listen cach entri passiv listen need wrapper per invoc sinc convert could modifi entri key convert key listen get key data convers key valu convert valu listen get valu data convers valu e set pre pre e set key key e set valu valu listen invok new event wrapper key e local node primari owner overrid public void notifi transact complet global transact transact boolean success invoc context ctx transact complet listen empti boolean origin local ctx origin local event impl e event impl creat event cach e set origin local origin local e set transact id transact e set transact success success cach entri listen invoc listen transact complet listen listen invok e ctx tx scope success event manag send event els event manag drop event overrid public void notifi transact regist global transact global transact boolean origin local transact regist listen empti event impl e event impl creat event cach e set origin local origin local e set transact id global transact cach entri listen invoc listen transact regist listen listen invok e overrid public void notifi datum rehash consist hash old consist hash new consist hash union int new topolog id boolean pre datum rehash listen empti event impl e event impl creat event cach e set pre pre e set read consist hash start old e set write consist hash start old e set read consist hash end new e set write consist hash end new e set union consist hash union e set new topolog id new topolog id cach entri listen invoc listen datum rehash listen listen invok e overrid public void notifi topolog chang cach topolog old topolog cach topolog new topolog int new topolog id boolean pre topolog chang listen empti event impl e event impl creat event cach e set pre pre old topolog null e set read consist hash start old topolog get read consist hash e set write consist hash start old topolog get write consist hash e set read consist hash end new topolog get read consist hash e set write consist hash end new topolog get write consist hash e set new topolog id new topolog id cach entri listen invoc listen topolog chang listen listen invok e overrid public void notifi partit statu chang avail mode mode boolean pre partit chang listen empti event impl e event impl creat event cach e set pre pre e set avail mode mode cach entri listen invoc listen partit chang listen listen invok e overrid public void notifi cluster listen collect extend cach entri event event uuid n need unwrap key valu node event origin alreadi cach entri event event event event pre throw new illeg argument except event cluster listen never pre chang switch event get type case cach entri listen invoc listen cach entri modifi listen listen cluster uuid equal listen get identifi forc invoc sinc mean own node pass filter alreadi alreadi convert n run convert either listen invok check new event wrapper event get key event fals true break case cach entri listen invoc listen cach entri creat listen listen cluster uuid equal listen get identifi forc invoc sinc mean own node pass filter alreadi alreadi convert n run convert either listen invok check new event wrapper event get key event fals true break case cach entri listen invoc listen cach entri remov listen listen cluster uuid equal listen get identifi forc invoc sinc mean own node pass filter alreadi alreadi convert n run convert either listen invok check new event wrapper event get key event fals true break case cach entri expir listen listen listen cluster uuid equal listen get identifi forc invoc sinc mean own node pass filter alreadi alreadi convert n run convert either listen invok check new event wrapper event get key event fals true break default throw new illeg argument except unexpect event type encount overrid public collect distribut callabl retriev cluster listen callabl instal set object enlist alreadi new hash set set distribut callabl callabl new hash set trace log tracef request receiv get cluster listen current regist regist cluster listen callabl instal enlist alreadi callabl cach entri modifi listen regist cluster listen callabl instal enlist alreadi callabl cach entri creat listen regist cluster listen callabl instal enlist alreadi callabl cach entri remov listen trace log tracef cluster listen find callabl return callabl privat void regist cluster listen callabl instal set object enlist alreadi set distribut callabl callabl list cach entri listen invoc listen invoc cach entri listen invoc listen listen invoc enlist alreadi contain listen get target cluster mean local use address listen cluster set class extend annot filter annot listen get filter annot callabl add new cluster listen replic callabl listen get identifi cach get cach manag get address listen get filter listen get convert listen sync filter annot listen get key data convers listen get valu data convers enlist alreadi add listen get target els listen get target instanceof remot cluster listen remot cluster listen lcl remot cluster listen listen get target set class extend annot filter annot listen get filter annot callabl add new cluster listen replic callabl lcl get id lcl get owner address listen get filter listen get convert listen sync filter annot listen get key data convers listen get valu data convers enlist alreadi add listen get target public boolean notif allow flag affect command cmd list cach entri listen invoc listen return listen empti cmd null cmd flag flag bit set overrid public void add listen object listen add listen listen null null null overrid public void add listen object listen class loader class loader add listen listen null null class loader overrid public void add listen object listen key filter super filter class loader class loader add listen listen new key filter cach event filter filter null class loader privat void add listen intern object listen datum convers key datum convers data convers valu datum convers cach event filter super super filter cach event convert super super convert class loader class loader final listen l test listen class valid listen get class final gener id random final cach mode cach mode config cluster cach mode filter index servic provid index provid null boolean find method fals datum convers key convers key data convers null datum convers key datum convers data convers valu convers valu data convers null datum convers valu data convers filter instanceof index filter index filter index filter index filter filter index provid find index servic provid index filter index provid null deleg cach invoc builder builder new deleg cach invoc builder index provid builder set includ current state l includ current state set cluster l cluster set primari l cluster cach mode distribut cach mode scatter l primari set observ l cluster listen observ l observ set filter filter set convert convert set identifi gener id set key data convers key convers set valu data convers valu convers set class loader class loader find method valid add listen invoc listen builder builder regist listen invoc index provid null cach invoc builder builder new cach invoc builder builder set includ current state l includ current state set cluster l cluster set primari l cluster cach mode distribut cach mode scatter l primari set observ l cluster listen observ l observ set filter filter set convert convert set key data convers key convers set valu data convers valu convers set identifi gener id set class loader class loader l cluster builder set filter annot find listen callback listen find method valid add listen invoc listen builder find method l cluster l observ listen observ throw log cluster listen regist pre event listen get class els cach mode invalid throw new unsupport oper except cluster listen use invalid cach els cach mode distribut cach mode scatter cluster listen d put listen gener id emb cach manag manag cach get cach manag address address manag get address list address member manag get member member n even worri send listen member null member size distribut execut complet servic dec new distribut execut complet servic dist executor servic trace log tracef replic cluster listen node cluster listen id member gener id callabl callabl new cluster listen replic callabl gener id address filter convert l sync find listen callback listen key datum convers valu data convers address member member member equal address dec submit member callabl int member size tri dec take get catch interrupt except e throw new cach listen except e catch execut except e throwabl caus e get caus get suspect except mean remot node n start cach yet ignor join retriev listen caus instanceof suspect except throw new cach listen except caus int extra count anyon els join sinc send send listen sinc may queri node get new listen list address member manag get member address member member member contain member member equal address trace log tracef find addit node join replic cluster listen id member gener id extra count dec submit member callabl int extra count tri dec take get catch interrupt except e throw new cach listen except e catch execut except e throw new cach listen except e segment listen handler mean initi state queue segment listen handler segment handler remov gener id handler null trace log tracef listen request initi state cach gener id tri cach stream entri stream cach get advanc cach encod key convers get encod class valu convers get encod class cach entri set stream stream cach entri use stream entri stream segment complet listen handler filter instanceof cach event filter convert filter convert convert null hacki cast prevent cast use stream cach filter filter convert use stream new cach event filter convert key valu filter convert cach event filter convert filter els use stream filter null use stream use stream filter cach filter predic new cach event filter key valu filter filter use stream convert null use stream use stream map cach filter function new cach event convert convert convert iter cach entri iter use stream iter iter next cach entri entri iter next mark key process see concurr updat object valu handler mark key process entri get key valu base queue segment listen n process valu concurr remov continu rais event initi transfer gener id entri l cluster handler notifi key entri get key set cach entri entri handler find creat entri cach entri entri entri rais event initi transfer gener id entri l cluster trace log tracef listen initi state cach complet gener id handler transfer complet add listen use provid filter convert class loader provid builder use add addit configur includ cluster primari identifi use method complet see valu use addit listen param listen param filter param convert param class loader param return overrid public void add listen object listen cach event filter super super filter cach event convert super super convert class loader class loader add listen intern listen null null filter convert class loader privat filter index servic provid find index servic provid index filter index filter filter index servic provid provid filter index servic provid provid support filter index filter return provid log filter index servic provid find index filter get class get name return null overrid public list cach entri listen invoc get listen collect annot class extend annot annot return super get listen collect annot annot privat void rais event initi transfer identifi cach entri entri boolean cluster event impl pre event cluster cluster mode send post event pre event null els pre event event impl creat event cach pre event set key entri get key pre event set pre true event impl post event event impl creat event cach post event set key entri get key post event set valu entri get valu post event set metadata entri get metadata post event set pre fals cach entri listen invoc invoc cach entri creat listen notifi method creat invoc get identifi identifi pre event null non cluster notif do twice invoc invok check new event wrapper null pre event true true invoc invok check new event wrapper null post event true true overrid public void add listen object listen key filter super filter add listen listen filter null overrid public void add listen object listen cach event filter super super filter cach event convert super super convert add listen listen filter convert null overrid public void add filter listen object listen cach event filter super super filter cach event convert super super convert set class extend annot filter annot add filter listen intern listen null null filter convert filter annot overrid public void add listen listen holder listen holder cach event filter super super filter cach event convert super super convert class loader class loader add listen intern listen holder get listen listen holder get key data convers listen holder get valu data convers filter convert class loader overrid public void add filter listen listen holder listen holder cach event filter super super filter cach event convert super super convert set class extend annot filter annot add filter listen intern listen holder get listen listen holder get key data convers listen holder get valu data convers filter convert filter annot privat void add filter listen intern object listen datum convers key datum convers data convers valu datum convers cach event filter super super filter cach event convert super super convert set class extend annot filter annot final listen l test listen class valid listen get class final gener id random final cach mode cach mode config cluster cach mode filter index servic provid index provid null boolean find method fals datum convers key convers key data convers null datum convers key datum convers data convers valu convers valu data convers null datum convers valu data convers filter instanceof index filter index filter index filter index filter filter index provid find index servic provid index filter index provid null deleg cach invoc builder builder new deleg cach invoc builder index provid builder set filter annot filter annot set includ current state l includ current state set cluster l cluster set primari l cluster cach mode distribut l primari set observ l cluster listen observ l observ set filter filter set convert convert set key data convers key convers set valu data convers valu convers set identifi gener id set class loader null find method valid add filter listen invoc listen builder filter annot builder regist listen invoc index provid null cach invoc builder builder new cach invoc builder builder set filter annot filter annot set includ current state l includ current state set cluster l cluster set primari l cluster cach mode distribut l primari set observ l cluster listen observ l observ set filter filter set key data convers key convers set valu data convers valu convers set convert convert set identifi gener id set class loader null l cluster builder set filter annot find listen callback listen find method valid add filter listen invoc listen builder filter annot find method l cluster l observ listen observ throw log cluster listen regist pre event listen get class els cach mode invalid throw new unsupport oper except cluster listen use invalid cach els cach mode distribut cluster listen d put listen gener id emb cach manag manag cach get cach manag address address manag get address list address member manag get member member n even worri send listen member null member size distribut execut complet servic dec new distribut execut complet servic dist executor servic trace log tracef replic cluster listen node cluster listen id member gener id callabl callabl new cluster listen replic callabl gener id address filter convert l sync filter annot key data convers valu data convers address member member member equal address dec submit member callabl int member size tri dec take get catch interrupt except e throw new cach listen except e catch execut except e throwabl caus e get caus get suspect except mean remot node n start cach yet ignor join retriev listen caus instanceof suspect except throw new cach listen except caus int extra count anyon els join sinc send send listen sinc may queri node get new listen list address member manag get member address member member member contain member member equal address trace log tracef find addit node join replic cluster listen id member gener id extra count dec submit member callabl int extra count tri dec take get catch interrupt except e throw new cach listen except e catch execut except e throw new cach listen except e segment listen handler mean initi state queue segment listen handler segment handler remov gener id handler null trace log tracef listen request initi state cach gener id tri cach stream entri stream cach get advanc cach encod key convers get encod class valu convers get encod class wrap key datum convers get wrapper class valu datum convers get wrapper class cach entri set stream stream cach entri use stream entri stream segment complet listen handler filter instanceof cach event filter convert filter convert convert null hacki cast prevent cast use stream cach filter filter convert use stream new cach event filter convert key valu filter convert cach event filter convert filter els use stream filter null use stream use stream filter cach filter predic new cach event filter key valu filter filter use stream convert null use stream use stream map cach filter function new cach event convert convert convert iter cach entri iter use stream iter iter next cach entri entri iter next mark key process see concurr updat object valu handler mark key process entri get key valu base queue segment listen n process valu concurr remov continu rais event initi transfer gener id entri l cluster handler notifi key entri get key set cach entri entri handler find creat entri cach entri entri entri rais event initi transfer gener id entri l cluster trace log tracef listen initi state cach complet gener id handler transfer complet protect class cach invoc builder extend abstract invoc builder cach event filter super super filter cach event convert super super convert boolean primari boolean cluster boolean includ current state identifi data convers key datum convers data convers valu datum convers listen observ observ set class extend annot filter annot public cach event filter super super get filter return filter public cach invoc builder set filter cach event filter super super filter filter filter return public cach event convert super super get convert return convert public cach invoc builder set convert cach event convert super super convert convert convert return public boolean primari return primari public cach invoc builder set primari boolean primari primari primari return public boolean cluster return cluster public cach invoc builder set cluster boolean cluster cluster cluster return public get identifi return identifi public cach invoc builder set identifi identifi identifi identifi return public cach invoc builder set key data convers data convers datum convers key datum convers datum convers return public cach invoc builder set valu data convers data convers datum convers valu data convers datum convers return public boolean includ current state return includ current state public cach invoc builder set includ current state boolean includ current state includ current state includ current state return public listen observ get observ return observ public cach invoc builder set observ listen observ observ observ observ return public cach invoc builder set filter annot set class extend annot filter annot filter annot filter annot return overrid public cach entri listen invoc build listen invoc event invoc new listen invoc impl target method sync class loader subject wire depend filter convert deal cluster event forc cluster listen use primari els would duplic event cach entri listen invoc return valu includ current state cluster listen distribut cach extra optim cluster queue segment listen handler segment handler get identifi handler null config cluster cach mode distribut handler new distribut queue segment listen entri factori distribut manag els handler new queue segment listen entri factori queue segment listen current queue segment handler put absent identifi handler current queue null handler current queue return valu new cluster listen invoc invoc handler filter convert annot primari identifi sync observ filter annot key data convers valu datum convers els remov non cluster listen support queue segment listen handler segment handler get identifi handler null handler new queue segment listen queue segment listen current queue segment handler put absent identifi handler current queue null handler current queue return valu new non cluster listen invoc invoc handler filter convert annot primari identifi sync return valu new base cach entri listen invoc invoc filter convert annot primari cluster identifi sync observ filter annot key data convers valu datum convers els includ current state use base listen invoc immedi pass notif return valu new base cach entri listen invoc invoc filter convert annot primari cluster identifi sync observ filter annot key data convers valu data convers return return valu protect void wire depend cach event filter super super filter cach event convert super super convert filter null compon registri wire depend filter convert null convert filter compon registri wire depend convert key datum convers null compon registri wire depend key data convers valu data convers null compon registri wire depend valu data convers protect class deleg cach invoc builder extend cach invoc builder privat final filter index servic provid provid privat final map class extend annot list deleg cach entri listen invoc listen new hash map deleg cach invoc builder filter index servic provid provid provid provid overrid public deleg cach entri listen invoc build deleg cach entri listen invoc invoc provid intercept listen invoc super build list deleg cach entri listen invoc invoc listen get invoc get annot invoc null invoc new array list listen put invoc get annot invoc invoc add invoc return invoc void regist listen invoc listen empti boolean filter convert filter convert convert null provid regist listen invoc cluster primari filter convert index filter filter listen key data convers valu data convers protect class non cluster listen invoc extend base cach entri listen invoc privat final queue segment listen event handler protect non cluster listen invoc listen invoc event invoc queue segment listen event handler cach event filter super super filter cach event convert super super convert class extend annot annot boolean primari identifi boolean sync listen observ observ set class extend annot filter annot datum convers key datum convers data convers valu datum convers super invoc filter convert annot primari fals identifi sync observ filter annot key data convers valu data convers handler handler overrid protect void real invoc event event handler handl event new event wrapper null event invoc super real invoc event class use cluster listen invoc includ current state thu assum type cach entri event sinc n allow type protect static class cluster listen invoc extend base cach entri listen invoc privat final queue segment listen cach entri event handler public cluster listen invoc listen invoc event invoc queue segment listen cach entri event handler cach event filter super super filter cach event convert super super convert class extend annot annot boolean primari identifi boolean sync listen observ observ set class extend annot filter annot datum convers key datum convers data convers valu datum convers super invoc filter convert annot primari true identifi sync observ filter annot key data convers valu data convers handler handler overrid public void invok event event throw new unsupport oper except cluster initi transfer n support regular event overrid protect void real invoc event wrapper cach entri event wrap use cluster safe cast handler handl event wrap invoc super real invoc wrap get event protect static class base cach entri listen invoc implement cach entri listen invoc protect final listen invoc event invoc protect final cach event filter super super filter protect final cach event convert super super convert privat final datum convers key datum convers privat final datum convers valu data convers protect final boolean primari protect final boolean cluster protect final identifi protect final class extend annot annot protect final boolean sync protect final boolean filter convert protect final listen observ observ protect final set class extend annot filter annot protect base cach entri listen invoc listen invoc event invoc cach event filter super super filter cach event convert super super convert class extend annot annot boolean primari boolean cluster identifi boolean sync listen observ observ set class extend annot filter annot datum convers key datum convers data convers valu data convers invoc invoc filter filter convert convert key datum convers key datum convers valu data convers valu data convers filter convert filter instanceof cach event filter convert filter convert convert null primari primari cluster cluster identifi identifi annot annot sync sync observ observ filter annot filter annot overrid public void invok event event invok event real invoc event entri point local listen fire event param wrap param local node primari owner overrid public void invok event wrapper cach entri event wrap boolean local node primari owner see filter first evalu cach entri event result event invok wrap get event local node primari owner result event null wrap set event result event invok check wrap fals filter convert entri point remot listen event fire param wrap param skip queue overrid public void invok check event wrapper cach entri event wrap boolean skip queue boolean skip convert run convert first way convert n run serial enqueu also handler n worri skip convert wrap set event convert valu convert wrap get event skip queue invoc invok wrap get event els real invoc wrap protect void real invoc event wrapper cach entri event event real invoc event get event protect void real invoc event event invoc invok event protect boolean invok event event return observ invok event pre protect cach entri event invok cach entri event event boolean local node primari owner trace log tracef invok filter primari primari event filter primari local node primari owner primari local node primari owner return null event instanceof event impl event impl event impl event impl event invok event return null event type event type use filter provid event filter properli filter null event type get event event impl null filter convert object new valu cach event filter convert filter filter convert event impl get key event impl get old valu event impl get old metadata event impl get valu event impl get metadata event type new valu null event impl clone event impl clone clone set valu new valu return clone els return null els filter accept event impl get key event impl get old valu event impl get old metadata event impl get valu event impl get metadata event type return null return event can n current filter event n implement cach entri event event basic event singl key valu pair privat event type get event event impl event switch event get type case case case case case case case case case return new event type event command retri event pre event get type default return null overrid public object get target return invoc get target overrid public cach event filter super super get filter return filter overrid public set class extend annot get filter annot return filter annot overrid public datum convers get key data convers return key datum convers overrid public datum convers get valu data convers return valu datum convers overrid public cach event convert super super get convert return convert overrid public boolean cluster return cluster overrid public get identifi return identifi overrid public listen observ get observ return observ overrid public class extend annot get annot return annot protect cach entri event convert valu cach event convert super super convert cach entri event event cach entri event return event convert null event instanceof event impl bit hacki let type pass type event impl event impl event impl event event type ev type new event type event impl command retri event impl pre event impl get type object new valu convert convert event impl get key event impl get old valu event impl get old metadata event impl get valu event impl get metadata ev type new valu event impl get valu event impl clone event impl clone clone set valu new valu return event clone els return event event impl els throw new illeg argument except provid event org notif cachelisten event impl event impl convert use els return event event return return event overrid public boolean sync return sync overrid public void remov listen object listen super remov listen listen id cluster listen d remov listen id null list futur futur dist executor servic submit everywher new cluster listen remov callabl id futur futur futur tri futur get catch interrupt except e throw new cach listen except e catch execut except e throw new cach listen except e overrid protect set cach entri listen invoc remov listen invoc class extend annot annot object listen set cach entri listen invoc mark remov super remov listen invoc annot listen cach entri listen invoc li mark remov li instanceof deleg cach entri listen invoc deleg cach entri listen invoc li unregist return mark remov 
packag org marshal ext import java io except import java io object input import java io object output import java util set import org command cancel command import org command creat cach command import org command remov cach command import org command control lock control command import org command read distribut execut command import org command remot cach rpc command import org command remot cluster get command import org command remot cluster get command import org command remot singl rpc command import org command remot recoveri complet transact command import org command remot recoveri get doubt transact command import org command remot recoveri get doubt tx info command import org command remot recoveri tx complet notif command import org command tx commit command import org command tx prepar command import org command tx rollback command import org command tx version commit command import org command tx version prepar command import org command tx totalord total order commit command import org command tx totalord total order non version prepar command import org command tx totalord total order rollback command import org command tx totalord total order version commit command import org command tx totalord total order version prepar command import org command write backup put map rpc command import org command write backup write rpc command import org command write invalid version command import org common marshal abstract extern import org common util util import org factori global compon registri import org marshal core id import org statetransf state request command import org statetransf state respons command import org stream impl stream request command import org stream impl stream respons command import org stream impl stream segment respons command import org util byte string import org xsite singl site rpc command import org xsite site admin command import org xsite statetransf site state push command import org xsite statetransf site state transfer control command extern charg marshal cach specif command read time marshal abl locat right cach marshal provid extern implement follow author galder zamarr sinc public final class cach rpc command extern extend abstract extern cach rpc command privat final global compon registri gcr privat final replic command extern cmd ext public cach rpc command extern global compon registri gcr replic command extern cmd ext cmd ext cmd ext gcr gcr overrid public set class extend cach rpc command get type class noinspect uncheck set class extend cach rpc command core command util set distribut execut command class lock control command class state request command class state respons command class cluster get command class singl rpc command class commit command class prepar command class rollback command class remov cach command class tx complet notif command class get doubt transact command class get doubt tx info command class complet transact command class version prepar command class creat cach command class cancel command class version commit command class site admin command class total order non version prepar command class total order version prepar command class total order commit command class total order version commit command class total order rollback command class site state transfer control command class site state push command class singl site rpc command class cluster get command class stream request command class stream segment respons command class stream respons command class backup write rpc command class backup put map rpc command class invalid version command class interest cach specif replic command core command add gcr get modul properti modul cach rpc command return core command overrid public void write object object output output cach rpc command command throw except header type method id cmd ext write command header output command byte string cach name command get cach name byte string write object output cach name take cach marshal gener payload rest command use cach marshal write byte origin payload marshal paramet command output privat void marshal paramet cach rpc command cmd object output oo throw except cmd ext write command paramet oo cmd overrid public cach rpc command read object object input input throw except class find except header byte type input read byte byte method id byte input read short byte string cach name byte string read object input creat object input cach rpc command cach rpc command cmd ext stream method id type cach name cmd ext read command paramet input cach rpc command return cach rpc command overrid public integ get id return id 
packag org persist factori import java util array list import java util collect import java util list import org configur cach store configur import org factori scope scope import org factori scope scope import org util log log import org util log log factori registri multipl link cach store factori object author sebastian laskawiec sinc scope scope public class cach store factori registri privat static final log log log factori get log cach store factori registri class privat list cach store factori factori collect synchron list new array list cach store factori public cach store factori registri factori add new local class loader cach store factori creat new object base configur param store configur cach store configur return instanc creat base configur throw org common cach configur except instanc could n creat public object creat instanc store configur store configur cach store factori factori factori object instanc factori creat instanc store configur instanc null return instanc throw log unabl instanti class store configur get class public store configur process store configur store configur store configur cach store factori factori factori store configur process configur factori process configur store configur process configur null return process configur return store configur add new factori process param cach store factori factori add public void add cach store factori cach store factori cach store factori cach store factori null throw log unabl add null custom store factori add cach store factori remov factori associ registri public void clear factori factori clear 
packag org topolog import java io except import java io object input import java io object output import java util collect import java util list import java util set import org common marshal instanc reus advanc extern import org common marshal marshal util import org distribut ch consist hash import org marshal core id import org remot transport address import org util log log import org util log log factori statu cach distribut state transfer point view p pend code null n state transfer progress p code topolog id increment everi time topolog chang e g member leav state transfer start end code rebal id modifi consist hash updat without requir state transfer e g member leav author dan berindei sinc public class cach topolog privat static log log log factori get log cach topolog class privat static final boolean trace log trace enabl privat final int topolog id privat final int rebal id privat final consist hash current privat final consist hash pend privat final consist hash union privat final phase phase privat list address actual member privat list persist persist d public cach topolog int topolog id int rebal id consist hash current consist hash pend phase phase list address actual member list persist persist d topolog id rebal id current pend null phase actual member persist d public cach topolog int topolog id int rebal id consist hash current consist hash pend consist hash union phase phase list address actual member list persist persist d pend null pend get member contain current get member phase phase throw new illeg argument except cach topolog pend consist hash must contain current consist hash member current current pend pend topolog id topolog id rebal id rebal id current current pend pend union union phase phase actual member actual member persist d persist d public int get topolog id return topolog id current consist hash public consist hash get current return current futur consist hash code null rebal progress public consist hash get pend return pend union current futur consist hash code null rebal progress public consist hash get union return union id late start rebal public int get rebal id return rebal id return node member consist hash code pend null otherwis member current see get actual member public list address get member pend null return pend get member els current null return current get member els return collect empti list return node activ member cach equal link get member cach avail strict subset cach degrad mode see org partitionhandl avail mode public list address get actual member return actual member public list persist get member persist d return persist d read oper alway go current owner public consist hash get read consist hash switch phase case assert pend null assert union null return current case return pend case case assert pend null assert union null return current case assert pend null return union case assert union null return pend default throw new illeg state except rebal progress write oper go union current futur owner public consist hash get write consist hash switch phase case assert pend null assert union null return current case return pend case case case case assert pend null assert union null return union default throw new illeg state except overrid public boolean equal object return true null get class get class return fals cach topolog cach topolog topolog id topolog id return fals rebal id rebal id return fals current null current equal current current null return fals pend null pend equal pend pend null return fals union null union equal union union null return fals actual member null actual member equal actual member actual member null return fals return true overrid public int hash code int result topolog id result result rebal id result result current null current hash code result result pend null pend hash code result result union null union hash code result result actual member null actual member hash code return result overrid public string string return cach topolog id topolog id rebal id rebal id current current pend pend union union phase phase actual member actual member persist d persist d public final void log rout tabl inform trace log tracef current consist hash rout tabl current get rout tabl string pend null log tracef pend consist hash rout tabl pend get rout tabl string union null log tracef union consist hash rout tabl union get rout tabl string public phase get phase return phase public static class extern extend instanc reus advanc extern cach topolog overrid public void write object object output output cach topolog cach topolog throw except output write int cach topolog topolog id output write int cach topolog rebal id output write object cach topolog current output write object cach topolog pend output write object cach topolog union output write object cach topolog actual member output write object cach topolog persist d marshal util marshal enum cach topolog phase output overrid public cach topolog read object object input unmarshal throw except class find except int topolog id unmarshal read int int rebal id unmarshal read int consist hash current consist hash unmarshal read object consist hash pend consist hash unmarshal read object consist hash union consist hash unmarshal read object list address actual member list address unmarshal read object list persist persist d list persist unmarshal read object phase phase marshal util unmarshal enum unmarshal phase valu return new cach topolog topolog id rebal id current pend union phase actual member persist d overrid public integ get id return id overrid public set class extend cach topolog get type class return collect class extend cach topolog singleton cach topolog class phase rebal process use four phase guarante properti x write contain node tx read requir tx read x read non empti subset node allow block read command read entri node own accord read old entri wipe come link phase public enum phase current set work read write fals use cach n use phase topolog chang pend use read write true interim state read ch set local use previou topolog say node read whilst write contain member merg fals use state transfer read current write union true use state transfer complet read write union fals intermedi state prevent read pend write union fals privat static final phase valu phase valu privat final boolean rebal phase boolean rebal rebal rebal public boolean rebal return rebal public static phase valu int ordin return valu ordin 
packag org topolog import java io except import java io object input import java io object output import java util array list import java util list import java util concurr complet futur import org command replic command import org common cach except import org common marshal marshal util import org distribut ch consist hash import org factori annot inject import org partitionhandl avail mode import org remot respons except respons import org remot respons success respons import org remot respons unsuccess respons import org remot transport address import org util log log import org util log log factori control command cach membership rebal oper code cach rpc command need run coordin even coordin n certain cach run author dan berindei sinc public class cach topolog control command implement replic command public enum type member coordin node request join cluster member signal want leav cluster member confirm finish topolog chang rebal confirm send topolog link cach topolog phase link cach topolog phase link cach topolog phase rebal phase instal topolog chang link cach topolog phase phase member request cach shutdown coordin member coordin updat consist hash use signal end rebalanc well coordin start rebal oper coordin request inform run cach updat stabl topolog tell member shutdown cach member coordin enabl disabl rebalanc check whether rebalanc enabl chang avail queri rebalanc progress privat static final type valu privat static final log log log factori get log cach topolog control command class public static final byte privat transient local topolog manag local topolog manag privat transient cluster topolog manag cluster topolog manag privat string cach name privat type type privat address sender privat cach join info join info privat int topolog id privat int rebal id privat consist hash current privat consist hash pend privat cach topolog phase phase privat avail mode avail mode privat list address actual member privat list persist persist d privat throwabl throwabl privat int view id command id uniqu test public cach topolog control command cach name null public cach topolog control command string cach name type type address sender int view id cach name cach name type type sender sender view id view id public cach topolog control command string cach name type type address sender cach join info join info int view id cach name cach name type type sender sender join info join info view id view id public cach topolog control command string cach name type type address sender int topolog id int rebal id throwabl throwabl int view id cach name cach name type type sender sender topolog id topolog id rebal id rebal id throwabl throwabl view id view id public cach topolog control command string cach name type type address sender avail mode avail mode int view id cach name cach name type type sender sender avail mode avail mode view id view id public cach topolog control command string cach name type type address sender cach topolog cach topolog avail mode avail mode int view id cach name cach name type type sender sender topolog id cach topolog get topolog id rebal id cach topolog get rebal id current cach topolog get current pend cach topolog get pend phase cach topolog get phase avail mode avail mode actual member cach topolog get actual member persist d cach topolog get member persist d view id view id inject public void init local topolog manag local topolog manag cluster topolog manag cluster topolog manag local topolog manag local topolog manag cluster topolog manag cluster topolog manag overrid public complet futur object invok async throw throwabl final boolean trace log trace enabl log factori push cach name trace tri object respons valu perform return complet futur complet futur success respons creat respons valu catch interrupt except e log tracef command execut interrupt cach manag shut return complet futur complet futur unsuccess respons catch except log except handl command todo anistor command awar request dispatch wrap except instead return complet futur complet futur new except respons final log factori pop trace privat object perform throw except switch type member coordin case return cluster topolog manag handl join cach name sender join info view id case cluster topolog manag handl leav cach name sender view id return null case cluster topolog manag handl rebal phase confirm cach name sender topolog id throwabl view id return null case cluster topolog manag handl shutdown request cach name return null coordin member case local topolog manag handl topolog updat cach name new cach topolog topolog id rebal id current pend phase actual member persist d avail mode view id sender return null case local topolog manag handl stabl topolog updat cach name new cach topolog topolog id rebal id current pend cach topolog phase actual member persist d sender view id return null case local topolog manag handl rebal cach name new cach topolog topolog id rebal id current pend phase actual member persist d view id sender return null case return local topolog manag handl statu request view id case local topolog manag handl cach shutdown cach name return null rebal polici control case return cluster topolog manag rebalanc enabl cach name case cluster topolog manag set rebalanc enabl cach name true return true case cluster topolog manag set rebalanc enabl cach name fals return true avail mode case cluster topolog manag forc avail mode cach name avail mode return true rebalanc statu case return cluster topolog manag get rebalanc statu cach name default throw new cach except unknown cach topolog control command type type public string get cach name return cach name public address get origin return sender public type get type return type public int get topolog id return topolog id public consist hash get current return current public consist hash get pend return pend public avail mode get avail mode return avail mode public throwabl get throwabl return throwabl public cach topolog phase get phase return phase overrid public byte get command id return overrid public void write object output output throw except marshal util marshal string cach name output marshal util marshal enum type output switch type case output write object sender output write object join info output write int view id return case output write object sender output write int view id return case output write object sender output write object throwabl output write int view id output write int topolog id return case output write object sender output write object current output write object pend marshal util marshal enum phase output marshal util marshal collect actual member output marshal util marshal collect persist d output marshal util marshal enum avail mode output output write int topolog id output write int rebal id output write int view id return case output write object sender output write object current output write object pend marshal util marshal collect actual member output marshal util marshal collect persist d output output write int topolog id output write int rebal id output write int view id return case output write object sender output write object current output write object pend marshal util marshal enum phase output marshal util marshal collect actual member output marshal util marshal collect persist d output output write int topolog id output write int rebal id output write int view id return case output write int view id return case marshal util marshal enum avail mode output return case case case case default overrid public void read object input input throw except class find except cach name marshal util unmarshal string input type marshal util unmarshal enum input ordin type ordin switch type case sender address input read object join info cach join info input read object view id input read int return case sender address input read object view id input read int return case sender address input read object throwabl throwabl input read object view id input read int topolog id input read int return case sender address input read object current consist hash input read object pend consist hash input read object phase marshal util unmarshal enum input cach topolog phase valu actual member marshal util unmarshal collect input array list new persist d marshal util unmarshal collect input array list new avail mode marshal util unmarshal enum input avail mode valu topolog id input read int rebal id input read int view id input read int return case sender address input read object current consist hash input read object pend consist hash input read object actual member marshal util unmarshal collect input array list new persist d marshal util unmarshal collect input array list new topolog id input read int rebal id input read int view id input read int return case sender address input read object current consist hash input read object pend consist hash input read object phase marshal util unmarshal enum input cach topolog phase valu actual member marshal util unmarshal collect input array list new persist d marshal util unmarshal collect input array list new topolog id input read int rebal id input read int view id input read int return case view id input read int return case avail mode marshal util unmarshal enum input avail mode valu return case case case case default overrid public string string return cach topolog control command cach cach name type type sender sender join info join info topolog id topolog id rebal id rebal id current current pend pend avail mode avail mode phase phase actual member actual member throwabl throwabl view id view id overrid public boolean return valu expect return true overrid public boolean block return true 
packag org interceptor impl import org command visit command import org context invoc context import org interceptor base async interceptor import org util log log import org util log log factori alway end chain directli front cach simpli call cach use reflect call result modif add modif end modif list key current transact author bela ban author mircea marku jboss com author dan berindei sinc public class call interceptor extend base async interceptor privat static final log log log factori get log call interceptor class privat static final boolean trace log trace enabl overrid public object visit command invoc context ctx visit command command throw throwabl trace log tracef invok command get class get simpl name return command perform ctx 
packag org client hotrod impl oper import java net socket address import java util set import java util concurr atom atom integ import org client hotrod configur configur import org client hotrod impl protocol codec import org client hotrod impl protocol header param import org client hotrod impl transport transport import org client hotrod impl transport transport factori import net jcip annot immut correspond clear oper defin href http commun jboss org wiki hot rod protocol hot rod protocol specif author mircea marku jboss com sinc immut public class clear oper extend retri failur oper void public clear oper codec codec transport factori transport factori byte cach name atom integ topolog id int flag configur cfg super codec transport factori cach name topolog id flag cfg overrid protect transport get transport int retri count set socket address fail server return transport factori get transport fail server cach name overrid protect void execut oper transport transport header param param write header transport transport flush read header valid transport param return null 
packag org common util import java util iter import java util spliter import java util spliter import java util function consum import java util stream stream import java util stream stream support class consist exclus static method oper return closeabl interfac help want chang give interfac appropri closeabl interfac sinc public class closeabl privat closeabl take provid closeabl iter wrap appropri use closeabl spliter close iter spliter close param iter closeabl iter chang spliter param size approxim size iter size know link long pass param characterist characterist give spliter defin link spliter interfac param type iter spliter return spliter close close provid iter public static closeabl spliter spliter closeabl iter extend iter long size int characterist return new closeabl iter closeabl spliter iter size characterist creat closeabl spliter give spliter noth close call param spliter spliter wrap allow becom closeabl spliter param type spliter return spliter noth close public static closeabl spliter spliter spliter spliter return new spliter closeabl spliter spliter creat closeabl spliter close close underli stream well param stream stream chang closeabl spliter param type stream return spliter close also close underli stream public static closeabl spliter spliter stream stream return new stream closeabl spliter stream creat closeabl iter close close underli stream well param stream stream chang closeabl iter param type stream return iter close also close underli stream public static closeabl iter iter stream extend stream return new stream closeabl iter stream creat closeabl iter give iter noth close call param iter iter wrap allow becom closeabl iter param type iter return iter noth close public static closeabl iter iter iter extend iter return new iter closeabl iter iter creat stream close also close underli spliter param spliter spliter back stream subsequ close param parallel whether return stream parallel param type stream return stream use public static stream stream closeabl spliter spliter boolean parallel stream stream stream support stream spliter parallel stream close spliter close return stream creat stream close also close underli iter param iter iter back stream subsequ close param parallel whether return stream parallel param size size iter know otherwis link long pass param characterist characterist iter use param type stream return stream use public static stream stream closeabl iter iter boolean parallel long size int characterist stream stream stream support stream spliter spliter iter size characterist parallel stream close iter close return stream privat static class iter closeabl iter implement closeabl iter privat final iter extend iter public iter closeabl iter iter extend iter iter iter overrid public void close noth overrid public boolean next return iter next overrid public next return iter next overrid public void remov iter remov privat static class spliter closeabl spliter implement closeabl spliter privat final spliter spliter public spliter closeabl spliter spliter spliter spliter spliter overrid public void close overrid public boolean tri advanc consum super action return spliter tri advanc action overrid public spliter tri split return spliter tri split overrid public long estim size return spliter estim size overrid public int characterist return spliter characterist privat static class closeabl iter closeabl spliter extend spliter closeabl spliter privat final closeabl iter extend iter closeabl iter closeabl spliter closeabl iter extend iter long size int characterist super spliter spliter iter size characterist iter iter overrid public void close iter close privat static class stream closeabl iter extend iter closeabl iter privat final stream extend stream public stream closeabl iter stream extend stream super stream iter stream stream overrid public void close stream close privat static class stream closeabl spliter extend spliter closeabl spliter privat final stream stream public stream closeabl spliter stream stream super stream spliter stream stream overrid public void close stream close 
packag org stat impl import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import static org stat impl stat key import java io serializ import java util array list import java util hash map import java util list import java util map import java util set import java util concurr complet futur import org advanc cach import org cach import org configur cach cach mode import org configur cach configur import org distexec default executor servic import org distexec distribut callabl import org evict activ manag import org evict passiv manag import org factori annot inject import org factori annot start import org factori annot stop import org interceptor async interceptor import org interceptor impl cach loader interceptor import org interceptor impl cach writer interceptor import org interceptor impl invalid interceptor import org jmx annot display type import org jmx annot bean import org jmx annot manag attribut import org jmx annot measur type import org jmx annot unit import org stat cluster cach stat import org stat stat import org util concurr lock lock manag import org util log log import org util log log factori bean object name cluster cach stat descript gener cluster statist time hit miss ratio etc public class cluster cach stat impl extend abstract cluster stat implement cluster cach stat privat static string new string privat static final log log log factori get log cluster cach stat impl class privat default executor servic de privat advanc cach cach privat doubl read write ratio privat doubl hit ratio public cluster cach stat impl super log inject public void inject depend cach cach configur configur cach cach get advanc cach statist enabl configur jmx statist enabl start public void start de secur action get default executor servic cach stop public void stop de null de shutdown de shutdown overrid void updat stat throw except list map string number respons list new array list list complet futur map string number respons futur de submit everywher new distribut cach stat callabl complet futur map string number cf respons futur respons list add cf get string att put long attribut respons list att put long attribut averag respons list put long attribut averag respons list put long attribut averag respons list put int attribut respons list put int attribut respons list long number entri memori get cach mode cach replic cach get stat get current number entri memori long add doubl attribut respons list stat map put number entri memori stat map put cach size updat time sinc start respons list updat ratio respons list inform overrid manag attribut descript cluster wide total averag number millisecond read oper cach display name cluster wide total averag read time unit unit display type display type public long get averag read time return get stat long overrid manag attribut descript cluster wide total averag number millisecond remov oper cach display name cluster wide total averag remov time unit unit display type display type public long get averag remov time return get stat long overrid manag attribut descript cluster wide averag number millisecond write oper cach display name cluster wide averag write time unit unit display type display type public long get averag write time return get stat long manag attribut descript cluster wide total number cach evict oper display name cluster wide total number cach evict measur type measur type display type display type overrid public long get evict return get stat long manag attribut descript cluster wide total number cach attribut hit display name cluster wide total number cach hit measur type measur type display type display type overrid public long get hit return get stat long manag attribut descript cluster wide total percentag hit hit miss ratio cach display name cluster wide total hit ratio unit unit display type display type overrid public doubl get hit ratio statist enabl fetch cluster wide stat need return hit ratio els return overrid manag attribut descript cluster wide total number cach attribut miss display name cluster wide total number cach miss measur type measur type display type display type public long get miss return get stat long manag attribut descript cluster wide total number entri current cach includ passiv entri display name cluster wide total number current cach entri display type display type public int get number entri return get stat int overrid manag attribut descript cluster wide total number entri current store memori display name cluster wide total number memori cach entri display type display type public int get current number entri memori return get stat int manag attribut descript cluster wide read write ratio cach display name cluster wide read write ratio unit unit display type display type overrid public doubl get read write ratio statist enabl fetch cluster wide stat need return read write ratio els return manag attribut descript cluster wide total number cach remov hit display name cluster wide total number cach remov hit measur type measur type display type display type overrid public long get remov hit return get stat long manag attribut descript cluster wide total number cach remov key find display name cluster wide total number cach remov miss measur type measur type display type display type overrid public long get remov miss return get stat long manag attribut descript cluster wide total number cach attribut put oper display name cluster wide total number cach put measur type measur type display type display type overrid public long get store return get stat long manag attribut descript number second sinc first cach node start display name number second sinc first cach node start measur type measur type display type display type overrid public long get time sinc start return get stat long overrid public int get current number entri return get number entri overrid public long get total number entri return get store overrid manag attribut descript amount byte heap memori use across cluster cach display name cluster wide sheap memori use display type display type public long get heap memori use return get stat long overrid public long get retriev return get hit get miss overrid public void reset super reset read write ratio hit ratio manag attribut descript total number exclus lock avail cluster display name cluster wide total number lock measur type measur type display type display type overrid public int get number lock avail return get stat int manag attribut descript total number lock hold cluster display name cluster wide total number lock hold measur type measur type display type display type overrid public int get number lock hold return get stat int overrid manag attribut descript total number invalid cluster display name cluster wide total number invalid measur type measur type display type display type public long get invalid return get stat long manag attribut descript total number activ cluster display name cluster wide total number activ measur type measur type display type display type overrid public long get activ return get stat long manag attribut descript total number passiv cluster display name cluster wide total number passiv measur type measur type display type display type overrid public long get passiv return get stat long manag attribut descript total number cacheload load oper cluster display name cluster wide total number cacheload load measur type measur type display type display type overrid public long get cach loader load return get stat long manag attribut descript total number cacheload load miss cluster display name cluster wide total number cacheload miss measur type measur type display type display type overrid public long get cach loader miss return get stat long manag attribut descript total number cachestor store oper cluster display name cluster wide total number cachestor store measur type measur type display type display type overrid public long get store write return get stat long privat void updat time sinc start list map string number respons list long time sinc start max map string number respons list number time sinc start get time sinc start long valu time sinc start max time sinc start max time sinc start long valu stat map put time sinc start max privat void updat ratio list map string number respons list long total hit long total retriev long sum read long sum write map string number respons list long hit get long valu long miss get long valu total hit hit sum read total hit miss sum write get long valu total retriev hit miss hit ratio total retriev doubl total hit total retriev read write ratio sum write doubl sum read sum write privat static extend async interceptor get first interceptor extend advanc cach cach class interceptor class return interceptor class cast cach get async interceptor chain find interceptor extend interceptor class privat static cach mode get cach mode cach cach return cach get cach configur cluster cach mode privat static class distribut cach stat callabl implement distribut callabl object object map string number serializ privat static final long serial version privat transient advanc cach object object remot cach overrid public map string number call throw except map string number map new hash map stat stat remot cach get stat map put stat get averag read time map put stat get averag write time map put stat get averag remov time map put stat get evict map put stat get hit map put stat get miss get cach mode remot cach replic doubl number entri memori stat get current number entri memori number entri memori remot cach get cach configur cluster hash num owner map put number entri memori map put stat get heap memori use map put stat get store map put stat get remov hit map put stat get remov miss map put stat get time sinc start lock manag lock manag remot cach get lock manag map put lock manag get number lock hold number lock avail expos lock manag interfac map put invalid invalid interceptor invalid interceptor get first interceptor extend remot cach invalid interceptor class invalid interceptor null map put invalid interceptor get invalid els map put passiv passiv manag p manag remot cach get compon registri get compon passiv manag class p manag null map put p manag get passiv els map put activ activ manag manag remot cach get compon registri get compon activ manag class manag null map put manag get activ count els map put cach loader cach loader interceptor interceptor get first interceptor extend remot cach cach loader interceptor class interceptor null map put interceptor get cach loader load map put interceptor get cach loader miss els map put map put cach store cach writer interceptor interceptor get first interceptor extend remot cach cach writer interceptor class interceptor null map put interceptor get write store els map put return map overrid public void set environ cach object object cach set object input key remot cach cach get advanc cach 
packag org topolog import static org util log log factori import java util array list import java util collect import java util collect import java util hash map import java util hash set import java util list import java util map import java util option import java util set import org advanc cach import org common cach except import org common util immut import org conflict conflict manag factori import org conflict impl default conflict manag import org distribut ch consist hash import org distribut ch consist hash factori import org globalst scop persist state import org lifecycl compon statu import org manag emb cach manag import org partitionhandl avail mode import org partitionhandl impl avail strategi import org partitionhandl impl avail strategi context import org remot transport address import org remot transport transport import org statetransf rebal type import org util log log import org util log log factori import net jcip annot guard keep track cach statu member current pend consist hash rebal statu author dan berindei sinc public class cluster cach statu implement avail strategi context hot rod client start topolog start forc updat public static final int public static final int privat static final log log log factori get log cluster cach statu class privat static boolean trace log trace enabl privat final emb cach manag cach manag privat final string cach name privat final avail strategi avail strategi privat final cluster topolog manag cluster topolog manag privat final persist manag persist manag privat final boolean resolv conflict merg privat final rebal type rebal type privat transport transport privat int initi topolog id minim cach cluster configur privat volatil cach join info join info cach member may receiv state yet privat volatil list address expect member capac factor member privat volatil map address float capac factor cach member yet receiv state alway includ member list privat volatil list address joiner persist state exist privat option scope persist state persist state cach topolog consist hash contain member receiv receiv state member consist hash must includ member list privat volatil cach topolog current topolog privat volatil cach topolog stabl topolog privat volatil avail mode avail mode avail mode privat volatil list address queue rebal member privat volatil boolean rebalanc enabl true privat volatil boolean rebal progress fals privat rebal confirm collector rebal confirm collector privat compon statu statu public cluster cach statu emb cach manag cach manag string cach name avail strategi avail strategi rebal type rebal type cluster topolog manag cluster topolog manag transport transport option scope persist state state persist manag persist manag boolean resolv conflict merg cach manag cach manag cach name cach name avail strategi avail strategi cluster topolog manag cluster topolog manag transport transport persist state state resolv conflict merg resolv conflict merg rebal type rebal type current topolog null stabl topolog null expect member collect empti list capac factor collect empti map joiner collect empti list persist manag persist manag state present scop persist state rebalanc enabl fals avail mode avail mode statu compon statu trace log tracef cach initi persist state cach name persist state present public cach join info get join info return join info overrid public list address get expect member return expect member overrid public synchron void queue rebal list address new member new member null new member empti log debugf queue rebal cach member cach name new member queue rebal member new member start queu rebal public boolean total order return join info total order public boolean distribut return join info get cach mode distribut public map address float get capac factor return capac factor overrid public cach topolog get current topolog return current topolog overrid public cach topolog get stabl topolog return stabl topolog overrid public avail mode get avail mode return avail mode overrid public synchron void updat avail mode list address actual member avail mode new avail mode boolean cancel rebal boolean mode chang set avail mode new avail mode mode chang actual member equal current topolog get actual member log debugf updat avail cach cach name new avail mode consist hash new pend current topolog get pend cach topolog phase new phase current topolog get phase cancel rebal new pend null new phase cach topolog phase rebal confirm collector null cach topolog new topolog new cach topolog current topolog get topolog id current topolog get rebal id current topolog get current new pend new phase actual member persist manag map address actual member set current topolog new topolog cluster topolog manag broadcast topolog updat cach name new topolog new avail mode total order distribut overrid public synchron void updat topolog merg cach topolog current topolog cach topolog stabl topolog avail mode avail mode boolean resolv conflict log debugf updat topolog merg cach current topolog stabl topolog avail mode resolv conflict cach name current topolog stabl topolog avail mode resolv conflict current topolog current topolog stabl topolog stabl topolog avail mode avail mode current topolog null cluster topolog manag broadcast topolog updat cach name current topolog avail mode total order distribut resolv conflict merg resolv conflict advanc cach cach cach manag get cach cach name get advanc cach default conflict manag conflict manag default conflict manag conflict manag factori get cach conflict manag resolv conflict current topolog stabl topolog null cluster topolog manag broadcast stabl topolog updat cach name stabl topolog total order distribut return code true joiner alreadi member code fals otherwis guard privat boolean add member address joiner cach join info join info expect member contain joiner return fals valid member allow join persist state present join info get persist state checksum present statu compon statu throw log node without persist state join cach state joiner cach name els persist state get get checksum join info get persist state checksum get throw log node incompat state join cach joiner cach name els join info get persist state checksum present throw log node persist state join cluster without state joiner cach name join info null join info join info hash map address float new capac factor new hash map address float capac factor new capac factor put join join info get capac factor capac factor immut immut map wrap new capac factor expect member immut add expect member joiner persist manag add persist address map joiner join info get persist joiner immut add joiner joiner trace log tracef add joiner cach persist uuid member joiner joiner cach name join info get persist expect member joiner return true return code true leaver member code fals otherwis guard privat boolean remov member address leaver expect member contain leaver trace log tracef tri remov node cach member member leaver cach name expect member return fals expect member immut remov expect member leaver hash map address float new capac factor new hash map address float capac factor new capac factor remov leaver capac factor immut immut map wrap new capac factor joiner immut remov joiner leaver trace log tracef remov node cach member joiner leaver cach name expect member joiner return true return code true member list chang code fals otherwis guard privat boolean retain member list address new cluster member new cluster member contain expect member trace log tracef cluster member updat cach abrupt leaver detect cach member exist member cach name new cluster member expect member return fals expect member immut retain expect member new cluster member joiner immut retain joiner new cluster member trace log tracef cluster member updat cach member joiner cach name expect member joiner return true guard privat void set current topolog cach topolog new topolog current topolog new topolog updat joiner list new topolog null joiner immut remov expect member new topolog get current get member trace log tracef cach topolog updat member joiner cach name current topolog expect member joiner new topolog null new topolog log rout tabl inform guard privat void set stabl topolog cach topolog new topolog stabl topolog new topolog trace log tracef cach stabl topolog updat member joiner topolog cach name expect member joiner new topolog privat boolean need consist hash updat list current member alway includ list pend member need check one list also return fals hs null return expect member equal current topolog get member privat list address prune invalid member list address possibl member return immut retain possibl member expect member public boolean rebal progress return rebal confirm collector null public rebalanc statu get rebalanc statu rebal enabl return rebalanc statu els rebal progress return rebalanc statu els queue rebal member null return rebalanc statu els return rebalanc statu public synchron void confirm rebal phase address member int receiv topolog id throw except rebal confirm collector null throw new cach except string format receiv invalid rebal confirm cach n rebal progress member cach name rebal confirm collector confirm phase member receiv topolog id call member list updat way link remov member address link retain member etc return code true rebal confirm updat code fals confirm need rebal alreadi confirm anoth way e g last member confirm guard privat void updat member rebal confirm collector null reli avail strategi updat current topolog beforehand rebal confirm collector updat member current topolog get member public synchron void handl cluster view throw except clean cluster cach statu instanc long member current topolog null return list address new cluster member transport get member boolean cach member modifi retain member new cluster member avail strategi cluster view chang new cluster member cach member modifi updat member guard call handl cluster view leav confirm rebal phase privat void end rebal cach topolog new topolog rebal progress fals cach topolog current topolog get current topolog current topolog null log tracef rebal finish member cach cach name return assert current topolog get phase rebal int current topolog id current topolog get topolog id cluster wide rebal complet cach name current topolog id list address member current topolog get member switch rebal type case new topolog new cach topolog current topolog id current topolog get rebal id current topolog get current current topolog get pend cach topolog phase member persist manag map address member break case new topolog new cach topolog current topolog id current topolog get rebal id current topolog get pend null cach topolog phase member persist manag map address member break default throw new illeg state except set current topolog new topolog new topolog get phase cach topolog phase rebal confirm collector new rebal confirm collector cach name current topolog id member end read phase els rebal confirm collector null avail strategi rebal end member cluster topolog manag broadcast topolog updat cach name new topolog avail mode total order distribut new topolog get phase cach topolog phase start queu rebal guard call handl cluster view leav confirm rebal phase privat void end read phase cach topolog new topolog cach topolog current topolog get current topolog assert current topolog null happen assert current topolog get phase cach topolog phase list address member current topolog get member new topolog new cach topolog current topolog get topolog id current topolog get rebal id current topolog get current current topolog get pend cach topolog phase member persist manag map address member set current topolog new topolog rebal confirm collector new rebal confirm collector cach name current topolog get topolog id member end read new phase member cluster topolog manag broadcast topolog updat cach name new topolog avail mode total order distribut guard call handl cluster view leav confirm rebal phase privat void end read new phase cach topolog new topolog cach topolog current topolog get current topolog assert current topolog null assert current topolog get phase cach topolog phase list address member current topolog get member new topolog new cach topolog current topolog get topolog id current topolog get rebal id current topolog get pend null cach topolog phase member persist manag map address member set current topolog new topolog rebal confirm collector null cluster topolog manag broadcast topolog updat cach name new topolog avail mode total order distribut start queu rebal new member n realli use prune invalid member use expect member overrid public synchron void updat current topolog list address new member current topolog might null joiner becom coordin current topolog null creat initi cach topolog consist hash factori consist hash consist hash factori get join info get consist hash factori int topolog id current topolog get topolog id int rebal id current topolog get rebal id consist hash current current topolog get current consist hash pend current topolog get pend need consist hash updat log tracef cach member list updat cach topolog n need chang cach name current topolog return new member empti log tracef cach long member remov topolog cach name set current topolog null set stabl topolog null rebal confirm collector null remov cach cach statu map cluster topolog manag impl instead return list address new current member prune invalid member current get member consist hash new current new pend null cach topolog phase new phase cach topolog phase list address actual member new current member empti current member leav tri replac joiner log tracef current member leav initi statu cach cach name rebal confirm collector null new current member get expect member actual member new current member new current join info get consist hash factori creat join info get hash function join info get num owner join info get num segment new current member get capac factor els replic consist hash factori alloc segment member can n add member new current consist hash factori updat member current new current member get capac factor actual member new current member pend null new phase current topolog get phase new pend consist hash factori updat member pend new current member get capac factor actual member prune invalid member pend get member lose member state transfer could lead state two topolog concurr cluster need make sure topolog compat properti set cach topolog doc hold remov lose member cach topolog new topolog new cach topolog topolog id rebal id new current new pend new phase actual member persist manag map address actual member set current topolog new topolog rebal confirm collector null node cancel state transfer anoth topolog updat will not send topolog confirm log debugf cancel topolog confirm anoth topolog updat rebal confirm collector rebal confirm collector null cluster topolog manag broadcast topolog updat cach name new topolog avail mode total order distribut privat boolean set avail mode avail mode new avail mode new avail mode avail mode return fals log tracef cach avail chang cach name avail mode new avail mode avail mode new avail mode return true helper work immut list privat list immut add list list element list result new array list list result add element return collect unmodifi list result privat list immut remov list list element list result new array list list result remov element return collect unmodifi list result privat list immut remov list list list list list result new array list list result remov list return collect unmodifi list result privat list immut retain list list list list list result new array list list result retain list return collect unmodifi list result overrid public string string return cluster cach statu cach name cach name member expect member joiner joiner current topolog current topolog rebal confirm collector rebal confirm collector public synchron void merg partit map address cach statu respons statu respons tri statu respons empti throw new illeg argument except least one current topolog hash map address cach join info join info new hash map set cach topolog current topolog new hash set set cach topolog stabl topolog new hash set map entri address cach statu respons e statu respons entri set address sender e get key cach statu respons respons e get valu join info put sender respons get cach join info respons get cach topolog null current topolog add respons get cach topolog respons get stabl topolog null stabl topolog add respons get stabl topolog log debugf recov partit cach current topolog size cach name current topolog recov member join info current topolog stabl topolog automat detect coordin leav one partit continu progress rebal without reset cach topolog avail strategi partit merg statu respons catch except e log fail recov cach state cach name e guard privat void recov member map address cach join info join info collect cach topolog current topolog collect cach topolog stabl topolog expect member collect empti list tri preserv member order least first partit cach topolog topolog stabl topolog add member topolog get member join info cach topolog topolog current topolog add member topolog get member join info add joiner part topolog end map entri address cach join info e join info entri set expect member contain e get key add member e get key e get valu guard privat void add member collect address member add map address cach join info join info address member member add expect member contain member cach join info join info join info get member member stabl current topolog may member join info null add member member join info overrid public string get cach name return cach name public synchron cach statu respons join address joiner cach join info join info throw except boolean first member get current topolog null boolean member join add member joiner join info first member member join trace log tracef tri add node cach alreadi member member joiner joiner cach name expect member joiner return new cach statu respons null current topolog stabl topolog avail mode statu compon statu persist state present trace log tracef node join attempt reform previou cluster joiner allow proceed complet cluster cach topolog topolog restor cach topolog persist state get topolog null chang statu statu compon statu cluster topolog manag broadcast topolog updat cach name topolog avail mode total order distribut cluster topolog manag broadcast stabl topolog updat cach name topolog total order distribut return new cach statu respons null current topolog stabl topolog avail mode els first member node first join need instal initi cach topolog initi topolog creat initi cach topolog chang statu statu compon statu n need broadcast initi updat return cach topolog joiner need broadcast initi topolog stabl topolog cluster topolog manag broadcast stabl topolog updat cach name initi topolog total order distribut cach topolog topolog rebal get current topolog trigger avail strategi topolog instal topolog rebal null avail strategi join joiner return new cach statu respons null topolog rebal stabl topolog avail mode guard protect cach topolog restor cach topolog scope persist state state trace log tracef attempt restor cach cach name consist hash persist join info get consist hash factori persist state state remap address persist manag persist address persist null get expect member contain persist get member trace log tracef could restor cach one address miss cach name return null get expect member size persist get member size list address extran member new array list get expect member extran member remov persist get member throw log extran member join restor cach extran member cach name cach topolog initi topolog new cach topolog initi topolog id persist null cach topolog phase persist get member persist manag map address persist get member set current topolog initi topolog set stabl topolog initi topolog rebalanc enabl true avail mode avail mode return initi topolog guard protect cach topolog creat initi cach topolog log tracef initi statu cach cach name list address initi member get expect member consist hash initi join info get consist hash factori creat join info get hash function join info get num owner join info get num segment initi member get capac factor cach topolog initi topolog new cach topolog initi topolog id initi null cach topolog phase initi member persist manag map address initi member set current topolog initi topolog set stabl topolog initi topolog return initi topolog public synchron boolean leav address leaver throw except current topolog null return fals boolean actual leaver remov member leaver actual leaver return fals avail strategi grace leav leaver updat member return expect member empti public synchron void start queu rebal queue rebal member null n queue rebal may need broadcast stabl topolog updat stabl topolog null stabl topolog get topolog id current topolog get topolog id stabl topolog current topolog log tracef updat stabl topolog cach cach name stabl topolog cluster topolog manag broadcast stabl topolog updat cach name stabl topolog total order distribut return cach topolog cach topolog get current topolog rebal enabl log tracef postpon rebal cach rebalanc disabl cach name return rebal confirm collector null log tracef postpon rebal cach alreadi topolog chang progress cach name rebal confirm collector return queue rebal member empti log tracef ignor request rebal cach n member cach name return list address new member new array list address queue rebal member queue rebal member null log tracef rebalanc consist hash cach member cach name new member cach topolog null creat initi cach topolog return int new topolog id cach topolog get topolog id int new rebal id cach topolog get rebal id consist hash current cach topolog get current current null one node cach leav rebal trigger rebal actual start log tracef ignor request rebal cach n consist hash cach name return expect member contain new member new member remov expect member log tracef ignor request rebal cach new leaver cach name new member return consist hash factori ch factori get join info get consist hash factori updat add joiner alreadi check n leaver consist hash updat member ch factori updat member current new member get capac factor consist hash balanc ch factori rebal updat member boolean updat topolog fals boolean rebal fals rebal type rebal type updat topolog true els balanc equal current log tracef balanc current rebalanc updat topolog cach topolog get pend null els rebal true updat topolog cach topolog new topolog new cach topolog new topolog id cach topolog get rebal id balanc null cach topolog phase balanc get member persist manag map address balanc get member log tracef updat cach topolog without rebal cach name new topolog set current topolog new topolog cluster topolog manag broadcast topolog updat cach name new topolog get avail mode total order distribut els rebal cach topolog phase new phase switch rebal type case new phase cach topolog phase break case new phase cach topolog phase break default throw new illeg state except cach topolog new topolog new cach topolog new topolog id new rebal id current balanc new phase balanc get member persist manag map address balanc get member log tracef updat cach topolog rebal cach name new topolog set current topolog new topolog rebal progress true assert rebal confirm collector null rebal confirm collector new rebal confirm collector cach name new topolog get topolog id new topolog get member end rebal cluster topolog manag broadcast rebal start cach name new topolog total order distribut public boolean rebal enabl return rebalanc enabl cluster topolog manag rebalanc enabl public synchron void set rebal enabl boolean enabl rebalanc enabl enabl rebalanc enabl log debugf rebalanc enabl cach cach name start queu rebal els log debugf rebalanc disabl cach cach name public void forc rebal queue rebal get current topolog get member start queu rebal public void forc avail mode avail mode new avail mode avail strategi manual avail chang new avail mode public synchron void shutdown cach throw except statu compon statu statu compon statu cluster topolog manag set rebalanc enabl cach name fals cluster topolog manag broadcast shutdown cach cach name get current topolog total order distribut statu compon statu public synchron void set initi topolog id int initi topolog id initi topolog id initi topolog id 
packag org notif cachelisten cluster import java io except import java io object input import java io object output import java util collect import java util set import org cach import org common marshal abstract extern import org common marshal marshal util import org marshal core id import org metadata metadata import org notif cachelisten event cach entri creat event import org notif cachelisten event cach entri event import org notif cachelisten event cach entri expir event import org notif cachelisten event cach entri modifi event import org notif cachelisten event cach entri remov event import org notif cachelisten event transact event import org notif cachelisten event impl event impl import org remot transport address import org transact xa global transact event design use cluster listen sole event serial across wire send event back node cluster listen regist creat cluster event use link cluster event event cach entri event method author wburn sinc public class cluster event implement cach entri creat event cach entri remov event cach entri modifi event cach entri expir event transient cach cach privat final key privat final valu privat final old valu privat final metadata metadata privat final type type privat final global transact transact privat final address origin privat final boolean command retri public static cluster event event cach entri event event event instanceof cluster event return cluster event event old valu null type event type event get type boolean command retri switch event type case old valu cach entri remov event event get old valu command retri cach entri remov event event command retri break case command retri cach entri creat event event command retri break case command retri cach entri modifi event event command retri break case expir n retri command retri fals break default throw new illeg argument except cluster event creat cach entri remov cach entri creat cach entri modifi event global transact transact transact event event get global transact metadata metadata null event instanceof event impl metadata event impl event get metadata cluster event cluster event new cluster event event get key event get valu old valu metadata event type event get cach get cach manag get address transact command retri cluster event cach event get cach return cluster event cluster event key valu old valu metadata metadata type type address origin global transact transact boolean command retri key key valu valu old valu old valu metadata metadata type type origin origin transact transact command retri command retri overrid public get valu return valu overrid public metadata get metadata return metadata overrid public boolean command retri return command retri overrid public get old valu return old valu overrid public boolean creat return type type overrid public get key return key overrid public global transact get global transact return transact overrid public boolean origin local cach null return cach get cach manag get address equal origin return fals overrid public type get type return type overrid public boolean pre cluster event alway send valu updat return fals overrid public cach get cach return cach public static class extern extend abstract extern cluster event overrid public set class extend cluster event get type class return collect singleton cluster event class overrid public void write object object output output cluster event object throw except output write object object key output write object object valu output write object object old valu output write object object metadata marshal util marshal enum object type output output write object object origin output write object object transact output write boolean object command retri overrid public cluster event read object object input input throw except class find except return new cluster event input read object input read object input read object metadata input read object marshal util unmarshal enum input type valu address input read object global transact input read object input read boolean overrid public integ get id return id overrid public boolean equal object return true null get class get class return fals cluster event cluster event command retri command retri return fals cach null cach equal cach cach null return fals key null key equal key key null return fals metadata null metadata equal metadata metadata null return fals old valu null old valu equal old valu old valu null return fals origin null origin equal origin origin null return fals transact null transact equal transact transact null return fals type type return fals valu null valu equal valu valu null return fals return true overrid public int hash code int result cach null cach hash code result result key null key hash code result result valu null valu hash code result result old valu null old valu hash code result result metadata null metadata hash code result result type null type hash code result result transact null transact hash code result result origin null origin hash code result result command retri return result overrid public string string return cluster event type type cach cach key key valu valu old valu old valu transact transact retri command command retri origin origin 
packag org notif cachelisten cluster import java io except import java io object input import java io object output import java util collect import java util collect import java util set import java util import org cach import org common marshal abstract extern import org distexec distribut callabl import org marshal core id import org util log log import org util log log factori distribut callabl use invok rais notif cluster listen regist listen event author wburn sinc public class cluster event callabl implement distribut callabl void privat static final log log log factori get log cluster event callabl class privat static final boolean trace log trace enabl privat transient cluster cach notifi cluster cach notifi privat final identifi privat final collect extend cluster event event public cluster event callabl identifi cluster event event identifi collect singleton event public cluster event callabl identifi collect extend cluster event event identifi identifi event event overrid public void call throw except trace log tracef receiv cluster event notifi cluster listen id event identifi cluster cach notifi notifi cluster listen event identifi return null overrid public void set environ cach cach set input key cluster cach notifi cach get advanc cach get compon registri get compon cluster cach notifi class cluster event event event event cach cach overrid public string string final string builder sb new string builder cluster event callabl sb append identifi append identifi sb append event append event sb append return sb string public static class extern extend abstract extern cluster event callabl overrid public set class extend cluster event callabl get type class return collect singleton cluster event callabl class overrid public void write object object output output cluster event callabl object throw except output write object object identifi output write object object event overrid public cluster event callabl read object object input input throw except class find except return new cluster event callabl input read object collect extend cluster event input read object overrid public integ get id return id 
packag org configur cach import java util concurr time unit import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set defin cluster characterist cach author pmuir public class cluster configur public static final attribut definit cach mode attribut definit builder cach mode cach mode immut build public static final attribut definit long attribut definit builder remot timeout time unit milli build public static final attribut definit integ attribut definit builder invalid batch size immut build static attribut set attribut definit set return new attribut set cluster configur class privat final attribut cach mode cach mode privat final hash configur hash configur privat final configur l configur privat final state transfer configur state transfer configur privat final sync configur sync configur privat final partit handl configur partit handl configur privat final attribut set attribut cluster configur attribut set attribut hash configur hash configur configur l configur state transfer configur state transfer configur sync configur sync configur partit handl configur partit handl strategi attribut attribut check protect cach mode attribut attribut hash configur hash configur l configur l configur state transfer configur state transfer configur sync configur sync configur partit handl configur partit handl strategi cach mode see link cach mode inform variou cach mode avail public cach mode cach mode return cach mode get timeout use wait acknowledg make remot call call abort except throw public long remot timeout return sync configur repl timeout timeout use wait acknowledg make remot call call abort except throw public void remot timeout long timeout milli sync configur repl timeout timeout milli configur cluster behaviour presenc partit node failur public partit handl configur partit handl return partit handl configur public string cach mode string return cach mode null none cach mode string scatter cach threshold batch invalid send public int invalid batch size return attribut attribut get configur hash sub element public hash configur hash return hash configur method allow configur cach distribut cach method call automat enabl want disabl make sure call link org configur cach configur builder disabl public configur l return l configur configur sync sub element method invok user subsequ invok code async code two mutual exclus deprec sinc code repl timeout attribut link cluster configur deprec public sync configur sync return sync configur public state transfer configur state transfer return state transfer configur public attribut set attribut return attribut overrid public string string return cluster configur hash configur hash configur l configur l configur state transfer configur state transfer configur sync configur sync configur partit handl configur partit handl configur attribut attribut overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals cluster configur cluster configur obj attribut null attribut null return fals els attribut equal attribut return fals hash configur null hash configur null return fals els hash configur equal hash configur return fals l configur null l configur null return fals els l configur equal l configur return fals partit handl configur null partit handl configur null return fals els partit handl configur equal partit handl configur return fals state transfer configur null state transfer configur null return fals els state transfer configur equal state transfer configur return fals sync configur null sync configur null return fals els sync configur equal sync configur return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code result prime result hash configur null hash configur hash code result prime result l configur null l configur hash code result prime result partit handl configur null partit handl configur hash code result prime result state transfer configur null state transfer configur hash code result prime result sync configur null sync configur hash code return result 
packag org configur cach import static org configur cach cluster configur import static org configur cach cluster configur import java util array import java util concurr time unit import org common configur builder import org common configur attribut attribut set import org configur global global configur import org util log log import org util log log factori defin cluster characterist cach author pmuir public class cluster configur builder extend abstract configur child builder implement cluster configur child builder builder cluster configur privat static final log log log factori get log cluster configur builder class log class privat final hash configur builder hash configur builder privat final configur builder l configur builder privat final state transfer configur builder state transfer configur builder privat final sync configur builder sync configur builder privat final partit handl configur builder partit handl configur builder privat final attribut set attribut cluster configur builder configur builder builder super builder attribut cluster configur attribut definit set hash configur builder new hash configur builder l configur builder new configur builder state transfer configur builder new state transfer configur builder sync configur builder new sync configur builder partit handl configur builder new partit handl configur builder cach mode see link cach mode inform variou cach mode avail public cluster configur builder cach mode cach mode cach mode attribut attribut set cach mode return public cach mode cach mode return attribut attribut get timeout use wait acknowledg make remot call call abort except throw public cluster configur builder remot timeout long l sync configur builder repl timeout l return timeout use wait acknowledg make remot call call abort except throw public cluster configur builder remot timeout long l time unit unit return remot timeout unit milli l scatter cach threshold batch invalid send public cluster configur builder invalid batch size int size attribut attribut set size return configur hash sub element overrid public hash configur builder hash return hash configur builder method allow configur cach distribut cach explicitli enabl call link configur builder enabl overrid public configur builder l return l configur builder configur code state transfer sub element distribut replic cach n effect mode cach overrid public state transfer configur builder state transfer return state transfer configur builder overrid public sync configur builder sync cach mode synchron throw log sync properti config async cach return sync configur builder overrid public partit handl configur builder partit handl return partit handl configur builder overrid public void valid builder validat array list hash configur builder l configur builder sync configur builder state transfer configur builder partit handl configur builder validat valid cach mode scatter hash num owner hash num owner set throw log scatter cach need singl owner hash num owner org transact transact mode transact mode transact transact mode transact mode null transact mode transact throw log scatter cach non transact cach mode scatter attribut attribut modifi throw log invalid batch size appli non scatter overrid public void valid global configur global config cach mode cluster global config transport transport null throw log miss transport configur configur child builder validat array list hash configur builder l configur builder sync configur builder state transfer configur builder partit handl configur builder validat valid global config overrid public cluster configur creat return new cluster configur attribut protect hash configur builder creat l configur builder creat state transfer configur builder creat sync configur builder creat partit handl configur builder creat overrid public cluster configur builder read cluster configur templat attribut read templat attribut hash configur builder read templat hash l configur builder read templat l state transfer configur builder read templat state transfer sync configur builder read templat sync partit handl configur builder read templat partit handl return overrid public string string return cluster configur builder hash configur builder hash configur builder l configur builder l configur builder state transfer configur builder state transfer configur builder sync configur builder sync configur builder partit handl configur builder partit handl configur builder attribut attribut 
packag org interceptor lock import static org transact impl write skew helper perform total order write skew check return new version import static org transact impl write skew helper perform write skew check return new version import java util array list import java util collect import java util collect import java util list import org command flag affect command import org command tx version prepar command import org command tx totalord total order prepar command import org command write clear command import org command write write command import org configur cach cach mode import org configur cach configur import org contain data contain import org contain entri cach entri import org contain entri clear cach entri import org contain entri intern cach entri import org contain entri entri import org contain version entri version map import org contain version version gener import org context flag import org context invoc context import org context impl flag bit set import org context impl tx invoc context import org distribut distribut manag import org distribut local cach topolog import org factori annot inject import org factori scope scope import org factori scope scope import org function impl function notifi import org metadata metadata import org metadata impl metadata import org notif cachelisten cach notifi import org notif cachelisten notifi helper import org persist manag persist manag import org remot transport address import org remot transport local mode address import org remot transport transport import org statetransf commit manag import org statetransf state transfer lock import org transact impl write skew helper import org transact xa cach transact import org util time servic abstract logic relat differ cluster mode replic distribut implement href http en wikipedia org wiki bridg pattern bridg pattern describ go play role b implementor b variou lock interceptor b abstract b author mircea marku author pedro ruivo scope scope public interfac cluster depend logic enum commit commit entri fals fals commit entri node owner therefor listen fire true fals commit entri owner true true privat boolean commit privat boolean local commit boolean commit boolean local commit commit local local public boolean commit return commit public boolean local return local return inform locat key local cach topolog get cach topolog deprec sinc pleas use code get cach topolog write owner key instead deprec default boolean local node owner object key return get cach topolog write owner key deprec sinc pleas use code get cach topolog get distribut key primari instead deprec default boolean local node primari owner object key return get cach topolog get distribut key primari deprec sinc pleas use code get cach topolog get distribut info key primari instead deprec default address get primari owner object key return get cach topolog get distribut key primari void commit entri cach entri entri flag affect command command invoc context ctx flag track flag boolean l invalid commit commit type flag affect command command invoc context ctx object key boolean remov deprec sinc pleas use code get cach topolog get write owner key instead deprec default collect address get owner collect object key return get cach topolog get write owner key deprec sinc pleas use code get cach topolog get write owner key instead deprec default collect address get owner object key return get cach topolog get write owner key entri version map creat new version check write skew version gener version gener tx invoc context context version prepar command prepar command address get address abstract class abstract cluster depend logic implement cluster depend logic protect distribut manag distribut manag protect data contain object object datum contain protect cach notifi object object notifi protect boolean total order privat write skew helper key specif logic key specif logic protect commit manag commit manag protect persist manag persist manag protect time servic time servic protect function notifi object object function notifi inject public void init data contain object object datum contain cach notifi object object notifi configur configur commit manag commit manag persist manag persist manag time servic time servic function notifi object object function notifi distribut manag distribut manag datum contain datum contain notifi notifi total order configur transact transact protocol total order distribut manag distribut manag key specif logic init key specif logic total order commit manag commit manag persist manag persist manag time servic time servic function notifi function notifi overrid public entri version map creat new version check write skew version gener version gener tx invoc context context version prepar command prepar command return total order total order creat new version check write skew version gener context prepar command cluster creat new version check write skew version gener context prepar command overrid public final void commit entri cach entri entri flag affect command command invoc context ctx flag track flag boolean l invalid entri instanceof clear cach entri noinspect uncheck commit clear command datum contain clear cach entri object object entri ctx command els commit singl entri entri command ctx track flag l invalid privat void commit clear command data contain object object datum contain clear cach entri object object cach entri invoc context context flag affect command command list intern cach entri object object copi entri new array list datum contain size includ expir datum contain iter remain copi entri add cach entri commit datum contain intern cach entri entri copi entri notifi notifi cach entri remov entri get key entri get valu entri get metadata fals context command protect abstract void commit singl entri cach entri entri flag affect command command invoc context ctx flag track flag boolean l invalid overrid public commit commit type flag affect command command invoc context ctx object key boolean remov ignor local remov even skip ownership check true command null command flag flag bit set return commit boolean transact ctx tx scope command null command flag flag bit set command local mode get write replic origin primari backup origin backup write right origin context clear command also broadcast node origin origin remov entri node backup owner even though get remov primari owner transact ctx origin local command null command flag flag bit set command instanceof clear command entri whose ownership lose invalid invalid command point long owner inform origin local entri remov get cach topolog write owner key return commit els remov return commit els non tx mode backup n commit origin context backup command context return get cach topolog get distribut key primari commit commit return commit protect abstract write skew helper key specif logic init key specif logic boolean total order privat entri version map total order creat new version check write skew version gener version gener tx invoc context context version prepar command prepar command context origin local throw new illeg state except must reach entri version map updat version map new entri version map total order prepar command prepar command skip write skew check updat version map perform total order write skew check return new version prepar command datum contain persist manag version gener context key specif logic time servic write command c prepar command get modif object k c get affect key key specif logic perform check key k updat version map contain key k updat version map put k null context get cach transact set updat entri version updat version map return updat version map privat entri version map cluster creat new version check write skew version gener version gener tx invoc context context version prepar command prepar command perform write skew check map entri entri version map uv perform write skew check return new version prepar command datum contain persist manag version gener context key specif logic time servic cach transact cach transact context get cach transact entri version map uv old cach transact get updat entri version uv old null uv old empti uv old put uv uv uv old cach transact set updat entri version uv return uv empti null uv overrid public local cach topolog get cach topolog return distribut manag get cach topolog overrid public address get address return get cach topolog get local address logic use local mode cach class local logic extend abstract cluster depend logic privat local cach topolog local topolog inject public void init transport transport address address transport null transport get address local mode address local topolog local cach topolog make singleton topolog cach mode address overrid public local cach topolog get cach topolog return local topolog overrid public address get address return local topolog get local address overrid protect void commit singl entri cach entri entri flag affect command command invoc context ctx flag track flag boolean l invalid cach flag reset reset do notif instead boolean creat entri creat boolean remov entri remov boolean expir remov entri instanceof entri expir entri entri expir els expir fals intern cach entri previou entri datum contain peek entri get key object previou valu null metadata previou metadata null previou entri null previou valu previou entri get valu previou metadata previou entri get metadata commit manag commit entri track flag l invalid ctx notifi event necessari notifi helper entri commit notifi function notifi creat remov expir entri ctx command previou valu previou metadata overrid protect write skew helper key specif logic init key specif logic boolean total order return key true logic use invalid mode cach class invalid logic extend abstract cluster depend logic overrid protect void commit singl entri cach entri entri flag affect command command invoc context ctx flag track flag boolean l invalid cach flag reset reset do notif instead boolean creat entri creat boolean remov entri remov boolean expir remov entri instanceof entri expir entri entri expir els expir fals intern cach entri previou entri datum contain peek entri get key object previou valu null metadata previou metadata null previou entri null previou valu previou entri get valu previou metadata previou entri get metadata commit manag commit entri track flag l invalid ctx notifi event necessari notifi helper entri commit notifi function notifi creat remov expir entri ctx command previou valu previou metadata overrid protect write skew helper key specif logic init key specif logic boolean total order return null use write skew check allow invalid logic use replic mode cach class replic logic extend invalid logic privat state transfer lock state transfer lock privat final write skew helper key specif logic local node primari owner key get cach topolog get distribut key primari inject public void init state transfer lock state transfer lock state transfer lock state transfer lock overrid public collect address get owner object key return null overrid public collect address get owner collect object key key empti return collect empti list return null overrid protect void commit singl entri cach entri entri flag affect command command invoc context ctx flag track flag boolean l invalid n allow chang state transfer invalid entri ownership check commit state transfer lock acquir share topolog lock tri commit commit commit type command ctx entri get key entri remov commit commit boolean creat fals boolean remov fals boolean expir fals commit local creat entri creat remov entri remov remov entri instanceof entri expir entri entri expir intern cach entri previou entri datum contain peek entri get key object previou valu null metadata previou metadata null previou entri null previou valu previou entri get valu previou metadata previou entri get metadata commit manag commit entri track flag l invalid ctx commit local notifi helper entri commit notifi function notifi creat remov expir entri ctx command previou valu previou metadata final state transfer lock releas share topolog lock overrid protect write skew helper key specif logic init key specif logic boolean total order return total order total order node perform write skew check key true two phase commit primari owner perform write skew check local node primari owner logic use distribut mode cach class distribut logic extend abstract cluster depend logic privat configur configur privat state transfer lock state transfer lock privat final write skew helper key specif logic local node owner key get cach topolog write owner key privat final write skew helper key specif logic local node primari owner key get cach topolog get distribut key primari inject public void init configur configur state transfer lock state transfer lock configur configur state transfer lock state transfer lock overrid protect void commit singl entri cach entri entri flag affect command command invoc context ctx flag track flag boolean l invalid n allow chang state transfer invalid entri ownership check commit state transfer lock acquir share topolog lock tri commit commit commit type command ctx entri get key entri remov boolean write fals commit commit configur cluster l enabl transform entri remov long lifespan entri get lifespan lifespan lifespan configur cluster l lifespan metadata metadata entri get metadata builder lifespan configur cluster l lifespan build entri set metadata new metadata metadata write true commit commit els commit commit entri get metadata instanceof metadata throw new illeg state except local entri must metadata commit commit boolean creat fals boolean remov fals boolean expir fals commit local creat entri creat remov entri remov remov entri instanceof entri expir entri entri expir use valu entri intern cach entri previou entri datum contain peek entri get key object previou valu null metadata previou metadata null previou entri null previou valu previou entri get valu previou metadata previou entri get metadata write previou entri null previou entri entri n overwrit non entri e g origin backup therefor two context one node els commit manag commit entri track flag l invalid write ctx commit local notifi helper entri commit notifi function notifi creat remov expir entri ctx command previou valu previou metadata final state transfer lock releas share topolog lock overrid protect write skew helper key specif logic init key specif logic boolean total order return total order total order owner perform write skew check local node owner two phase commit primari owner perform write skew check local node primari owner class scatter logic extend distribut logic overrid protect void commit singl entri cach entri entri flag affect command command invoc context ctx flag track flag boolean l invalid logic scatter distribut interceptor throw new unsupport oper except 
packag org interceptor impl import java util iter import java util map import java util concurr complet futur import java util function consum import org command command factori import org contain data contain import org contain entri factori import org factori annot inject import org remot respons cach find respons import org remot respons respons import org remot respons success respons import org remot respons unsur respons import org remot transport address import org statetransf owner lose except import org statetransf state transfer manag import org util concurr lock lock manag base class distribut interceptor author anistor redhat com sinc public abstract class cluster interceptor extend base rpc interceptor protect command factori cf protect entri factori entri factori protect lock manag lock manag protect data contain datum contain protect state transfer manag state transfer manag protect static respons get singl respons map address respons respons map iter respons respons map valu iter next throw owner lose except respons respons next next throw new illeg state except mani respons respons map return respons protect static success respons get success respons fail map address respons respons map complet futur futur consum respons cach find iter respons respons map valu iter next futur complet except owner lost except return null respons respons next next futur complet except new illeg state except mani respons respons map els respons instanceof success respons return success respons respons els respons instanceof cach find respons respons instanceof unsur respons cach find null futur complet except unexpect respons els tri cach find accept respons catch throwabl futur complet except els futur complet except unexpect respons return null protect static illeg argument except unexpect respons respons return new illeg argument except unexpect respons respons inject public void inject depend command factori cf entri factori entri factori lock manag lock manag data contain datum contain state transfer manag state transfer manag cf cf entri factori entri factori lock manag lock manag datum contain datum contain state transfer manag state transfer manag link complet except throwabl must call synchron block sinc must complet futur except access context except would retri context could access concurr dangl handler retri execut synchron futur complet except execut respons process futur mark do soon respons get synchron block check do return respons process sync block run complet except relat callback block finish process protect class cluster get futur extend complet futur void public int counter public cluster get futur int counter counter counter overrid public synchron boolean complet except throwabl ex return super complet except ex 
packag org notif cachelisten cluster import java io except import java io object input import java io object output import java util collect import java util set import java util import org cach import org common marshal abstract extern import org distexec distribut callabl import org marshal core id import org util log log import org util log log factori distribut callabl use remov regist link remot cluster listen variou node cluster listen unregist cach author wburn sinc public class cluster listen remov callabl implement distribut callabl void privat static final log log log factori get log cluster listen remov callabl class privat static final boolean trace log trace enabl privat transient cach cach privat final identifi public cluster listen remov callabl identifi identifi identifi overrid public void set environ cach cach set input key cach cach overrid public void call throw except remov listen cach set object listen cach get listen object listen listen listen instanceof remot cluster listen remot cluster listen cluster listen remot cluster listen listen identifi equal cluster listen get id trace log tracef remov local cluster listen due parent cluster listen remov identifi cluster listen remov listen return null public static class extern extend abstract extern cluster listen remov callabl overrid public set class extend cluster listen remov callabl get type class return collect singleton cluster listen remov callabl class overrid public void write object object output output cluster listen remov callabl object throw except output write object object identifi overrid public cluster listen remov callabl read object object input input throw except class find except return new cluster listen remov callabl input read object overrid public integ get id return id 
packag org notif cachelisten cluster import java io except import java io object input import java io object output import java lang annot annot import java util collect import java util hash set import java util set import java util import org cach import org common marshal abstract extern import org common marshal marshal util import org distexec distribut callabl import org distexec distribut executor servic import org encod datum convers import org factori compon registri import org manag emb cach manag import org marshal core id import org notif cachelisten cach notifi import org notif cachelisten listen holder import org notif cachelisten filter cach event convert import org notif cachelisten filter cach event filter import org notif cachelisten filter cach event filter convert import org notif cachemanagerlisten cach manag notifi import org remot transport address import org util log log import org util log log factori distribut callabl use instal link remot cluster listen result node class also check ensur listen attempt instal sourc instal well node go instal also remov listen author wburn sinc public class cluster listen replic callabl implement distribut callabl void privat static final log log log factori get log cluster listen replic callabl class privat static final boolean trace log trace enabl privat transient emb cach manag cach manag privat transient cach notifi cach notifi privat transient cach manag notifi cach manag notifi privat transient distribut executor servic dist executor privat transient address address privat transient cluster event manag event manag privat final identifi privat final cach event filter filter privat final cach event convert convert privat final address origin privat final boolean sync privat final set class extend annot filter annot privat final datum convers key datum convers privat final datum convers valu datum convers public cluster listen replic callabl identifi address origin cach event filter filter cach event convert convert boolean sync set class extend annot filter annot datum convers key datum convers data convers valu data convers identifi identifi origin origin filter filter convert convert sync sync filter annot filter annot key datum convers key datum convers valu data convers valu data convers trace log tracef creat cluster listen replic callabl filter annot overrid public void set environ cach cach set input key cach manag cach get cach manag compon registri compon registri cach get advanc cach get compon registri cach notifi compon registri get compon cach notifi class cach manag notifi cach get cach manag get global compon registri get compon cach manag notifi class dist executor secur action get default executor servic cach address cach get cach manag get address event manag compon registri get compon cluster event manag class filter null compon registri wire depend filter convert null convert filter compon registri wire depend convert overrid public void call throw except regist listen n one regist cluster listen address equal origin make sure origin around otherwis n regist listen way identifi mayb cach manag get member contain origin prevent multipl invoc get prevent concurr registr id note can n use static due run node synchron cach notifi boolean alreadi instal fals first make sure listen alreadi instal n anyth object instal listen cach notifi get listen instal listen instanceof remot cluster listen identifi equal remot cluster listen instal listen get id alreadi instal true break alreadi instal remot cluster listen listen new remot cluster listen identifi origin dist executor cach notifi cach manag notifi event manag sync listen holder listen holder new listen holder listen key data convers valu data convers cach notifi add filter listen listen holder filter convert filter annot cach manag notifi add listen listen possibl member go regist remov sure cach manag get member contain origin cach notifi remov listen listen cach manag notifi remov listen listen trace log tracef remov local cluster listen remot cluster listen regist origin go away concurr origin els trace log tracef regist local cluster listen remot cluster listen origin id origin identifi els trace log tracef local cluster listen origin id alreadi instal ignor origin identifi els trace log tracef regist local cluster listen remot cluster listen origin origin go away origin els trace log trace regist local cluster listen node regist cluster listen return null public static class extern extend abstract extern cluster listen replic callabl overrid public set class extend cluster listen replic callabl get type class return collect singleton cluster listen replic callabl class overrid public void write object object output output cluster listen replic callabl object throw except output write object object identifi output write object object origin output write object object filter object filter object convert object filter instanceof cach event filter convert output write boolean true els output write boolean fals output write object object convert output write boolean object sync marshal util marshal collect object filter annot output output write object object key data convers output write object object valu datum convers overrid public cluster listen replic callabl read object object input input throw except class find except id input read object address address address input read object cach event filter filter cach event filter input read object boolean convert input read boolean cach event convert convert convert convert cach event filter convert filter els convert cach event convert input read object boolean sync input read boolean set class extend annot listen annot marshal util unmarshal collect input hash set new datum convers key datum convers data convers input read object data convers valu datum convers data convers input read object return new cluster listen replic callabl id address filter convert sync listen annot key data convers valu datum convers overrid public integ get id return id 
packag org stream impl import java util collect import java util collect import java util map import java util object import java util set import java util concurr complet futur import java util concurr concurr hash map import java util concurr time unit import java util concurr atom atom integ import java util concurr lock condit import java util concurr lock lock import java util concurr lock reentrant lock import java util function predic import java util stream collector import org command command factori import org common cach except import org common util small int set import org distribut ch consist hash import org factori annot inject import org factori annot start import org remot respons respons import org remot rpc rpc manag import org remot transport address import org remot transport jgroup suspect except import org util rang set import org util log log import org util log log factori cluster stream manag send request use link rpc manag underli commun param cach key type public class cluster stream manag impl implement cluster stream manag protect final map string request tracker current run new concurr hash map protect final atom integ request id new atom integ protect rpc manag rpc protect command factori factori protect address local address protect final static log log log factori get log cluster stream manag impl class inject public void inject rpc manag rpc command factori factori rpc rpc factori factori start public void start local address rpc get address overrid public object remot stream oper boolean parallel distribut boolean parallel stream consist hash ch set integ segment set key includ map integ set key exclud boolean includ loader termin oper oper result callback callback predic super earli termin predic return common remot stream oper parallel distribut parallel stream ch segment key includ key exclud includ loader oper callback stream request command type earli termin predic overrid public object remot stream oper rehash awar boolean parallel distribut boolean parallel stream consist hash ch set integ segment set key includ map integ set key exclud boolean includ loader termin oper oper result callback callback predic super earli termin predic return common remot stream oper parallel distribut parallel stream ch segment key includ key exclud includ loader oper callback stream request command type earli termin predic privat object common remot stream oper boolean parallel distribut boolean parallel stream consist hash ch set integ segment set key includ map integ set key exclud boolean includ loader segment awar oper oper result callback callback stream request command type type predic super earli termin predic map address set integ target determin target ch segment callback string id target empti id local address string request id get increment log tracef perform remot oper id target id request tracker tracker new request tracker callback target earli termin predic current run put id tracker parallel distribut submit async task id target key exclud parallel stream key includ includ loader type oper els map entri address set integ target info target entri set throw except set integ target segment target info get valu set key exclud determin exclud key key exclud target segment rpc invok remot collect singleton target info get key factori build stream request command id parallel stream type target segment key includ key exclud includ loader oper rpc get default rpc option true els log tracef perform remot oper request valid target segment find segment id null return id overrid public object remot stream oper boolean parallel distribut boolean parallel stream consist hash ch set integ segment set key includ map integ set key exclud boolean includ loader key track termin oper oper result callback collect callback return common remot stream oper parallel distribut parallel stream ch segment key includ key exclud includ loader oper callback stream request command type null overrid public object remot stream oper rehash awar boolean parallel distribut boolean parallel stream consist hash ch set integ segment set key includ map integ set key exclud boolean includ loader key track termin oper oper result callback map callback map address set integ target determin target ch segment callback string id target empti id local address string request id get increment log tracef perform remot rehash key awar oper id target id request tracker map tracker new request tracker callback target null current run put id tracker parallel distribut submit async task id target key exclud parallel stream key includ includ loader stream request command type oper els map entri address set integ target info target entri set address dest target info get key set integ target segment target info get valu tri key exclud never empti sinc util custom map solut set key exclud determin exclud key key exclud target segment log tracef submit task exclud key d id key exclud respons respons rpc invok remot collect singleton dest factori build stream request command id parallel stream stream request command type target segment key includ key exclud includ loader oper rpc get default rpc option true valu iter next respons success log tracef unsuccess respons make segment suspect id dest target segment receiv respons id dest true target segment null catch except e boolean suspect contain suspect except e suspect log tracef e encount except id dest throw e els log tracef except contain suspect except make segment suspect dest target segment receiv respons id dest true target segment null els log tracef perform remot rehash key awar oper request valid target segment find segment id null return id privat void submit async task string id map address set integ target map integ set key exclud boolean parallel stream set key includ boolean includ loader stream request command type type object oper map entri address set integ target info target entri set set integ segment target info get valu set key exclud determin exclud key key exclud segment address d target info get key log tracef submit async task exclud key d id key exclud complet futur map address respons complet futur rpc invok remot async collect singleton dest factori build stream request command id parallel stream type segment key includ key exclud includ loader oper rpc get default rpc option true complet futur complet v e v null respons respons v valu iter next respons success log tracef unsuccess respons make segment suspect id target info get key receiv respons id target info get key true target info get valu null els e null boolean suspect contain suspect except e suspect log tracef e encount except id target info get key request tracker tracker current run get id tracker null mark tracker except tracker dest e id els log warnf unhandl remot stream except encount e els log tracef except contain suspect except make segment suspect target info get valu receiv respons id target info get key true target info get valu null privat boolean contain suspect except throwabl e throwabl caus e boolean suspect fals unwrap except caus instanceof suspect except suspect true break caus caus get caus null return suspect protect static void mark tracker except request tracker tracker address dest throwabl e object uuid log tracef mark tracker except tracker throwabl e dest null tracker last result dest null uuid null log tracef tracker complet except wake sleeper uuid els log trace tracker complet due outsid caus wake sleeper tracker complet lock lock tri tracker complet condit signal final tracker complet lock unlock privat set determin exclud key map integ set key exclud set integ segment use key exclud empti return collect empti set special map support get oper return segment use stream flat map set key segment key exclud get key segment null return key segment stream return null collect collector set privat map address set integ determin target consist hash ch set integ segment result callback callback segment null segment new rang set ch get num segment concurr hash map case node complet oper still iter map submit other map address set integ target new concurr hash map integ segment segment address owner ch locat primari owner segment segment owner null callback segment lose collect singleton segment callback request futur topolog els owner equal local address target comput absent owner new small int set add segment return target overrid public boolean complet object id return current run contain key id overrid public boolean await complet object id long time time unit unit throw interrupt except time throw new illeg argument except time must great object requir non null id identifi must non null log tracef await complet id boolean complet fals long target system nano time unit nano time throwabl throwabl null target system nano time request tracker tracker current run get id tracker null complet true break throwabl tracker throwabl null break tracker complet lock lock tri check insid lock case concurr notif get lock current run contain key id complet true throwabl tracker throwabl break tracker complet condit await target system nano time time unit throwabl tracker throwabl complet fals break final tracker complet lock unlock log tracef return back caller due complet id complet throwabl null throwabl instanceof runtim except throw runtim except throwabl throw new cach except throwabl return complet overrid public void forget oper object id id null request tracker tracker current run remov id tracker null tracker complet lock lock tri tracker complet condit signal final tracker complet lock unlock overrid public boolean receiv respons object id address origin boolean complet set integ miss segment respons log tracef receiv respons complet respons id suspect segment origin complet id miss segment request tracker tracker current run get id tracker null boolean notifi fals need reorgan tracker reduc synchron contain miss segment complet tracker synchron tracker tracker await respons contain key origin miss segment empti tracker miss segment miss segment complet notifi tracker last result origin respons els tracker intermedi result origin respons notifi log tracef mark complet id tracker complet lock lock tri current run remov id tracker complet condit signal final tracker complet lock unlock return notifi els log tracef ignor respons alreadi receiv complet respons id origin return fals static class request tracker final result callback callback final map address set integ await respons final lock complet lock new reentrant lock final condit complet condit complet lock new condit final predic super earli termin predic set integ miss segment volatil throwabl throwabl request tracker result callback callback map address set integ await respons predic super earli termin predic callback callback await respons await respons earli termin predic earli termin predic public void intermedi result address origin intermedi result callback intermedi result origin intermedi result param origin param result return whether last expect respons public boolean last result address origin result set integ complet segment await respons get origin miss segment null complet segment remov miss segment callback complet origin complet segment result synchron earli termin predic null earli termin predic test result await respons clear els await respons remov origin return await respons empti public void miss segment set integ segment synchron miss segment null miss segment segment els miss segment add segment callback segment lose segment 
packag org topolog import static java lang string format import static org factori know compon name import static org util log log factori import static org util log event messag import java util collect import java util hash map import java util hash set import java util list import java util map import java util map entri import java util object import java util option import java util set import java util concurr complet futur import java util concurr concurr map import java util concurr count latch import java util concurr execut except import java util concurr executor servic import java util concurr time unit import java util concurr lock condit import java util concurr lock lock import java util concurr lock reentrant lock import org command replic command import org common cach except import org common util collect factori import org common util collect import org configur cach cach mode import org configur cach configur import org configur global global configur import org executor limit executor import org factori global compon registri import org factori annot compon name import org factori annot inject import org factori annot start import org factori annot stop import org globalst global state manag import org globalst scope persist state import org manag emb cach manag import org notif listen import org notif cachemanagerlisten cach manag notifi import org notif cachemanagerlisten annot merg import org notif cachemanagerlisten annot view chang import org notif cachemanagerlisten event view chang event import org partitionhandl avail mode import org partitionhandl partit handl import org partitionhandl impl avail strategi import org partitionhandl impl lost data check import org partitionhandl impl prefer avail strategi import org partitionhandl impl prefer consist strategi import org remot inboundhandl deliv order import org remot respons cach find respons import org remot respons except respons import org remot respons respons import org remot respons success respons import org remot rpc respons filter import org remot rpc respons mode import org remot transport address import org remot transport transport import org remot transport jgroup suspect except import org statetransf rebal type import org util concurr complet futur import org util concurr timeout except import org util log log import org util log log factori import org util log event event log categori import org util log event event log manag import org util log event event logger import net jcip annot guard code cluster topolog manag implement author dan berindei author pedro ruivo sinc public class cluster topolog manag impl implement cluster topolog manag public static final int public static final int privat enum cluster manag statu boolean run return boolean coordin return privat static final log log log factori get log cluster topolog manag impl class privat static final boolean trace log trace enabl privat transport transport privat global configur global configur privat global compon registri gcr privat cach manag notifi cach manag notifi privat emb cach manag cach manag privat executor servic async transport executor privat limit executor view handl executor privat event log manag event log manag privat persist manag persist manag need volatil sometim read without hold view handl lock privat volatil int view id privat volatil cluster manag statu cluster manag statu cluster manag statu privat final lock cluster manag lock new reentrant lock privat final condit cluster state chang cluster manag lock new condit privat final concurr map string cluster cach statu cach statu map collect factori make concurr map privat cluster view listen view listen global rebalanc statu privat volatil boolean global rebalanc enabl true inject public void inject transport transport compon name executor servic async transport executor global configur global configur global compon registri gcr cach manag notifi cach manag notifi emb cach manag cach manag event log manag event log manag persist manag persist manag transport transport async transport executor async transport executor global configur global configur gcr gcr cach manag notifi cach manag notifi cach manag cach manag event log manag event log manag persist manag persist manag start prioriti public void start view handl executor new limit executor view handl async transport executor view listen new cluster view listen cach manag notifi add listen view listen listen alreadi miss initi view view handl executor execut handl cluster view fals transport get view id fetch rebalanc statu coordin protect void fetch rebalanc statu coordin transport coordin assum timeout coordin n command awar rpc dispatch yet possibl group channel lookup connect fals retri replic command command new cach topolog control command null cach topolog control command type transport get address address coordin null respons respons null int tri coordin transport get coordin map address respons respons map transport invok remot collect singleton coordin command respons mode get global timeout null deliv order fals respons respons map get coordin break catch except e e instanceof timeout except log error read rebalanc statu coordin e respons success respons creat boolean log debug time wait rebalanc statu coordin tri respons instanceof success respons global rebalanc enabl boolean success respons respons get respons valu els log error read rebalanc statu coordin new cach except object string respons stop prioriti public void stop stop block cach topolog command cluster manag lock lock tri cluster manag statu cluster manag statu cluster state chang signal final cluster manag lock unlock view listen null cach manag notifi remov listen view listen view handl executor null view handl executor cancel queu task overrid public cach statu respons handl join string cach name address joiner cach join info join info int joiner view id throw except cluster cach statu cach statu cluster manag lock lock tri wait joiner view joiner joiner view id join info get timeout cluster manag statu run log debugf ignor join request cach local cach manag shut joiner cach name return null joiner view id view id log debugf ignor join request cach joiner view id old joiner cach name joiner view id return null cach statu init cach statu absent cach name join info get cach mode final cluster manag lock unlock return cach statu join joiner join info overrid public void handl leav string cach name address leaver int view id throw except cluster manag statu run log debugf ignor leav request cach local cach manag shut leaver cach name return cluster cach statu cach statu cach statu map get cach name cach statu null happen becom coordin log tracef ignor leav request cach n cach statu entri leaver cach name return cach statu leav leaver cach statu map remov cach name overrid public void handl rebal phase confirm string cach name address node int topolog id throwabl throwabl int view id throw except throwabl null could tri updat pend node report error consid hold state log error proceed rebal success everywher log rebal error cach name node topolog id throwabl rebal complet cach name node topolog id event log manag get event logger context cach name scope node string info event log categori rebal phase confirm node topolog id cluster cach statu cach statu cach statu map get cach name cach statu null log debugf ignor rebal confirm cach n cach statu entri node cach name return cach statu confirm rebal phase node topolog id privat static class cach topolog filter reuser implement respons filter map cach topolog cach topolog see topolog new hash map map cach join info cach join info see info new hash map overrid public boolean accept respons respons address sender respons success manag statu respons valu manag statu respons success respons respons get respons valu entri string cach statu respons entri valu get cach entri set cach statu respons csr entri get valu cach topolog cach topolog csr get cach topolog cach topolog stabl topolog csr get stabl topolog cach topolog replac cach topolog see topolog get cach topolog replac cach topolog null see topolog put cach topolog cach topolog replac cach topolog cach topolog cach topolog replac stabl topolog n equal check replac note stabl topolog null object equal cach topolog stabl topolog replac stabl topolog see topolog get stabl topolog replac stabl topolog null see topolog put stabl topolog stabl topolog replac stabl topolog stabl topolog els sinc equal replac cach topolog go use replac stabl topolog replac cach topolog cach join info info csr get cach join info cach join info replac info see info get info replac info null see info put info info replac cach topolog null replac stabl topolog null replac info null entri set valu new cach statu respons replac info null replac info info replac cach topolog replac stabl topolog csr get avail mode return true overrid public boolean need respons return true privat void handl cluster view boolean merg view int new view id tri updat cluster state merg view new view id return limit executor act critic section n need worri multipl thread cluster manag statu cluster manag statu becom coordin new view id return cluster manag statu cluster manag statu recov cluster statu rebal cach includ minor partit process regular view prune member leav updat cach member transport get member catch throwabl log view handl error new view id privat boolean becom coordin int new view id clean leftov cach statu inform last time coordin g local node coordin start rebal lose coordin statu merg exist cach statu may rebal progress cach statu map clear tri recov cluster statu new view id transport get member cluster manag lock lock tri view id new view id log debugf view updat recov cluster view new view id return fals cluster manag statu cluster manag statu notifi thread might wait join cluster state chang signal final cluster manag lock unlock catch interrupt except e trace log tracef cluster state recoveri interrupt coordin shut catch suspect except e trace log tracef cluster state recoveri interrupt member lose retri catch except e cluster manag statu run fail recov cluster state e event log manag get event logger detail e fatal event log categori cluster recoveri fail transport get member els log tracef cluster state recoveri fail coordin shut return true privat boolean updat cluster state boolean merg view int new view id cluster manag lock lock tri new view id transport get view id log tracef ignor old cluster view notif new view id return fals boolean coordin transport coordin boolean becom coordin coordin cluster manag statu coordin trace log tracef receiv new cluster view coordin old statu object new view id coordin cluster manag statu coordin cluster manag statu cluster manag statu return fals becom coordin merg view cluster manag statu cluster manag statu notifi thread might wait join view id new view id cluster state chang signal final cluster manag lock unlock return true privat cluster cach statu init cach statu absent string cach name cach mode cach mode return cach statu map comput absent cach name name assum cach partit handl configur alreadi defin node includ coordin start node lost data check lose datum check cach mode scatter lose datum check stabl new member datum lose one node lose set address lose member new hash set stabl get member lose member remov new member log debugf stabl member actual member lose member stabl get member new member lose member return lose member size els lose data check stabl new member datum lose segment lose owner int stabl get num segment collect contain new member stabl locat owner segment return true return fals avail strategi avail strategi configur cach configur cach manag get cach configur cach name partit handl partit handl cach configur null cach configur cluster partit handl split null boolean resolv conflict merg partit handl partit handl cach configur cluster partit handl merg polici null partit handl null partit handl partit handl avail strategi new prefer consist strategi event log manag persist manag lose data check els avail strategi new prefer avail strategi event log manag persist manag lose data check resolv conflict merg option global state manag global state manag cach manag get global compon registri get option compon global state manag class option scope persist state persist state global state manag flat map gsm gsm read scope state cach name return new cluster cach statu cach manag cach name avail strategi rebal type cach mode transport persist state persist manag resolv conflict merg overrid public void broadcast rebal start string cach name cach topolog cach topolog boolean total order boolean distribut start rebal cach name cach topolog event log manag get event logger context cach name scope transport get address info event log categori rebal start cach topolog get topolog id replic command command new cach topolog control command cach name cach topolog control command type transport get address cach topolog null view id execut cluster async command get global timeout total order distribut privat void recov cluster statu int new view id final list address cluster member throw except log debugf recov cluster statu view new view id replic command command new cach topolog control command null cach topolog control command type transport get address new view id map address object statu respons null assum timeout one node n command awar rpc dispatch instal time possibl group channel lookup connect fals retri int tri statu respons execut cluster sync command get global timeout fals fals new cach topolog filter reuser break catch execut except e e get caus instanceof timeout except log debug time wait cluster statu respons tri els e get caus instanceof suspect except transport get member contain cluster member int sleep time get global timeout log debugf e receiv except one member tri ms sleep time thread sleep sleep time continu throw e log debugf get statu respons member statu respons size cluster member map string map address cach statu respons respons cach new hash map boolean recov rebalanc statu true map entri address object respons entri statu respons entri set address sender respons entri get key manag statu respons node statu manag statu respons respons entri get valu recov rebalanc statu node statu rebalanc enabl map entri string cach statu respons statu entri node statu get cach entri set string cach name statu entri get key map address cach statu respons cach respons respons cach comput absent cach name k new hash map cach respons put sender statu entri get valu global rebalanc enabl recov rebalanc statu comput new consist hash separ thread int max thread runtim get runtim avail processor count latch latch new count latch respons cach size limit executor cs new limit executor merg new view id async transport executor max thread final map entri string map address cach statu respons e respons cach entri set cach join info join info e get valu valu stream find get get cach join info cluster cach statu cach statu init cach statu absent e get key join info get cach mode cs execut tri cach statu merg partit e get valu final latch count latch await get global timeout time unit public void updat cach member list address new cluster member tri log tracef updat cluster member cach new list new cluster member tri get suspect except mean new view soon ignor one confirm member avail catch suspect except e log tracef node leav updat cach member e get suspect return cluster cach statu cach statu cach statu map valu cach statu handl cluster view catch except e cluster manag statu run log error updat member list e privat void confirm member avail throw except replic command heartbeat command new cach topolog control command null cach topolog control command type transport get address transport invok remot null heartbeat command respons mode get global timeout null deliv order fals wait receiv view code joiner view id finish recov cluster state p return earli node shut p method invok lock hold throw timeout except timeout expir guard cluster manag lock privat void wait joiner view address joiner int joiner view id long timeout throw interrupt except joiner view id view id cluster manag statu cluster manag statu trace joiner view id view id log tracef wait instal view process join request joiner view id joiner els log tracef wait recov cluster statu process join request joiner long nano timeout time unit nano timeout view id joiner view id cluster manag statu cluster manag statu cluster manag statu run nano timeout throw log coordin timeout wait view joiner view id transport get view id cluster manag statu nano timeout cluster state chang await nano nano timeout privat map address object execut cluster sync final replic command command final int timeout boolean total order boolean distribut final respons filter filter throw except first invok remot total order map address respons respons map transport invok remot transport get member command respons mode timeout filter deliv order distribut return extract respons valu respons map null complet futur map address respons remot futur transport invok remot async null command respons mode timeout filter deliv order fals invok command local node gcr wire depend command respons local respons tri trace log tracef attempt execut command self command local respons respons command invok catch throwabl throwabl throw new except throwabl return extract respons valu complet futur await remot futur local respons privat int get global timeout renam set someth like global rpc timeout return int global configur transport distribut sync timeout privat void execut cluster async final replic command command final int timeout boolean total order boolean distribut total order invok command local node async transport executor submit tri trace log tracef attempt execut command self command gcr wire depend command command invok catch throwabl throwabl command alreadi log except invok invok remot tri deliv order deliv order total order deliv order deliv order transport invok remot null command respons mode timeout null deliv order distribut catch except e throw new cach except fail broadcast asynchron command command e overrid public void broadcast topolog updat string cach name cach topolog cach topolog avail mode avail mode boolean total order boolean distribut log debugf updat cluster wide current topolog cach topolog avail mode cach name cach topolog avail mode replic command command new cach topolog control command cach name cach topolog control command type transport get address cach topolog avail mode view id execut cluster async command get global timeout total order distribut overrid public void broadcast stabl topolog updat string cach name cach topolog cach topolog boolean total order boolean distribut log debugf updat cluster wide stabl topolog cach topolog cach name cach topolog replic command command new cach topolog control command cach name cach topolog control command type transport get address cach topolog null view id execut cluster async command get global timeout total order distribut overrid public boolean rebalanc enabl return global rebalanc enabl overrid public boolean rebalanc enabl string cach name cach name null return rebalanc enabl els cluster cach statu cach statu map get cach name return null rebal enabl rebalanc enabl overrid public void set rebalanc enabl string cach name boolean enabl cach name null set rebalanc enabl enabl els cluster cach statu cluster cach statu cach statu map get cach name cluster cach statu null cluster cach statu set rebal enabl enabl overrid public void set rebalanc enabl boolean enabl enabl global rebalanc enabl rebalanc enabl els global rebalanc enabl rebalanc suspend global rebalanc enabl enabl cach statu map valu cluster cach statu start queu rebal overrid public void forc rebal string cach name cluster cach statu cach statu cach statu map get cach name cach statu null cach statu forc rebal overrid public void forc avail mode string cach name avail mode avail mode cluster cach statu cach statu cach statu map get cach name cach statu null cach statu forc avail mode avail mode overrid public rebalanc statu get rebalanc statu string cach name cluster cach statu cach statu cach statu map get cach name cach statu null return cach statu get rebalanc statu els return rebalanc statu overrid public void broadcast shutdown cach string cach name cach topolog cach topolog boolean total order boolean distribut throw except replic command command new cach topolog control command cach name cach topolog control command type transport get address cach topolog null view id execut cluster sync command get global timeout total order distribut null overrid public void set initi cach topolog id string cach name int topolog id configur configur cach manag get cach configur cach name cluster cach statu cach statu init cach statu absent cach name configur cluster cach mode cach statu set initi topolog id topolog id overrid public void handl shutdown request string cach name throw except cluster cach statu cach statu cach statu map get cach name cach statu shutdown cach listen sync true public class cluster view listen merg view chang public void handl view chang final view chang event e need recov exist cach asynchron case becom coordin use async notif thread pool default thread view handl executor execut handl cluster view e merg view e get view id event logger event logger event log manag get event logger scope e get local address log node join event logger e get new member e get old member log node left event logger e get new member e get old member privat map address object extract respons valu map address respons remot respons respons local respons pars respons map address object respons valu new hash map transport get member size map entri address respons entri remot respons entri set add respons valu entri get key entri get valu respons valu local respons null add respons valu transport get address local respons respons valu return respons valu privat static void add respons valu address origin respons respons map address object valu respons cach find respons return els respons success throwabl caus respons instanceof except respons except respons respons get except null throw new cach except format unsuccess respons receiv node origin respons caus valu put origin success respons respons get respons valu privat static void log node join event logger logger list address new member list address old member new member stream filter address old member contain address address logger info event log categori node join address privat static void log node leav event logger logger list address new member list address old member old member stream filter address new member contain address address logger info event log categori node leav address 
packag org common util import java util array import java util hash map import java util hash set import java util link hash map import java util map import java util set import java util concurr concurr hash map import java util concurr concurr map import org common equival equival import com github benman caffein cach cach import com github benman caffein cach caffein factori concurr map author manik surtani author galder zamarr sinc public class collect factori privat static final float f public static int comput capac int expect size return comput capac expect size public static int comput capac int expect size float load factor return int expect size load factor f public static concurr map make concurr map return new concurr hash map public static concurr map make concurr map int init capac return new concurr hash map init capac public static concurr map make concurr map int init capac int concurr level return new concurr hash map init capac f concurr level public static concurr map make concurr parallel map int init capac int concurr level return new concurr hash map init capac public static concurr map make concurr map int init capac float load factor int concurr level return new concurr hash map init capac load factor concurr level public static map make map return new hash map public static map make map int initi capac return new hash map initi capac public static map make map map extend extend entri return new hash map entri public static map make link map int initi capac float load factor boolean access order return new link hash map initi capac load factor access order public static set make set return new hash set public static set make set int initi capac return new hash set initi capac deprec sinc pleas use link make concurr map instead deprec public static concurr map make concurr map equival super key eq equival super valu eq return make concurr map deprec sinc pleas use link make concurr map int instead deprec public static concurr map make concurr map int init capac equival super key eq equival super valu eq return make concurr map init capac deprec sinc pleas use link make concurr map int int instead deprec public static concurr map make concurr map int init capac int concurr level equival super key eq equival super valu eq return make concurr map init capac concurr level deprec sinc pleas use link make concurr parallel map int int instead deprec public static concurr map make concurr parallel map int init capac int concurr level equival super key eq equival super valu eq return make concurr parallel map init capac concurr level deprec sinc pleas use link make concurr map int float int instead deprec public static concurr map make concurr map int init capac float load factor int concurr level equival super key eq equival super valu eq return make concurr map init capac load factor concurr level public static concurr map make bound concurr map int max size cach cach caffein new builder maximum size max size build return cach map deprec sinc pleas use link make map instead deprec public static map make map equival super key eq equival super valu eq return new hash map deprec sinc pleas use link make map int instead deprec public static map make map int initi capac equival super key eq equival super valu eq return new hash map initi capac deprec sinc pleas use link make map map instead deprec public static map make map map extend extend entri equival super key eq equival super valu eq return new hash map entri deprec sinc pleas use link make set int instead deprec public static map make link map int initi capac float load factor boolean access order equival super key eq equival super valu eq return new link hash map initi capac load factor access order deprec sinc pleas use link make set instead deprec public static set make set equival super entri eq return new hash set deprec sinc pleas use link make set int instead deprec public static set make set int initi capac equival super entri eq return new hash set initi capac creat set back specifi array param entri array list back param type element return set view specifi array safe vararg public static set make set entri return new hash set array list entri 
packag org filter import java io except import java io object input import java io object output import java util collect import java util collect import java util set import org common marshal abstract extern import org marshal core id filter base accept reject key present suppli collect author mircea marku sinc public class collect key filter implement key filter privat final collect extend key privat final boolean accept public collect key filter collect extend key key fals public collect key filter collect extend key boolean accept key key accept accept overrid public boolean accept key return accept key contain key key contain key public static class extern extend abstract extern collect key filter overrid public set class extend collect key filter get type class return collect singleton collect key filter class overrid public void write object object output output collect key filter object throw except output write object object key output write boolean object accept overrid public collect key filter read object object input input throw except class find except return new collect key filter collect extend object input read object input read boolean overrid public integ get id return id 
packag org util concurr import java util array list import java util collect import java util collect import java util hash set import java util list import java util map import java util set import java util concurr callabl import java util concurr complet futur import java util concurr concurr hash map import java util concurr schedul executor servic import java util concurr schedul futur import java util concurr time unit import java util function bi consum import org command command invoc id import org common util util import org configur cach configur import org factori know compon name import org factori annot compon name import org factori annot inject import org factori scope scope import org factori scope scope import org interceptor distribut collector import org interceptor distribut primari owner collector import org remot transport address import org util log log import org util log log factori import net jcip annot guard acknowledg collector triangl algorithm use non transact cach write oper p acknowledg use owner origin signal complet write oper oper complet success p acknowledg valid cach topolog id acknowledg tag command topolog id acknowledg previou topolog id discard p acknowledg primari owner carri return valu oper author pedro ruivo sinc scope scope public class command ack collector privat static final log log log factori get log command ack collector class privat static final boolean trace log trace enabl privat final concurr hash map long base collector collector map privat schedul executor servic timeout executor privat long timeout nano second public command ack collector collector map new concurr hash map inject public void inject compon name known compon name schedul executor servic timeout executor configur configur timeout executor timeout executor timeout nano second time unit nano configur cluster remot timeout creat collector singl key write oper param id id link command invoc id param backup owner backup owner key param topolog id current topolog id public collector object creat long id collect address backup owner int topolog id backup owner empti return new primari owner collector singl key collector collector new singl key collector id backup owner topolog id collector map put id collector trace log tracef creat new collector backup owner id backup owner return collector creat collector link org command write put map command param id id link command invoc id get id param primari primari owner collect param backup map backup owner segment affect param topolog id current topolog id public collector map object object creat multi key collector long id collect address primari map address collect integ backup int topolog id backup empti return new primari owner collector multi key collector collector new multi key collector id backup topolog id collector map put id collector trace log tracef creat new collector primari backup segment id primari backup return collector acknowledg link org command write put map command complet backup owner param id id link command invoc id get id param backup owner param segment segment affect acknowledg param topolog id topolog id public void multi key backup ack long id address int segment int topolog id multi key collector collector multi key collector collector map get id collector null collector backup ack segment topolog id acknowledg write oper complet backup owner param id id link command invoc id get id param backup owner param topolog id topolog id public void backup ack long id address int topolog id singl key collector collector singl key collector collector map get id collector null collector backup ack topolog id acknowledg except oper execut p collector complet without wait acknowledg param id id link command invoc id get id param throwabl link throwabl param topolog id topolog id public void complet except long id throwabl throwabl int topolog id base collector collector collector map get id collector null collector complet except throwabl topolog id return pend id link command invoc id get id test purpos public list long get pend command return new array list collector map key set param id id link command invoc id get id return code true acknowledg pend backup owner code fals otherwis test purpos public boolean pend backup ack long id base collector collector collector map get id return collector null collector pend backup ack notifi chang member list param member new cluster member public void member chang collect address member set address current member new hash set member base collector collector collector map valu collector member chang current member privat timeout except creat timeout except long id return log timeout wait ack util pretti print time timeout nano second time unit id privat abstract class base collector implement callabl void bi consum throwabl collector final long id final complet futur futur final int topolog id privat final schedul futur timeout task volatil primari result volatil boolean primari result receiv fals base collector long id int topolog id id id topolog id topolog id futur new complet futur timeout task timeout executor schedul timeout nano second time unit invok timeout executor timeout expir p complet futur timeout except overrid public final synchron void call throw except futur complet except creat timeout except id return null invok futur complet must cleanup task relat collector p task includ remov collector map cancel timeout task overrid public final void accept throwabl throwabl trace log tracef collector collector complet ret throw id throwabl collector map remov id timeout task cancel fals overrid public final complet futur get futur return futur complet overrid public void primari except throwabl throwabl futur complet except throwabl final void complet except throwabl throwabl int topolog id trace log tracef throwabl collector complet except topolog id expect id topolog id topolog id wrong topolog do topolog id return futur complet except throwabl abstract boolean pend backup ack abstract void member chang collect address member final boolean wrong topolog do int topolog id return topolog id topolog id futur do privat class singl key collector extend base collector object privat final collect address backup owner privat singl key collector long id collect address backup owner int topolog id super id topolog id backup owner collect synchron set new hash set backup owner overrid public boolean pend backup ack return backup owner empti overrid public void member chang collect address member backup owner retain member backup owner empti primari result receiv trace log tracef collector backup leav cluster id mark readi overrid public void primari result object result boolean success primari result result primari result receiv true success backup owner empti mark readi void backup ack int topolog id address trace log tracef collector backup address topolog id expect id topolog id topolog id wrong topolog do topolog id return backup owner remov backup owner empti primari result receiv mark readi privat void mark readi trace log tracef collector readi id futur complet primari result privat class multi key collector extend base collector map object object guard privat final map address collect integ backup multi key collector long id map address collect integ backup int topolog id super id topolog id backup backup overrid public synchron boolean pend backup ack return backup empti overrid public synchron void member chang collect address member backup key set retain member trace log tracef collector backup leav cluster id check complet overrid public void primari result map object object result boolean success primari result result primari result receiv true synchron check complet void backup ack address int segment int topolog id trace log tracef collector put map backup address topolog id expect segment id topolog id topolog id segment wrong topolog do topolog id return synchron collect integ pend segment backup get default collect empti list pend segment remov segment pend segment empti backup remov check complet guard privat void check complet primari result receiv backup empti trace log tracef collector readi return valu ss id primari result futur complet primari result 
packag org command import java io except import java io object input import java io object output import java util object import java util concurr atom atom long import org remot transport address repres uniqu identifi non transact write command p use lock key specif command p class final prevent issu usual marshal polymorph object directli use link write object output command invoc id link read object input author pedro ruivo sinc public final class command invoc id public static final command invoc id new command invoc id null privat static final atom long next id new atom long privat final address address privat final long id privat command invoc id address address long id address address id id public static command invoc id gener id address address return new command invoc id address next id get increment public static command invoc id gener id command invoc id command invoc id return new command invoc id command invoc id address next id get increment public static void write object output output command invoc id command invoc id throw except output write object command invoc id address output write long command invoc id id public static command invoc id read object input input throw class find except except address address address input read object long id input read long return new command invoc id address id public long get id return id overrid public boolean equal object return true null get class get class return fals command invoc id command invoc id return id id address null address equal address address null public address get address return address overrid public int hash code int result address null address hash code result result int id id return result overrid public string string return command invoc object string address local id public static string show command invoc id id return id id string 
packag org command import static org xsite site admin command admin oper import static org xsite statetransf site state transfer control command state transfer control import java util collect import java util list import java util map import java util set import java util import java util concurr callabl import java util function bi consum import java util function bi function import java util function consum import java util function function import javax transact xa xid import org cach import org command control lock control command import org command function abstract write key command import org command function abstract write mani command import org command function read key command import org command function read mani command import org command function read write key command import org command function read write key valu command import org command function read write mani command import org command function read write mani entri command import org command function tx read key command import org command function tx read mani command import org command function write key command import org command function write key valu command import org command function write mani command import org command function write mani entri command import org command modul modul command initi import org command read distribut execut command import org command read entri set command import org command read get command import org command read get cach entri command import org command read get key valu command import org command read key set command import org command read size command import org command remot cluster get command import org command remot cluster get command import org command remot get key group command import org command remot singl rpc command import org command remot recoveri complet transact command import org command remot recoveri get doubt transact command import org command remot recoveri get doubt tx info command import org command remot recoveri tx complet notif command import org command tx commit command import org command tx prepar command import org command tx rollback command import org command tx version commit command import org command tx version prepar command import org command tx totalord total order commit command import org command tx totalord total order non version prepar command import org command tx totalord total order rollback command import org command tx totalord total order version commit command import org command tx totalord total order version prepar command import org command write backup ack command import org command write backup multi key ack command import org command write backup put map rpc command import org command write backup write rpc command import org command write clear command import org command write comput command import org command write comput absent command import org command write datum write command import org command write evict command import org command write except ack command import org command write invalid command import org command write invalid command import org command write invalid version command import org command write put key valu command import org command write put map command import org command write remov command import org command write remov expir command import org command write replac command import org command write valu matcher import org command write write command import org common marshal extern import org common marshal lambda extern import org common marshal serial function import org common marshal stream marshal import org common util enum util import org configur cach configur import org conflict impl state receiv import org contain data contain import org contain intern entri factori import org context invoc context factori import org context impl flag bit set import org distribut distribut manag import org distribut group impl group manag import org encod datum convers import org factori compon registri import org factori know compon name import org factori annot compon name import org factori annot inject import org factori annot start import org function entri view read entri view import org function entri view read write entri view import org function entri view write entri view import org function impl param import org interceptor async interceptor chain import org interceptor lock cluster depend logic import org marshal core global marshal import org metadata metadata import org notif cachelisten cach notifi import org persist manag order updat manag import org remot transport address import org statetransf state chunk import org statetransf state consum import org statetransf state provid import org statetransf state request command import org statetransf state respons command import org statetransf state transfer lock import org statetransf state transfer manag import org stream impl cluster stream manag import org stream impl local stream manag import org stream impl stream request command import org stream impl stream respons command import org stream impl stream segment respons command import org transact impl transact tabl import org transact xa global transact import org transact xa recoveri recoveri manag import org util byte string import org util concurr command ack collector import org util concurr lock lock manag import org util log log import org util log log factori import org xsite backup sender import org xsite singl site rpc command import org xsite site admin command import org xsite statetransf site state import org xsite statetransf site state consum import org xsite statetransf site state provid import org xsite statetransf site state push command import org xsite statetransf site state transfer control command import org xsite statetransf site state transfer manag author mircea marku jboss com author galder zamarr author sann grinovero sann hibern org red hat inc sinc public class command factori impl implement command factori privat static final log log log factori get log command factori impl class privat static final boolean trace log trace enabl privat data contain datum contain privat cach notifi object object notifi privat cach object object cach privat byte string cach name privat boolean transact privat boolean total order protocol privat async interceptor chain interceptor chain privat distribut manag distribut manag privat invoc context factori icf privat transact tabl tx tabl privat configur configur privat recoveri manag recoveri manag privat state provid state provid privat state consum state consum privat lock manag lock manag privat intern entri factori entri factori privat state transfer manag state transfer manag privat backup sender backup sender privat cancel servic cancel servic privat site state provid x site state provid privat site state consum x site state consum privat site state transfer manag x site state transfer manag privat group manag group manag privat local stream manag local stream manag privat cluster stream manag cluster stream manag privat cluster depend logic cluster depend logic privat command ack collector command ack collector privat state receiv state receiv privat compon registri compon registri privat order updat manag order updat manag privat state transfer lock state transfer lock privat map byte modul command initi modul command initi privat stream marshal marshal inject public void setup depend data contain contain cach notifi object object notifi cach object object cach async interceptor chain interceptor chain distribut manag distribut manag invoc context factori icf transact tabl tx tabl configur configur compon name know compon name map byte modul command initi modul command initi recoveri manag recoveri manag state provid state provid state consum state consum lock manag lock manag intern entri factori entri factori state transfer manag stm backup sender backup sender cancel servic cancel servic site state provid x site state provid site state consum x site state consum site state transfer manag x site state transfer manag group manag group manag local stream manag local stream manag cluster stream manag cluster stream manag cluster depend logic cluster depend logic stream marshal marshal command ack collector command ack collector state receiv state receiv compon registri compon registri order updat manag order updat manag state transfer lock state transfer lock datum contain contain notifi notifi cach cach interceptor chain interceptor chain distribut manag distribut manag icf icf tx tabl tx tabl configur configur modul command initi modul command initi recoveri manag recoveri manag state provid state provid state consum state consum lock manag lock manag entri factori entri factori state transfer manag stm backup sender backup sender cancel servic cancel servic x site state consum x site state consum x site state provid x site state provid x site state transfer manag x site state transfer manag group manag group manag local stream manag local stream manag cluster stream manag cluster stream manag cluster depend logic cluster depend logic marshal marshal command ack collector command ack collector state receiv state receiv compon registri compon registri order updat manag order updat manag state transfer lock state transfer lock start prioriti need happen earli public void start cach name byte string string cach get name transact configur transact transact mode transact total order protocol configur transact transact protocol total order overrid public put key valu command build put key valu command object key object valu metadata metadata long flag bit set boolean realli transact transact enum util contain flag bit set flag bit set return new put key valu command key valu fals notifi metadata flag bit set gener realli transact overrid public remov command build remov command object key object valu long flag bit set return new remov command key valu notifi flag bit set gener transact overrid public invalid command build invalid command long flag bit set object key state consum impl alway use non tx invalid return new invalid command notifi flag bit set gener fals key overrid public invalid command build invalid command long flag bit set collect object key state consum impl alway use non tx invalid return new invalid command datum contain distribut manag notifi flag bit set key gener transact overrid public invalid command build invalid command address origin long flag bit set collect object key invalid alway non transact return new invalid command origin datum contain distribut manag notifi flag bit set key gener fals overrid public remov expir command build remov expir command object key object valu long lifespan return new remov expir command key valu lifespan notifi gener transact overrid public replac command build replac command object key object old valu object new valu metadata metadata long flag bit set return new replac command key old valu new valu notifi metadata flag bit set gener transact overrid public comput command build comput command object key bi function map function boolean comput present metadata metadata long flag bit set return new comput command key map function comput present flag bit set gener transact metadata notifi compon registri overrid public comput absent command build comput absent command object key function map function metadata metadata long flag bit set return new comput absent command key map function flag bit set gener transact metadata notifi compon registri overrid public size command build size command long flag bit set return new size command cach flag bit set overrid public key set command build key set command long flag bit set return new key set command cach flag bit set overrid public entri set command build entri set command long flag bit set return new entri set command cach flag bit set overrid public get key valu command build get key valu command object key long flag bit set return new get key valu command key flag bit set overrid public get command build get command collect key long flag bit set boolean return entri return new get command key flag bit set return entri entri factori overrid public put map command build put map command map map metadata metadata long flag bit set return new put map command map notifi metadata flag bit set gener transact overrid public clear command build clear command long flag bit set return new clear command notifi datum contain flag bit set overrid public evict command build evict command object key long flag bit set return new evict command key notifi flag bit set gener transact entri factori overrid public prepar command build prepar command global transact gtx list write command modif boolean one phase commit return total order protocol new total order non version prepar command cach name gtx modif new prepar command cach name gtx modif one phase commit overrid public version prepar command build version prepar command global transact gtx list write command modif boolean one phase return total order protocol new total order version prepar command cach name gtx modif one phase new version prepar command cach name gtx modif one phase overrid public commit command build commit command global transact gtx return total order protocol new total order commit command cach name gtx new commit command cach name gtx overrid public version commit command build version commit command global transact gtx return total order protocol new total order version commit command cach name gtx new version commit command cach name gtx overrid public rollback command build rollback command global transact gtx return total order protocol new total order rollback command cach name gtx new rollback command cach name gtx overrid public singl rpc command build singl rpc command replic command call return new singl rpc command cach name call overrid public cluster get command build cluster get command object key long flag bit set return new cluster get command key cach name flag bit set param remot true command deseri execut remot overrid public void initi replic command replic command c boolean remot c null return switch c get command id case put key valu command put key valu command c init notifi break case replac command replac command c init notifi break case put map command put map command c init notifi break case remov command remov command c init notifi break case comput command comput command c init notifi compon registri break case comput absent command comput absent command c init notifi compon registri break case singl rpc command singl rpc command src singl rpc command c src init interceptor chain icf src get command null initi replic command src get command fals break case invalid command invalid command ic invalid command c ic init notifi break case invalid command invalid command ilc invalid command c ilc init distribut manag notifi datum contain break case prepar command case version prepar command case total order non version prepar command case total order version prepar command prepar command pc prepar command c pc init interceptor chain icf tx tabl pc initi notifi recoveri manag pc get modif null replic command nest pc get modif initi replic command nest fals pc mark transact remot remot break case commit command case version commit command case total order commit command case total order version commit command commit command commit command commit command c commit command init interceptor chain icf tx tabl commit command mark transact remot remot break case rollback command case total order rollback command rollback command rollback command rollback command c rollback command init interceptor chain icf tx tabl rollback command mark transact remot remot break case clear command clear command cc clear command c cc init notifi datum contain break case cluster get command cluster get command cluster get command cluster get command c cluster get command initi icf entri factori interceptor chain break case lock control command lock control command lcc lock control command c lcc init interceptor chain icf tx tabl lcc mark transact remot remot break case state request command state request command c init state provid break case state respons command state respons command c init state consum state receiv break case get doubt transact command get doubt transact command gptx get doubt transact command c gptx init recoveri manag break case tx complet notif command tx complet notif command ftx tx complet notif command c ftx init tx tabl lock manag recoveri manag state transfer manag break case distribut execut command distribut execut command dec distribut execut command c dec init cach break case get doubt tx info command get doubt tx info command gid tx info command get doubt tx info command c gid tx info command init recoveri manag break case complet transact command complet transact command ccc complet transact command c ccc init recoveri manag break case creat cach command creat cach command creat cach command creat cach command c creat cach command init cach get cach manag break case site admin command site admin command x site admin command site admin command c x site admin command init backup sender break case cancel command cancel command cancel command cancel command c cancel command init cancel servic break case site state transfer control command site state transfer control command x site state transfer control command site state transfer control command c x site state transfer control command initi x site state provid x site state consum x site state transfer manag break case site state push command site state push command x site state push command site state push command c x site state push command initi x site state consum break case get key group command get key group command get key group command get key group command c get key group command set group manag group manag break case cluster get command cluster get command cluster get command cluster get command c cluster get command init icf entri factori interceptor chain tx tabl break case stream request command stream request command stream request command stream request command c stream request command inject local stream manag break case stream respons command stream respons command stream respons command stream respons command c stream respons command inject cluster stream manag break case stream segment respons command stream segment respons command stream segment respons command stream segment respons command c stream segment respons command inject cluster stream manag break case remov expir command remov expir command remov expir command remov expir command c remov expir command init notifi break case backup ack command backup ack command command backup ack command c command set command ack collector command ack collector break case backup write rpc command backup write rpc command bwc backup write rpc command c bwc init icf interceptor chain notifi compon registri break case backup multi key ack command backup multi key ack command c set command ack collector command ack collector break case except ack command except ack command c set command ack collector command ack collector break case backup put map rpc command backup put map rpc command c init icf interceptor chain notifi break case invalid version command invalid version command invalid version command invalid version command c invalid version command init datum contain order updat manag state transfer lock state transfer manag break function command case read key command case tx read key command read key command c init compon registri break case read mani command case tx read mani command read mani command c init compon registri break case read write key command case read write key valu command case write key command case write key valu command abstract write key command c init compon registri break case read write mani command case read write mani entri command case write mani command case write mani entri command abstract write mani command c init compon registri break default modul command initi mci modul command initi get c get command id mci null mci initi replic command c remot els trace log tracef noth initi command c overrid public lock control command build lock control command collect key long flag bit set global transact gtx return new lock control command key cach name flag bit set gtx overrid public lock control command build lock control command object key long flag bit set global transact gtx return new lock control command key cach name flag bit set gtx overrid public lock control command build lock control command collect key long flag bit set return new lock control command key cach name flag bit set null overrid public state request command build state request command state request command type subtyp address sender int topolog id set integ segment return new state request command cach name subtyp sender topolog id segment overrid public state respons command build state respons command address sender int topolog id collect state chunk state chunk boolean appli state boolean push transfer return new state respons command cach name sender topolog id state chunk appli state push transfer overrid public string get cach name return cach name string overrid public get doubt transact command build get doubt transact command return new get doubt transact command cach name overrid public tx complet notif command build tx complet notif command xid xid global transact global transact return new tx complet notif command xid global transact cach name overrid public tx complet notif command build tx complet notif command long intern id return new tx complet notif command intern id cach name overrid public distribut execut command build distribut execut command callabl callabl address sender collect key return new distribut execut command cach name key callabl overrid public get doubt tx info command build get doubt tx info command return new get doubt tx info command cach name overrid public complet transact command build complet transact command xid xid boolean commit return new complet transact command cach name xid commit overrid public creat cach command build creat cach command string cach name creat string cach configur name return new creat cach command cach name cach name creat cach configur name overrid public creat cach command build creat cach command string cach name creat string cach configur name int size return new creat cach command cach name cach name creat cach configur name size overrid public cancel command build cancel command command command return new cancel command cach name command overrid public site state transfer control command build site state transfer control command state transfer control control string site name return new site state transfer control command cach name control site name overrid public site admin command build site admin command string site name admin oper op integ failur long min time wait return new site admin command cach name site name op failur min time wait overrid public site state push command build site state push command site state chunk long timeout milli return new site state push command cach name chunk timeout milli overrid public singl site rpc command build singl site rpc command visit command command return new singl site rpc command cach name command overrid public get key group command build get key group command long flag bit set object group name return new get key group command flag bit set group name set group manag group manag overrid public stream request command build stream request command object id boolean parallel stream stream request command type type set integ segment set key set exclud key boolean includ loader object termin oper return new stream request command cach name cach get cach manag get address id parallel stream type segment key exclud key includ loader termin oper overrid public stream respons command build stream respons command object identifi boolean complet set integ lose segment respons lose segment empti return new stream respons command cach name cach get cach manag get address identifi complet respons els return new stream segment respons command cach name cach get cach manag get address identifi complet respons lose segment overrid public get cach entri command build get cach entri command object key long flag bit set return new get cach entri command key flag bit set entri factori overrid public cluster get command build cluster get command list key long flag bit set global transact gtx return new cluster get command cach name key flag bit set gtx privat command invoc id gener boolean tx tx return command invoc id els return command invoc id gener id cluster depend logic get address overrid public read key command build read key command key function read entri view f param param data convers key datum convers data convers valu data convers return new read key command key f param key data convers valu data convers compon registri overrid public read mani command build read mani command collect extend key function read entri view f param param data convers key datum convers data convers valu data convers return new read mani command key f param key data convers valu data convers compon registri overrid public read write key valu command build read write key valu command key valu bi function read write entri view f param param data convers key datum convers data convers valu data convers return new read write key valu command key valu f gener transact get valu matcher f param key data convers valu data convers compon registri overrid public read write key command build read write key command key function read write entri view f param param data convers key datum convers data convers valu data convers return new read write key command key f gener transact get valu matcher f param key data convers valu data convers compon registri overrid public read write mani command build read write mani command collect extend key function read write entri view f param param data convers key datum convers data convers valu data convers return new read write mani command key f param gener transact key data convers valu data convers compon registri overrid public read write mani entri command build read write mani entri command map extend extend entri bi function read write entri view f param param data convers key datum convers data convers valu data convers return new read write mani entri command entri f param gener transact key data convers valu data convers compon registri overrid public invalid version command build invalid version command int topolog id object key int topolog id long version boolean remov return new invalid version command cach name topolog id key topolog id version remov overrid public write key command build write key command key consum write entri view f param param data convers key datum convers data convers valu data convers return new write key command key f gener transact get valu matcher f param key data convers valu data convers compon registri overrid public write key valu command build write key valu command key valu bi consum write entri view f param param data convers key datum convers data convers valu data convers return new write key valu command key valu f gener transact get valu matcher f param key data convers valu data convers compon registri overrid public write mani command build write mani command collect extend key consum write entri view f param param data convers key datum convers data convers valu data convers return new write mani command key f param gener transact key data convers valu data convers compon registri overrid public write mani entri command build write mani entri command map extend extend entri bi consum write entri view f param param data convers key datum convers data convers valu data convers return new write mani entri command entri f param gener transact key data convers valu data convers compon registri overrid public backup ack command build backup ack command long id int topolog id return new backup ack command cach name id topolog id overrid public backup multi key ack command build backup multi key ack command long id int segment int topolog id return new backup multi key ack command cach name id segment topolog id overrid public except ack command build except ack command long id throwabl throwabl int topolog id return new except ack command cach name id throwabl topolog id overrid public backup write rpc command build backup write rpc command data write command command backup write rpc command cmd new backup write rpc command cach name command init backup write rpc command cmd return cmd overrid public backup put map rpc command build backup put map rpc command put map command command return new backup put map rpc command cach name command privat valu matcher get valu matcher object serial function ann get class get annot serial function class ann null return valu matcher valu ann valu matcher string extern ext global marshal marshal find extern ext null ext instanceof lambda extern return valu matcher valu lambda extern ext valu matcher string return valu matcher 
packag org statetransf import static org common util util str import java util iter import java util map import java util concurr concurr hash map import java util concurr concurr map import org contain merg store import org contain data contain import org contain entri cach entri import org context flag import org context invoc context import org factori annot inject import org persist persist util import org persist manag persist manag import org util time servic import org util log log import org util log log factori keep track key updat normal oper state transfer sinc command process happen concurr state transfer need keep track key updat normal command order reject updat state transfer assum key normal oper recent thant one receiv state transfer author pedro ruivo sinc public class commit manag privat static final log log log factori get log commit manag class privat static final boolean trace log trace enabl privat final concurr map object discard polici tracker new concurr hash map privat data contain datum contain privat persist manag persist manag privat time servic time servic privat volatil boolean track state transfer privat volatil boolean track site state transfer inject public final void inject data contain datum contain persist manag persist manag time servic time servic datum contain datum contain persist manag persist manag time servic time servic start track key commit key commit flag flag state transfer receiv key track discard param track flag start track key local site state transfer remot site state transfer public final void start track flag track set track track true stop track key commit param track flag stop track key local site state transfer remot site state transfer public final void stop track flag track set track track fals track state transfer track site state transfer trace log tracef track disabl clear tracker tracker tracker clear els iter map entri object discard polici iter tracker entri set iter iter next iter next get valu updat track state transfer track site state transfer iter remov tri commit cach entri entri commit origin state transfer oper alreadi updat param entri entri commit param oper code null identifi commit origin normal oper otherwis param ctx public final void commit final cach entri entri final flag oper boolean l invoc context ctx trace log tracef tri commit key oper flag write invalid str entri get key oper l l oper null track state transfer track site state transfer track null mean normal put track enabl invalid commit without track trace log tracef commit key invalid normal put track enabl str entri get key commit entri entri ctx return track disabl oper put state transfer track mean state transfer end cancel due clear command trace log tracef commit key state transfer key track enabl str entri get key return tracker comput entri get key discard polici discard polici null discard polici ignor oper trace log tracef commit key alreadi overwritten discard polici str entri get key discard polici return discard polici commit entri entri ctx discard polici new discard polici calcul discard polici oper trace log tracef commit key old discard polici new discard polici str entri get key discard polici new discard polici return new discard polici privat void commit entri cach entri entri invoc context ctx entri evict entri remov entri get valu instanceof merg store persist util load comput data contain datum contain persist manag entri get key ctx time servic k old entri factori object new valu merg store entri get valu merg old entri null null old entri get valu new valu null return null return factori creat k new valu entri get metadata els entri commit datum contain return code true flag track code fals otherwis public final boolean track flag track flag switch track flag case return track state transfer case return track site state transfer return fals return code true key track code fals otherwis public final boolean empti return tracker empti overrid public string string return commit manag tracker tracker size key track state transfer track state transfer track site state transfer track site state transfer privat void set track flag track boolean valu trace log tracef set track track valu switch track case track state transfer valu break case track site state transfer valu break privat boolean track disabl flag track return track flag track state transfer track flag track site state transfer privat discard polici calcul discard polici flag oper boolean discard state transfer track state transfer oper flag boolean discard site state transfer track site state transfer oper flag discard state transfer discard site state transfer return null return new discard polici discard state transfer discard site state transfer privat static class discard polici privat boolean discard privat boolean discard site privat discard polici boolean discard boolean discard site discard discard discard site discard site public synchron final boolean ignor flag oper return discard oper flag discard site oper flag public synchron boolean updat boolean discard boolean discard site discard discard discard site discard site return discard discard site overrid public boolean equal object return true null get class get class return fals discard polici discard polici return discard discard discard site discard site overrid public int hash code int result discard result result discard site return result overrid public string string return discard polici discard state transfer discard discard site state transfer discard site 
packag org configur cach import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set import org common marshal marshal compat mode configur author galder zamarr sinc public final class compat mode configur public static final attribut definit boolean attribut definit builder enabl fals immut auto persist fals build public static final attribut definit marshal attribut definit builder marshal null marshal class immut build static attribut set attribut definit set return new attribut set compat mode configur class privat final attribut boolean enabl privat final attribut marshal marshal privat final attribut set attribut compat mode configur attribut set attribut attribut attribut check protect enabl attribut attribut marshal attribut attribut public boolean enabl return enabl get public marshal marshal return marshal get public attribut set attribut return attribut overrid public string string return compat mode configur attribut attribut overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals compat mode configur compat mode configur obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result 
packag org configur cach import static org configur cach compat mode configur import static org configur cach compat mode configur import org common configur builder import org common configur attribut attribut set import org common marshal marshal import org configur global global configur compat mode configur builder author galder zamarr sinc public class compat mode configur builder extend abstract configur child builder implement builder compat mode configur privat final attribut set attribut compat mode configur builder configur builder builder super builder attribut compat mode configur attribut definit set enabl compat mode emb differ remot endpoint hot rod memcach etc public compat mode configur builder enabl attribut attribut set true return disabl compat mode emb public compat mode configur builder disabl attribut attribut set fals return public boolean enabl return attribut attribut get set whether compat mode enabl disabl param enabl true compat mode enabl fals disabl public compat mode configur builder enabl boolean enabl attribut attribut set enabl return set marshal instanc use interoper layer public compat mode configur builder marshal marshal marshal attribut attribut set marshal return public marshal marshal return attribut attribut get overrid public void valid op overrid public void valid global configur global config overrid public compat mode configur creat return new compat mode configur attribut protect overrid public builder read compat mode configur templat attribut read templat attribut return 
packag org util concurr import static java util object requir non null import java util collect import java util list import java util map import java util object import java util concurr complet futur import java util concurr complet except import java util concurr execut except import java util concurr time unit import java util stream collector util method connect link complet futur futur author dan berindei sinc public class complet futur privat static final complet futur complet empti map futur complet futur complet futur collect empti map privat static final complet futur complet null futur complet futur complet futur null privat static final long time unit nano suppress warn uncheck public static complet futur map complet empti map return complet empti map futur suppress warn uncheck public static complet futur complet null return complet null futur public static complet futur list sequenc list complet futur futur complet futur void complet futur futur array new complet futur futur size return appli v futur stream map complet futur join collect collector list public static complet futur complet except futur throwabl ex complet futur futur new complet futur futur complet except ex return futur wait link complet futur complet p ignor link complet futur complet normal except param futur link complet futur test param time timeout param unit timeout unit return code true complet code fals time throw interrupt except interrupt wait throw null pointer except code futur code unit code null public static boolean await complet futur futur long time time unit unit throw interrupt except tri requir non null futur complet futur must non null get time requir non null unit time unit must non null return true catch execut except e return true catch java util concurr timeout except e return fals wait long time link complet futur complet param futur link complet futur param return type return result valu throw execut except link complet futur complet except throw interrupt except current thread interrupt wait public static await complet futur futur throw execut except interrupt except tri return object requir non null futur complet futur must non null get time unit catch java util concurr timeout except e throw new illeg state except never happen e public static complet except complet except throwabl instanceof complet except return complet except els return new complet except public static void rethrow except throwabl null throw complet except public static throwabl extract except throwabl throwabl caus get caus caus null instanceof complet except return caus return 
packag org factori import static org factori know compon name import java lang ref weak refer import java util collect import java util map import org advanc cach import org cach impl cach configur bean import org command command factori import org command modul modul command initi import org common cach configur except import org common cach except import org common marshal stream marshal import org configur cach configur import org conflict impl intern conflict manag import org contain version version gener import org factori annot inject import org factori compon compon metadata import org factori compon compon metadata repo import org lifecycl compon statu import org lifecycl modul lifecycl import org notif cachemanagerlisten cach manag notifi import org remot inboundhandl per cach inbound invoc handler import org remot respons respons gener import org statetransf state transfer lock import org statetransf state transfer manag import org stat cluster cach stat import org transact transact tabl import org util time servic import org util log log import org util log log factori name cach specif compon author manik surtani sinc public class compon registri extend abstract compon registri privat final global compon registri global compon privat final string cach name privat static final log log log factori get log compon registri class privat cach manag notifi cach manag notifi cach field privat state transfer manag state transfer manag privat respons gener respons gener privat command factori command factori privat state transfer lock state transfer lock privat per cach inbound invoc handler inbound invoc handler privat version gener version gener protect final weak refer class loader default class loader inject public void set cach manag notifi cach manag notifi cach manag notifi cach manag notifi cach manag notifi creat instanc compon registri configur pass automat regist param configur configur creat param cach cach param global compon share compon registri deleg public compon registri string cach name configur configur advanc cach cach global compon registri global compon class loader default class loader default class loader new weak refer default class loader tri cach name cach name cach name null throw new cach configur except cach name null global compon null throw new null pointer except global compon registri null global compon global compon regist compon compon registri class regist compon configur configur class regist compon new bootstrap factori cach configur bootstrap factori class bootstrap compon regist modul specif command initi modul classload map byte modul command initi initi global compon get modul command initi initi null initi empti regist non volatil compon initi modul command initi mci initi valu regist non volatil compon mci mci get class els regist non volatil compon collect empti map catch except e throw new cach except unabl construct compon registri e overrid protect class loader get class loader return default class loader get overrid protect log get log return log overrid suppress warn uncheck public final get compon string compon type name string name boolean name global compon type name name name return global compon get compon compon type name name name els return get local compon compon type name name name suppress warn uncheck public final get local compon string compon type name string name boolean name return super get compon compon type name name name suppress warn uncheck public final get local compon class compon type string compon type name compon type get name return get local compon compon type name compon type name true overrid protect final compon lookup compon string compon class name string name boolean name global compon class name name name log tracef look global compon compon class name return global compon lookup compon compon class name name name els log tracef look local compon compon class name return lookup local compon compon class name name name protect final compon lookup local compon string compon class name string name boolean name return super lookup compon compon class name name name public final global compon registri get global compon registri return global compon overrid protect final get creat compon class compon class string name boolean name global compon class get name name name log tracef get creat global compon compon class return global compon get creat compon compon class name name els log tracef get creat local compon compon class return super get creat compon compon class name name privat boolean global string compon class name string name boolean name return global name name compon class name overrid protect abstract compon factori get factori class compon class string cf class get compon metadata repo find factori compon compon class cf class null throw stack awar configur except regist default factori compon compon class find abstract compon factori cf global cf class log tracef look global factori compon compon class cf global compon get factori compon class els log tracef look local factori compon compon class cf super get factori compon class return cf overrid protect final void regist compon intern object compon string name boolean name global compon get class get name name name global compon regist compon intern compon name name els super regist compon intern compon name name overrid protect abstract compon factori creat compon factori intern class compon class string cf class global cf class return global compon creat compon factori intern compon class cf class return super creat compon factori intern compon class cf class privat boolean global string class name compon metadata get compon metadata repo find compon metadata class name return null global scope overrid public void start global compon start boolean need notifi state compon statu state compon statu stop exist compon transit state need destroy fail cach stop rewir non volatil compon transit state need initi start state compon statu rewir noth cach alreadi run state start allow return set start compon sinc compon specif state transfer need abl locat registri via inbound invoc handler cach compon global compon regist name compon registri cach name notifi cach start get compon configur class super start super post start need notifi state compon statu cach manag notifi notifi cach start cach name void notifi cach start configur configur modul lifecycl l global compon modul lifecycl l cach start configur cach name overrid public void stop state stop allow global compon unregist name compon registri cach name boolean need notifi state compon statu state compon statu need notifi modul lifecycl l global compon modul lifecycl log trace enabl log tracef invok cach stop l l cach stop cach name super stop state compon statu need notifi modul lifecycl l global compon modul lifecycl log trace enabl log tracef invok cach stop l l cach stop cach name cach manag notifi notifi cach stop cach name overrid public time servic get time servic return global compon get time servic public string get cach name return cach name cach shortcut get compon stream marshal class know compon name public stream marshal get cach marshal return global compon get compon stream marshal class cach shortcut get compon state transfer manag class public state transfer manag get state transfer manag return state transfer manag cach shortcut get compon respons gener class public respons gener get respons gener return respons gener cach shortcut get local compon command factori class public command factori get command factori return command factori cach shortcut get compon state transfer manag class public state transfer lock get state transfer lock return state transfer lock cach shortcut get local compon version gener class public version gener get version gener return version gener cach shortcut get compon per cach inbound invoc handler class public per cach inbound invoc handler get per cach inbound invoc handler return inbound invoc handler invok link bootstrap factori regist link modul command initi good place regist compon n depend protect void bootstrap compon invok last servic wire public void cach compon state transfer manag get creat compon state transfer manag class respons gener get creat compon respons gener class command factori get local compon command factori class state transfer lock get creat compon state transfer lock class inbound invoc handler get creat compon per cach inbound invoc handler class version gener get creat compon version gener class get creat compon cluster cach stat class need save ref field initi compon get creat compon cach configur bean class get creat compon intern conflict manag class overrid public compon metadata repo get compon metadata repo return global compon get compon metadata repo public final transact tabl get transact tabl return get compon org transact impl transact tabl class 
packag org jmx import java util array list import java util list import java util set import javax manag bean server import javax manag object name import org common cach except import org factori abstract compon registri import org factori compon registri import org factori compon compon metadata import org util log log import org util log log factori regist set compon bean server author mircea marku jboss com author galder zamarr sinc public class compon jmx registr privat static final log log log factori get log compon jmx registr class privat bean server bean server privat string jmx domain privat string group name privat set abstract compon registri compon compon public static string compon public static string name tor param bean server server mbean regist param compon compon param group name name jmx group name see java lang manag manag factori get platform bean server see href http java sun com j se doc guid manag mxbean html mbean server platform bean server public compon jmx registr bean server bean server set abstract compon registri compon compon string group name bean server bean server compon compon group name group name public void set jmx domain string jmx domain jmx domain jmx domain perform bean registr public void regist bean throw cach except tri list resourc bean resourc bean get resourc bean compon resourc bean resourc resourc bean jmx util regist bean resourc get object name resourc bean server catch except e throw new cach except failur regist mbean e unregist bean regist link regist bean public void unregist bean throw cach except log trace unregist jmx resourc tri list resourc bean resourc bean get resourc bean compon resourc bean resourc resourc bean jmx util unregist bean get object name resourc bean server catch except e throw new cach except failur unregist mbean e privat list resourc bean get resourc bean compon throw field except class find except list resourc bean resourc bean new array list resourc bean compon size compon registri compon compon compon compon metadata md compon get metadata md manag resourc bean resourc bean new resourc bean compon get instanc md manag compon metadata resourc bean add resourc bean return resourc bean privat object name get object name resourc bean resourc throw except return get object name resourc get object name protect object name get object name string resourc name throw except return new object name get object name jmx domain group name resourc name public static string get object name string jmx domain string group name string resourc name return jmx domain group name resourc name 
packag org lifecycl import org util log log import org util log log factori differ state compon may author manik surtani see org common api lifecycl sinc public enum compon statu object instanti start call code start code method call yet complet code start code method complet compon run code stop code method call yet complet code stop code method complet compon termin compon fail state due problem one lifecycl transit phase privat static final log log log factori get log compon statu class public boolean need destroy fail cach return compon statu public boolean start allow switch case return true default return fals public boolean need initi start switch case return true default return fals public boolean stop allow switch case case case case return fals default return true public boolean allow invoc return compon statu public boolean start return compon statu compon statu public boolean termin return compon statu public boolean stop return compon statu 
packag org filter import java io except import java io object input import java io object output import java util collect import java util set import org common io unsign numer import org common marshal abstract extern import org factori compon registri import org factori annot inject import org marshal core id allow compos sever filter author mircea marku sinc public class composit key filter implement key filter privat final key filter super filter public composit key filter key filter super filter filter filter overrid public boolean accept key key filter super k filter k accept key return fals return true inject protect void inject depend compon registri cr key filter super f filter cr wire depend f public static class extern extend abstract extern composit key filter overrid public set class extend composit key filter get type class return collect singleton composit key filter class overrid public void write object object output output composit key filter object throw except unsign numer write unsign int output object filter length key filter filter object filter output write object filter overrid public composit key filter read object object input input throw except class find except int filter size unsign numer read unsign int input key filter filter new key filter filter size int filter size filter key filter input read object return new composit key filter filter overrid public integ get id return id 
packag org filter import java io except import java io object input import java io object output import java util collect import java util set import org common io unsign numer import org common marshal abstract extern import org factori compon registri import org factori annot inject import org marshal core id import org metadata metadata allow compos sever key valu filter author wburn sinc public class composit key valu filter implement key valu filter privat final key valu filter super super filter public composit key valu filter key valu filter super super filter filter filter overrid public boolean accept key valu metadata metadata key valu filter super super filter filter filter accept key valu metadata return fals return true inject protect void inject depend compon registri cr key valu filter super super f filter cr wire depend f public static class extern extend abstract extern composit key valu filter overrid public set class extend composit key valu filter get type class return collect singleton composit key valu filter class overrid public void write object object output output composit key valu filter object throw except unsign numer write unsign int output object filter length key valu filter filter object filter output write object filter overrid public composit key valu filter read object object input input throw except class find except int filter size unsign numer read unsign int input key valu filter filter new key valu filter filter size int filter size filter key valu filter input read object return new composit key valu filter filter overrid public integ get id return id 
packag org client hotrod configur import java lang ref weak refer import java util array import java util collect import java util list import java util map import java util properti import org client hotrod protocol version import org client hotrod impl configur properti import org client hotrod impl consistenthash consist hash import org client hotrod impl transport transport factori import org client hotrod impl transport tcp failov request balanc strategi import org common configur build import org common marshal marshal import org common util type properti configur author tristan tarrant sinc build configur builder class public class configur privat final executor factori configur async executor factori privat final class extend failov request balanc strategi balanc strategi class privat final failov request balanc strategi balanc strategi privat final weak refer class loader class loader privat final client intellig client intellig privat final connect pool configur connect pool privat final int connect timeout privat final class extend consist hash consist hash impl privat final boolean forc return valu privat final int key size estim privat final class extend marshal marshal class privat final marshal marshal privat final protocol version protocol version privat final list server configur server privat final int socket timeout privat final secur configur secur privat final boolean tcp delay privat final boolean tcp keep aliv privat final class extend transport factori transport factori privat final int valu size estim privat final int max retri privat final near cach configur near cach privat final list cluster configur cluster privat final list string serial whitelist privat final int batch size configur executor factori configur async executor factori class extend failov request balanc strategi balanc strategi class failov request balanc strategi balanc strategi class loader class loader client intellig client intellig connect pool configur connect pool int connect timeout class extend consist hash consist hash impl boolean forc return valu int key size estim marshal marshal class extend marshal marshal class protocol version protocol version list server configur server int socket timeout secur configur secur boolean tcp delay boolean tcp keep aliv class extend transport factori transport factori int valu size estim int max retri near cach configur near cach list cluster configur cluster list string serial whitelist int batch size async executor factori async executor factori balanc strategi class balanc strategi class balanc strategi balanc strategi max retri max retri class loader new weak refer class loader client intellig client intellig connect pool connect pool connect timeout connect timeout consist hash impl consist hash impl forc return valu forc return valu key size estim key size estim marshal class marshal class marshal marshal protocol version protocol version server collect unmodifi list server socket timeout socket timeout secur secur tcp delay tcp delay tcp keep aliv tcp keep aliv transport factori transport factori valu size estim valu size estim near cach near cach cluster cluster serial whitelist serial whitelist batch size batch size public executor factori configur async executor factori return async executor factori public class extend failov request balanc strategi balanc strategi class return balanc strategi class public failov request balanc strategi balanc strategi return balanc strategi deprec public class loader class loader return class loader get public client intellig client intellig return client intellig public connect pool configur connect pool return connect pool public int connect timeout return connect timeout public class extend consist hash consist hash impl return array copi consist hash impl consist hash impl length public class extend consist hash consist hash impl int version return consist hash impl version public boolean forc return valu return forc return valu public int key size estim return key size estim public marshal marshal return marshal public class extend marshal marshal class return marshal class public near cach configur near cach return near cach deprec use link configur version instead deprec public string protocol version return protocol version string public protocol version version return protocol version public list server configur server return server public list cluster configur cluster return cluster public int socket timeout return socket timeout public secur configur secur return secur public boolean tcp delay return tcp delay public boolean tcp keep aliv return tcp keep aliv public class extend transport factori transport factori return transport factori public int valu size estim return valu size estim public int max retri return max retri public list string serial whitelist return serial whitelist public int batch size return batch size overrid public string string return configur async executor factori async executor factori balanc strategi class balanc strategi class balanc strategi balanc strategi class loader class loader client intellig client intellig connect pool connect pool connect timeout connect timeout consist hash impl array string consist hash impl forc return valu forc return valu key size estim key size estim marshal class marshal class marshal marshal protocol version protocol version server server socket timeout socket timeout secur secur tcp delay tcp delay tcp keep aliv tcp keep aliv transport factori transport factori valu size estim valu size estim max retri max retri serial white list serial whitelist batch size batch size near cach near cach public properti properti properti properti new properti async executor factori factori class null properti set properti configur properti async executor factori factori class get name type properti aef prop async executor factori properti string key array list configur properti configur properti aef prop contain key key properti set properti key aef prop get properti key properti set properti configur properti balanc strategi class get name properti set properti configur properti client intellig name properti set properti configur properti integ string connect timeout int consist hash impl length int version consist hash impl version null properti set properti configur properti version consist hash impl version get name properti set properti configur properti boolean string forc return valu properti set properti configur properti integ string key size estim properti set properti configur properti marshal class get name properti set properti configur properti version string properti set properti configur properti integ string socket timeout properti set properti configur properti boolean string tcp delay properti set properti configur properti boolean string tcp keep aliv properti set properti configur properti transport factori get name properti set properti configur properti integ string valu size estim properti set properti configur properti integ string max retri properti set properti exhaust action integ string connect pool exhaust action ordin properti set properti max activ integ string connect pool max activ properti set properti max total integ string connect pool max total properti set properti max wait long string connect pool max wait properti set properti max idl integ string connect pool max idl properti set properti min idl integ string connect pool min idl properti set properti num test per evict run integ string connect pool num test per evict run properti set properti min evict idl time milli long string connect pool min evict idl time properti set properti time evict run milli long string connect pool time evict run properti set properti lifo boolean string connect pool lifo properti set properti test borrow boolean string connect pool test borrow properti set properti test return boolean string connect pool test return properti set properti test idl boolean string connect pool test idl string builder server new string builder server configur server server server length server append server append server host append append server port properti set properti configur properti server string properti set properti configur properti boolean string secur ssl enabl secur ssl key store file name null properti set properti configur properti secur ssl key store file name secur ssl key store password null properti set properti configur properti new string secur ssl key store password secur ssl key store certif password null properti set properti configur properti new string secur ssl key store certif password secur ssl trust store file name null properti set properti configur properti secur ssl trust store file name secur ssl trust store password null properti set properti configur properti new string secur ssl trust store password secur ssl sni host name null properti set properti configur properti secur ssl sni host name secur ssl protocol null properti set properti configur properti secur ssl protocol secur ssl ssl context null properti put configur properti secur ssl ssl context properti set properti configur properti boolean string secur authent enabl secur authent sasl mechan null properti set properti configur properti secur authent sasl mechan secur authent callback handler null properti put configur properti secur authent callback handler secur authent server name null properti set properti configur properti secur authent server name secur authent client subject null properti put configur properti secur authent client subject map entri string string entri secur authent sasl properti entri set properti set properti configur properti entri get key entri get valu properti set properti configur properti string join serial whitelist properti set properti configur properti integ string batch size return properti 
packag org client hotrod configur import java lang ref weak refer import java util array list import java util array import java util collect import java util hash set import java util list import java util properti import java util set import java util regex matcher import java util regex pattern import java util stream collector import org client hotrod protocol version import org client hotrod remot cach manag import org client hotrod impl configur properti import org client hotrod impl type properti import org client hotrod impl consistenthash consist hash import org client hotrod impl consistenthash consist hash import org client hotrod impl consistenthash segment consist hash import org client hotrod impl transport transport factori import org client hotrod impl transport tcp failov request balanc strategi import org client hotrod impl transport tcp round robin balanc strategi import org client hotrod impl transport tcp tcp transport factori import org client hotrod log log import org client hotrod log log factori import org common configur builder import org common marshal marshal import org common marshal jboss gener boss marshal import org common util util configur builder use gener immut link configur object pass link remot cach manag remot cach manag configur constructor author tristan tarrant sinc public class configur builder implement configur child builder builder configur privat static final log log log factori get log configur builder class log class match pv host port pv host port address privat static final pattern pattern compil fa f privat weak refer class loader class loader privat final executor factori configur builder async executor factori privat class extend failov request balanc strategi balanc strategi class round robin balanc strategi class privat failov request balanc strategi balanc strategi privat client intellig client intellig client intellig get default privat final connect pool configur builder connect pool privat int connect timeout configur properti suppress warn uncheck privat final class extend consist hash consist hash impl new class null consist hash class segment consist hash class privat boolean forc return valu privat int key size estim configur properti privat class extend marshal marshal class privat marshal marshal privat protocol version protocol version protocol version privat final list server configur builder server new array list server configur builder privat int socket timeout configur properti privat final secur configur builder secur privat boolean tcp delay true privat boolean tcp keep aliv fals privat class extend transport factori transport factori tcp transport factori class privat int valu size estim configur properti privat int max retri configur properti privat final near cach configur builder near cach privat final list string white list reg ex new array list privat int batch size configur properti privat final list cluster configur builder cluster new array list cluster configur builder public configur builder class loader new weak refer thread current thread get context class loader connect pool new connect pool configur builder async executor factori new executor factori configur builder secur new secur configur builder near cach new near cach configur builder overrid public server configur builder add server server configur builder builder new server configur builder server add builder return builder overrid public cluster configur builder add cluster string cluster name cluster configur builder builder new cluster configur builder cluster name cluster add builder return builder overrid public configur builder add server string server string server server split matcher matcher matcher server trim matcher match string v host matcher group string v host matcher group string host v host null v host v host string port string matcher group int port port string null configur properti integ pars int port string add server host host port port els throw log pars error server address server return overrid public executor factori configur builder async executor factori return async executor factori overrid public configur builder balanc strategi string balanc strategi balanc strategi class util load class balanc strategi class loader return overrid public configur builder balanc strategi failov request balanc strategi balanc strategi balanc strategi balanc strategi return overrid public configur builder balanc strategi class extend failov request balanc strategi balanc strategi balanc strategi class balanc strategi return overrid public configur builder class loader class loader cl class loader new weak refer cl return class loader class loader return class loader null class loader get null overrid public configur builder client intellig client intellig client intellig client intellig client intellig return overrid public connect pool configur builder connect pool return connect pool overrid public configur builder connect timeout int connect timeout connect timeout connect timeout return overrid public configur builder consist hash impl int version class extend consist hash consist hash class version log warn hash function version longer support els consist hash impl version consist hash class return overrid public configur builder consist hash impl int version string consist hash class version log warn hash function version longer support els consist hash impl version util load class consist hash class class loader return overrid public configur builder forc return valu boolean forc return valu forc return valu forc return valu return overrid public configur builder key size estim int key size estim key size estim key size estim return overrid public configur builder marshal string marshal marshal class util load class marshal class loader return overrid public configur builder marshal class extend marshal marshal marshal class marshal return overrid public configur builder marshal marshal marshal marshal marshal return public near cach configur builder near cach return near cach deprec use link configur builder version protocol version instead deprec overrid public configur builder protocol version string protocol version protocol version protocol version pars version protocol version return overrid public configur builder version protocol version protocol version protocol version protocol version return overrid public secur configur builder secur return secur overrid public configur builder socket timeout int socket timeout socket timeout socket timeout return overrid public configur builder tcp delay boolean tcp delay tcp delay tcp delay return overrid public configur builder tcp keep aliv boolean keep aliv tcp keep aliv keep aliv return overrid public configur builder transport factori string transport factori transport factori util load class transport factori class loader return overrid public configur builder transport factori class extend transport factori transport factori transport factori transport factori return overrid public configur builder valu size estim int valu size estim valu size estim valu size estim return overrid public configur builder max retri int max retri max retri max retri return overrid public configur builder add java serial white list string reg ex white list reg ex add array list reg ex return overrid public configur builder batch size int batch size batch size throw new illeg argument except batch size must great batch size batch size return overrid public configur builder properti properti properti type properti type type properti type properti properti type contain key configur properti async executor factori factori class type get properti configur properti null true async executor factori executor properti type balanc strategi type get properti configur properti balanc strategi class get name true client intellig type get enum properti configur properti client intellig class client intellig get default true connect pool pool properti type connect timeout type get int properti configur properti connect timeout true type contain key configur properti log warn hash function version longer support int consist hash impl length consist hash impl null int version consist hash impl version type get properti configur properti version consist hash impl get name true forc return valu type get boolean properti configur properti forc return valu true key size estim type get int properti configur properti key size estim true type contain key configur properti marshal type get properti configur properti null true version protocol version pars version type get properti configur properti protocol version string true string server list type get properti configur properti null true server list null server clear add server server list socket timeout type get int properti configur properti socket timeout true tcp delay type get boolean properti configur properti tcp delay true tcp keep aliv type get boolean properti configur properti tcp keep aliv true type contain key configur properti transport factori type get properti configur properti null true valu size estim type get int properti configur properti valu size estim true max retri type get int properti configur properti max retri true secur ssl properti properti secur authent properti properti string serial whitelist type get properti configur properti serial whitelist null string class serial whitelist split collect add white list reg ex class batch size type get int properti configur properti batch size true return overrid public void valid connect pool valid async executor factori valid secur valid near cach valid max retri throw log invalid max retri max retri set string cluster name set new hash set string cluster size cluster configur builder cluster config builder cluster cluster name set add cluster config builder get cluster name throw log duplic cluster definit cluster config builder get cluster name cluster config builder valid overrid public configur creat list server configur server new array list server configur server size server configur builder server server server add server creat els server add new server configur configur properti list cluster configur server cluster config cluster stream map cluster configur builder creat collect collector list marshal null marshal class null marshal class gener boss marshal class return new configur async executor factori creat balanc strategi class balanc strategi class loader null null class loader get client intellig connect pool creat connect timeout consist hash impl forc return valu key size estim marshal marshal class protocol version server socket timeout secur creat tcp delay tcp keep aliv transport factori valu size estim max retri near cach creat server cluster config white list reg ex batch size overrid public configur build return build true public configur build boolean valid valid valid return creat overrid public configur builder read configur templat class loader new weak refer class loader templat class loader async executor factori read templat async executor factori balanc strategi class templat balanc strategi class balanc strategi templat balanc strategi connect pool read templat connect pool connect timeout templat connect timeout int consist hash impl length consist hash impl templat consist hash impl forc return valu templat forc return valu key size estim templat key size estim marshal templat marshal marshal class templat marshal class protocol version templat version server clear server configur server templat server add server host server host port server port socket timeout templat socket timeout secur read templat secur tcp delay templat tcp delay tcp keep aliv templat tcp keep aliv transport factori templat transport factori valu size estim templat valu size estim max retri templat max retri near cach read templat near cach white list reg ex add templat serial whitelist return 
packag org configur pars import java lang ref weak refer import java util hash map import java util map import java util stack import org configur cach configur builder import org configur global global configur builder public class configur builder holder privat final global configur builder global configur builder privat final map string configur builder name configur builder privat configur builder current configur builder privat final map class extend configur parser parser context parser context privat final weak refer class loader class loader privat final stack parser scope scope public configur builder holder thread current thread get context class loader public configur builder holder class loader class loader global configur builder new global configur builder name configur builder new hash map parser context new hash map class loader new weak refer class loader scope new stack scope push parser scope public global configur builder get global configur builder return global configur builder public configur builder new configur builder string name configur builder builder new configur builder name configur builder put name builder current configur builder builder return builder public map string configur builder get name configur builder return name configur builder public configur builder get current configur builder return current configur builder public configur builder get default configur builder global configur builder default cach name present return name configur builder get global configur builder default cach name get els return null void push scope parser scope scope scope push scope void pop scope scope pop public parser scope get scope return scope peek suppress warn uncheck public extend parser context get parser context class extend configur parser parser class return parser context get parser class public void set parser context class extend configur parser parser class parser context context parser context put parser class context public class loader get class loader return class loader get map class extend configur parser parser context get parser context return parser context public void valid global configur builder default cach name present name name configur builder contain key name throw parser log miss default cach declar name 
packag org configur cach import java util collect import java util list configur custom interceptor add cach author pmuir public class custom interceptor configur privat list interceptor configur interceptor custom interceptor configur list interceptor configur interceptor interceptor interceptor public custom interceptor configur interceptor collect empti list specifi list link interceptor configur instanc refer build interceptor chain return list link interceptor configur may empti list never null public list interceptor configur interceptor return interceptor public custom interceptor configur interceptor list interceptor configur interceptor interceptor interceptor return overrid public string string return custom interceptor configur interceptor interceptor overrid public boolean equal object return true null get class get class return fals custom interceptor configur custom interceptor configur interceptor null interceptor equal interceptor interceptor null return fals return true overrid public int hash code return interceptor null interceptor hash code 
packag org configur cach import java util array list import java util link list import java util list import org common configur builder import org configur global global configur configur custom interceptor add cach author pmuir public class custom interceptor configur builder extend abstract configur child builder implement builder custom interceptor configur privat list interceptor configur builder interceptor builder new link list interceptor configur builder custom interceptor configur builder configur builder builder super builder add new custom interceptor definit add cach cach start public interceptor configur builder add interceptor interceptor configur builder builder new interceptor configur builder interceptor builder add builder return builder overrid public void valid interceptor configur builder builder interceptor builder builder valid overrid public void valid global configur global config interceptor configur builder builder interceptor builder builder valid global config overrid public custom interceptor configur creat interceptor builder empti return new custom interceptor configur els list interceptor configur interceptor new array list interceptor configur interceptor builder size interceptor configur builder builder interceptor builder interceptor add builder creat return new custom interceptor configur interceptor overrid public custom interceptor configur builder read custom interceptor configur templat interceptor builder new link list interceptor configur builder interceptor configur c templat interceptor interceptor builder add new interceptor configur builder read c return overrid public string string return custom interceptor configur builder interceptor interceptor builder 
packag org configur cach import org common configur abstract type properti configur import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set import org common configur attribut ident attribut copier import org common equival equival import org common equival equival import org contain data contain control datum contain cach author pmuir deprec pleas use link memori configur deprec public class data contain configur extend abstract type properti configur public static final attribut definit data contain attribut definit builder datum contain null datum contain class xml name class copier ident attribut copier immut build static public attribut set attribut definit set return new attribut set data contain configur class abstract type properti configur attribut set privat final attribut data contain datum contain data contain configur attribut set attribut super attribut datum contain attribut attribut datum contain implement use return deprec datum contain long expos via configur later point deprec public data contain datum contain return datum contain get deprec equival long use remov futur return link equival deprec public equival key equival return equival get instanc deprec equival long use remov futur return link equival deprec public equival valu equival return equival get instanc public attribut set attribut return attribut overrid public string string return data contain configur attribut attribut 
packag org configur cach import static org common configur abstract type properti configur import static org configur cach data contain configur import java util properti import org common configur builder import org common configur attribut attribut set import org common equival equival import org common util type properti import org configur global global configur import org contain data contain control datum contain cach author pmuir deprec pleas use link memori configur deprec public class data contain configur builder extend abstract configur child builder implement builder data contain configur privat attribut set attribut data contain configur builder configur builder builder super builder attribut data contain configur attribut definit set specifi datum contain use param datum contain return deprec datum contain long expos via configur later point deprec public data contain configur builder datum contain data contain datum contain attribut attribut set datum contain return add key valu properti pair datum contain configur param key properti key param valu properti valu return previou valu exist null otherwis public data contain configur builder add properti string key string valu type properti properti attribut attribut get properti put key valu attribut attribut set type properti type properti properti return set key valu properti link data contain configur param prop properti return executor factori config public datum contain configur builder properti properti prop attribut attribut set type properti type properti prop return set link org common equival equival instanc use compar key store datum contain link org common equival equival implement allow custom comparison provid extern librari provid adequ comparison implement e array param key equival instanc link org common equival equival use compar key type return configur builder deprec equival remov byte directli support deprec public data contain configur builder key equival equival key equival return set link org common equival equival instanc use compar valu store datum contain link org common equival equival implement allow custom comparison provid extern librari provid adequ comparison implement e array param valu equival instanc link org common equival equival use compar valu type return configur builder deprec equival remov byte directli support deprec public data contain configur builder valu equival equival valu equival return overrid public void valid overrid public void valid global configur global config overrid public data contain configur creat return new data contain configur attribut protect overrid public data contain configur builder read data contain configur templat attribut read templat attribut return overrid public string string return data contain configur builder attribut attribut 
packag org factori import org configur cach evict configur import org configur cach memori configur import org contain data contain import org contain default data contain import org configur cach storag type import org contain offheap bound heap data contain import org contain offheap heap data contain import org factori annot default factori construct datum contain author manik surtani href mailto manik jboss org manik jboss org author vladimir blagojev sinc default factori class data contain class public class data contain factori extend abstract name cach compon factori implement auto instanti factori overrid suppress warn uncheck public construct class compon type configur datum contain datum contain null return configur datum contain datum contain els int level configur lock concurr level long threshold size configur memori size handl case valu signifi unbound contain threshold size configur memori storag type storag type return new heap data contain configur memori address count els return default data contain un bound data contain level data contain datum contain configur memori storag type storag type data contain new bound heap data contain configur memori address count threshold size configur memori evict type els datum contain default data contain bound data contain level threshold size configur memori evict type configur evict attribut attribut evict configur add listen new size old configur memori size new size get configur memori attribut attribut memori configur add listen new size old datum contain resiz new size get return datum contain 
packag org util import java util iter import org cach import org contain data contain import org contain entri cach entri import org contain entri intern cach entri iter iter upon datum contain cach also provid use remov method iter invok note mean take part ongo transact one public class data contain remov iter implement iter cach entri privat final cach cach privat final iter intern cach entri datum contain iter privat previou key public data contain remov iter cach cach cach cach get advanc cach get data contain public data contain remov iter cach cach data contain datum contain cach null datum contain null throw new null pointer except cach cach datum contain iter datum contain iter overrid public boolean next return datum contain iter next overrid public cach entri next cach entri entri datum contain iter next previou key entri get key return entri overrid public void remov previou key null throw new illeg state except cach remov previou key previou key null 
packag org configur cach import java util concurr time unit import org common configur builder import org common configur attribut attribut set import org configur global global configur configur deadlock detect deprec sinc deadlock detect alway disabl deprec public class deadlock detect configur builder extend abstract configur child builder implement builder deadlock detect configur privat final attribut set attribut deadlock detect configur builder configur builder builder super builder attribut deadlock detect configur attribut definit set time period determin often lock acquisit attempt within maximum time allow acquir particular lock deprec sinc deadlock detect alway disabl deprec public deadlock detect configur builder spin durat long l return time period determin often lock acquisit attempt within maximum time allow acquir particular lock deprec sinc deadlock detect alway disabl deprec public deadlock detect configur builder spin durat long l time unit unit return spin durat unit milli l enabl deadlock detect deprec sinc deadlock detect alway disabl deprec public deadlock detect configur builder enabl return disabl deadlock detect deprec sinc deadlock detect alway disabl deprec public deadlock detect configur builder disabl return enabl disabl deadlock detect deprec sinc deadlock detect alway disabl deprec public deadlock detect configur builder enabl boolean enabl return overrid public void valid overrid public void valid global configur global config overrid public deadlock detect configur creat return new deadlock detect configur attribut protect overrid public deadlock detect configur builder read deadlock detect configur templat attribut read templat attribut return overrid public string string return deadlock detect configur builder attribut attribut 
packag org cach impl import static java util concurr time unit import java util array import java util collect import java util map import java util object import java util set import java util concurr complet futur import java util concurr time unit import java util function bi function import java util function function import org advanc cach import org cach collect import org cach set import org lock stream import org common dataconvers encod import org common dataconvers wrapper import org common util enum util import org contain entri cach entri import org context flag import org context invoc context import org encod datum convers import org filter key filter import org metadata emb metadata import org metadata metadata import org stream stream marshal import org stream impl local valu cach collect decor cach build specif set link flag set link flag appli cach invoc make via decor p addit cleaner readabl code approach offer perform benefit use link advanc cach flag org context flag thank intern optim make link flag set unchang p note link decor cach must close deleg actual cach implement other must deleg decor cach author manik surtani author sann grinovero author tristan tarrant see advanc cach flag org context flag sinc public class decor cach extend abstract deleg advanc cach privat static final flag new flag privat final long flag privat final object lock owner privat final cach impl cach implement public decor cach advanc cach deleg deleg public decor cach advanc cach deleg flag flag deleg null flag public decor cach advanc cach deleg object lock owner flag flag super deleg flag length flag enum util els flag enum util bit set flag lock owner lock owner yuk cach implement cach impl deleg privat decor cach cach impl deleg object lock owner long new flag constructor privat alreadi check argument valid super deleg flag new flag lock owner lock owner cach implement deleg overrid public advanc cach final class loader class loader class loader null throw new illeg argument except class loader null return overrid public advanc cach flag final flag flag flag null flag length return els long new flag enum util bit set flag enum util contain flag new flag alreadi specifi flag return els return new decor cach cach implement lock owner enum util merg bit set flag new flag overrid public advanc cach encod class extend encod encod class return new encod cach data convers encod encod class data convers encod encod class overrid public advanc cach encod class extend encod key encod class class extend encod valu encod class return new encod cach data convers encod key encod class data convers encod valu encod class overrid public advanc cach wrap class extend wrapper wrapper class return new encod cach data convers wrap wrapper class data convers wrap wrapper class overrid public advanc cach wrap class extend wrapper key wrapper class class extend wrapper valu wrapper class return new encod cach data convers wrap key wrapper class data convers wrap valu wrapper class overrid public advanc cach lock object lock owner object requir non null lock owner lock owner lock owner return new decor cach cach implement lock owner flag return public object get lock owner return lock owner overrid public lock stream lock stream assert lock owner lock stream return super lock stream overrid public class loader get class loader return cach implement get class loader overrid public void stop cach implement stop overrid public boolean lock key assert lock owner lock return cach implement lock array list key flag overrid public boolean lock collect extend key assert lock owner lock return cach implement lock key flag overrid public void put extern read key valu put extern read key valu cach implement default metadata overrid public void put extern read key valu metadata metadata assert lock owner put extern read cach implement put extern read key valu metadata flag overrid public void put extern read key valu long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build put extern read key valu metadata overrid public void put extern read key valu long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build put extern read key valu metadata overrid public void evict key cach implement evict key flag overrid public put key valu long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build return put key valu metadata overrid public put absent key valu long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build return put absent key valu metadata overrid public void put map extend extend map long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build put map metadata overrid public replac key valu long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build return replac key valu metadata overrid public boolean replac key old valu valu long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build return replac key old valu valu metadata overrid public put key valu long lifespan time unit lifespan unit long max idl time time unit max idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time max idl time unit build return put key valu metadata overrid public put absent key valu long lifespan time unit lifespan unit long max idl time time unit max idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time max idl time unit build return put absent key valu metadata overrid public void put map extend extend map long lifespan time unit lifespan unit long max idl time time unit max idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time max idl time unit build put map metadata overrid public replac key valu long lifespan time unit lifespan unit long max idl time time unit max idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time max idl time unit build return replac key valu metadata overrid public boolean replac key old valu valu long lifespan time unit lifespan unit long max idl time time unit max idl time unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl time max idl time unit build return replac key old valu valu metadata overrid public complet futur put async key valu return put async key valu cach implement default metadata overrid public complet futur put async key valu long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build return put async key valu metadata overrid public complet futur put async key valu long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build return put async key valu metadata privat void assert lock owner string name lock owner null throw new illeg state except name method use lock owner configur overrid public complet futur void put async map extend extend datum return put async datum cach implement default metadata overrid public complet futur void put async map extend extend datum long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build return put async datum metadata overrid public complet futur void put async map extend extend datum long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build return put async datum metadata complet futur void put async final map extend extend datum final metadata metadata return cach implement put async datum metadata flag write context datum size overrid public complet futur void clear async return cach implement clear async flag overrid public complet futur put absent async key valu return put absent async key valu cach implement default metadata overrid public complet futur put absent async key valu long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build return put absent async key valu metadata overrid public complet futur put absent async key valu long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build return put absent async key valu metadata complet futur put absent async final key final valu final metadata metadata return cach implement put absent async key valu metadata flag write context overrid public complet futur remov async object key return cach implement remov async key flag write context overrid public complet futur boolean remov async object key object valu return cach implement remov async key valu flag write context overrid public complet futur replac async key valu return replac async key valu cach implement default metadata overrid public complet futur replac async key valu long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build return replac async key valu metadata overrid public complet futur replac async key valu long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build return replac async key valu metadata complet futur replac async final key final valu final metadata metadata return cach implement replac async key valu metadata flag write context overrid public complet futur boolean replac async key old valu new valu return replac async key old valu new valu cach implement default metadata overrid public complet futur boolean replac async key old valu new valu long lifespan time unit unit metadata metadata new emb metadata builder lifespan lifespan unit max idl cach implement default metadata max idl build return replac async key old valu new valu metadata overrid public complet futur boolean replac async key old valu new valu long lifespan time unit lifespan unit long max idl time unit max idl unit metadata metadata new emb metadata builder lifespan lifespan lifespan unit max idl max idl max idl unit build return replac async key old valu new valu metadata complet futur boolean replac async final key final old valu final new valu final metadata metadata return cach implement replac async key old valu new valu metadata flag write context overrid public complet futur get async key return cach implement get async key flag read context overrid public int size return cach implement size flag overrid public boolean empti return cach implement empti flag overrid public boolean contain key object key return cach implement contain key key flag read context overrid public boolean contain valu object valu object requir non null valu return valu stream match stream marshal equal predic valu overrid public get object key return cach implement get key flag read context overrid public map get set key return cach implement get key flag read context key size overrid public map cach entri get cach entri set key return cach implement get cach entri key flag read context key size overrid public put key valu return put key valu cach implement default metadata overrid public remov object key return cach implement remov key flag write context overrid public void put map extend extend map metadata metadata cach implement put map metadata flag write context map size overrid public void put map extend extend put cach implement default metadata overrid public void clear cach implement clear flag overrid public cach set key set return cach implement key set flag overrid public map get group string group name return cach implement get group group name flag overrid public void remov group string group name assert lock owner remov group cach implement remov group group name flag overrid public cach collect valu return new valu cach collect cach entri set overrid public cach set entri entri set return cach implement entri set flag overrid public cach set cach entri cach entri set return cach implement cach entri set flag read context overrid public put absent key valu return put absent key valu cach implement default metadata overrid public boolean remov object key object valu return cach implement remov key valu flag write context overrid public boolean replac key old valu new valu return replac key old valu new valu cach implement default metadata overrid public replac key valu return replac key valu cach implement default metadata overrid public comput key bi function super super extend remap function return comput key remap function cach implement default metadata overrid public comput present key bi function super super extend remap function return comput present key remap function cach implement default metadata overrid public comput absent key function super extend map function return comput absent key map function cach implement default metadata overrid public merg key valu bi function super super extend remap function return merg key valu remap function cach implement default metadata expos interfac public long get flag bit set return flag overrid public void add listen object listen cach implement notifi add listen listen class loader null overrid public void add listen object listen key filter super filter cach implement notifi add listen listen filter null overrid public put key valu metadata metadata return cach implement put key valu metadata flag write context overrid public complet futur put async key valu metadata metadata return cach implement put async key valu metadata flag write context overrid public put absent key valu metadata metadata return cach implement put absent key valu metadata flag write context overrid public boolean replac key old valu valu metadata metadata return cach implement replac key old valu valu metadata flag write context overrid public replac key valu metadata metadata return cach implement replac key valu metadata flag write context overrid public comput key bi function super super extend remap function metadata metadata return cach implement comput intern key remap function fals metadata flag write context overrid public comput present key bi function super super extend remap function metadata metadata return cach implement comput intern key remap function true metadata flag write context overrid public comput absent key function super extend map function metadata metadata return cach implement comput absent intern key map function metadata flag write context overrid public merg key valu bi function super super extend remap function metadata metadata return cach implement merg intern key valu remap function metadata flag write context overrid public cach entri get cach entri object key return cach implement get cach entri key flag read context protect invoc context read context int size invoc context ctx cach implement invoc context factori creat invoc context fals size lock owner null ctx set lock owner lock owner return ctx protect invoc context write context int size invoc context ctx cach implement get invoc context implicit transact fals size lock owner null ctx set lock owner lock owner return ctx 
packag org manag import static org factori know compon name import java io except import java io input stream import java util collect import java util hash map import java util hash set import java util link hash set import java util list import java util map import java util properti import java util set import java util concurr complet futur import java util concurr complet except import java util concurr concurr map import java util concurr executor servic import java util concurr fork join pool import java util concurr schedul executor servic import java util concurr time unit import java util concurr atom atom refer import java util concurr lock lock import java util concurr lock reentrant lock import org cach import org illeg lifecycl state except import org version import org command remov cach command import org common cach configur except import org common cach except import org common api lifecycl import org common util collect factori import org common util file lookup factori import org common util immut import org configur configur manag import org configur cach configur import org configur cach configur builder import org configur format properti formatt import org configur global global configur import org configur global global configur builder import org configur global transport configur import org configur pars configur builder holder import org configur pars parser registri import org factori compon registri import org factori global compon registri import org factori intern cach factori import org factori know compon name import org factori annot surviv restart import org factori scope scope import org factori scope scope import org health health import org health impl health impl import org health impl jmx health expos impl import org health jmx health expos import org jmx cach jmx registr import org jmx cach manag jmx registr import org jmx annot data type import org jmx annot display type import org jmx annot bean import org jmx annot manag attribut import org jmx annot manag oper import org jmx annot paramet import org lifecycl compon statu import org manag impl cluster executor import org notif cachemanagerlisten cach manag notifi import org registri intern cach registri import org remot inboundhandl deliv order import org remot respons respons import org remot rpc respons mode import org remot transport address import org remot transport transport import org remot transport jgroup group transport import org secur audit context import org secur author permiss import org secur impl author helper import org secur impl princip role mapper context impl import org secur impl secur cach impl import org stat cach contain stat import org stat impl cach contain stat impl import org util byte string import org util cyclic depend except import org util depend graph import org util log log import org util log log factori tt cach manag tt primari mechan retriev link cach instanc often use start point use link cach p tt cach manag tt heavyweight object forese one tt cach manag tt use per unless specif configur requir requir one either way would minim finit number instanc p construct tt cach manag tt do via one constructor option take link org configur cach configur path configur file p lifecycl tt cach manag tt lifecycl implement link lifecycl default constructor also call link start overload version constructor avail start tt cach manag tt although must keep mind tt cach manag tt need start use creat tt cach tt instanc p construct tt cach manag tt make avail compon requir tt cach tt via via mechan io contain p obtain tt cach tt instanc tt cach manag tt use one overload tt get cach tt method note tt get cach tt guarante instanc get brand new empti sinc cach name share tt cach manag tt also act repositori tt cach tt effect mechan look creat tt cach tt demand p system shut call link stop tt cach manag tt ensur cach within scope properli stop well p sampl usag pre code cach manag manag cach manag get instanc config file xml cach lt string person gt entiti cach manag get cach entiti cach entiti cach put person new person configur builder conf builder new configur builder conf builder cluster cach mode cach mode manag defin configur replic cach conf builder build cach lt string string gt replic cach manag get cach replic cach code pre author manik surtani author galder zamarr sinc scope scope surviv restart bean object name default cach manag descript compon act manag factori contain cach system public class default cach manag implement emb cach manag public static final string cach manag privat static final log log log factori get log default cach manag class privat final concurr map string complet futur cach cach collect factori make concurr map privat final global compon registri global compon registri privat final author helper authz helper privat final depend graph string cach depend graph new depend graph privat final cach contain stat stat privat final health health privat final configur manag configur manag privat final string default cach name privat final lock lifecycl lock new reentrant lock privat volatil boolean stop construct start default instanc cach manag use configur default see link org configur cach configur link org configur global global configur detail default public default cach manag null null true construct default instanc cach manag use configur default see link org configur cach configur link org configur global global configur detail default param start true cach manag start public default cach manag boolean start null null start construct start new instanc cach manag use default configur pass see link org configur cach configur link org configur global global configur detail default param default configur configur use templat cach creat public default cach manag configur default configur null default configur true construct new instanc cach manag use default configur pass see link org configur global global configur detail default param default configur configur file use templat cach creat param start true cach manag start public default cach manag configur default configur boolean start null default configur start construct start new instanc cach manag use global configur pass system default default name cach configur see link org configur cach configur detail default param global configur global configur use cach creat public default cach manag global configur global configur global configur null true construct new instanc cach manag use global configur pass system default default name cach configur see link org configur cach configur detail default param global configur global configur use cach creat param start true cach manag start public default cach manag global configur global configur boolean start global configur null start construct start new instanc cach manag use global default configur pass either null system default use param global configur global configur use null default instanc creat param default configur default configur use null default instanc creat public default cach manag global configur global configur configur default configur global configur default configur true construct new instanc cach manag use global default configur pass either null system default use param global configur global configur use null default instanc creat param default configur default configur use null default instanc creat param start true cach manag start public default cach manag global configur global configur configur default configur boolean start global configur global configur null new global configur builder build global configur configur manag new configur manag global configur default configur null global configur default cach name present default cach name global configur default cach name get els log default cach configur without name default cach name configur manag put configur default cach name default configur els global configur default cach name present throw log miss default cach declar global configur default cach name get els default cach name null authz helper new author helper global configur secur audit context global configur global jmx statist cach manag name global compon registri new global compon registri global configur cach key set global compon registri regist compon configur manag configur manag class global compon registri regist compon cach depend graph fals global compon registri regist compon authz helper author helper class stat new cach contain stat impl health new health impl global compon registri regist compon new health expos impl health health expos class start start construct start new instanc cach manag use configur file name pass constructor first search name file classpath fail treat file name absolut path param configur file name configur file use templat cach creat throw java io except problem configur file public default cach manag string configur file throw except configur file true construct new instanc cach manag use configur file name pass constructor first search name file classpath fail treat file name absolut path param configur file name configur file use templat cach creat param start true cach manag start throw java io except problem configur file public default cach manag string configur file boolean start throw except file lookup factori new instanc lookup file strict configur file thread current thread get context class loader start construct start new instanc cach manag use input stream pass read configur file content param configur stream stream contain configur file content use templat cach creat throw java io except problem configur stream public default cach manag input stream configur stream throw except configur stream true construct new instanc cach manag use input stream pass read configur file content param configur stream stream contain configur file content use templat cach creat param start true cach manag start throw java io except problem read configur stream public default cach manag input stream configur stream boolean start throw except new parser registri pars configur stream start construct new instanc cach manag use holder pass read configur set param holder holder contain configur set use templat cach creat param start true cach manag start public default cach manag configur builder holder holder boolean start tri configur manag new configur manag holder global configur global configur configur manag get global configur default cach name global configur default cach name els null global compon registri new global compon registri global configur cach key set global compon registri regist compon configur manag configur manag class global compon registri regist compon cach depend graph fals authz helper new author helper global configur secur audit context global configur global jmx statist cach manag name stat new cach contain stat impl health new health impl global compon registri regist compon new health expos impl health health expos class catch cach configur except ce throw ce catch runtim except throw new cach configur except start start overrid public configur defin configur string name configur configur return defin configur name configur overrid public configur defin configur string name string templat configur configur overrid templat null configur c configur manag get configur templat c null throw log undeclar configur templat name els configur overrid null return defin configur name c els return defin configur name c configur overrid return defin configur name configur overrid privat configur defin configur string name configur configur authz helper check permiss author permiss assert termin name null configur null throw new null pointer except null argument allow name equal throw log illeg cach name configur exist configur manag get configur name exist null throw log config alreadi defin name configur builder builder new configur builder boolean templat true configur configur configur configur null builder read configur templat templat configur templat els throw new null pointer except null argument allow builder templat templat return configur manag put configur name builder overrid public void undefin configur string configur name authz helper check permiss author permiss configur name equal throw log illeg cach name configur exist configur manag get configur configur name exist null complet futur cach cach futur cach valu cach cach cach futur except null join cach null cach get cach configur exist cach get statu compon statu throw log configur use configur name configur manag remov configur configur name retriev default cach associ cach manag note default cach need explicitli creat link creat cach string string string sinc automat creat lazili first use p method alway guarante return default cach return default cach overrid public cach get cach default cach name null throw log default cach return intern get cach default cach name default cach name retriev name cach system cach previous creat name run cach instanc return otherwis method attempt creat cach first p creat new cach method use configur pass cach manag construct templat option appli overrid previous defin name cach use link defin configur string configur link defin configur string string configur method declar configur file param cach name name cach retriev return cach instanc identifi cach name overrid public cach get cach string cach name return get cach cach name cach name overrid public cach get cach string cach name string configur name cach name null throw new null pointer except null argument allow equal cach name default cach name null throw log default cach cach name default cach name log deprec default cach return intern get cach cach name configur name public cach intern get cach string cach name string configur name assert termin complet futur cach cach futur cach get cach name cach futur null tri return cach cach futur join catch complet except e throw cach except e get caus return creat cach cach name configur name overrid public boolean cach exist string cach name return cach contain key cach name overrid public cach get cach string cach name boolean creat absent return get cach cach name cach name creat absent overrid public cach get cach string cach name string configur templat boolean creat absent boolean cach exist cach exist cach name cach exist creat absent return null els return get cach cach name configur templat overrid public emb cach manag start cach final string cach name authz helper check permiss author permiss map string thread thread new hash map cach name length final atom refer runtim except except new atom refer runtim except null final string cach name cach name thread contain key cach name string thread name cach start thread configur manag get global configur transport node name cach name thread thread new thread thread name overrid public void run tri creat cach cach name cach name catch runtim except e except set e catch throwabl except set new runtim except thread start thread put cach name thread tri thread thread thread valu thread join catch interrupt except e throw new cach except interrupt wait cach start runtim except runtim except except get runtim except null throw runtim except return overrid public void remov cach string cach name authz helper check permiss author permiss compon registri cach compon registri global compon registri get name compon registri cach name cach compon registri null remov cach command cmd new remov cach command byte string string cach name transport transport get transport tri complet futur futur transport null configur c configur manag get configur cach name default cach name use sync replic timeout complet futur map address respons remot futur transport invok remot async null cmd respons mode c cluster remot timeout null deliv order fals futur cmd invok async compos remot futur els futur cmd invok async futur get catch throwabl throw new cach except error remov cach inherit doc overrid public list address get member transport get transport return null null get member inherit doc overrid public address get address transport get transport return null null get address inherit doc overrid public address get coordin transport get transport return null null get coordin manag attribut descript logic address cluster coordin display name coordin address display type display type public string get coordin address transport get transport return null get coordin string inherit doc overrid manag attribut descript indic whether node coordin display name coordin display type display type public boolean coordin transport get transport return null coordin privat cach creat cach string cach name string configur name final boolean trace log trace enabl log factori push cach name trace tri return wire start cach cach name configur name final log factori pop trace return null return valu mean cach creat someon els get lock privat cach wire start cach string cach name string configur name boolean cach cach name equal configur name configur c configur manag get configur configur name default cach name c null throw log cach configur configur name els cach configur defin config configur manag get configur cach name defin config null log warn attempt overrid exist configur cach name c defin config c secur author enabl n even attempt wire anyth n privileg authz helper check permiss c secur author author permiss c templat cach name equal configur name throw log templat configur start attempt cach name complet futur cach cach futur new complet futur complet futur cach old futur cach comput absent cach name name assert termin return cach futur tri old futur cach futur return cach old futur join catch complet except ce throw cach except ce get caus tri log tracef wire start cach cach name cach cach new intern cach factori creat cach c global compon registri cach name compon registri cr cach get advanc cach get compon registri cach get advanc cach get author manag null cach new secur cach impl cach get advanc cach boolean start yet cr get statu compon statu cr get statu compon statu start cach level compon cach start cach futur complet cach boolean need notifi cach start start yet cr get statu compon statu need notifi cach start global compon registri notifi cach start cach name log tracef cach start cach name return cach catch cach except e cach futur complet except e throw e catch throwabl cach futur complet except new cach except throw overrid public void start authz helper check permiss author permiss lifecycl lock lock tri final global configur global configur configur manag get global configur global configur secur author enabl system get secur manag null log author enabl without secur manag global compon registri get compon cach manag jmx registr class start string cluster name global configur transport cluster name string node name global configur transport node name global configur secur author enabl global configur secur author princip role mapper set context new princip role mapper context impl global compon registri start log debugf start cach manag cluster name node name final lifecycl lock unlock privat void termin string cach name complet futur cach cach futur cach get cach name cach futur null cach cach cach futur join unregist cach bean cach cach get statu termin log tracef ignor cach alreadi termin cach name return cach stop overrid public void stop authz helper check permiss author permiss lifecycl lock lock tri stop log trace ignor call stop cach manag run return log debugf stop cach manag configur manag get global configur transport cluster name get address stop true stop cach global compon registri get compon cach manag jmx registr class stop global compon registri stop final lifecycl lock unlock privat void stop cach set string cach stop new link hash set cach size stop order cach first tri list string order cach depend graph topolog sort cach stop add order catch cyclic depend except e log stop order ignor cach map includ default cach cach stop add cach key set log tracef cach stop order cach stop string cach name cach stop tri termin cach name catch throwabl log compon fail stop privat void unregist cach bean cach cach unregist cach mbean regardless jmx statist set cach get advanc cach get compon registri get compon cach jmx registr class unregist cach bean overrid public void add listen object listen authz helper check permiss author permiss cach manag notifi notifi global compon registri get compon cach manag notifi class notifi add listen listen overrid public void remov listen object listen authz helper check permiss author permiss cach manag notifi notifi global compon registri get compon cach manag notifi class notifi remov listen listen overrid public set object get listen authz helper check permiss author permiss cach manag notifi notifi global compon registri get compon cach manag notifi class return notifi get listen overrid public compon statu get statu authz helper check permiss author permiss return global compon registri get statu overrid public global configur get cach manag configur return configur manag get global configur overrid public org configur cach configur get default cach configur default cach name null return configur manag get configur default cach name els return null overrid public configur get cach configur string name configur configur configur manag get configur name configur null cach exist name return get default cach configur return configur overrid public set string get cach name get programmat defin cach set string name new hash set configur manag get defin cach add cach creat dynam without explicit config sinc cach could modifi dynam make safe copi key name add immut immut set convert cach key set name remov intern cach registri intern cach registri global compon registri get compon intern cach registri class intern cach registri filter privat cach name name empti return collect empti set els return immut immut set wrap name overrid public set string get cach configur name get programmat defin cach set string name new hash set configur manag get defin configur name remov intern cach registri intern cach registri global compon registri get compon intern cach registri class intern cach registri filter privat cach name name empti return collect empti set els return immut immut set wrap name overrid public boolean run string cach name complet futur cach cach futur cach get cach name boolean start cach futur null cach futur do cach futur complet except return start cach futur join get statu compon statu overrid public boolean default run return run manag attribut descript statu cach manag instanc display name cach manag statu datum type data type display type display type public string get cach manag statu return get statu string manag attribut descript defin cach name statu default cach includ represent display name list defin cach datum type data type display type display type public string get defin cach name string builder result new string builder string cach name get cach name boolean start cach contain key cach name result append cach name append start creat creat result append return result string manag attribut descript defin cach configur name display name list defin cach configur datum type data type display type display type public string get defin cach configur name string builder result new string builder boolean comma fals string cach name get cach configur name comma result append els comma true result append cach name result append return result string manag attribut descript total number defin cach configur display name number cach defin display type display type public string get defin cach count return string valu get cach configur name size manag attribut descript total number creat cach includ default cach display name number cach creat display type display type public string get creat cach count intern cach registri intern cach registri global compon registri get compon intern cach registri class long creat cach key set stream filter c intern cach registri intern cach c count return string valu creat manag attribut descript total number run cach includ default cach display name number run cach display type display type public string get run cach count intern cach registri intern cach registri global compon registri get compon intern cach registri class long run cach key set stream filter c run c intern cach registri intern cach c count return string valu run manag attribut descript return version display name version display type display type datum type data type public string get version return version get version manag attribut descript name cach manag display name cach manag name display type display type datum type data type public string get name return configur manag get global configur global jmx statist cach manag name manag oper descript start default cach associ cach manag display name start default cach public void start cach get cach manag oper descript start name cach cach manag name start cach display name start cach give name public void start cach paramet name cach name descript name cach start string cach name get cach cach name manag attribut descript network address associ instanc display name network address datum type data type display type display type public string get node address return get logic address string manag attribut descript physic network address associ instanc display name physic network address datum type data type display type display type public string get physic address transport get transport null return local list address address get physic address return address null local address string manag attribut descript list member cluster display name cluster member datum type data type display type display type public string get cluster member transport get transport null return local list address address list get member return address list string manag attribut descript size cluster number node display name cluster size display type display type public int get cluster size transport get transport null return return get member size inherit doc manag attribut descript cluster name display name cluster name datum type data type display type display type overrid public string get cluster name return configur manag get global configur transport cluster name privat string get logic address string return get address null local get address string privat void assert termin stop throw new illeg lifecycl state except cach contain stop reus recreat cach contain overrid public transport get transport global compon registri null return null return global compon registri get compon transport class overrid public global compon registri get global compon registri return global compon registri overrid public void add cach depend string string cach depend graph add depend overrid public string string return super string address get address inherit doc manag attribut descript global configur properti display name global configur properti datum type data type display type display type public properti get global configur properti return new properti formatt format configur manag get global configur overrid public cach contain stat get stat return stat overrid public health get health return health overrid public cluster executor executor global compon registri get statu compon statu throw new illeg state except cach manag must start retriev cluster executor group transport transport group transport global compon registri get compon transport class transport null long time get cach manag configur transport distribut sync timeout return cluster executor submiss executor null transport time time unit global compon registri get compon executor servic class know compon name global compon registri get compon schedul executor servic class know compon name els return cluster executor submiss executor null null transport configur get default valu time unit fork join pool common pool global compon registri get compon schedul executor servic class know compon name overrid public void close throw except stop 
packag org distribut ch impl import java io except import java io object input import java io object output import java util array list import java util array import java util collect import java util hash map import java util list import java util map import java util set import java util function unari oper import org common hash hash import org common marshal instanc reus advanc extern import org common util immut import org distribut ch consist hash import org globalst scop persist state import org marshal core id import org remot transport address import org topolog persist import org common util small int set import net jcip annot immut default link consist hash implement object immut everi segment must primari owner author dan berindei author anistor redhat com sinc immut public class default consist hash extend abstract consist hash state constant privat static final string num owner privat static final string segment owner privat static final string segment owner privat static final string segment owner num privat final int num owner rout tabl privat final list address segment owner public default consist hash hash hash function int num owner int num segment list address member map address float capac factor list address segment owner super hash function num segment member capac factor num owner throw new illeg argument except number owner must strictli posit num owner num owner segment owner new list num segment int num segment segment owner null segment owner empti throw new illeg argument except segment owner list null empti segment owner immut immut list copi segment owner use extern skip copi collect privat default consist hash hash hash function int num owner int num segment list address member float capac factor list address segment owner super hash function num segment member capac factor num owner throw new illeg argument except number owner must strictli posit num owner num owner int num segment segment owner null segment owner size throw new illeg argument except segment owner list null empti segment owner segment owner default consist hash scop persist state state super state num owner integ pars int state get properti int num segment pars num segment state segment owner new list num segment int segment owner length int segment owner count integ pars int state get properti string format segment owner new array list int j j segment owner count j persist uuid persist string state get properti string format j segment owner add uuid overrid public int get num segment return segment owner length overrid public set integ get segment owner address owner owner null throw new illeg argument except owner null member contain owner throw new illeg argument except node owner member set integ segment new small int set segment owner length int segment segment segment owner length segment segment owner segment contain owner segment add segment return segment overrid public set integ get primari segment owner address owner owner null throw new illeg argument except owner null member contain owner throw new illeg argument except node owner member small int set segment new small int set segment owner length int segment segment segment owner length segment owner equal segment owner segment get segment add segment return segment deprec sinc use link hash function partition get segment end hash instead deprec public list integ get segment end hash int num segment segment owner length list integ hash new array list num segment int num segment hash add num segment segment size return hash overrid public list address locat owner segment int segment id return segment owner segment id overrid public address locat primari owner segment int segment id return segment owner segment id get overrid public int get num owner return num owner overrid public boolean segment local node address node address int segment id return segment owner segment id contain node address overrid public int hash code int result num owner result result member hash code result result array hash code segment owner return result overrid public boolean equal object return true null get class get class return fals default consist hash default consist hash num owner num owner return fals segment owner length segment owner length return fals hash function equal hash function return fals member equal member return fals int segment owner length segment owner equal segment owner return fals return true overrid public string string ownership statist stat new ownership statist member string builder sb new string builder default consist hash sb append n append segment owner length sb append owner append member size append boolean first true address member first first fals els sb append int primari own stat get primari own int own stat get own sb append append append primari own append append own primari own sb append return sb string overrid public string get rout tabl string string builder sb new string builder address member sb length sb append n set integ primari segment get primari segment owner sb append append primari append primari segment set integ backup segment get segment owner backup segment remov primari segment sb append backup append backup segment return sb string merg two consist hash object number segment num owner hash function segment primari owner first prioriti primari owner becom backup public default consist hash union default consist hash dch check hash segment dch num owner dch get num owner throw new illeg argument except consist hash object must number owner list address union member new array list member merg list union member dch get member list address union segment owner new list segment owner length int segment owner length union segment owner new array list locat owner segment merg list union segment owner dch locat owner segment map address float union capac factor union capac factor dch return new default consist hash hash function num owner union segment owner length union member union capac factor union segment owner public string pretti print ownership string builder sb new string builder address member get member sb append n append member append int segment segment segment owner length segment int index segment owner segment index member index sb append append segment index sb append return sb string overrid public void scop state scope persist state state super scop state state state set properti num owner state set properti segment owner length int segment owner length list address segment owner address segment owner state set properti string format segment owner address size int j j segment owner address size j state set properti string format j segment owner address get j string overrid public consist hash remap address unari oper address remapp list address remap member remap member remapp remap member null return null map address float remap capac factor remap capac factor remapp list address remap segment owner new list segment owner length int segment owner length list address remap owner new array list segment owner size address address segment owner remap owner add remapp appli address remap segment owner remap owner return new default consist hash hash function num owner segment owner length remap member remap capac factor remap segment owner public static class extern extend instanc reus advanc extern default consist hash overrid public void write object object output output default consist hash ch throw except output write int ch segment owner length output write int ch num owner output write object ch member output write object ch capac factor output write object ch hash function avoid comput ident hash code everi immut list copi address hash map address integ member index get member index map ch member int ch segment owner length list address owner ch segment owner output write int owner size address owner owner output write int member index get owner overrid suppress warn uncheck public default consist hash read object object input unmarshal throw except class find except int num segment unmarshal read int int num owner unmarshal read int list address member list address unmarshal read object float capac factor float unmarshal read object hash hash hash unmarshal read object list address segment owner new list num segment int num segment int size unmarshal read int address owner new address size int j j size j int owner index unmarshal read int owner j member get owner index segment owner immut immut list wrap owner return new default consist hash hash num owner num segment member capac factor segment owner privat hash map address integ get member index map list address member hash map address integ member index new hash map member size int member size member index put member get return member index overrid public integ get id return id overrid public set class extend default consist hash get type class return collect singleton default consist hash class 
packag org distribut ch impl import java io except import java io object input import java io object output import java util array list import java util collect import java util collect import java util hash set import java util list import java util map import java util set import org common hash hash import org common marshal abstract extern import org distribut ch consist hash factori import org globalst scop persist state import org marshal core id import org remot transport address import org util log log import org util log log factori default implement link consist hash factori method except link union default consist hash default consist hash return consist hash floor num owner num segment num node segment per owner ceil num owner num segment num node author dan berindei author anistor redhat com sinc public class default consist hash factori extend abstract consist hash factori default consist hash privat static final log log log factori get log default consist hash factori class overrid public default consist hash creat hash hash function int num owner int num segment list address member map address float capac factor member size throw new illeg argument except ca n construct consist hash without member num owner throw new illeg argument except number owner great check capac factor member capac factor use rebal algorithm get even spread round robin n work properli segment owner must uniqu builder builder new builder hash function num owner num segment member capac factor rebal builder builder return builder build overrid public default consist hash persist state scope persist state state string consist hash class state get properti consist hash default consist hash class get name equal consist hash class throw log persist consist hash mismatch get class get name consist hash class return new default consist hash state leaver remov segment without owner assign new owner joiner might get un own segment otherwis take account happen rebal param base exist consist hash instanc code null param actual member list address repres new cach member return overrid public default consist hash updat member default consist hash base list address actual member map address float actual capac factor actual member size throw new illeg argument except ca n construct consist hash without member check capac factor actual member actual capac factor boolean capac factor actual capac factor null base get capac factor null actual capac factor equal base get capac factor actual member equal base get member capac factor return base builder constructor automat remov leaver builder builder new builder base actual member actual capac factor segment owner fix tri assign owner segment futur rebal call would builder balanc builder null int segment segment base get num segment segment builder get owner segment empti balanc builder null balanc builder new builder builder rebal builder balanc builder builder add owner segment balanc builder get owner segment return builder build overrid public default consist hash rebal default consist hash base method assign new owner segment num owner num owner segment floor num segment num node num segment primari own n node n num segment primari own n ceil num segment num node node n floor num segment num owner num node num segment own n node n num segment own n ceil num segment num owner num node node n builder builder new builder base rebal builder builder default consist hash balanc builder build return base n chang anyth return balanc equal base base balanc merg two consist hash object number segment num owner hash function segment primari owner first prioriti primari owner becom backup overrid public default consist hash union default consist hash dch default consist hash dch return dch union dch protect void rebal builder builder builder add primari owner builder add backup owner builder protect void add primari owner builder builder add first owner builder tri replac primari owner mani segment backup segment swap primari owner backup builder segment n enough owner tri add new owner primari owner int actual num owner builder get actual num owner replac primari owner builder actual num owner primari owner still mani segment allow add extra owner primari owner sinc segment primari owner enough give we proper primari owner segment replac primari owner builder actual num owner privat void add first owner builder builder int segment segment builder get num segment segment builder get owner segment size continu address new primari find new primari owner builder builder get member null new primari null builder add primari owner segment new primari protect void replac primari owner builder builder int max owner find node bad primari own segment capac ratio iter segment primari own possibl replac anoth node replac check still bad node repeat new bad node keep track segment alreadi replac primari owner n twice boolean primari owner replac true primari owner replac address bad node find bad primari owner builder builder get member primari owner replac fals int segment builder get num segment segment segment builder get owner segment size max owner continu replac bad node primari owner builder get primari owner segment equal bad node continu address new primari find new primari owner builder builder get member bad node new primari null builder get owner segment contain new primari builder add primari owner segment new primari primari owner replac true bad node find bad primari owner builder builder get member protect void swap primari owner backup builder builder segment primari own primari owner segment max primari segment tri swap primari owner one backup owner new primari owner must primari min primari segment segment iter revers order look stabl log add node int segment builder get num segment segment segment builder get owner segment empti continu address primari owner builder get primari owner segment address new primari find new primari owner builder builder get backup owner segment primari owner new primari null actual replac primari owner builder replac primari owner backup segment new primari protect void add backup owner builder builder remov extra owner could leftov add primari owner remov extra backup owner builder owner segment num owner add new owner alway add member owner alreadi good own segment capac ratio add backup owner builder owner segment num owner everi segment step owner exist non owner good own segment capac ratio replac replac backup owner builder protect void remov extra backup owner builder builder find node bad segment capac ratio replac one owner list repeat next bad node list address untest node new array list address builder get member untest node empti boolean owner remov fals address bad node find bad backup owner builder untest node iter revers order look stabl log add node int segment builder get num segment segment segment list address owner builder get owner segment owner size builder get actual num owner continu int owner idx owner index bad node n remov primari owner idx builder remov owner segment bad node owner remov true bad node might chang untest node new array list address builder get member bad node find bad backup owner builder untest node owner remov untest node remov bad node return bad backup owner code null remain node segment privat address find bad backup owner builder builder list address node address bad null float max segment per capac address owner node float capac factor builder get capac factor owner bad null builder get own owner capac factor max segment per capac bad owner max segment per capac capac factor builder get own owner capac factor return bad protect void add backup owner builder builder int segment segment builder get num segment segment list address owner builder get owner segment owner size builder get actual num owner address new owner find new backup owner builder owner null builder add owner segment new owner protect void replac backup owner builder builder find node bad segment capac ratio replac one owner list possibl replac owner bad node remov bad untest node list tri new bad repeat necessari replac one owner go back origin untest node list list address untest node new array list address builder get member untest node empti address bad node find bad backup owner builder untest node boolean backup owner replac fals iter revers order look stabl log add node int segment builder get num segment segment segment list address owner builder get owner segment int owner idx owner index bad node n replac primari owner idx continu sure good node replac owner address replac find new backup owner builder owner bad node replac null log tracef segment replac owner segment bad node replac builder remov owner segment bad node builder add owner segment replac backup owner replac true bad node might chang untest node new array list address builder get member bad node find bad backup owner builder untest node backup owner replac untest node remov bad node return member bad own segment capac ratio also exclud list protect address find new backup owner builder builder collect address exclud address owner want own capac ratio actual owner remov current segment big own capac ratio new owner add current segment futur pass will n tri switch back address good null float initi capac factor owner null builder get capac factor owner float good segment per capac initi capac factor builder get own owner initi capac factor float address candid builder get member exclud null exclud contain candid int own builder get own candid float capac factor builder get capac factor candid own capac factor good segment per capac good candid good segment per capac own capac factor return good protect static class builder extend abstract consist hash factori builder privat final int initi num owner privat final int actual num owner privat final list address segment owner debug privat int mod count public builder hash hash function int num owner int num segment list address member map address float capac factor super hash function new ownership statist member member capac factor initi num owner num owner actual num owner comput actual num owner num owner member capac factor segment owner new list num segment int segment segment num segment segment segment owner segment new array list address actual num owner public builder default consist hash base list address actual member map address float actual capac factor super base get hash function new ownership statist base actual member actual member actual capac factor int num segment base get num segment set address actual member set new hash set address actual member list owner new list num segment int segment segment num segment segment owner segment new array list base locat owner segment segment owner segment retain actual member set initi num owner base get num owner actual num owner comput actual num owner initi num owner actual member actual capac factor segment owner owner public builder default consist hash base base base get member base get capac factor public builder builder super int num segment get num segment list owner new list num segment int segment segment num segment segment owner segment new array list address segment owner segment initi num owner initi num owner actual num owner actual num owner segment owner owner public int get actual num owner return actual num owner public int get num segment return segment owner length public list address get owner int segment return segment owner segment public address get primari owner int segment return segment owner segment get public list address get backup owner int segment return segment owner segment sub list segment owner segment size public boolean add owner int segment address owner mod count list address segment owner segment owner segment segment owner contain owner return fals segment owner add owner stat inc own owner segment owner size first owner stat inc primari own owner return true public boolean add owner int segment collect address new owner boolean modifi fals address owner new owner modifi add owner segment owner return modifi public boolean remov owner int segment address owner mod count list address segment owner segment owner segment segment owner get equal owner stat dec primari own owner boolean modifi segment owner remov owner modifi stat dec own owner return modifi public void add primari owner int segment address new primari owner mod count list address segment owner segment owner segment int owner index segment owner index new primari owner owner index throw new illeg argument except new primari owner must backup alreadi segment owner empti address old primari owner segment owner get stat dec primari own old primari owner segment owner add new primari owner stat inc own new primari owner stat inc primari own new primari owner public void replac primari owner backup int segment address new primari owner mod count list address segment owner segment owner segment int owner index segment owner index new primari owner owner index throw new illeg argument except new primari owner must alreadi backup owner address old primari owner segment owner get stat dec primari own old primari owner segment owner remov owner index segment owner add new primari owner stat inc primari own new primari owner public default consist hash build return new default consist hash hash function initi num owner segment owner length member capac factor segment owner public int get primari own address node return stat get primari own node public int get own address node return stat get own node public float get primari own per capac address node float capac factor get capac factor node return capac factor get primari own node capac factor float public float get own per capac address node float capac factor get capac factor node return capac factor get own node capac factor float public int comput actual num owner int num owner list address member map address float capac factor int node load member size capac factor null node load address node member capac factor get node node load return math min num owner node load overrid public boolean equal object return null get class get class overrid public int hash code return public static class extern extend abstract extern default consist hash factori overrid public void write object object output output default consist hash factori chf throw except overrid suppress warn uncheck public default consist hash factori read object object input unmarshal throw except class find except return new default consist hash factori overrid public integ get id return id overrid public set class extend default consist hash factori get type class return collect singleton default consist hash factori class 
packag org contain import static org common util util str import java util abstract collect import java util abstract set import java util collect import java util collect import java util iter import java util map import java util map entri import java util element except import java util option import java util set import java util spliter import java util spliter import java util concurr concurr map import java util function bi consum import org common log log import org common log log factori import org common util collect factori import org common util entri size calcul import org common util evict listen import org common util peekabl map import org contain entri cach entri size calcul import org contain entri immort cach entri import org contain entri intern cach entri import org contain entri primit entri size calcul import org evict activ manag import org evict evict manag import org evict evict type import org evict passiv manag import org expir expir manag import org factori annot inject import org filter key filter import org filter key valu filter import org marshal core wrap byte array size calcul import org metadata metadata import org metadata impl metadata import org notif cachelisten cach notifi import org persist manag persist manag import org util core immut import org util time servic import org util concurr within thread executor import com github benman caffein cach cach import com github benman caffein cach cach writer import com github benman caffein cach caffein import com github benman caffein cach polici import com github benman caffein cach remov caus import net jcip annot thread safe default data contain evict non evict base datum contain author manik surtani author galder zamarr author vladimir blagojev author href http gleamynod net trustin lee sinc thread safe public class default data contain implement data contain privat static final log log log factori get log default data contain class privat static final boolean trace log trace enabl privat final concurr map intern cach entri entri privat final cach intern cach entri evict cach protect intern entri factori entri factori privat evict manag evict manag privat passiv manag passiv privat activ manag activ privat persist manag pm privat time servic time servic privat cach notifi cach notifi privat expir manag expir manag public default data contain int concurr level compar implement pass could fallback entri collect factori make concurr parallel map concurr level evict cach null privat static caffein caffein builder return caffein caffein new builder protect default data contain int concurr level long threshold size evict type threshold polici default evict listen evict listen new default evict listen caffein intern cach entri caffein caffein builder switch threshold polici case cach entri size calcul calc new cach entri size calcul new wrap byte array size calcul new primit entri size calcul caffein weigher k v int calc calcul size k v maximum weight threshold size break case caffein maximum size threshold size break default throw new unsupport oper except polici support threshold polici evict cach appli listen caffein evict listen build entri evict cach map privat caffein intern cach entri appli listen caffein intern cach entri caffein default evict listen listen return caffein executor new within thread executor remov listen k v c switch c case listen entri evict collect singleton map k v break case listen entri remov new immort cach entri k v break case listen entri activ k break writer new cach writer intern cach entri overrid public void write key intern cach entri valu overrid public void delet key intern cach entri valu remov caus caus caus remov caus listen entri chosen evict new immort cach entri key valu method invok memori polici use param concurr level param threshold size param size calcul protect default data contain int concurr level long threshold size entri size calcul super super size calcul default evict listen evict listen new default evict listen entri size calcul intern cach entri calc new cach entri size calcul size calcul evict cach appli listen caffein new builder weigher k intern cach entri v int calc calcul size k v maximum weight threshold size evict listen build entri evict cach map inject public void initi evict manag evict manag passiv manag passiv intern entri factori entri factori activ manag activ persist manag clm time servic time servic cach notifi cach notifi expir manag expir manag evict manag evict manag passiv passiv entri factori entri factori activ activ pm clm time servic time servic cach notifi cach notifi expir manag expir manag public static default data contain bound data contain int concurr level long max entri evict type threshold polici return new default data contain concurr level max entri threshold polici public static default data contain bound data contain int concurr level long max entri entri size calcul super super size calcul return new default data contain concurr level max entri size calcul public static default data contain un bound data contain int concurr level return new default data contain concurr level overrid public intern cach entri peek object key entri instanceof peekabl map return peekabl map intern cach entri entri peek key return entri get key overrid public intern cach entri get object k intern cach entri e entri get k e null e expir long current time milli time servic wall clock time e expir current time milli expir manag handl memori expir e current time milli e null els e touch current time milli return e overrid public void put k v metadata metadata boolean l entri fals metadata instanceof metadata metadata metadata metadata metadata l entri true intern cach entri e entri get k trace log tracef creat new write exist metadata new valu e metadata str v final intern cach entri copi l entri copi entri factori creat k v metadata els e null copi entri factori updat e v metadata els brand new entri copi entri factori creat k v metadata trace log tracef store contain copi entri comput copi get key key entri activ updat key entri null return copi overrid public boolean contain key object k intern cach entri ice peek k ice null ice expir long current time milli time servic wall clock time ice expir current time milli expir manag handl memori expir ice current time milli ice null return ice null overrid public intern cach entri remov object k final intern cach entri refer new intern cach entri entri comput k key entri activ remov key entri null refer entri return null intern cach entri e refer trace log tracef remov contain e return e null e expir e expir time servic wall clock time null e privat polici evict intern cach entri evict evict cach null option polici evict intern cach entri evict evict cach polici evict evict present return evict get throw new unsupport oper except overrid public long capac polici evict intern cach entri evict evict return evict get maximum overrid public void resiz long new size polici evict intern cach entri evict evict evict set maximum new size overrid public int size int size loop make sure remov expir entri iter intern cach entri iter iter iter next iter next size integ return integ return size overrid public int size includ expir return entri size overrid public void clear log tracef clear datum contain entri clear overrid public set key set return collect unmodifi set entri key set overrid public collect valu return new valu overrid public set intern cach entri entri set return new entri set overrid public void evict key entri comput present key entri passiv passiv entri return null overrid public intern cach entri comput key comput action action return entri comput key k old entri intern cach entri new entri action comput k old entri entri factori new entri old entri return old entri els new entri null activ remov k fals return null activ updat k old entri null trace log tracef store contain new entri return new entri overrid public iter intern cach entri iter return new entri iter entri valu iter fals overrid public iter intern cach entri iter includ expir return new entri iter entri valu iter true privat final class default evict listen implement evict listen intern cach entri overrid public void entri evict map intern cach entri evict evict manag entri evict evict overrid public void entri chosen evict entri intern cach entri entri passiv passiv entri get valu overrid public void entri activ object key activ updat key true overrid public void entri remov entri intern cach entri entri privat class immut entri iter extend entri iter immut entri iter iter intern cach entri super fals overrid public intern cach entri next return core immut immut intern cach entri super next public class entri iter implement iter intern cach entri privat final iter intern cach entri privat final boolean includ expir privat intern cach entri next entri iter iter intern cach entri boolean includ expir includ expir includ expir privat intern cach entri get next boolean initi time fals long next intern cach entri entri next includ expir entri expir log tracef return next entri entri return entri els initi time time servic wall clock time initi time true entri expir log tracef return next entri entri return entri els log tracef expir entri log tracef return next null return null overrid public intern cach entri next next null next get next next null throw new element except intern cach entri return next next null return return overrid public boolean next next null next get next return next null overrid public void remov throw new unsupport oper except minim implement need unmodifi set privat class entri set extend abstract set intern cach entri overrid public boolean contain object instanceof map entri return fals suppress warn rawtyp map entri e map entri intern cach entri ice entri get e get key ice null return fals return ice get valu equal e get valu overrid public iter intern cach entri iter return new immut entri iter entri valu iter overrid public int size return entri size overrid public string string return entri string overrid public spliter intern cach entri spliter return spliter spliter spliter spliter minim implement need unmodifi collect privat class valu extend abstract collect overrid public iter iter return new valu iter entri valu iter overrid public int size return entri size overrid public spliter spliter return spliter spliter spliter privat static class valu iter implement iter iter intern cach entri current iter privat valu iter iter intern cach entri current iter overrid public boolean next return current iter next overrid public void remov throw new unsupport oper except overrid public next return current iter next get valu overrid public void execut task final key filter super filter final bi consum super intern cach entri action throw interrupt except filter null throw new illeg argument except filter specifi action null throw new illeg argument except action specifi entri key intern cach entri valu filter accept key action accept key valu figur way interrupt good iter thread current thread interrupt throw new interrupt except overrid public void execut task final key valu filter super super filter final bi consum super intern cach entri action throw interrupt except filter null throw new illeg argument except filter specifi action null throw new illeg argument except action specifi entri key intern cach entri valu filter accept key valu get valu valu get metadata action accept key valu figur way interrupt good iter thread current thread interrupt throw new interrupt except 
packag org distexec import java io externaliz import java io serializ except import java io serializ import java util array list import java util array import java util collect import java util collect import java util hash map import java util iter import java util link list import java util list import java util map import java util map entri import java util random import java util concurr abstract executor servic import java util concurr callabl import java util concurr cancel except import java util concurr complet futur import java util concurr complet servic import java util concurr execut except import java util concurr executor complet servic import java util concurr executor servic import java util concurr executor import java util concurr futur import java util concurr reject execut except import java util concurr runnabl futur import java util concurr thread pool executor import java util concurr time unit import java util concurr timeout except import java util concurr atom atom boolean import org advanc cach import org cach import org command cancel command import org command cancel servic import org command command factori import org command read distribut execut command import org common marshal marshal import org common marshal stream marshal import org common util util import org configur cach configur import org distexec spi distribut task lifecycl servic import org distribut distribut info import org distribut distribut manag import org factori compon registri import org factori thread default thread factori import org interceptor async interceptor import org interceptor async interceptor chain import org interceptor lock cluster depend logic import org lifecycl compon statu import org manag emb cach manag import org remot respons respons import org remot respons success respons import org remot rpc respons mode import org remot rpc rpc manag import org remot transport address import org remot transport topolog awar address import org remot transport jgroup suspect except import org secur author manag import org secur author permiss import org util time servic import org util concurr complet futur import org util log log import org util log log factori implement link executor servic link distribut executor servic executor servic provid method submit task execut cluster node p note due potenti task migrat anoth node everi link callabl link runnabl link distribut callabl submit must either link serializ link externaliz also valu return callabl must link serializ link externaliz unfortun valu return serializ link serializ except throw author vladimir blagojev sinc deprec sinc pleas use link emb cach manag executor link org cach stream instead public class default executor servic extend abstract executor servic implement distribut executor servic privat static final node filter topolog awar address machin privat static final node filter topolog awar address rack privat static final node filter topolog awar address site privat static final node filter address address true public static final distribut task failov polici new task failov polici public static final distribut task failov polici new random node task failov polici privat static final log log log factori get log default executor servic class privat static final boolean trace log trace enabl protect final atom boolean shutdown new atom boolean fals protect final advanc cach cach protect final rpc manag rpc protect final async interceptor chain invok protect final command factori factori protect final marshal marshal protect final executor servic local executor servic protect final cancel servic cancel servic protect final cluster depend logic cluster depend logic protect final boolean take executor ownership privat final time servic time servic creat new default executor servic give master cach node local task execut distribut task execut initi cach node param master cach node cach node initi distribut task public default executor servic cach master cach node master cach node creat local executor master cach node true public static executor servic creat local executor cach master cach node string node name master cach node null secur action get configur node name master cach node null return executor new singl thread executor new default thread factori null thread default thread factori node name default executor servic creat new default executor servic give master cach node executor servic parallel execut task run node distribut task execut initi cach node p note default executor servic shutdown client suppli local executor servic default executor servic shutdown lifecycl manag suppli executor servic leav client also note client suppli executor servic execut task caller thread e reject handler link thread pool executor configur link link thread pool executor caller run polici param master cach node cach node initi distribut task param local executor servic executor servic run local task public default executor servic cach master cach node executor servic local executor servic master cach node local executor servic fals creat new default executor servic give master cach node executor servic parallel execut task run node distribut task execut initi cach node param master cach node cach node initi distribut task param local executor servic executor servic run local task param take executor ownership true link distribut executor servic shutdown link distribut executor servic shutdown method shutdown local executor servic well public default executor servic cach master cach node executor servic local executor servic boolean take executor ownership super master cach node null throw new illeg argument except use null cach default executor servic els local executor servic null throw new illeg argument except use null instanc executor servic els tri local executor servic shutdown throw new illeg argument except use instanc executor servic shutdown catch illeg state except e take executor ownership throw new illeg argument except take ownership manag executor servic cach master cach node get advanc cach compon registri registri secur action get cach compon registri cach ensur access permiss cach ensur proper cach state cach ensur full cach cach rpc secur action get cach rpc manag cach invok registri get compon async interceptor chain class factori registri get compon command factori class marshal registri get compon stream marshal class cancel servic registri get compon cancel servic class local executor servic local executor servic take executor ownership take executor ownership time servic registri get time servic cluster depend logic registri get compon cluster depend logic class overrid public distribut task builder creat distribut task builder callabl callabl configur cach configur secur action get cach configur cach long cach configur cluster remot timeout distribut task builder dtb new default distribut task builder dtb callabl callabl return dtb overrid public complet futur submit runnabl task result return complet futur super submit task result overrid public complet futur submit callabl task return complet futur super submit task overrid public void shutdown real shutdown fals protect list address get member rpc null return rpc get member els return collect singleton list get address protect list address execut candid distribut task task return filter member task get task execut polici get member privat address get address return cluster depend logic get address privat list runnabl real shutdown boolean interrupt shutdown set true cancel task take executor ownership interrupt local executor servic shutdown els local executor servic shutdown return collect empti list overrid public list runnabl shutdown return real shutdown true overrid public boolean shutdown return shutdown get overrid public boolean termin shutdown get account task return true return fals overrid public boolean await termin long timeout time unit unit throw interrupt except long nano time wait unit nano timeout wait task finish return true overrid public invok collect extend callabl task throw interrupt except execut except tri return invok task fals catch timeout except can not happen assert fals return null overrid public invok collect extend callabl task long timeout time unit unit throw interrupt except execut except timeout except return invok task true unit nano timeout main mechan invok essenti copi link abstract executor servic invok except replac link executor complet servic link distribut execut complet servic privat invok collect extend callabl task boolean time long nano throw interrupt except execut except timeout except task null throw new null pointer except int ntask task size ntask throw new illeg argument except list futur futur new array list ntask complet servic ec new distribut execut complet servic effici especi executor limit parallel check see previous submit task do submit interleav plu except mechan account messi main loop tri record except fail obtain result throw last except get execut except ee null long last time time time servic time iter extend callabl task iter start one task sure rest increment futur add ec submit next ntask int activ futur f ec poll f null ntask ntask futur add ec submit next activ els activ break els time f ec poll nano time unit f null throw new timeout except long time servic time nano time servic time durat last time time unit last time els f ec take f null activ tri return f get catch interrupt except ie throw ie catch execut except eex ee eex catch runtim except rex ee new execut except rex ee null ee new execut except privat static final long serial version throw ee final futur f futur f cancel true overrid public void execut runnabl command shutdown get distribut task part object cmd command instanceof distribut task part cmd distribut task part object command els command instanceof serializ cmd distribut task part object new task command null els throw new illeg argument except runnabl command serializ command cmd execut els throw new reject execut except overrid protect runnabl futur new task runnabl runnabl valu runnabl null throw new null pointer except runnabl adapt adapt new runnabl adapt runnabl valu return new task adapt overrid protect runnabl futur new task callabl callabl callabl null throw new null pointer except distribut task builder distribut task builder creat distribut task builder callabl distribut task task distribut task builder build distribut execut command execut command factori build distribut execut command callabl get address null return creat distribut task part task execut command select execut node task overrid public complet futur submit address target callabl task distribut task builder distribut task builder creat distribut task builder task distribut task distribut task distribut task builder build return submit target distribut task overrid public complet futur submit address target distribut task task task null throw new null pointer except target null throw new null pointer except list address member get member member contain target return complet futur complet except futur new suspect except target node target cluster member member member address get address distribut execut command c target equal c factori build distribut execut command clone task get callabl null els c factori build distribut execut command task get callabl null distribut task part part creat distribut task part task c target part execut return part overrid public complet futur submit callabl task input distribut task builder distribut task builder creat distribut task builder task distribut task distribut task distribut task builder build return submit distribut task input overrid public complet futur submit distribut task task input task null throw new null pointer except address get address input key specifi input map address list node key map key execut node task get task execut polici input check execut polici task node key map input array list address node new array list node key map key set address target select execut node node distribut execut command c target equal c factori build distribut execut command clone task get callabl array list input els c factori build distribut execut command task get callabl array list input distribut task part part creat distribut task part task c array list input target part execut return part els return submit task overrid public list complet futur submit everywher callabl task distribut task builder distribut task builder creat distribut task builder task distribut task distribut task distribut task builder build return submit everywher distribut task overrid public list complet futur submit everywher distribut task task task null throw new null pointer except list address member execut candid task list complet futur futur new array list member size address get address address target member distribut execut command c target equal c factori build distribut execut command clone task get callabl null els c factori build distribut execut command task get callabl null distribut task part part creat distribut task part task c target futur add part part execut return futur overrid public list complet futur submit everywher callabl task input distribut task builder distribut task builder creat distribut task builder task distribut task distribut task distribut task builder build return submit everywher distribut task input overrid public list complet futur submit everywher distribut task task input task null throw new null pointer except input key specifi input list complet futur futur new array list input length address get address map address list node key map key execut node task get task execut polici input check execut polici task node key map input entri address list e node key map entri set address target e get key distribut execut command c target equal c factori build distribut execut command clone task get callabl e get valu els c factori build distribut execut command task get callabl e get valu distribut task part part creat distribut task part task c e get valu target futur add part part execut return futur els return submit everywher task protect callabl clone callabl task return util clone marshal marshal task protect distribut task part creat distribut task part distribut task task distribut execut command c list input key address target int failov count return get address equal target new local distribut task part task c list object input key failov count new remot distribut task part task c list object input key target failov count protect distribut task part creat distribut task part distribut task task distribut execut command c address target int failov count return creat distribut task part task c collect empti list target failov count privat void check execut polici distribut task task map address list node key map input node key map null node key map empti throw new illeg state except distribut task execut polici task get task execut polici task task return invalid key execut node node key map execut polici plan give input array string input privat boolean input key specifi input return input null input length protect address select execut node list address candid list address list random cluster member candid return list get protect address select execut node distribut task task return select execut node execut candid task protect list address random cluster member final list address member int num need member null member empti throw new illeg argument except invalid member list member member size num need log can not select random member num need member num need member size list address member copi new array list member list address choos new array list num need random be new random member copi empti num need choos size int count member copi size address address member copi remov r next int count choos add address return choos protect map address list key execut node distribut task execut polici polici input distribut manag dm cach get distribut manag map address list address key new hash map input length boolean use mode dm null key input address owner key use mode list address member new array list get member member filter member polici member use mode http issu jboss org brows sinc key valu node let pick randomli collect shuffl member owner key member get els mode distribut info distribut info dm get cach topolog get distribut key collect address owner distribut info write owner list address filter filter member polici owner filter empti owner key filter get els owner key distribut info primari list key node address key get owner key key node null key node new link list address key put owner key key node key node add key return address key privat list address filter member distribut task execut polici polici collect address member node filter filter switch polici case filter break case filter break case filter break case filter break default filter break list address result new array list address address member address instanceof topolog awar address topolog awar address taa topolog awar address address filter includ taa topolog awar address get address result add address els result add address return result privat void ensur access permiss final advanc cach cach author manag author manag secur action get cach author manag cach author manag null author manag check permiss author permiss privat void ensur proper cach state advanc cach cach throw null pointer except illeg state except allow state executor servic use compon defin method link start annot cach get statu compon statu cach get statu compon statu throw new illeg state except invalid cach state cach get statu privat void ensur full cach advanc cach cach list async interceptor interceptor secur action get interceptor chain cach interceptor null interceptor empti throw log distribut executor support privat static class random node task failov polici implement distribut task failov polici public random node task failov polici super overrid public address failov failov context fc return random node fc execut candid fc execut failur locat protect address random node list address candid address fail execut locat random be new random candid remov fail execut locat candid empti throw new illeg state except candid failov candid int index r next int candid size return candid get index overrid public int max failov attempt return privat static class task failov polici implement distribut task failov polici public task failov polici super overrid public address failov failov context fc return fc execut failur locat overrid public int max failov attempt return node filter allow select node accord link distribut task execut polici interfac node filter boolean includ topolog awar address address topolog awar address address privat class default distribut task builder implement distribut task builder distribut task privat callabl callabl privat long timeout privat distribut task execut polici execut polici distribut task execut polici privat distribut task failov polici failov polici public default distribut task builder long task timeout timeout task timeout overrid public distribut task builder callabl callabl callabl callabl null throw new illeg argument except callabl null callabl callabl return overrid public distribut task builder timeout long time unit tu timeout time unit convert tu return overrid public distribut task builder execut polici distribut task execut polici polici polici null throw new illeg argument except distribut task execut polici null execut polici polici return overrid public distribut task builder failov polici distribut task failov polici polici polici null failov polici els failov polici polici return overrid public distribut task build default distribut task builder task new default distribut task builder timeout task callabl callabl task execut polici execut polici task failov polici failov polici return task overrid public long timeout return timeout overrid public distribut task execut polici get task execut polici return execut polici overrid public distribut task failov polici get task failov polici return failov polici overrid public callabl get callabl return callabl distribut task part repres unit work send remot execut author mircea marku author vladimir blagojev privat abstract class distribut task part extend complet futur implement runnabl futur protect final distribut execut command dist command privat final list object input key privat final distribut task own task privat int fail count privat volatil boolean cancel protect distribut task part list object input key distribut execut command command distribut task task int fail count input key input key dist command command own task task fail count fail count public list object get input key return input key public distribut execut command get command return dist command public distribut task get own task return own task public abstract address get execut target public abstract void execut overrid public get throw interrupt except execut except tri return inner get time unit catch timeout except e throw new execut except e overrid public get long timeout time unit unit throw interrupt except execut except timeout except return inner get timeout unit protect inner get long timeout time unit unit throw execut except timeout except interrupt except cancel throw new cancel except task alreadi cancel long timeout nano comput timeout nano timeout unit tri return get result timeout nano catch timeout except te throw te catch except e could finish org util concurr timeout except right futur get timeout expir case want throw timeout except e instanceof execut except e get caus instanceof org util concurr timeout except trace log tracef distribut task time throw timeout except ignor except e throw new timeout except boolean failov fail count get own task get task failov polici max failov attempt failov tri return failov execut e timeout nano time unit catch except fail throw wrap execut except fail els throw wrap execut except e protect get result long timeout nano throw except timeout nano return super get timeout nano time unit els return super get protect long comput timeout nano long timeout time unit unit long task timeout time unit nano get own task timeout long futur timeout time unit convert timeout unit long actual timeout task timeout futur timeout actual timeout math min task timeout futur timeout els actual timeout math max task timeout futur timeout return actual timeout protect execut except wrap execut except except e e instanceof execut except return execut except e els return new execut except e protect failov execut final except caus long timeout time unit unit throw except final list address execut candid execut candid get own task failov context fc new failov context overrid public list input key return list get input key overrid public address execut failur locat return get execut target overrid public list address execut candid return execut candid overrid public throwabl caus return caus address failov target get own task get task failov polici failov fc log distribut task failov fc execut failur locat failov target caus distribut task part part creat distribut task part own task dist command get input key failov target fail count part execut return part get timeout unit overrid public void run execut privat class remot distribut task part extend distribut task part privat final address execut target public remot distribut task part distribut task task distribut execut command command list object input key address execut target int failov count super input key command task failov count get address equal execut target throw new illeg argument except task execut local execut target execut target overrid public address get execut target return execut target overrid public void execut trace log tracef send remot execut node get execut target tri rpc invok remot async collect singleton list get execut target get command rpc get rpc option builder respons mode timeout get own task timeout time unit build complet map address respons v throwabl null complet except els tri complet retriev result v catch except e complet except e catch throwabl e log remot execut fail get execut target e overrid public boolean cancel boolean may interrupt run cancel super cancel true cancel command ccc factori build cancel command command dist command get rpc invok remot collect singleton list get execut target ccc rpc get default rpc option true return true els alreadi cancel return fals privat retriev result map address respons respons throw except result null two never happen mark illeg state except respons null throw new illeg state except invalid respons receiv respons respons size entri address respons e respons entri set respons valu e get valu valu instanceof success respons result success respons valu get respons valu els throw new execut except new except valu null valu string unknown caus els never happen send distribut task part one node execut therefor get one respons throw new illeg state except invalid respons respons return result privat class local distribut task part extend distribut task part public local distribut task part distribut task task distribut execut command command list object input key int failov count super input key command task failov count overrid public synchron boolean cancel boolean may interrupt run cancel super cancel true cancel command ccc factori build cancel command command dist command get ccc init cancel servic tri ccc invok catch throwabl log could execut cancel local return true els alreadi cancel return fals overrid public address get execut target return get address overrid public void execut log debugf send self tri runnabl call get command init cach distribut task lifecycl servic lifecycl distribut task lifecycl servic get instanc tri hook lifecycl lifecycl pre execut get command get callabl cach collect unmodifi collect get input key cancel servic regist thread current thread get command get get command invok async complet rv null complet except els complet rv hook lifecycl lifecycl post execut get command get callabl cancel servic unregist get command get catch throwabl complet except hook lifecycl lifecycl post execut get command get callabl cancel servic unregist get command get local executor servic execut call catch throwabl e log local execut fail e 
packag org util concurr lock impl import static java util concurr atom atom refer field updat new updat import static org common util util str import java util array list import java util collect import java util hash set import java util list import java util object import java util set import java util concurr callabl import java util concurr complet futur import java util concurr schedul executor servic import java util concurr schedul futur import java util concurr time unit import java util concurr atom atom integ import java util concurr atom atom refer field updat import org common util util import org configur cach configur import org context invoc context import org factori know compon name import org factori annot compon name import org factori annot inject import org jmx annot data type import org jmx annot bean import org jmx annot manag attribut import org util concurr timeout except import org util concurr lock deadlock detect except import org util concurr lock extend lock promis import org util concurr lock key awar lock listen import org util concurr lock key awar lock promis import org util concurr lock lock listen import org util concurr lock lock manag import org util concurr lock lock promis import org util concurr lock lock state import org util log log import org util log log factori default link lock manag implement transact non transact cach author pedro ruivo sinc bean object name lock manag descript manag handl lock entri public class default lock manag implement lock manag privat static final log log log factori get log default lock manag class privat static final boolean trace log trace enabl privat static final atom refer field updat composit lock promis lock state new updat composit lock promis class lock state class lock state privat lock contain lock contain privat configur configur privat schedul executor servic schedul inject public void inject lock contain contain configur configur compon name know compon name schedul executor servic executor servic lock contain contain configur configur schedul executor servic overrid public key awar lock promis lock object key object lock owner long time time unit unit object requir non null key key must non null object requir non null lock owner lock owner must non null object requir non null unit time unit must non null trace log tracef lock key owner timeout str key lock owner time unit key lock owner lock alreadi own lock owner reason attempt lock needlessli lock lock lock contain get lock key lock null lock get lock owner key log tracef lock key alreadi hold lock owner key return key awar lock promis extend lock promis promis lock contain acquir key lock owner time unit return new key awar extend lock promis promis key unit milli time schedul lock timeout task schedul overrid public key awar lock promis lock collect key object lock owner long time time unit unit object requir non null key key must non null object requir non null lock owner lock owner must non null object requir non null unit time unit must non null key empti trace log tracef lock key find owner lock owner return key awar lock promis els key size although cost creat iter least n need enter synchron section return lock key iter next lock owner time unit final set object uniqu key filter distinct key key uniqu key size although cost creat iter least n need enter synchron section return lock uniqu key iter next lock owner time unit trace log tracef lock key owner timeout str uniqu key lock owner time unit final composit lock promis composit lock promis new composit lock promis uniqu key size need avoid intern deadlock lock owner invok method key order solv problem sinc acquir non block lock owner iter fast slow synchron object key uniqu key composit lock promis add lock new key awar extend lock promis lock contain acquir key lock owner time unit key unit milli time composit lock promis mark list final return composit lock promis schedul lock timeout task schedul time unit privat set object filter distinct key collect collect collect instanceof set noinspect uncheck return set object collect els return new hash set collect overrid public void unlock object key object lock owner trace log tracef releas lock key owner key lock owner lock contain releas key lock owner overrid public void unlock collect key object lock owner trace log tracef releas lock key owner str key lock owner key empti return object key key key lock owner mean explicitli lock unlock via singl argument unlock method use cach lock owner specif overrid key lock owner log tracef ignor key match lock owner key els lock contain releas key lock owner overrid public void unlock invoc context context unlock context get lock key context get lock owner context clear lock key overrid public boolean own lock object key object lock owner object current owner get owner key return current owner null current owner equal lock owner overrid public boolean lock object key return get owner key null overrid public object get owner object key lock lock lock contain get lock key return lock null null lock get lock owner overrid public string print lock info return lock contain string overrid manag attribut descript number exclus lock hold display name number lock hold public int get number lock hold return lock contain get num lock hold manag attribut descript concurr level lock manag configur display name concurr level datum type data type public int get concurr level return configur lock concurr level manag attribut descript number exclus lock avail display name number lock avail public int get number lock avail return lock contain size lock contain get num lock hold overrid public lock get lock object key return lock contain get lock key privat static class key awar extend lock promis implement key awar lock promis extend lock promis callabl void privat final extend lock promis lock promis privat final object key privat final long timeout milli privat key awar extend lock promis extend lock promis lock promis object key long timeout milli lock promis lock promis key key timeout milli timeout milli overrid public void cancel lock state caus lock promis cancel caus overrid public object get requestor return lock promis get requestor overrid public object get owner return lock promis get owner overrid public boolean avail return lock promis avail overrid public void lock throw interrupt except timeout except tri lock promis lock catch timeout except e throw log unabl acquir lock util pretti print time timeout milli str key lock promis get requestor lock promis get owner overrid public void add listen lock listen listen lock promis add listen listen overrid public void add listen key awar lock listen listen lock promis add listen state listen event key state overrid public void call throw except lock promis cancel lock state return null key awar extend lock promis schedul lock timeout task schedul executor servic executor servic executor servic null timeout milli avail schedul futur futur executor servic schedul timeout milli time unit lock promis add listen state futur cancel fals return privat static class composit lock promis implement key awar lock promis lock listen callabl void privat final list key awar extend lock promis lock promis list privat final complet futur lock state notifi suppress warn final volatil lock state lock state lock state privat final atom integ counter leav new atom integ privat composit lock promis int size lock promis list new array list size notifi new complet futur void add lock key awar extend lock promis lock promis lock promis list add lock promis void mark list final counter leav set lock promis list size lock promis lock promis lock promis list lock promis add listen overrid public boolean avail return notifi do overrid public void lock throw interrupt except timeout except interrupt except interrupt except null timeout except timeout except null deadlock detect except deadlock except null runtim except runtim except null extend lock promis lock promis lock promis list tri still need invok lock lock lock promis lock catch interrupt except e interrupt except e catch timeout except e timeout except e catch deadlock detect except e deadlock except e catch runtim except e runtim except e interrupt except null throw interrupt except els timeout except null throw timeout except els deadlock except null throw deadlock except els runtim except null throw runtim except overrid public void add listen lock listen listen notifi accept listen event overrid public void event lock state state notifi do alreadi finish return lock invok state lock state cancel state return counter leav decrement get notifi complet lock state privat void cancel lock state state compar set lock state state complet futur cancel lock remain lock invok event notifi complet state lock promis list promis promis cancel state overrid public void add listen key awar lock listen listen key awar extend lock promis lock promis lock promis list lock promis add listen listen overrid public void call throw except lock promis list promis promis cancel lock state return null composit lock promis schedul lock timeout task schedul executor servic executor servic long time time unit unit executor servic null time avail schedul futur futur executor servic schedul time unit add listen state futur cancel fals return 
packag org factori thread import java util concurr thread factori import java util concurr atom atom long thread factori base boss thread boss thread factori author galder zamarr sinc public class default thread factori implement thread factori public static final string c n p f privat final string name privat final thread group thread group privat final int initi prioriti privat final string thread name pattern privat final atom long factori thread index sequenc new atom long privat final long factori index privat static final atom long global thread index sequenc new atom long privat static final atom long factori index sequenc new atom long privat string node privat string compon construct new instanc access control context call thread one use creat new thread secur manag instal param thread group thread group assign thread default may code null param initi prioriti initi thread prioriti code null use thread group set param thread name pattern name pattern string public default thread factori thread group thread group int initi prioriti string thread name pattern string node string compon null thread group initi prioriti thread name pattern node compon construct new instanc access control context call thread one use creat new thread secur manag instal param name name thread factori may code null param thread group thread group assign thread default may code null param initi prioriti initi thread prioriti code null use thread group set param thread name pattern name pattern string public default thread factori string name thread group thread group int initi prioriti string thread name pattern string node string compon name name thread group null final secur manag sm system get secur manag thread group sm null sm get thread group thread current thread get thread group thread group thread group initi prioriti initi prioriti factori index factori index sequenc get increment thread name pattern null thread name pattern default thread factori thread name pattern thread name pattern node node compon compon public string get name return name public void set node string node node node public void set compon string compon compon compon public string thread name pattern return thread name pattern public thread group thread group return thread group public int initi prioriti return initi prioriti overrid public thread new thread final runnabl target return creat thread target privat thread creat thread final runnabl target final thread name info name info new thread name info global thread index sequenc get increment factori thread index sequenc get increment factori index node compon thread thread new thread thread group target thread set name name info format thread thread name pattern thread set prioriti initi prioriti thread set daemon true return thread 
packag org util import java time clock import java time instant import java util concurr time unit default implement link time servic perform optim reli link system current time milli link system nano time author pedro ruivo sinc public class default time servic implement time servic privat final clock clock public default time servic clock clock system overrid public long wall clock time return system current time milli overrid public long time return system nano time overrid public instant instant return clock instant overrid public long time durat long start time time unit output time unit return time durat start time time output time unit overrid public long time durat long start time long end time time unit output time unit long remain end time start time remain return return output time unit convert remain time unit overrid public boolean time expir long end time return time end time overrid public long remain time long end time time unit output time unit long remain end time time return remain output time unit convert remain time unit overrid public long expect end time long durat time unit input time unit durat return time return time input time unit nano durat 
packag org stream impl import java io except import java io object input import java io object output import java util array import java util collect import java util collect import java util compar import java util enum set import java util hash set import java util ident hash map import java util iter import java util map import java util object import java util option import java util set import java util spliter import java util spliter import java util concurr array block queue import java util concurr block queue import java util concurr executor import java util concurr time unit import java util concurr atom atom boolean import java util concurr lock condit import java util concurr lock lock import java util concurr lock reentrant lock import java util function bi consum import java util function bi function import java util function binari oper import java util function consum import java util function function import java util function int function import java util function predic import java util function supplier import java util function doubl function import java util function int function import java util function long function import java util stream collector import java util stream collector import java util stream doubl stream import java util stream int stream import java util stream long stream import java util stream stream import org cach import org cach stream import org doubl cach stream import org int cach stream import org long cach stream import org common cach except import org common marshal extern import org common marshal serial import org common util closeabl iter import org contain entri cach entri import org distribut distribut manag import org distribut local cach topolog import org distribut ch consist hash import org factori compon registri import org remot transport address import org stream impl intop object distinct oper import org stream impl intop object filter oper import org stream impl intop object flat map oper import org stream impl intop object flat map doubl oper import org stream impl intop object flat map int oper import org stream impl intop object flat map long oper import org stream impl intop object limit oper import org stream impl intop object map oper import org stream impl intop object map doubl oper import org stream impl intop object map int oper import org stream impl intop object map long oper import org stream impl intop object peek oper import org stream impl termop object bi oper import org stream impl termop object oper import org stream impl termop object map iter oper import org util closeabl suppli iter import org util rang set import org util concurr timeout except import org util function closeabl supplier implement link cach stream provid support lazili distribut stream method appropri node param type stream public class distribut cach stream extend abstract cach stream stream cach stream implement cach stream hack allow cast work properli sinc java n work well nest gener protect static supplier cach stream cach entri supplier stream cast supplier supplier return supplier standard constructor requir pertin inform properli util distribut cach stream param local address local address node param parallel whether stream parallel param dm distribut manag find key map param supplier supplier local cach stream instanc param csm manag handl send messag node param includ loader whether cach loader util oper param distribut batch size default size distribut batch param executor executor use certain oper requir async process ie iter public distribut cach stream address local address boolean parallel distribut manag dm supplier cach stream cach entri supplier cluster stream manag csm boolean includ loader int distribut batch size executor executor compon registri registri super local address parallel dm supplier stream cast supplier csm includ loader distribut batch size executor registri constructor also allow simpl map method insert first chang anoth type import link cach stream map function current n return link cach stream chang remov constructor updat refer accordingli param local address local address node param parallel whether stream parallel param dm distribut manag find key map param supplier supplier local cach stream instanc param csm manag handl send messag node param includ loader whether cach loader util oper param distribut batch size default size distribut batch param executor executor use certain oper requir async process ie iter param function initi function appli stream chang type public distribut cach stream address local address boolean parallel distribut manag dm supplier cach stream cach entri supplier cluster stream manag csm boolean includ loader int distribut batch size executor executor compon registri registri function super cach entri function super local address parallel dm supplier stream cast supplier csm includ loader distribut batch size executor registri intermedi oper add new map oper function iter oper iter oper constructor use user call map flat map method chang back regular stream int stream doubl stream etc param instanc link abstract cach stream copi detail protect distribut cach stream abstract cach stream super overrid protect cach stream unwrap return intermedi oper store lazi evalul overrid public cach stream filter predic super predic return add intermedi oper new filter oper predic overrid public cach stream map function super extend mapper iter oper iter oper iter oper iter oper add intermedi oper map new map oper mapper return cach stream overrid public int cach stream map int int function super mapper iter oper iter oper iter oper iter oper add intermedi oper map new map int oper mapper return int cach stream overrid public long cach stream map long long function super mapper iter oper iter oper iter oper iter oper add intermedi oper map new map long oper mapper return long cach stream overrid public doubl cach stream map doubl doubl function super mapper iter oper iter oper iter oper iter oper add intermedi oper map new map doubl oper mapper return doubl cach stream overrid public cach stream flat map function super extend stream extend mapper iter oper iter oper add intermedi oper map new flat map oper mapper return cach stream overrid public int cach stream flat map int function super extend int stream mapper iter oper iter oper add intermedi oper map new flat map int oper mapper return int cach stream overrid public long cach stream flat map long function super extend long stream mapper iter oper iter oper add intermedi oper map new flat map long oper mapper return long cach stream overrid public doubl cach stream flat map doubl function super extend doubl stream mapper iter oper iter oper add intermedi oper map new flat map doubl oper mapper return doubl cach stream overrid public cach stream distinct distinct appli remot well add intermedi oper distinct oper get instanc return new intermedi cach stream distinct overrid public cach stream sort return new intermedi cach stream sort overrid public cach stream sort compar super compar return new intermedi cach stream sort compar overrid public cach stream peek consum super action return add intermedi oper new peek oper action overrid public cach stream limit long max size limit appli remot well add intermedi oper new limit oper max size return new intermedi cach stream limit max size overrid public cach stream skip long n return new intermedi cach stream skip n termin oper overrid public reduc ident binari oper accumul return perform oper termin function reduc function ident accumul true accumul null overrid public option reduc binari oper accumul valu perform oper termin function reduc function accumul true e e e null e null return accumul appli e e return e return e null return option nullabl valu overrid public reduc ident bi function super accumul binari oper combin return perform oper termin function reduc function ident accumul combin true combin null inherit doc note method n pay attent order constraint sort perform stream ignor termin oper wish order collector use link distribut cach stream collect collector method make sure link java util stream collector characterist properti set param supplier param accumul param combin param return overrid public collect supplier supplier bi consum super accumul bi consum combin return perform oper termin function collect function supplier accumul combin true e e combin accept e e return e null serial valu identifi finish collector ident finish collector extern class privat static final class identifi finish collector implement collector privat final collector real collector identifi finish collector collector real collector real collector real collector overrid public supplier supplier return real collector supplier overrid public bi consum accumul return real collector accumul overrid public binari oper combin return real collector combin overrid public function finish return null overrid public set characterist characterist set characterist characterist real collector characterist characterist size return enum set characterist els set characterist tweak enum set copi characterist tweak add characterist return tweak public static final class ident finish collector extern implement extern identifi finish collector overrid public void write object object output output identifi finish collector object throw except output write object object real collector overrid public identifi finish collector read object object input input throw except class find except return new identifi finish collector collector input read object overrid public collect collector super collector identifi finish prevent remot finish appli local everyth combin collector characterist contain collector characterist return perform oper termin function collector function collector true binari oper collector combin null els need wrap collector forc ident finish intermedi result perform oper termin function collector function new identifi finish collector collector true collector combin null return collector finish appli intermedi result overrid public option min compar super compar valu perform oper termin function min function compar fals e e e null e null return compar compar e e e e els return e return e null return option nullabl valu overrid public option max compar super compar valu perform oper termin function max function compar fals e e e null e null return compar compar e e e e els return e return e null return option nullabl valu overrid public boolean match predic super predic return perform oper termin function match function predic fals boolean logic b b overrid public boolean match predic super predic return perform oper termin function match function predic fals boolean logic b b overrid public boolean none match predic super predic return perform oper termin function none match function predic fals boolean logic b b overrid public option find first n sort find return find overrid public option find valu perform oper termin function find function fals r r r null r r object non null return option nullabl valu overrid public long count return perform oper termin function count function true l l l l null next one key track termin oper overrid public iter iter return remot iter iter remot iter block queue queue new array block queue distribut batch size final atom boolean complet new atom boolean lock next lock new reentrant lock condit next condit next lock new condit consum consum new hand consum queue complet next lock next condit iter supplier supplier new iter supplier queue complet next lock next condit csm boolean iter parallel distribut parallel distribut null fals parallel distribut rehash awar rehash awar iter complet consum supplier iter parallel distribut els ignor rehash iter consum supplier iter parallel distribut closeabl iter closeabl iter new closeabl suppli iter supplier close supplier close return closeabl iter privat void ignor rehash iter consum consum iter supplier supplier boolean iter parallel distribut collect consum remot result new collect consum consum consist hash ch dm get write consist hash boolean run local ch get member contain local address boolean stay local run local segment filter null ch get segment owner local address contain segment filter map iter oper op new map iter oper intermedi oper supplier segment ch segment filter null stay local distribut batch size thread thread thread current thread executor execut tri log tracef thread submit iter request stream thread stay local object id csm remot stream oper iter parallel distribut parallel ch segment filter key filter collect object set empti map includ loader op remot result make sure run submit manag process node asynchron local oper collect local valu op perform oper remot result remot result complet null collect empti set local valu id null supplier pend id tri tri csm await complet id timeout timeout unit throw new timeout except catch interrupt except e throw new cach except e final csm forget oper id els collect local valu op perform oper remot result remot result complet null collect empti set local valu supplier close catch cach except e log trace encount local cach except stream e supplier close e catch throwabl log trace encount local throwabl stream supplier close new cach except privat void rehash awar iter atom boolean complet consum consum iter supplier supplier boolean iter parallel distribut consist hash segment info dm get read consist hash segment listen notifi listen notifi segment complet listen null listen notifi new segment listen notifi segment complet listen supplier set consum listen notifi els listen notifi null key track consum object result new key track consum key partition segment info get num segment iter oper wrap consum consum iter oper get function listen notifi thread thread thread current thread executor execut tri log tracef thread submit iter request stream thread set integ segment process segment filter null new rang set segment info get num segment segment filter local cach topolog cach topolog dm get cach topolog consist hash ch cach topolog get read consist hash boolean run local ch get member contain local address set integ segment set object exclud key boolean stay local fals run local set integ segment owner ch get segment owner local address segment local even backup n want iter go remot stay local segment owner contain segment process stay local segment segment process els segment ch get primari segment owner local address stream filter segment process contain collect collector set exclud key segment stream flat map result refer array get stream collect collector set els segment null exclud key collect empti set key track termin oper object object op iter oper get oper intermedi oper supplier segment ch segment process exclud key stay local distribut batch size stay local object id csm remot stream oper rehash awar iter parallel distribut parallel ch segment process key filter new atom refer array map result refer array includ loader op result id null supplier pend id tri run local perform local rehash awar oper result segment process ch segment op ch get primari segment owner local address id id null tri csm await complet id timeout timeout unit throw new timeout except catch interrupt except e throw new cach except e segment process segment process supplier result segment process id cach topolog get topolog id final csm forget oper id els perform local rehash awar oper result segment process ch segment op ch get segment owner local address null segment process segment process supplier result segment process null cach topolog get topolog id complet get catch cach except e log trace encount local cach except stream e supplier close e catch throwabl log trace encount local throwabl stream supplier close new cach except privat set integ segment process iter supplier supplier key track consum object result set integ segment process object id int topolog id string str id id null local id string result lose segment empti segment process new hash set result lose segment result lose segment clear log tracef find lose segment segment process str id result requir next topolog tri state transfer lock wait topolog topolog id timeout timeout unit catch interrupt except java util concurr timeout except e throw new cach except e els supplier close log tracef finish rehash awar oper str id return segment process privat void perform local rehash awar oper key track consum object result set integ segment process consist hash ch set integ segment key track termin oper object object op supplier set integ own segment supplier object id collect cach entri object object local valu op perform oper rehash awar result effici hamper perform rehash dm get read consist hash equal ch log tracef find local valu id local valu size id result complet null segment local valu els set integ segment own segment supplier get set integ lose segment segment stream filter segment process contain collect collector set log tracef chang make segment suspect identifi lose segment id result segment lose lose segment static class hand consum implement consum privat final block queue queue privat final atom boolean complet privat final lock next lock privat final condit next condit hand consum block queue queue atom boolean complet lock next lock condit next condit queue queue complet complet next lock next lock next condit next condit overrid public void accept rs n awak person wait fill queue process retriev valu reason slowdown queue offer rs complet get signal anyon wait valu consum queue next lock lock tri next condit signal final next lock unlock complet get keep tri offer valu take case check complet time make sure iter n close earli tri queue offer rs time unit break catch interrupt except e throw new cach except e static class segment listen notifi implement consum privat final segment complet listen listen know object alway privat final map set integ segment object new ident hash map segment listen notifi segment complet listen listen listen listen overrid public void accept set integ segment segment object remov segment null listen segment complet segment public void add segment object object set integ segment segment object put object segment public void complet segment result set integ segment listen segment complet segment static class iter supplier implement closeabl supplier privat final block queue queue privat final atom boolean complet privat final lock next lock privat final condit next condit privat final cluster stream manag cluster stream manag cach except except volatil object pend privat consum consum iter supplier block queue queue atom boolean complet lock next lock condit next condit cluster stream manag cluster stream manag queue queue complet complet next lock next lock next condit next condit cluster stream manag cluster stream manag overrid public void close close null public void close cach except e next lock lock tri complet get set true e null except e pend null cluster stream manag forget oper pend pend null next condit signal final next lock unlock overrid public get entri queue poll entri null complet get except null throw except els entri queue poll null check queue one last time make sure n concurr queue addit complet iter consum null consum accept entri return entri return null next lock lock tri boolean interrupt fals complet get check make sure noth add queue well sleep entri queue poll null break tri next condit await time unit catch interrupt except e interrupt loop back around interrupt true entri null entri complet check one last time entri queue possibl entri add queue iter complet time complet sign either thing entri retriev case except find process user manual close iter latter case addit entri add queue sinc process stop therefor process rest element queue worri entri queue poll entri null except null throw except return null els interrupt reset interrupt state return thread current thread interrupt final next lock unlock consum null consum accept entri return entri public void set consum consum consum consum consum overrid public spliter spliter return spliter spliter iter long spliter overrid public void consum super action rehash awar perform oper termin function function action fals v v null null els perform rehash key track oper new oper object intermedi oper distribut batch size action overrid public void bi consum cach super action rehash awar perform oper termin function function action fals v v null null els perform rehash key track oper new bi oper intermedi oper distribut batch size action overrid public void order consum super action n sort action overrid public object array return perform oper termin function array function fals v v object array array copi v v length v length system arraycopi v array v length v length return array null overrid public array int function gener return perform oper termin function array function gener fals v v array gener appli v length v length system arraycopi v array v length system arraycopi v array v length v length return array null custom add method cach stream overrid public cach stream sequenti distribut parallel distribut fals return overrid public cach stream parallel distribut parallel distribut true return overrid public cach stream filter key segment set integ segment segment filter segment return overrid public cach stream filter key set key key filter key return overrid public cach stream distribut batch size int batch size distribut batch size batch size return overrid public cach stream segment complet listen segment complet listen listen segment complet listen null segment complet listen listen els segment complet listen compos except segment complet listen listen return overrid public cach stream disabl rehash awar rehash awar fals return overrid public cach stream timeout long timeout time unit unit timeout throw new illeg argument except timeout must great timeout timeout timeout unit unit return protect distribut int cach stream int cach stream return new distribut int cach stream protect distribut doubl cach stream doubl cach stream return new distribut doubl cach stream protect distribut long cach stream long cach stream return new distribut long cach stream 
packag org interceptor distribut import static org factori know compon name import java util iter import java util map import java util spliter import java util concurr executor import java util concurr time unit import java util function supplier import org advanc cach import org cach import org cach set import org cach stream import org cach impl cach import org command flag affect command import org command read abstract closeabl iter collect import org command read entri set command import org command read key set command import org common util closeabl iter import org common util closeabl iter mapper import org common util closeabl spliter import org common util closeabl import org common util remov closeabl iter import org common util remov iter import org contain entri cach entri import org context flag import org context invoc context import org context impl flag bit set import org context impl local tx invoc context import org distribut distribut manag import org factori compon registri import org factori annot inject import org interceptor async interceptor import org stream stream marshal import org stream impl cluster stream manag import org stream impl distribut cach stream import org stream impl intop intermedi oper import org stream impl intop object map oper import org stream impl tx tx cluster stream manag import org stream impl tx tx distribut cach stream import org util entri wrapper import org util function remov function interceptor handl bulk entri set key set command use distribut replic environ interceptor produc back collect either method distribut stream either leverag distribut process cluster param key type entri param valu type entri public class distribut bulk interceptor extend async interceptor privat cach cach inject public void inject cach cach cach cach overrid public object visit entri set command invoc context ctx entri set command command throw throwabl return invok next appli ctx command be ctx be command rv entri set command entri set command entri set command be command entri set command flag flag bit set return rv cach set cach entri entri set cach set cach entri rv r ctx tx scope entri set new tx back entri set cach get cach flag cach entri set command entri set entri set command local tx invoc context be ctx els entri set new back entri set cach get cach flag cach entri set command entri set entri set command return entri set protect static supplier cach stream cach entri supplier cach cach supplier cach stream cach entri stream supplier cach get cach configur cluster cach mode scatter ignor tombston return stream supplier get filter entri entri get valu null els return stream supplier protect static class back entri set extend abstract closeabl iter collect cach entri implement cach set cach entri protect final cach set cach entri entri set protect final flag affect command command privat back entri set cach cach cach set cach entri entri set flag affect command command super cach entri set entri set command command overrid public closeabl iter cach entri iter return new closeabl iter mapper new remov closeabl iter closeabl iter stream e cach remov e get key e get valu e new entri wrapper cach e overrid public closeabl spliter cach entri spliter return closeabl spliter stream overrid public boolean contain object map entri entri entri entri null valu cach get entri get key return valu null valu equal entri get valu return fals overrid public boolean remov object map entri entri entri entri null return cach remov entri get key entri get valu return fals privat map entri entri object obj obj instanceof map entri return map entri obj els return null overrid public cach stream cach entri stream advanc cach advanc cach cach get advanc cach compon registri registri advanc cach get compon registri cach stream cach entri cach stream new distribut cach stream cach entri cach get cach manag get address fals advanc cach get distribut manag supplier cach entri set stream registri get compon cluster stream manag class command flag flag bit set cach get cach configur cluster state transfer chunk size registri get compon executor class registri overrid public iter cach entri iter int size intermedi oper size size intermedi oper support remov return new remov iter super iter e cach remov e get key e get valu els size intermedi oper int op intermedi oper peek int op instanceof map oper map oper map map oper int op map get function instanceof remov function function remov mean use remov return new remov iter super iter e cach remov e get key e get valu return super iter return appli time cach stream cach overrid public cach stream cach entri parallel stream advanc cach advanc cach cach get advanc cach compon registri registri advanc cach get compon registri cach stream cach entri cach stream new distribut cach stream cach get cach manag get address true advanc cach get distribut manag supplier cach entri set parallel stream registri get compon cluster stream manag class command flag flag bit set cach get cach configur cluster state transfer chunk size registri get compon executor class registri return appli time cach stream cach protect static class tx back entri set extend back entri set privat final local tx invoc context ctx privat tx back entri set cach cach cach set cach entri entri set flag affect command command local tx invoc context ctx super cach entri set command ctx ctx overrid public cach stream cach entri stream advanc cach advanc cach cach get advanc cach distribut manag dm advanc cach get distribut manag compon registri registri advanc cach get compon registri cluster stream manag real manag registri get compon cluster stream manag class tx cluster stream manag tx manag new tx cluster stream manag real manag ctx dm get write consist hash cach stream cach entri cach stream new tx distribut cach stream cach get cach manag get address fals dm entri set stream tx manag command flag flag bit set cach get cach configur cluster state transfer chunk size registri get compon executor class registri ctx return appli time cach stream cach overrid public cach stream cach entri parallel stream advanc cach advanc cach cach get advanc cach distribut manag dm advanc cach get distribut manag compon registri registri advanc cach get compon registri cluster stream manag real manag registri get compon cluster stream manag class tx cluster stream manag tx manag new tx cluster stream manag real manag ctx dm get write consist hash cach stream cach entri cach stream new tx distribut cach stream cach get cach manag get address true dm entri set parallel stream tx manag command flag flag bit set cach get cach configur cluster state transfer chunk size registri get compon executor class registri ctx return appli time cach stream cach privat static cach stream appli time cach stream stream cach cach return stream timeout cach get cach configur cluster remot timeout time unit overrid public object visit key set command invoc context ctx key set command command throw throwabl cach set key set command flag flag bit set return invok next ctx command ctx tx scope key set new tx back key set cach get cach flag cach command cach get advanc cach flag flag cach entri set command local tx invoc context ctx els key set new back key set cach get cach flag cach command cach get advanc cach flag flag cach entri set command return key set protect static class back key set extend abstract closeabl iter collect implement cach set protect final cach set cach entri entri set protect final flag affect command command public back key set cach cach cach set cach entri entri set flag affect command command super cach entri set entri set command command overrid public closeabl iter iter return new remov closeabl iter closeabl iter stream cach remov overrid public boolean contain object return cach contain key overrid public boolean remov object return cach remov null overrid public closeabl spliter spliter return closeabl spliter iter long spliter spliter spliter overrid public cach stream stream advanc cach advanc cach cach get advanc cach compon registri registri advanc cach get compon registri return new distribut cach stream cach get cach manag get address fals advanc cach get distribut manag supplier cach entri set stream registri get compon cluster stream manag class command flag flag bit set cach get cach configur cluster state transfer chunk size registri get compon executor class registri stream marshal entri key function overrid public iter iter int size intermedi oper size act map key requir intermedi oper size return new remov iter super iter cach remov els size iter intermedi oper iter intermedi oper iter iter next intermedi oper int op iter next int op instanceof map oper map oper map map oper int op map get function instanceof remov function function remov mean use remov return new remov iter super iter cach remov return super iter overrid public cach stream parallel stream advanc cach advanc cach cach get advanc cach compon registri registri advanc cach get compon registri return new distribut cach stream cach get cach manag get address true advanc cach get distribut manag supplier cach entri set parallel stream registri get compon cluster stream manag class command flag flag bit set cach get cach configur cluster state transfer chunk size registri get compon executor class registri stream marshal entri key function privat static class tx back key set extend back key set privat final local tx invoc context ctx public tx back key set cach cach cach set cach entri entri set flag affect command command local tx invoc context ctx super cach entri set command ctx ctx overrid public cach stream stream advanc cach advanc cach cach get advanc cach distribut manag dm advanc cach get distribut manag compon registri registri advanc cach get compon registri cluster stream manag real manag registri get compon cluster stream manag class tx cluster stream manag tx manag new tx cluster stream manag real manag ctx dm get write consist hash return new tx distribut cach stream cach get cach manag get address fals dm entri set stream tx manag command flag flag bit set cach get cach configur cluster state transfer chunk size registri get compon executor class registri stream marshal entri key function ctx overrid public cach stream parallel stream advanc cach advanc cach cach get advanc cach distribut manag dm advanc cach get distribut manag compon registri registri advanc cach get compon registri cluster stream manag real manag registri get compon cluster stream manag class tx cluster stream manag tx manag new tx cluster stream manag real manag ctx dm get write consist hash return new tx distribut cach stream cach get cach manag get address true dm entri set parallel stream tx manag command flag flag bit set cach get cach configur cluster state transfer chunk size registri get compon executor class registri stream marshal entri key function ctx 
packag org factori import org distribut distribut manag import org distribut impl distribut manag impl import org factori annot default factori default factori class distribut manag class public class distribut manag factori extend abstract name cach compon factori implement auto instanti factori overrid suppress warn uncheck public construct class compon type configur cluster cach mode cluster return new distribut manag impl els return null 
packag org distribut impl import java util collect import java util hash set import java util list import java util set import java util stream collector import org configur cach cach mode import org configur cach configur import org distribut datum local import org distribut distribut info import org distribut distribut manag import org distribut local cach topolog import org distribut ch consist hash import org distribut ch key partition import org factori annot inject import org factori annot start import org jmx annot bean import org jmx annot manag oper import org jmx annot paramet import org remot transport address import org remot transport local mode address import org remot transport transport import org topolog cach topolog import org util log log import org util log log factori default distribut manag implement author manik surtani author vladimir blagojev author mircea marku jboss com author bela ban author dan berindei dan org author anistor redhat com sinc bean object name distribut manag descript compon handl distribut content across cluster public class distribut manag impl implement distribut manag privat static final log log log factori get log distribut manag impl class privat static final boolean trace log trace enabl inject compon privat transport transport privat key partition key partition privat cach mode cach mode privat volatil local cach topolog extend topolog default constructor public distribut manag impl inject public void init transport transport configur configur key partition key partition transport transport key partition key partition cach mode configur cluster cach mode start rpc manag impl start prioriti suppress warn unus privat void start throw except trace log tracef start distribut manag get address need extend topolog preload start state transfer manag impl address local address transport null local mode address transport get address extend topolog local cach topolog make singleton topolog cach mode local address privat address get address return transport get address overrid public datum local get local object key local cach topolog info extend topolog info null return datum local distribut info segment info info get distribut key segment info read owner return datum local els segment info write owner return datum local els return data local overrid public list address locat object key return extend topolog get distribut key write owner overrid public address get primari locat object key return extend topolog get distribut key primari overrid public set address locat collect object key collect address owner extend topolog get write owner key return new hash set owner overrid public consist hash get read consist hash return extend topolog get read consist hash overrid public consist hash get write consist hash return extend topolog get write consist hash overrid manag oper descript determin whether give key affect ongo rehash display name could key affect rehash public boolean affect rehash paramet name key descript key check object key rehash progress return fals int segment key partition get segment key distribut info distribut info extend topolog get distribut segment return distribut info write owner distribut info read owner test whether rehash progress return true rehash progress fals otherwis overrid public boolean rehash progress return extend topolog get pend null overrid public boolean join complet return extend topolog null manag oper descript tell whether give key would write instanc cach accord consist hash algorithm work string key display name key local public boolean locat local paramet name key descript key queri string key return get cach topolog write owner key manag oper descript show address node write oper would store entri associ specifi key work string key display name locat key public list string locat key paramet name key descript key locat string key list address address get cach topolog get distribut key write owner return address stream map address string collect collector list overrid public local cach topolog get cach topolog return extend topolog overrid public void set cach topolog cach topolog cach topolog extend topolog creat local cach topolog cach topolog overrid public local cach topolog creat local cach topolog cach topolog cach topolog return new local cach topolog cach mode cach topolog key partition transport get address 
packag org transact xa import java io except import java io object input import java io object output import java util collect import java util collect import java util object import java util set import org common util util import org marshal core id import org remot transport address import org util log log import org util log log factori class use deadlock detect enabl author mircea marku jboss com deprec sinc long use deprec public class dld global transact extend global transact privat static final log log log factori get log dld global transact class privat static final boolean trace log trace enabl privat volatil long coin toss privat transient volatil collect object lock intent collect empti set privat volatil collect remot lock intent collect empti set protect volatil collect lock origin collect empti set public dld global transact public dld global transact address addr boolean remot super addr remot set random number defin coin toss coin toss random number use deadlock detect decid transact commit rollback public void set coin toss long coin toss coin toss coin toss public long get coin toss return coin toss overrid public boolean equal object return true instanceof dld global transact return fals super equal return fals dld global transact dld global transact coin toss coin toss return fals return true overrid public int hash code int result super hash code result result int coin toss coin toss return result overrid public string string return super string dld coin toss return key transact intend lock public collect object get lock intent return lock intent public void set lock intent collect object lock intent object requir non null lock intent local lock intent must non null trace log tracef set local lock intent lock intent lock intent lock intent public boolean would lose dld global transact return coin toss coin toss public void set remot lock intent collect remot lock intent object requir non null lock intent remot lock intent must non null trace log tracef set remot lock intent remot lock intent remot lock intent remot lock intent public collect get remot lock intent return remot lock intent public boolean lock origin dld global transact tx trace log tracef lock origin other remot lock intent lock origin tx get remot lock intent object key tx get remot lock intent lock origin contain key return true return fals public void set lock hold origin collect lock origin object requir non null lock origin lock origin must non null trace log tracef set lock origin lock origin lock origin lock origin public collect get lock hold origin return lock origin deprec public static class extern extend global transact abstract global tx extern dld global transact overrid protect dld global transact creat global transact return new dld global transact overrid public void write object object output output dld global transact dd gt throw except super write object output dd gt output write long dd gt get coin toss dd gt lock origin empti output write object null els output write object dd gt lock origin overrid suppress warn uncheck public dld global transact read object object input input throw except class find except dld global transact dd gt super read object input dd gt set coin toss input read long object lock origin obj input read object lock origin obj null dd gt set lock hold origin collect empti set els dd gt set lock hold origin set object lock origin obj return dd gt overrid public integ get id return id overrid public set class extend dld global transact get type class return util class extend dld global transact set dld global transact class 
packag org counter configur import java util hash map import java util map author pedro ruivo sinc public enum element must first null counter low bound strong counter upper bound weak counter privat static final map string element static final map string element map new hash map element element valu final string name element name name null map put name element map privat final string name element final string name name name public static element name final string local name final element element get local name return element null element overrid public string string return name 
packag org factori import org command cancel servic import org command cancel servic impl import org command remot command factori import org common cach configur except import org contain offheap heap entri factori import org contain offheap heap entri factori impl import org contain offheap heap memori alloc import org contain offheap unpool heap memori alloc import org factori annot default factori import org factori scope scope import org factori scope scope import org remot inboundhandl global inbound invoc handler import org remot inboundhandl inbound invoc handler import org topolog persist manag import org topolog persist manag impl import org util default time servic import org util time servic import org util log event event log manag import org util log event impl event log manag impl import org xsite backup receiv repositori import org xsite backup receiv repositori impl factori build global scope compon default empti constructor author manik surtani author href mailto galder zamarreno jboss com galder zamarreno sinc default factori class backup receiv repositori class cancel servic class event log manag class inbound invoc handler class persist manag class remot command factori class time servic class heap entri factori class heap memori alloc class scope scope public class empti constructor factori extend abstract compon factori implement auto instanti factori overrid suppress warn uncheck public construct class compon type compon type equal backup receiv repositori class return new backup receiv repositori impl els compon type equal cancel servic class return new cancel servic impl els compon type equal inbound invoc handler class return new global inbound invoc handler els compon type equal remot command factori class return new remot command factori els compon type equal time servic class return new default time servic els compon type equal event log manag class return new event log manag impl els compon type equal persist manag class return new persist manag impl els compon type equal heap entri factori class return compon type cast new heap entri factori impl els compon type equal heap memori alloc class return compon type cast new unpool heap memori alloc throw new cach configur except n know creat compon type get name 
packag org factori import static org common util util get instanc import org batch batch contain import org cach impl cach configur bean import org command command factori import org command command factori impl import org common cach configur except import org common io byte buffer factori import org common io byte buffer factori impl import org configur cach cach mode import org context invoc context factori import org context non transact invoc context factori import org context transact invoc context factori import org distribut manag import org distribut remot valu retriev listen import org distribut triangl order manag import org distribut impl manag impl import org evict activ manag import org evict evict manag import org evict passiv manag import org evict impl activ manag impl import org evict impl evict manag impl import org evict impl passiv manag impl import org factori annot default factori import org function impl function notifi import org function impl function notifi impl import org interceptor lock cluster depend logic import org marshal core marshal entri factori import org marshal core marshal entri factori impl import org notif cachelisten cach notifi import org notif cachelisten cach notifi impl import org notif cachelisten cluster cluster cach notifi import org persist manag order updat manag import org persist manag order updat manag impl import org persist manag persist manag import org persist manag persist manag impl import org scatter scatter version manag import org scatter impl scatter version manag impl import org statetransf commit manag import org statetransf state transfer lock import org statetransf state transfer lock impl import org transact impl cluster transact origin checker import org transact impl transact coordin import org transact impl transact origin checker import org transact totalord total order manag import org transact xa transact factori import org transact xa recoveri recoveri admin oper import org util concurr command ack collector import org xsite backup sender import org xsite backup sender impl import org xsite statetransf site state consum import org xsite statetransf site state consum impl import org xsite statetransf site state provid import org xsite statetransf site state provid impl import org xsite statetransf site state transfer manag import org xsite statetransf site state transfer manag impl simpl factori use reflect empti constructor compon type author manik surtani href mailto manik jboss org manik jboss org author pedro ruivo sinc default factori class cach notifi class cach configur bean class cluster cach notifi class command factori class persist manag class passiv manag class activ manag class batch contain class evict manag class transact coordin class recoveri admin oper class state transfer lock class cluster depend logic class manag class transact factori class backup sender class total order manag class byte buffer factori class marshal entri factori class remot valu retriev listen class invoc context factori class commit manag class site state transfer manag class site state consum class site state provid class function notifi class command ack collector class triangl order manag class order updat manag class scatter version manag class transact origin checker class public class empti constructor name cach factori extend abstract name cach compon factori implement auto instanti factori overrid suppress warn uncheck public construct class compon type class compon impl compon type equal cluster depend logic class cach mode cach mode configur cluster cach mode cach mode cluster return compon type cast new cluster depend logic local logic els cach mode invalid return compon type cast new cluster depend logic invalid logic els cach mode replic return compon type cast new cluster depend logic replic logic els cach mode distribut return compon type cast new cluster depend logic distribut logic els cach mode scatter return compon type cast new cluster depend logic scatter logic els throw new unsupport oper except els boolean transact configur transact transact mode transact compon type equal invoc context factori class compon impl transact transact invoc context factori class non transact invoc context factori class return compon type cast get instanc compon impl els compon type equal cach notifi class return new cach notifi impl els compon type equal cach configur bean class return new cach configur bean els compon type equal command factori class return new command factori impl els compon type equal persist manag class return new persist manag impl els compon type equal passiv manag class return new passiv manag impl els compon type equal activ manag class return new activ manag impl els compon type equal batch contain class return new batch contain els compon type equal transact coordin class return new transact coordin els compon type equal recoveri admin oper class return new recoveri admin oper els compon type equal state transfer lock class return new state transfer lock impl els compon type equal evict manag class return new evict manag impl els compon type equal manag class return new manag impl els compon type equal transact factori class return new transact factori els compon type equal backup sender class return new backup sender impl global configur site local site els compon type equal total order manag class return transact configur transact transact protocol total order new total order manag null els compon type equal byte buffer factori class return new byte buffer factori impl els compon type equal marshal entri factori class return new marshal entri factori impl els compon type equal remot valu retriev listen class manag current listen remot retriev valu return compon registri get compon manag class els compon type equal cluster cach notifi class return compon registri get compon cach notifi class els compon type equal commit manag class return new commit manag els compon type equal site state transfer manag class return configur site backup empti null new site state transfer manag impl els compon type equal site state consum class return new site state consum impl els compon type equal site state provid class return new site state provid impl els compon type equal function notifi class return new function notifi impl els compon type equal command ack collector class return compon type cast new command ack collector els compon type equal triangl order manag class return compon type cast new triangl order manag configur cluster hash num segment els compon type equal order updat manag class return compon type cast new order updat manag impl els compon type equal scatter version manag class return compon type cast new scatter version manag impl els compon type equal transact origin checker class return configur cluster cach mode cach mode compon type cast transact origin checker compon type cast new cluster transact origin checker throw new cach configur except n know creat compon type get name 
packag org persist jpa impl import java util hash map import java util map import java util map entri import java util concurr atom atom integ import javax persist entiti manag factori import javax persist persist import javax persist spi persist provid import org common util util import org util log log import org util log log factori import org osgi framework bundl import org osgi framework bundl context import org osgi framework framework util import org osgi framework servic refer author href mailto rtsang redhat com ray tsang public class entiti manag factori registri privat static final log log log factori get log entiti manag factori registri class privat map string entiti manag factori registri new hash map string entiti manag factori privat map string atom integ usag new hash map string atom integ public entiti manag factori get entiti manag factori string persist unit name synchron registri contain key persist unit name entiti manag factori emf creat entiti manag factori persist unit name registri put persist unit name emf usag put persist unit name new atom integ return emf els increment usag persist unit name return registri get persist unit name public void close entiti manag factori string persist unit name synchron registri contain key persist unit name return int count decrement usag persist unit name count entiti manag factori emf registri remov persist unit name tri emf open emf close catch illeg state except e log warn entiti manag factori alreadi close persist unit name public void close synchron entri string entiti manag factori entri registri entri set tri entri get valu open entri get valu close catch illeg state except e log warn entiti manag factori alreadi close entri get key protect int increment usag string persist unit name synchron return usag get persist unit name increment get protect int decrement usag string persist unit name synchron return usag get persist unit name decrement get protect int get usag string persist unit name synchron return usag get persist unit name int valu privat static entiti manag factori creat entiti manag factori string persist unit name util gi context bundl bundl framework util get bundl entiti manag factori registri class bundl context context bundl get bundl context servic refer servic refer context get servic refer persist provid class get name persist provid persist provid persist provid context get servic servic refer return persist provid creat entiti manag factori persist unit name null els return persist creat entiti manag factori persist unit name 
packag org contain import static org common util util str import org configur cach configur import org configur cach configur import org contain entri cach entri import org contain entri version repeat read entri import org contain entri intern cach entri import org contain entri entri import org contain entri null cach entri import org contain entri read commit entri import org contain entri repeat read entri import org contain version version gener import org context invoc context import org factori annot inject import org factori annot start import org metadata emb metadata import org metadata metadata import org util time servic import org util concurr isol level import org util log log import org util log log factori link entri factori implement use optimist lock scheme author mircea marku sinc public class entri factori impl implement entri factori protect static final log log log factori get log entri factori impl class protect final static boolean trace log trace enabl privat boolean use repeat read privat data contain contain privat boolean enabl privat configur configur privat time servic time servic privat version gener version gener privat boolean use version inject public void inject depend data contain datum contain configur configur time servic time servic version gener version gener contain datum contain configur configur time servic time servic version gener version gener start prioriti public void init scatter mode need repeat read entri properli retri half commit multi key oper see retri entri wrap interceptor detail use repeat read configur transact transact mode transact configur lock isol level isol level configur cluster cach mode scatter enabl configur cluster l enabl write skew check impli isol level lock mode use version configur tx version configur overrid public final void wrap entri read invoc context ctx object key boolean owner owner enabl return cach entri cach entri get context ctx key cach entri null cach entri get contain read key owner cach entri null repeat read need creat repeat read entri intern cach entri mutabl otherwis store intern cach entri directli context use repeat read entri mvcc entri creat wrap entri key cach entri mvcc entri set read cach entri mvcc entri ctx put look entri key cach entri trace log tracef wrap read entri str key cach entri overrid public void wrap entri write invoc context ctx object key boolean owner boolean read cach entri context entri get context ctx key context entri instanceof entri noth alreadi wrap els context entri null alreadi context intern cach entri need wrap entri entri mvcc entri creat wrap entri key context entri ctx put look entri key mvcc entri trace log tracef updat context entri context entri mvcc entri els context yet cach entri cach entri get contain key owner true cach entri null return entri mvcc entri creat wrap entri key cach entri cach entri null mvcc entri set creat true read mvcc entri set read ctx put look entri key mvcc entri trace log tracef updat context entri context entri mvcc entri overrid public void wrap extern entri invoc context ctx object key cach entri extern entri boolean read boolean write write oper entri alway alreadi wrap read oper entri may context intern cach entri null miss altogeth cach entri context entri get context ctx key context entri instanceof entri entri mvcc entri entri context entri alreadi wrap write updat valu metadata mvcc entri skip lookup happen get group invoc request whole group remot node even key alreadi context trace log tracef ignor updat context entri context entri return without updat initi valu local write skew check would fail entri load cach store n call sinc afterward set skip lookup mvcc entri set valu extern entri get valu mvcc entri set creat extern entri get creat mvcc entri set last use extern entri get last use mvcc entri set metadata extern entri get metadata mvcc entri updat previou valu trace log tracef updat context entri context entri els context entri null context entri null write use repeat read entri mvcc entri creat wrap entri key extern entri read mvcc entri set read ctx put look entri key mvcc entri trace log tracef updat context entri context entri mvcc entri els read oper store extern entri context directli ctx put look entri key extern entri trace log tracef updat context entri context entri extern entri els use repeat read trace log tracef ignor updat repeat read context entri extern entri els ctx put look entri key extern entri trace log tracef updat context entri context entri extern entri privat cach entri get context invoc context ctx object key final cach entri cach entri ctx lookup entri key trace log tracef exist context cach entri return cach entri privat cach entri get contain object key boolean owner boolean write oper owner final intern cach entri ice inner get contain key write oper trace log tracef retriev contain ice ice null return null cach entri get instanc return ice els enabl final intern cach entri ice inner get contain key write oper trace log tracef retriev contain ice ice null ice entri return null return ice return null privat cach entri get contain read object key boolean owner intern cach entri ice contain get key trace log tracef retriev contain ice owner return ice null null cach entri get instanc ice els return ice null ice entri null ice privat intern cach entri inner get contain object key boolean write oper intern cach entri ice write oper caus expir event occur like overwrit valu anyway also requir remov expir caus infinit loop write oper ice contain peek key ice null ice expir long wall clock time time servic wall clock time ice expir wall clock time ice null els ice touch wall clock time els ice contain get key return ice protect entri creat wrap entri object key cach entri cach entri object valu null metadata metadata null cach entri null valu cach entri get valu metadata cach entri get metadata trace log tracef creat new entri key str key use repeat read entri mvcc entri use version metadata null metadata new emb metadata builder version version gener non exist version build mvcc entri new version repeat read entri key valu metadata els mvcc entri new repeat read entri key valu metadata return mvcc entri els return new read commit entri key valu metadata 
packag org command read import java util iter import java util map import java util set import java util spliter import org cach import org cach set import org cach stream import org cach impl abstract deleg cach import org command visit command import org command visitor import org common util closeabl iter import org common util closeabl spliter import org common util closeabl import org common util enum util import org common util iter mapper import org common util remov iter import org contain data contain import org contain entri cach entri import org context flag import org context invoc context import org distribut distribut manag import org distribut ch consist hash import org stream impl local entri stream supplier import org stream impl local local cach stream import org util data contain remov iter import org util entri wrapper command implement link java util map entri set function author galder zamarr author href http gleamynod net trustin lee author william burn sinc public class entri set command extend abstract local command implement visit command privat final cach cach public entri set command cach cach long flag bit set set flag bit set flag bit set cach abstract deleg cach unwrap cach cach flag bit set enum util cach cach get advanc cach flag enum util enum array flag bit set flag class els cach cach overrid public object accept visitor invoc context ctx visitor visitor throw throwabl return visitor visit entri set command ctx overrid public load type load type throw new unsupport oper except overrid public set cach entri perform invoc context ctx throw throwabl object lock owner ctx get lock owner ctx get lock owner null return new back entri set cach get advanc cach lock lock owner return new back entri set cach overrid public string string return entri set command cach cach get name static class back entri set extend abstract closeabl iter collect cach entri implement cach set cach entri back entri set cach cach super cach overrid public closeabl iter cach entri iter iter cach entri iter new data contain remov iter cach remov iter cach entri remov iter new remov iter iter e cach remov e get key e get valu return closeabl iter new iter mapper remov iter e new entri wrapper cach e overrid public closeabl spliter cach entri spliter data contain dc cach get advanc cach get data contain return closeabl spliter closeabl iter new data contain remov iter cach dc dc size includ expir spliter spliter spliter overrid public int size return cach get advanc cach get data contain size overrid public boolean contain object map entri entri entri entri null valu cach get entri get key return valu null valu equal entri get valu return fals overrid public boolean remov object map entri entri entri return entri null cach remov entri get key entri get valu overrid public boolean add cach entri intern cach entri link map entri set defin support add add method throw new unsupport oper except privat map entri entri object obj obj instanceof map entri return map entri obj els return null privat consist hash get consist hash cach cach distribut manag dm cach get advanc cach get distribut manag dm null return dm get read consist hash return null overrid public cach stream cach entri stream return new local cach stream new entri stream supplier cach get consist hash cach super stream fals cach get advanc cach get compon registri overrid public cach stream cach entri parallel stream return new local cach stream new entri stream supplier cach get consist hash cach super stream true cach get advanc cach get compon registri 
packag org stream impl local import java util bit set import java util object import java util set import java util function supplier import java util stream stream import org advanc cach import org cach import org cach impl abstract deleg cach import org common util closeabl iter import org common util remov closeabl iter import org contain entri cach entri import org context flag import org distribut ch consist hash import org util log log import org util log log factori stream supplier use underli stream compos link cach entri instanc supplier proper filter key base cach entri key public class entri stream supplier implement abstract local cach stream stream supplier cach entri stream cach entri privat static final log log log factori get log entri stream supplier class privat static final boolean trace log trace enabl privat final cach cach privat final consist hash hash privat final supplier stream cach entri supplier public entri stream supplier cach cach consist hash hash supplier stream cach entri supplier cach cach hash hash supplier supplier overrid public stream cach entri build stream set integ segment filter set key filter stream cach entri stream key filter null trace log tracef appli key filter key filter make sure n go remot retriev advanc cach advanc cach abstract deleg cach unwrap cach cach get advanc cach flag flag stream key filter stream map advanc cach get cach entri filter object non null els stream supplier get segment filter null hash null trace log tracef appli segment filter segment filter bit set bit set new bit set hash get num segment segment filter bit set set stream stream filter k key k get key int segment hash get segment key boolean present bit set get segment trace log tracef key present segment b key segment present return present return stream overrid public closeabl iter cach entri remov iter closeabl iter cach entri real iter return new remov closeabl iter real iter e cach remov e get key e get valu 
packag org interceptor impl import static org common util util str import java util collect import java util iter import java util map import java util set import org command abstract visitor import org command data command import org command flag affect command import org command visit command import org command function read key command import org command function read mani command import org command function read write key command import org command function read write key valu command import org command function read write mani command import org command function read write mani entri command import org command function tx read key command import org command function tx read mani command import org command function write key command import org command function write key valu command import org command function write mani command import org command function write mani entri command import org command read abstract data command import org command read get command import org command read get cach entri command import org command read get key valu command import org command remot get key group command import org command tx commit command import org command tx prepar command import org command write abstract data write command import org command write clear command import org command write comput command import org command write comput absent command import org command write datum write command import org command write evict command import org command write invalid command import org command write invalid command import org command write put key valu command import org command write put map command import org command write remov command import org command write replac command import org command write write command import org configur cach configur import org contain data contain import org contain entri factori import org contain entri cach entri import org contain entri entri import org contain version entri version import org contain version version gener import org context flag import org context invoc context import org context singl key non tx invoc context import org context impl flag bit set import org context impl tx invoc context import org distribut distribut manag import org distribut group impl group filter import org distribut group impl group manag import org factori annot inject import org factori annot start import org filter collect key filter import org filter composit key filter import org filter key filter import org interceptor async interceptor import org interceptor invoc final action import org interceptor invoc success action import org interceptor invoc success function import org interceptor lock cluster depend logic import org notif cachelisten cach notifi import org remot respons respons import org statetransf outdat topolog except import org statetransf state consum import org statetransf state transfer lock import org statetransf state transfer manag import org util concurr isol level import org util log log import org util log log factori import org xsite statetransf site state consum interceptor charg wrap entri add caller context see entri factori overview entri wrap author mircea marku author pedro ruivo sinc public class entri wrap interceptor extend async interceptor privat entri factori entri factori privat data contain object object datum contain protect cluster depend logic cdl privat version gener version gener privat distribut manag distribut manag privat final entri wrap visitor entri wrap visitor new entri wrap visitor privat boolean invalid privat boolean sync privat state consum state consum option privat state transfer lock state transfer lock privat site state consum x site state consum privat group manag group manag privat cach notifi notifi privat state transfer manag state transfer manag privat boolean use repeat read privat boolean version privat static final log log log factori get log entri wrap interceptor class privat static final boolean trace log trace enabl privat static final long flag bit set flag bit set privat boolean total order privat final invoc success action datum read return handler r ctx r command rv abstract data command datum command abstract data command r command r ctx tx scope use repeat read entri must context cach entri cach entri r ctx lookup entri datum command get key cach entri set skip lookup true version entri cach entri read add version read tx invoc context be ctx cach entri datum command get key entri visit notif use happen call interceptor end avoid add anoth tri final block around notif rv null rv instanceof respons object valu datum command instanceof get cach entri command cach entri rv get valu rv notifi notifi cach entri visit datum command get key valu true r ctx datum command notifi notifi cach entri visit datum command get key valu fals r ctx datum command privat final invoc success action commit entri success handler be ctx be command rv commit context entri be ctx null privat final invoc final action commit entri final handler commit entri final privat final invoc success function prepar handler prepar handler protect log get log return log inject public void init entri factori entri factori data contain object object datum contain cluster depend logic cdl state consum state consum state transfer lock state transfer lock site state consum x site state consum group manag group manag cach notifi notifi state transfer manag state transfer manag version gener version gener distribut manag distribut manag entri factori entri factori datum contain datum contain cdl cdl state consum state consum state transfer lock state transfer lock x site state consum x site state consum group manag group manag notifi notifi state transfer manag state transfer manag version gener version gener distribut manag distribut manag start public void start invalid cach configur cluster cach mode invalid sync cach configur cluster cach mode synchron isol level make sens without transact use repeat read cach configur transact transact mode transact cach configur lock isol level isol level cach configur cluster cach mode scatter version configur tx version cach configur total order cach configur transact transact protocol total order privat boolean ignor ownership flag affect command command return state transfer manag null command flag flag bit set flag bit set privat boolean read object key return distribut manag get cach topolog read owner key overrid public object visit prepar command tx invoc context ctx prepar command command throw throwabl return wrap entri prepar appli ctx command prepar handler privat object prepar handler invoc context ctx visit command command object rv commit prepar prepar command command tx invoc context ctx return invok next accept ctx command commit entri success handler els return invok next ctx command overrid public object visit commit command tx invoc context ctx commit command command throw throwabl return invok next final ctx command commit entri final handler overrid public final object visit get key valu command invoc context ctx get key valu command command throw throwabl return visit data read command ctx command overrid public final object visit get cach entri command invoc context ctx get cach entri command command throw throwabl return visit data read command ctx command privat object visit datum read command invoc context ctx abstract data command command final object key command get key entri factori wrap entri read ctx key ignor ownership command read key return invok next accept ctx command datum read return handler overrid public object visit get command invoc context ctx get command command throw throwabl boolean ignor ownership ignor ownership command object key command get key entri factori wrap entri read ctx key ignor ownership read key return invok next final ctx command r ctx r command rv get command get command get command r command use repeat read object key get command get key cach entri cach entri r ctx lookup entri key cach entri null datum lose trace log tracef miss entri key els cach entri set skip lookup true entri visit notif use happen call interceptor instanceof check exclud case command return unsuccess respons null rv instanceof map log tracef notifi get result command flag flag bit set rv map object object map map object object rv would nice know listen regist full iter visitor listen regist command flag flag bit set map entri object object entri map entri set object valu entri get valu valu null valu command return entri cach entri valu get valu entri get valu notifi notifi cach entri visit entri get key valu true r ctx get command notifi notifi cach entri visit entri get key valu fals r ctx get command overrid public final object visit invalid command invoc context ctx invalid command command throw throwabl command get key null object key command get key move distribut interceptor need tri wrap entri get remov remov wrap null would suffic listen need previou valu entri factori wrap entri write ctx key true fals return set skip remot get invok next mani entri command ctx command overrid public final object visit clear command invoc context ctx clear command command throw throwabl return invok next accept ctx command r ctx r command rv commit clear command key write state transfer current rebal end state consum null state consum stop appli state clear command be command get topolog id x site state consum null x site state consum end state transfer null r ctx tx scope clear command clear command clear command be command appli chang be ctx clear command trace log tracef return valu rv overrid public object visit invalid command invoc context ctx invalid command command throw throwabl object key command get key move distribut interceptor need tri wrap entri get remov remov wrap null would suffic listen need previou valu entri factori wrap entri write ctx key fals fals trace log tracef entri remov str key return set skip remot get invok next mani entri command ctx command overrid public final object visit put key valu command invoc context ctx put key valu command command throw throwabl wrap entri need ctx command return set skip remot get invok next data command ctx command privat void wrap entri need invoc context ctx abstract data write command command throw throwabl command flag flag bit set remov context retri ctx command get key entri factori wrap entri write ctx command get key ignor ownership command read command get key command load type visit command load type privat void remov context retri invoc context ctx object key origin backup becom primari retri command context alreadi contain valu command start execut howev anoth modif could happen node becom owner forc reload repeat read remov entri context instead reli write skew check reload comparison end pessimist lock entri lock n modif concurr retri oper therefor n deal problem use repeat read entri entri entri ctx lookup entri key trace log tracef retri reset previou valu entri entri entri null entri reset current valu els trace log tracef retri remov look entri ctx lookup entri key ctx remov look entri key privat void remov context retri invoc context ctx collect key use repeat read trace log tracef retri reset previou valu key object key key entri entri entri ctx lookup entri key entri reset current valu els ctx remov look entri key overrid public final object visit remov command invoc context ctx remov command command throw throwabl wrap entri need ctx command return set skip remot get invok next data command ctx command overrid public final object visit replac command invoc context ctx replac command command throw throwabl wrap entri need ctx command return set skip remot get invok next data command ctx command overrid public object visit comput command invoc context ctx comput command command throw throwabl wrap entri need ctx command return set skip remot get invok next data command ctx command overrid public object visit comput absent command invoc context ctx comput absent command command throw throwabl wrap entri need ctx command return set skip remot get invok next data command ctx command overrid public object visit put map command invoc context ctx put map command command throw throwabl boolean ignor ownership ignor ownership command command flag flag bit set remov context retri ctx command get affect key object key command get map key set listen may need valu load previou valu entri factori wrap entri write ctx key ignor ownership read key command load type visit command load type return set skip remot get invok next mani entri command ctx command overrid public object visit evict command invoc context ctx evict command command throw throwabl command set flag bit set command get flag bit set forc wrap return visit remov command ctx command overrid public object visit get key group command final invoc context ctx get key group command command throw throwabl command group owner final key filter object key filter new composit key filter new group filter command get group name group manag new collect key filter ctx get look entri key set datum contain execut task key filter intern cach entri n wrap tombston context want abl eventu read valu cach store filter cach loader interceptor ignor key alreadi context intern cach entri get valu null synchron ctx process make multipl thread need synchron context entri factori wrap extern entri ctx intern cach entri get key intern cach entri true fals n make sure read entri skip lookup sinc entri factori realli read n null read entri ctx tx scope use repeat read return invok next accept ctx command be ctx be command rv tx invoc context tx ctx tx invoc context be ctx map entri object cach entri key entri tx ctx get look entri entri set cach entri cach entri key entri get valu cach entri set skip lookup true version entri cach entri read add version read tx ctx cach entri key entri get key els return invok next ctx command overrid public object visit read key command invoc context ctx read key command command throw throwabl command instanceof tx read key command tx read key command may appli mutat entri context need alway wrap entri factori wrap entri write ctx command get key ignor ownership command read command get key true els entri factori wrap entri read ctx command get key ignor ownership command read command get key repeat read achiev function command n store valu local n fix remot node therefor valu abl chang ident read could return differ valu transact note point mode implement function command anyway return invok next ctx command overrid public object visit read mani command invoc context ctx read mani command command throw throwabl boolean ignor ownership ignor ownership command command instanceof tx read mani command tx read mani command may appli mutat entri context need alway wrap object key command get key entri factori wrap entri write ctx key ignor ownership command read key true els object key command get key entri factori wrap entri read ctx key ignor ownership read key repeat read achiev function command see visit read key command return invok next ctx command overrid public object visit write key command invoc context ctx write key command command throw throwabl wrap entri need ctx command return set skip remot get invok next data command ctx command overrid public object visit read write key valu command invoc context ctx read write key valu command command throw throwabl wrap entri need ctx command return set skip remot get invok next data command ctx command overrid public object visit read write key command invoc context ctx read write key command command throw throwabl wrap entri need ctx command return set skip remot get invok next data command ctx command overrid public object visit write mani entri command invoc context ctx write mani entri command command throw throwabl command flag flag bit set remov context retri ctx command get affect key boolean ignor ownership ignor ownership command object key command get entri key set put map never read key entri factori wrap entri write ctx key ignor ownership read key fals return set skip remot get invok next mani entri command ctx command overrid public object visit write mani command invoc context ctx write mani command command throw throwabl command flag flag bit set remov context retri ctx command get affect key boolean ignor ownership ignor ownership command object key command get affect key entri factori wrap entri write ctx key ignor ownership read key fals return set skip remot get invok next mani entri command ctx command overrid public object visit write key valu command invoc context ctx write key valu command command throw throwabl wrap entri need ctx command return set skip remot get invok next data command ctx command overrid public object visit read write mani command invoc context ctx read write mani command command throw throwabl command flag flag bit set remov context retri ctx command get affect key boolean ignor ownership ignor ownership command object key command get affect key entri factori wrap entri write ctx key ignor ownership read key true return set skip remot get invok next mani entri command ctx command overrid public object visit read write mani entri command invoc context ctx read write mani entri command command throw throwabl command flag flag bit set remov context retri ctx command get affect key boolean ignor ownership ignor ownership command object key command get affect key entri factori wrap entri write ctx key ignor ownership read key true return set skip remot get invok next mani entri command ctx command protect final void commit context entri invoc context ctx flag affect command command final flag state transfer flag flag bit set extract state transfer flag ctx command ctx instanceof singl key non tx invoc context singl key non tx invoc context singl key ctx singl key non tx invoc context ctx commit entri need ctx command singl key ctx get cach entri state transfer flag els set map entri object cach entri entri ctx get look entri entri set iter map entri object cach entri entri iter final log log get log next map entri object cach entri e next cach entri entri e get valu commit entri need ctx command entri state transfer flag trace entri null log tracef entri key null call commit updat str e get key els log tracef entri key chang call commit updat str e get key entri protect void commit context entri cach entri entri invoc context ctx flag affect command command flag state transfer flag boolean l invalid cdl commit entri entri command ctx state transfer flag l invalid privat void appli chang invoc context ctx write command command state transfer lock acquir share topolog lock tri retri non tx write command invalid ca n perform check preload cach n cluster boolean sync rpc sync command flag flag bit set command flag flag bit set command success distribut manag null int command topolog id command get topolog id int current topolog id distribut manag get cach topolog get topolog id total order state transfer interceptor n set topolog id r sync rpc current topolog id command topolog id command topolog id origin datum command n key time mean alreadi commit need throw outdat topolog except happen submit command primari owner respond topolog chang happen get ctx origin local command instanceof data command ctx lock key data command command get key trace log tracef cach topolog chang command execut expect get command topolog id current topolog id n necessari fresh command instanc retri command set valu matcher command get valu matcher matcher retri throw new outdat topolog except cach topolog chang command execut expect command topolog id get current topolog id commit context entri ctx command final state transfer lock releas share topolog lock lock valu key access command avoid overrid remot get protect object set skip remot get invok next mani entri command invoc context ctx write command command return invok next accept ctx command r ctx r command rv write command write command write command r command r ctx tx scope appli chang be ctx write command return trace log tracef return valu str rv use repeat read boolean add version read version write command load type visit command load type tx invoc context tx ctx tx invoc context r ctx object key write command get affect key cach entri cach entri r ctx lookup entri key cach entri null cach entri set skip lookup true add version read entri cach entri read add version read tx ctx cach entri key entri cach entri updat previou valu privat void add version read tx invoc context r ctx cach entri cach entri object key entri version version cach entri null cach entri get metadata null version cach entri get metadata version trace log tracef add version read key version key els version version gener non exist version trace log tracef add non exist version read key key r ctx get cach transact add version read key version lock valu key access command avoid overrid remot get protect object set skip remot get invok next data command invoc context ctx data write command command return invok next accept ctx command be ctx be command rv data write command datum write command data write command r command r ctx tx scope appli chang be ctx datum write command return trace log tracef return valu rv use repeat read cach entri cach entri r ctx lookup entri datum write command get key entri context command execut type contain origin cach entri null cach entri set skip lookup true version datum write command load type visit command load type entri cach entri read add version read tx invoc context be ctx cach entri datum write command get key entri cach entri updat previou valu privat void commit entri final invoc context be ctx visit command r command object rv throwabl commit command retri instanceof outdat topolog except return commit context entri be ctx null visitor replay entri wrap remot prepar command pass stack even key belong node accord write role tx distribut interceptor ignor command entri wrap avail read otherwis wrap tx distribut interceptor entri wrap valu load cach loader interceptor therefor pass command stack caus minim overhead privat final class entri wrap visitor extend abstract visitor overrid public object visit put map command invoc context ctx put map command command throw throwabl return handl write mani command ctx command overrid public object visit invalid command invoc context ctx invalid command command throw throwabl return handl write mani command ctx command overrid public object visit remov command invoc context ctx remov command command throw throwabl return handl write command ctx command overrid public object visit put key valu command invoc context ctx put key valu command command throw throwabl return handl write command ctx command overrid public object visit replac command invoc context ctx replac command command throw throwabl return handl write command ctx command overrid public object visit comput absent command invoc context ctx comput absent command command throw throwabl return handl write command ctx command overrid public object visit comput command invoc context ctx comput command command throw throwabl return handl write command ctx command overrid public object visit write key command invoc context ctx write key command command throw throwabl return handl write command ctx command overrid public object visit read write key valu command invoc context ctx read write key valu command command throw throwabl return handl write command ctx command overrid public object visit read write key command invoc context ctx read write key command command throw throwabl return handl write command ctx command overrid public object visit write mani entri command invoc context ctx write mani entri command command throw throwabl return handl write mani command ctx command overrid public object visit write key valu command invoc context ctx write key valu command command throw throwabl return handl write command ctx command overrid public object visit write mani command invoc context ctx write mani command command throw throwabl return handl write mani command ctx command overrid public object visit read write mani command invoc context ctx read write mani command command throw throwabl return handl write mani command ctx command overrid public object visit read write mani entri command invoc context ctx read write mani entri command command throw throwabl return handl write mani command ctx command privat object handl write command invoc context ctx data write command command throw throwabl entri factori wrap entri write ctx command get key ignor ownership command read command get key command load type visit command load type return invok next ctx command privat object handl write mani command invoc context ctx write command command boolean ignor ownership ignor ownership command object key command get affect key entri factori wrap entri write ctx key ignor ownership read key command load type visit command load type return invok next ctx command privat boolean commit entri need final invoc context ctx final flag affect command command final cach entri entri final flag state transfer flag entri null return fals final boolean l invalid command instanceof invalid command entri chang trace log tracef commit entri entri commit context entri entri ctx command state transfer flag l invalid return true return fals total order condit commit remot context prepar flag set param command prepar command param ctx invoc context return true modif commit fals otherwis protect boolean commit prepar prepar command command tx invoc context ctx return total order command one phase commit ctx origin local command modif command one phase commit protect final object wrap entri prepar appli tx invoc context ctx prepar command command invoc success function handler throw throwabl ctx origin local command replay entri wrap return appli modif ctx command command get modif handler return handler appli ctx command null privat object appli modif tx invoc context ctx prepar command command write command modif int start index invoc success function handler throw throwabl need execut modif key sequenti theori could optim loop multipl remot invoc sinc remot invoc rare omit int start index modif length write command c modif c set topolog id command get topolog id c flag flag bit set ctx get cach transact set state transfer flag flag object result c accept visitor ctx entri wrap visitor success do result int next index next index modif length return make stage result appli ctx command handler return make stage result appli ctx command r ctx r command rv appli modif ctx command modif next index handler return handler appli ctx command null 
packag org notif cachelisten event import org cach interfac defin common characterist event author manik surtani sinc public interfac event enum type privat static final type valu public static type valu int ordin return ordin return type event repres instanc type get type return tt true tt notif event occur tt fals tt event occur boolean pre return handl cach instanc gener notif cach get cach 
packag org notif cachelisten event impl import java util collect import java util collect import java util map import org cach import org common util util import org distribut ch consist hash import org metadata metadata import org notif cachelisten event cach entri evict event import org notif cachelisten event cach entri activ event import org notif cachelisten event cach entri creat event import org notif cachelisten event cach entri expir event import org notif cachelisten event cach entri invalid event import org notif cachelisten event cach entri load event import org notif cachelisten event cach entri modifi event import org notif cachelisten event cach entri passiv event import org notif cachelisten event cach entri remov event import org notif cachelisten event cach entri visit event import org notif cachelisten event datum rehash event import org notif cachelisten event partit statu chang event import org notif cachelisten event topolog chang event import org notif cachelisten event transact complet event import org notif cachelisten event transact regist event import org partitionhandl avail mode import org remot transport address import org transact xa global transact import net jcip annot thread safe basic implement event cover event type author manik surtani sinc thread safe public class event impl implement cach entri activ event cach entri creat event cach entri evict event cach entri load event cach entri modifi event cach entri passiv event cach entri remov event cach entri visit event transact complet event transact regist event cach entri invalid event data rehash event topolog chang event cach entri expir event partit statu chang event cloneabl privat boolean pre fals default event fact privat transient cach cach privat key privat global transact transact privat metadata metadata privat metadata old metadata privat boolean origin local true default event origin local privat boolean transact success privat type type privat valu privat old valu privat consist hash read consist hash start write consist hash start read consist hash end write consist hash end union consist hash privat int new topolog id privat map extend extend entri privat boolean creat privat boolean command retri privat avail mode mode public event impl public static event impl creat event cach cach type type event impl e new event impl e cach cach e type type return e overrid public type get type return type overrid public boolean pre return pre overrid public cach get cach return cach overrid suppress warn uncheck public get key key instanceof marshal valu key marshal valu key get return key overrid public global transact get global transact return transact overrid public boolean origin local return origin local overrid public boolean transact success return transact success setter public void set pre boolean pre pre pre public void set key key key key public void set transact id global transact transact transact transact public void set origin local boolean origin local origin local origin local public void set transact success boolean transact success transact success transact success public void set read consist hash start consist hash read consist hash start read consist hash start read consist hash start public void set write consist hash start consist hash write consist hash start write consist hash start write consist hash start public void set read consist hash end consist hash read consist hash end read consist hash end read consist hash end public void set write consist hash end consist hash write consist hash end write consist hash end write consist hash end public void set union consist hash consist hash union consist hash union consist hash union consist hash public void set new topolog id int new topolog id new topolog id new topolog id public void set metadata metadata metadata metadata metadata overrid public metadata get metadata return metadata public void set old metadata metadata metadata old metadata metadata public metadata get old metadata return old metadata overrid suppress warn uncheck public get valu valu instanceof marshal valu valu marshal valu valu get return valu public void set command retri boolean command retri command retri command retri overrid public boolean command retri return command retri overrid public boolean creat return creat overrid public get old valu return old valu public void set valu valu valu valu public void set entri map extend extend entri entri entri public void set creat boolean creat creat creat public void set old valu old valu old valu old valu overrid public boolean equal object return true null get class get class return fals event impl event event impl origin local event origin local return fals pre event pre return fals transact success event transact success return fals cach null cach equal event cach event cach null return fals key null key equal event key event key null return fals transact null transact equal event transact event transact null return fals type event type return fals valu null valu equal event valu event valu null return fals util safe equal read consist hash start event read consist hash start return fals util safe equal write consist hash start event write consist hash start return fals util safe equal read consist hash end event read consist hash end return fals util safe equal write consist hash end event write consist hash end return fals util safe equal union consist hash event union consist hash return fals new topolog id event new topolog id return fals creat event creat return fals old valu null old valu equal event old valu event old valu null return fals return true overrid public int hash code int result pre result result cach null cach hash code result result key null key hash code result result transact null transact hash code result result origin local result result transact success result result type null type hash code result result valu null valu hash code result result read consist hash start null read consist hash start hash code result result write consist hash start null write consist hash start hash code result result read consist hash end null read consist hash end hash code result result write consist hash end null write consist hash end hash code result result union consist hash null union consist hash hash code result result new topolog id result result creat result result old valu null old valu hash code return result overrid public string string type type type type return event impl type type pre pre cach cach read consist hash start read consist hash start write consist hash start write consist hash start read consist hash end read consist hash end write consist hash end write consist hash end union consist hash union consist hash new topolog id new topolog id return event impl type type pre pre cach cach key key valu valu old valu old valu transact transact origin local origin local transact success transact success entri entri creat creat overrid public collect address get member start return read consist hash start null read consist hash start get member collect address empti set overrid public collect address get member end return read consist hash end null read consist hash end get member collect address empti set overrid public consist hash get consist hash start return read consist hash start overrid public consist hash get consist hash end return write consist hash end overrid public consist hash get read consist hash start return read consist hash start overrid public consist hash get write consist hash start return write consist hash start overrid public consist hash get read consist hash end return read consist hash end overrid public consist hash get write consist hash end return write consist hash end overrid public consist hash get union consist hash return union consist hash overrid public int get new topolog id return new topolog id overrid public avail mode get avail mode return mode public void set avail mode avail mode mode mode mode overrid public map extend extend get entri return entri overrid public event impl clone tri return event impl super clone catch clone support except e throw new runtim except never happen e 
packag org util log event impl import org factori scope scope import org factori scope scope import org util log event event log manag import org util log event event logger event log manag impl implement event log manag default return author tristan tarrant sinc scope scope public class event log manag impl implement event log manag event logger logger new basic event logger overrid public event logger replac event logger event logger new logger event logger old logger logger logger new logger return old logger overrid public event logger get event logger return logger 
packag org notif cachelisten import org notif cachelisten event event simpl wrapper keep origin key along convert event origin key requir thing key track author wburn sinc public class event wrapper extend event privat event privat final key public event wrapper key event event event key key public get event return event public void set event event event event public get key return key 
packag org configur cach import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set import org evict evict strategi import org evict evict thread polici import org evict evict type import org util log log import org util log log factori control evict set cach deprec use link memori configur instead deprec public class evict configur static final log log log factori get log evict configur class public static final attribut definit long attribut definit builder size l build public static final attribut definit evict type attribut definit builder type evict type build public static final attribut definit evict strategi attribut definit builder strategi evict strategi immut build public static final attribut definit evict thread polici attribut definit builder thread polici evict thread polici immut build static attribut set attribut definit set return new attribut set evict configur class privat final attribut long size privat final attribut evict type type privat final attribut evict strategi strategi privat final attribut evict thread polici thread polici privat final attribut set attribut evict configur attribut set attribut attribut attribut check protect size attribut attribut type attribut attribut strategi attribut attribut thread polici attribut attribut evict strategi avail option disabl evict deprec use link memori configur evict type instead deprec public evict strategi strategi return strategi get thread polici evict deprec deprec public evict thread polici thread polici return thread polici get maximum number entri cach instanc cach size guarante exceed upper limit specifi max entri howev due natur evict unlik ever exactli maximum number entri specifi make sens use type deprec use link memori configur size instead deprec public long max entri type get evict type throw new illeg state except return size deprec use link memori configur size instead deprec public long size return size get deprec public void size long new size size set new size deprec use link memori configur evict type instead deprec public evict type type return type get public attribut set attribut return attribut overrid public string string return evict configur attribut attribut overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals evict configur evict configur obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result 
packag org configur cach import static org configur cach evict configur import static org configur cach evict configur import static org configur cach evict configur import static org configur cach evict configur import org common configur builder import org common configur attribut attribut set import org configur global global configur import org evict evict strategi import org evict evict thread polici import org evict evict type import org util log log import org util log log factori control evict set cach deprec use link memori configur instead deprec public class evict configur builder extend abstract configur child builder implement builder evict configur privat static final log log log factori get log evict configur builder class privat final attribut set attribut public static final long x ffffffffffffffl evict configur builder configur builder builder super builder attribut evict configur attribut definit set evict strategi avail option disabl evict param evict strategi public evict configur builder strategi evict strategi evict strategi attribut attribut set evict strategi return evict strategi strategi return attribut attribut get thread polici evict param polici public evict configur builder thread polici evict thread polici polici attribut attribut set polici return maximum number entri cach instanc backward compat shortcut type evict type size max entri param max entri deprec public evict configur builder max entri long max entri return type evict type size max entri deprec public evict configur builder max entri int max entri return max entri long max entri defin maximum size evict occur see link type evict type param size public evict configur builder size long size attribut attribut set size memori size size return set evict type either ul li entri evict number entri exceed link size long li li entri evict approxim combin size valu exceed link size long li ul cach size guarante exceed upper limit specifi max entri howev due natur evict unlik ever exactli maximum number entri specifi param type public evict configur builder type evict type type attribut attribut set type memori evict type type return overrid public void valid evict strategi strategi attribut attribut get long size attribut attribut get strategi evict strategi log warn fifo strategi deprec strategi enabl size throw log invalid evict size strategi enabl size strategi evict strategi log debugf max entri configur without evict strategi evict strategi overriden size strategi els get builder persist passiv strategi evict strategi get builder templat log passiv without evict strategi evict strategi attribut attribut get evict type throw log memori evict invalid strategi size throw log evict size larg size attribut attribut get evict type string java secur action get system properti java vm name java contain hot spot log memori approxim unsupport java overrid public void valid global configur global config overrid public evict configur creat return new evict configur attribut protect overrid public evict configur builder read evict configur templat attribut read templat attribut return overrid public string string return get class get simpl name attribut 
packag org evict impl import java util map import org configur cach configur import org contain entri intern cach entri import org context invoc context import org context impl immut context import org evict evict manag import org factori annot inject import org interceptor async interceptor chain import org interceptor impl cach mgmt interceptor import org notif cachelisten cach notifi import net jcip annot thread safe thread safe public class evict manag impl implement evict manag compon inject privat cach notifi cach notifi privat async interceptor chain interceptor chain privat configur cfg inject public void initi cach notifi cach notifi configur cfg async interceptor chain chain cach notifi cach notifi cfg cfg interceptor chain chain overrid public void entri evict map extend intern cach entri extend extend evict n reus threadloc context n want includ evict oper ongo transact affect flag especi see illeg acquir lock commit transact invoc context ctx immut context import make extern guarante thread execut code could user thread could evict thread howev user call cach evict want carri contextu inform henc make sens notifi cach entri evict call carri take invoc context object cach notifi notifi cach entri evict evict valu ctx null cfg jmx statist enabl updat evict statist evict privat void updat evict statist map extend intern cach entri extend extend evict cach mgmt interceptor mgmt interceptor interceptor chain find interceptor extend cach mgmt interceptor class mgmt interceptor null mgmt interceptor add evict evict size 
packag org evict support evict strategi author manik surtani sinc public enum evict strategi strategi deprec use instead deprec public boolean enabl return 
packag org evict support evict thread polici author vladimir blagojev sinc public enum evict thread polici 
packag org remot respons import java io except import java io object input import java io object output import java util set import org common marshal abstract extern import org common util util import org marshal core id respons encapsul except author manik surtani sinc public class except respons extend invalid respons privat except except public except respons public except respons except except except except public except get except return except public void set except except except except except overrid public string string return except respons except public static class extern extend abstract extern except respons overrid public void write object object output output except respons respons throw except output write object respons except overrid public except respons read object object input input throw except class find except return new except respons except input read object overrid public integ get id return id overrid public set class extend except respons get type class return util class extend except respons set except respons class 
packag org configur cach import java util concurr time unit import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set control default expir set entri cach public class expir configur public static final attribut definit long attribut definit builder lifespan l build public static final attribut definit long attribut definit builder max idl l build public static final attribut definit boolean attribut definit builder reaper enabl true immut auto persist fals build public static final attribut definit long attribut definit builder wake interv time unit milli xml name interv build static attribut set attribut definit set return new attribut set expir configur class privat final attribut long lifespan privat final attribut long max idl privat final attribut boolean reaper enabl privat final attribut long wake interv privat final attribut set attribut expir configur attribut set attribut attribut attribut check protect lifespan attribut attribut max idl attribut attribut reaper enabl attribut attribut wake interv attribut attribut maximum lifespan cach entri entri expir cluster wide millisecond mean entri never expir note overrid per entri basi use cach public long lifespan return lifespan get maximum idl time cach entri maintain cach millisecond idl time exceed entri expir cluster wide mean entri never expir note overrid per entri basi use cach public long max idl return max idl get determin whether background reaper thread enabl test entri expir regardless whether reaper use entri test expir lazili touch public boolean reaper enabl return reaper enabl get interv millisecond subsequ run purg expir entri memori cach store wish disabl period evict process altogeth set wakeup interv public long wake interv return wake interv get overrid public string string return expir configur attribut attribut overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals expir configur expir configur obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result public attribut set attribut return attribut 
packag org configur cach import static org configur cach expir configur import static org configur cach expir configur import static org configur cach expir configur import static org configur cach expir configur import java util concurr time unit import org common configur builder import org common configur attribut attribut set import org configur global global configur control default expir set entri cach public class expir configur builder extend abstract configur child builder implement builder expir configur privat final attribut set attribut expir configur builder configur builder builder super builder attribut expir configur attribut definit set maximum lifespan cach entri entri expir cluster wide millisecond mean entri never expir note overrid per entri basi use cach public expir configur builder lifespan long l attribut attribut set l return maximum lifespan cach entri entri expir cluster wide millisecond mean entri never expir note overrid per entri basi use cach public expir configur builder lifespan long l time unit unit return lifespan unit milli l maximum idl time cach entri maintain cach millisecond idl time exceed entri expir cluster wide mean entri never expir note overrid per entri basi use cach public expir configur builder max idl long l attribut attribut set l return maximum idl time cach entri maintain cach millisecond idl time exceed entri expir cluster wide mean entri never expir note overrid per entri basi use cach public expir configur builder max idl long l time unit unit return max idl unit milli l enabl background reaper test entri expir regardless whether reaper use entri test expir lazili touch public expir configur builder enabl reaper attribut attribut set true return enabl background reaper test entri expir regardless whether reaper use entri test expir lazili touch public expir configur builder reaper enabl boolean enabl attribut attribut set enabl return disabl background reaper test entri expir test entri expir regardless whether reaper use entri test expir lazili touch public expir configur builder disabl reaper attribut attribut set fals return public boolean reaper enabl return attribut attribut get interv millisecond subsequ run purg expir entri memori cach store wish disabl period evict process altogeth set wakeup interv public expir configur builder wake interv long l attribut attribut set l return public long wakeup interv return attribut attribut get interv millisecond subsequ run purg expir entri memori cach store wish disabl period evict process altogeth set wakeup interv public expir configur builder wake interv long l time unit unit return wake interv unit milli l overrid public void valid overrid public void valid global configur global config overrid public expir configur creat return new expir configur attribut protect overrid public expir configur builder read expir configur templat attribut read templat attribut return overrid public string string return get class get simpl name attribut 
packag org expir impl import java util iter import java util concurr concurr hash map import java util concurr concurr map import java util concurr schedul executor servic import java util concurr schedul futur import java util concurr time unit import org cach import org common util util import org configur cach configur import org contain data contain import org contain entri intern cach entri import org expir expir manag import org factori know compon name import org factori annot compon name import org factori annot inject import org factori annot start import org factori annot stop import org marshal core marshal entri import org metadata metadata import org notif cachelisten cach notifi import org persist manag persist manag import org util time servic import org util log log import org util log log factori import net jcip annot thread safe thread safe public class expir manag impl implement expir manag protect static final log log log factori get log expir manag impl class protect static final boolean trace log trace enabl protect schedul futur expir task compon inject protect schedul executor servic executor protect configur configur protect persist manag persist manag protect data contain datum contain protect cach notifi cach notifi protect time servic time servic protect boolean enabl protect string cach name map use perform reason essenti expir event rais map popul first main exampl expir occur key key remov updat latter case n want send expir event remov event could remov protect concurr map object expir inject public void initi compon name known compon name schedul executor servic executor cach cach configur cfg data contain datum contain persist manag persist manag cach notifi cach notifi time servic time servic initi executor cach get name cfg datum contain persist manag cach notifi time servic void initi schedul executor servic executor string cach name configur cfg data contain datum contain persist manag persist manag cach notifi cach notifi time servic time servic executor executor configur cfg cach name cach name datum contain datum contain persist manag persist manag cach notifi cach notifi time servic time servic expir new concurr hash map start prioriti make sure start persist manag public void start first check evict enabl enabl configur expir reaper enabl enabl set evict timer task long exp wake int configur expir wake interv exp wake int log start evict thread enabl fals els expir task executor schedul fix delay new schedul task exp wake int exp wake int time unit overrid public void process expir long start thread current thread interrupt tri trace log trace purg datum contain expir entri start time servic time long current time milli time servic wall clock time iter intern cach entri purg candid datum contain iter includ expir purg candid next intern cach entri e purg candid next e expir current time milli handl memori expir e current time milli trace log tracef purg datum contain complet util pretti print time time servic time durat start time unit catch except e log except purg data contain e thread current thread interrupt persist manag purg expir overrid public boolean enabl return enabl overrid public void handl memori expir intern cach entri entri long current time datum contain comput entri get key k old entri factori old entri null synchron old entri old entri expir current time delet store notifi k old entri get valu old entri get metadata els return old entri return null overrid public void handl store expir key note sinc invok without actual key lock entir possibl remov occur concurr datum contain lock acquir old entri null caus expir event gener extra handl store expir key null null overrid public void handl store expir final marshal entri marshal entri handl store expir marshal entri get key marshal entri get valu marshal entri get metadata privat void handl store expir key valu metadata metadata datum contain comput key old key old entri factori boolean remov fals old entri null remov true delet store notifi key valu metadata els old entri expir long time time servic time old entri expir time synchron old entri old entri expir time even though provid marshal entri may provid metadata valu possibl check null either remov metadata null old entri get metadata equal metadata valu null valu equal old entri get valu delet store notifi key valu metadata remov return null return old entri delet key store well notifi cach listen expir give key valu metadata combin param key param valu param metadata privat void delet store notifi key valu metadata metadata delet store key cach notifi null guarante order event must do entri anoth write do time cach notifi notifi cach entri expir key valu metadata null privat void delet store key delet share store well make sure multipl expir event persist manag delet store key persist manag access mode overrid public void regist write incom key expir put key key overrid public void unregist write key expir remov key stop prioriti public void stop expir task null expir task cancel true class schedul task implement runnabl overrid public void run log factori push cach name trace tri process expir final log factori pop trace 
packag org contain entri provid util method deal expir cach entri author manik surtani author sann grinovero sinc public class expiri helper public static boolean expir mortal long lifespan long creat long return lifespan creat creat lifespan public static boolean expir transient long max idl long last use long return max idl last use max idl last use public static boolean expir transient mortal long max idl long last use long lifespan long creat long return expir transient max idl last use expir mortal lifespan creat 
packag org common marshal import java io except import java io object input import java io object output import java io serializ one key aspect often need marshal unmarshal object order provid function exampl need store object write write behind cach store object store need marshal cluster node form object ship around need marshal even enabl store binari object need marshal lazili unmarshal correct classload use standard serial slow produc payload big affect bandwidth usag top serial work well object suppos immut order avoid issu use boss marshal marshal unmarshal object boss marshal fast provid space effici payload top allow user construct object unmarshal henc allow object carri immut start user benefit marshal framework well simpl possibl form user need provid link extern implement type want marshal unmarshal annot marshal type class link serial indic extern class use runtim boss marshal inspect object discov marshal thank annot marshal use extern class pass common practic includ extern implement within class marshal unmarshal code public static class code make extern implement easi code typesaf make sure defin type type object marshal unmarshal even though way defin extern user friendli disadvantag ul li due sever constraint model support differ version class need marshal extern class payload size gener via method effici li li model requir marshal class annoat link serial user might need provid extern class sourc code avail constraint modifi li li use annot model might limit framework develop servic provid tri abstract low level detail marshal layer away user li ul affect disadvantag altern mechan provid extern avail via link advanc extern detail find interfac javadoc pleas note even though extern mark link serializ need marshal extern realli need develop user friendli extern use link serial link advanc extern instanc requir extern serializ sinc extern marshal even though strictli necessari avoid break compat old client link extern implement link serializ requir need user friendli extern chanc futur major releas link extern will n extend link serializ henc strongli recommend user friendli extern user mark extern implement either link serializ link java io externaliz author galder zamarr sinc public interfac extern extend serializ write object refer stream param output object output write param object object refer write throw except error occur void write object object output output object throw except read instanc stream instanc write link write object object output object method implement free creat instanc object read stream way feel like could via constructor factori reflect param input object input read return object instanc throw except error occur throw class find except class could find read object object input input throw except class find except 
packag org queri impl extern identifi use marshal deleg special extern detail read http org doc x user guid user guid html preassign extern id rang rang reserv queri modul author sann grinovero sinc public interfac extern id integ integ integ integ integ integ integ integ integ integ integ integ integ integ integ integ integ integ integ integ 
packag org client hotrod defin flag avail hot rod client influenc behavior oper p avail flag ul li link default previous exist valu link java util map oper return g link remot cach put object object return previou valu associ key appli flag default behavior overrid scope singl invoc previou exist valu return li li link flag either use request flag put oper mean default server lifespan appli respons flag mean return entri default lifespan valu li li link flag either use request flag put oper mean default server max idl appli respons flag mean return entri default max idl valu li li link skip load entri configur link org persist spi cach loader li li link use queri modul prevent index updat result current oper ul author mircea marku jboss com sinc public enum flag default previous exist valu link java util map oper return g link remot cach put object object return previou valu associ key p appli flag default behavior overrid scope singl invoc previou exist valu return x flag either use request flag put oper mean default server lifespan appli respons flag mean return entri default lifespan valu x flag either use request flag put oper mean default server max idl appli respons flag mean return entri default max idl valu x skip load entri configur link org persist spi cach loader x use queri modul prevent index updat result current oper x privat int flag int flag int flag int flag int flag int public int get flag int return flag int 
packag org transact lookup import java lang reflect method import javax name initi context import javax name name except import javax transact transact manag import org common util util import org configur global global configur import org factori annot inject import org transact tm emb transact manag import org util log log import org util log log factori transact manag lookup class attempt locat transact manag varieti differ class locat tri server ul li boss li run li resin li orion li li weblog li webspher li sun glassfish ul transact manag find return link org transact tm emb transact manag author marku plesser sinc public class gener transact manag lookup implement transact manag lookup privat static final log log log factori get log gener transact manag lookup class public static final gener transact manag lookup new gener transact manag lookup lookup perform privat boolean lookup do fals avail privat boolean lookup fail fals boss emb jar find privat boolean boss fals transact manag find privat transact manag tm null locat transact manag know privat static string know manag java jboss transact manag boss java transact manag boss run java comp transact manag resin x java appserv transact manag sun glassfish java pm transact manag borland sun javax transact transact manag web logic java comp user transact resin orion osgi servic javax transact transact manag karaf web sphere transact manag factori privat static final string com ibm ws transact transact manag factori web sphere transact manag factori privat static final string com ibm ej jt jta transact manag factori web sphere transact manag factori privat static final string com ibm ej jt jta privat global configur global cfg inject public void init global configur global cfg global cfg global cfg get system wide use transact manag return transact manag overrid public synchron transact manag get transact manag lookup do lookup global cfg class loader tm null return tm lookup fail boss first tri emb boss instanc tri emb boss boss fall back dummi use dummi return tm privat void use dummi tm emb transact manag get instanc log fall back emb tm privat void tri emb boss tri boss standalon manag lookup j boss standalon manag lookup new boss standalon manag lookup j boss standalon manag lookup init global cfg tm j boss standalon manag lookup get transact manag catch except e boss true tri figur transact manag use privat void lookup class loader cl lookup fail return initi context ctx tri ctx new initi context catch name except e log fail creat initi ctx e lookup fail true return tri probe jndi lookup first string know manag know manag object jndi object tri log debugf tri lookup transact manag know manag jndi object ctx lookup know manag catch name except e log debugf fail perform lookup know manag know manag continu jndi object instanceof transact manag tm transact manag jndi object log debugf find transact manag know manag return final util close ctx tri find webspher lookup sinc come may deploy emb alongsid app need look cach class clazz tri log debugf tri web sphere clazz util load class strict cl log debugf find web sphere catch class find except ex tri log debugf tri web sphere clazz util load class strict cl log debugf find web sphere catch class find except ex tri log debugf tri web sphere clazz util load class strict cl log debugf find web sphere catch class find except ex log debug could n find web sphere transact manag factori class neither web sphere version lookup fail true return tri class signatur null object arg null method method clazz get method get transact manag signatur tm transact manag method invok null arg catch except ex log unabl invok webspher static get tm method ex clazz get name lookup do true 
packag org command read import static org common util util str import java io except import java io object input import java io object output import org command visitor import org contain entri cach entri import org context invoc context import org context impl flag bit set import org util log log import org util log log factori implement function defin link org cach get object link org cach contain key object oper author manik surtani href mailto manik jboss org manik jboss org sinc public class get key valu command extend abstract data command public static final byte privat static final log log log factori get log get key valu command class privat static final boolean trace log trace enabl public get key valu command object key long flag bit set super key flag bit set public get key valu command overrid public object accept visitor invoc context ctx visitor visitor throw throwabl return visitor visit get key valu command ctx overrid public load type load type return load type overrid public object perform invoc context ctx throw throwabl cach entri entri ctx lookup entri key entri remov trace log tracef entri delet type entri get class get simpl name return null return entri get valu overrid public byte get command id return overrid public void write object output output throw except output write object key output write long flag bit set copi without remot flag get flag bit set overrid public void read object input input throw except class find except key input read object set flag bit set input read long public string string return new string builder append get key valu command key append str key append flag append print flag append string 
packag org secur action import java secur privileg action wrapper code boolean get boolean properti name author dan berindei sinc public class get system properti boolean action implement privileg action boolean privat final string properti name public get system properti boolean action string properti name properti name properti name overrid public boolean run return boolean get boolean properti name 
packag org configur global import java util map import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set import org common configur attribut ident attribut copier import org secur audit logger import org secur princip role mapper import org secur role import org secur impl null audit logger global author configur author tristan tarrant sinc public class global author configur static final attribut definit boolean attribut definit builder enabl fals immut build static final attribut definit audit logger attribut definit builder audit logger audit logger new null audit logger copier ident attribut copier immut build static final attribut definit princip role mapper attribut definit builder princip role mapper null princip role mapper class immut build static final attribut definit map attribut definit builder role null map class build static final attribut set attribut definit set return new attribut set global author configur class privat final attribut boolean enabl privat final attribut audit logger audit logger privat final attribut princip role mapper princip role mapper privat final attribut map role privat final attribut set attribut public global author configur attribut set attribut attribut attribut check protect enabl attribut attribut audit logger attribut attribut princip role mapper attribut attribut role attribut attribut public boolean enabl return enabl get public audit logger audit logger return audit logger get public princip role mapper princip role mapper return princip role mapper get public map string role role return role get public attribut set attribut return attribut overrid public string string return global author configur attribut attribut overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals global author configur global author configur obj attribut null attribut null return fals els attribut equal attribut return fals return true 
packag org factori import java lang ref weak refer import java util array list import java util collect import java util collect import java util map import java util set import java util concurr concurr hash map import java util concurr concurr map import java util concurr schedul executor servic import java util concurr atom atom boolean import javax manag bean server import javax manag bean server factori import org version import org command modul modul command factori import org command modul modul command initi import org common cach except import org common util uberjar manifest uber jar duplic jar warner import org common util uberjar uber jar duplic jar warner import org configur global global configur import org configur global shutdown hook behavior import org factori annot surviv restart import org factori compon compon metadata repo import org factori scope scope import org factori scope scope import org jmx cach manag jmx registr import org lifecycl compon statu import org lifecycl modul lifecycl import org manag emb cach manag import org manag emb cach manag startup except import org marshal core encod registri import org notif cachemanagerlisten cach manag notifi import org notif cachemanagerlisten cach manag notifi impl import org persist factori cach store factori registri import org registri intern cach registri import org registri impl intern cach registri impl import org remot transport transport import org stat cluster contain stat import org topolog cluster topolog manag import org topolog local topolog manag import org util byte string import org util modul properti import org util time servic import org util log log import org util log log factori import org util log event event log manag import org xsite global site admin oper import net jcip annot thread safe global compon registri share compon store author manik surtani sinc scope scope surviv restart thread safe public class global compon registri extend abstract compon registri privat static final log log log factori get log global compon registri class privat static final atom boolean version log new atom boolean fals hook shut cach exit privat thread shutdown hook flag shutdown hook set call cach stop allow stop identifi call shutdown hook privat boolean invok shutdown hook privat final global configur global configur track set creat cach order make easi remov cach remot node privat final set string creat cach privat final modul properti modul properti new modul properti privat final compon metadata repo compon metadata repo final collect modul lifecycl modul lifecycl final concurr map byte string compon registri name compon new concurr hash map protect final weak refer class loader default class loader creat instanc compon registri configur pass automat regist param configur configur creat public global compon registri global configur configur emb cach manag cach manag set string creat cach class loader configur class loader configur class loader modul lifecycl modul properti resolv modul lifecycl configur class loader compon metadata repo new compon metadata repo load compon metadata compon metadata repo initi modul properti get modul metadata file configur class loader configur class loader default class loader new weak refer regist default class loader configur class loader tri order import global configur configur regist compon global compon registri class regist compon configur global configur class regist compon cach manag emb cach manag class regist compon new cach manag jmx registr cach manag jmx registr class regist compon new cach manag notifi impl cach manag notifi class regist compon new intern cach registri impl intern cach registri class regist compon new cach store factori registri cach store factori registri class regist compon new global site admin oper global site admin oper class modul properti load modul command handler configur class loader map byte modul command factori factori modul properti modul command factori factori null factori empti regist non volatil compon factori know compon name els regist non volatil compon collect empti map know compon name creat cach creat cach get creat compon event log manag class necessari make sure transport start avail compon may need messi approach though proper fix get creat compon transport class two necessari workaround get creat compon local topolog manag class get creat compon cluster topolog manag class get creat compon cluster contain stat class get creat compon encod registri class get creat compon schedul executor servic class know compon name catch except e throw new cach except unabl construct global compon registri e overrid protect class loader get class loader return default class loader get overrid protect log get log return log overrid public compon metadata repo get compon metadata repo return compon metadata repo overrid protect synchron void remov shutdown hook call sourc shutdown hook de regist shutdown hook invok shutdown hook shutdown hook null runtim get runtim remov shutdown hook shutdown hook overrid public time servic get time servic return get creat compon time servic class overrid protect synchron void add shutdown hook array list bean server al bean server factori find bean server null shutdown hook behavior shutdown hook behavior global configur shutdown hook behavior boolean regist shutdown hook shutdown hook behavior shutdown hook behavior al empti shutdown hook behavior shutdown hook behavior regist shutdown hook log tracef regist shutdown hook configur behavior shutdown hook behavior shutdown hook new thread tri invok shutdown hook true global compon registri stop final invok shutdown hook fals runtim get runtim add shutdown hook shutdown hook els log tracef regist shutdown hook configur behavior shutdown hook behavior public final compon registri get name compon registri string name need sync method name compon thread safe correctli publish final return get name compon registri byte string string name public final compon registri get name compon registri byte string name need sync method name compon thread safe correctli publish final return name compon get name public synchron final void regist name compon registri compon registri compon registri string name name compon put byte string string name compon registri public synchron final void unregist name compon registri string name name compon remov byte string string name public synchron final void rewir name registri compon registri cr name compon valu cr rewir public map byte modul command initi get modul command initi modul properti final n need synchron method safe publish return collect unmodifi map modul properti modul command initi overrid public void start tri boolean need notifi synchron noth global compon alreadi run state start allow return need notifi state compon statu state compon statu need notifi modul lifecycl l modul lifecycl log trace enabl log tracef invok cach manag start l l cach manag start global configur super start version log compar set fals true log version version print version super post start need notifi state compon statu modul lifecycl l modul lifecycl log trace enabl log tracef invok cach manag start l l cach manag start warn uber jar duplic catch runtim except rte emb cach manag startup except except new emb cach manag startup except rte state compon statu tri super stop catch except e except add suppress e throw except privat void warn uber jar duplic uber jar duplic jar warner scanner new manifest uber jar duplic jar warner scanner classpath correct async accept async classpath correct classpath correct log warn uber jar duplic overrid public synchron void stop boolean need notifi state compon statu state compon statu need notifi modul lifecycl l modul lifecycl log trace enabl log tracef invok cach manag stop l l cach manag stop super stop state compon statu need notifi modul lifecycl l modul lifecycl log trace enabl log tracef invok cach manag stop l l cach manag stop public void notifi cach start string cach name compon registri cr get name compon registri cach name modul lifecycl l modul lifecycl log trace enabl log tracef invok cach start l l cach start cr cach name public final global configur get global configur final need synchronis return global configur remov cach give name return true cach remov public synchron boolean remov cach string cach name return creat cach remov cach name public modul properti get modul properti return modul properti 
packag org configur global import java lang ref weak refer import java util collect import java util hash map import java util list import java util map import java util option import org version import org factori annot surviv restart import org factori scope scope import org factori scope scope p configur compon expos global configur p author manik surtani author vladimir blagojev author mircea marku jboss com author galder zamarr author pete muir author pedro ruivo sinc see href config html ce global configur refer scope scope surviv restart public class global configur default replic version link org version get version short public static final short version get version short privat final global jmx statist configur global jmx statist privat final transport configur transport privat final global secur configur secur privat final serial configur serial privat final shutdown configur shutdown privat final global state configur global state privat final map class modul privat final site configur site privat final weak refer class loader cl privat final thread pool configur expir thread pool privat final thread pool configur listen thread pool privat final thread pool configur replic queue thread pool privat final thread pool configur persist thread pool privat final thread pool configur state transfer thread pool privat final thread pool configur async thread pool privat final option string default cach name global configur thread pool configur expir thread pool thread pool configur listen thread pool thread pool configur replic queue thread pool thread pool configur persist thread pool thread pool configur state transfer thread pool thread pool configur async thread pool global jmx statist configur global jmx statist transport configur transport global secur configur secur serial configur serial shutdown configur shutdown global state configur global state list modul site configur site option string default cach name class loader cl expir thread pool expir thread pool listen thread pool listen thread pool replic queue thread pool replic queue thread pool persist thread pool persist thread pool state transfer thread pool state transfer thread pool async thread pool async thread pool global jmx statist global jmx statist transport transport secur secur serial serial shutdown shutdown global state global state map class object modul map new hash map object modul modul modul map put modul get class modul modul collect unmodifi map modul map site site default cach name default cach name cl new weak refer cl deprec method alway return null look thread pool name link listen thread pool instead deprec public executor factori configur async listen executor return null deprec method alway return null look thread pool name link persist thread pool instead deprec public executor factori configur persist executor return null deprec method alway return null look thread pool name link transport configur transport thread pool instead deprec public executor factori configur async transport executor return null deprec method alway return null look thread pool name link transport configur remot command thread pool instead deprec public executor factori configur remot command executor return null deprec method alway return null look thread pool name link expir thread pool instead deprec public schedul executor factori configur evict schedul executor return null public thread pool configur expir thread pool return expir thread pool deprec use link expir thread pool instead deprec public thread pool configur evict thread pool return expir thread pool public thread pool configur listen thread pool return listen thread pool deprec sinc long use deprec public thread pool configur replic queue thread pool return replic queue thread pool public thread pool configur persist thread pool return persist thread pool public thread pool configur state transfer thread pool return state transfer thread pool public thread pool configur async thread pool return async thread pool public global jmx statist configur global jmx statist return global jmx statist public transport configur transport return transport public global secur configur secur return secur public serial configur serial return serial public shutdown configur shutdown return shutdown public global state configur global state return global state suppress warn uncheck public modul class modul class return modul get modul class public map class modul return modul get classload use configur public class loader class loader return cl get public site configur site return site public option string default cach name return default cach name overrid public string string return global configur listen thread pool listen thread pool expir thread pool expir thread pool persist thread pool persist thread pool state transfer thread pool state transfer thread pool replic queue thread pool replic queue thread pool global jmx statist global jmx statist transport transport secur secur serial serial shutdown shutdown global state global state modul modul site site default cach name default cach name cl cl public boolean cluster return transport transport null 
packag org configur global import java lang ref weak refer import java lang reflect constructor import java util array list import java util array import java util link list import java util list import java util option import org common cach configur except import org common configur builder import org common configur build import org common util util public class global configur builder implement global configur child builder privat weak refer class loader cl privat final transport configur builder transport privat final global jmx statist configur builder global jmx statist privat final serial configur builder serial privat final global secur configur builder secur privat final thread pool configur builder expir thread pool privat final thread pool configur builder listen thread pool privat final thread pool configur builder replic queue thread pool privat final thread pool configur builder persist thread pool privat final thread pool configur builder state transfer thread pool privat final thread pool configur builder async thread pool privat final shutdown configur builder shutdown privat final global state configur builder global state privat final list builder modul new array list privat final site configur builder site privat option string default cach name public global configur builder gi context use use core bundl default instead class loader default null util gi context default thread current thread get context class loader default null default global configur builder class get class loader cl new weak refer default transport new transport configur builder global jmx statist new global jmx statist configur builder serial new serial configur builder secur new global secur configur builder shutdown new shutdown configur builder global state new global state configur builder site new site configur builder expir thread pool new thread pool configur builder listen thread pool new thread pool configur builder replic queue thread pool new thread pool configur builder persist thread pool new thread pool configur builder state transfer thread pool new thread pool configur builder async thread pool new thread pool configur builder default cach name option empti helper method get default construct global configur preconfigur use default cluster stack return new global configur public global configur builder cluster default transport default transport clear properti return helper method get default construct global configur preconfigur use mode return new global configur public global configur builder non cluster default transport transport null clear properti return protect class loader get class loader return cl get public global configur builder class loader class loader cl cl new weak refer cl return overrid public transport configur builder transport return transport overrid public global jmx statist configur builder global jmx statist return global jmx statist overrid public serial configur builder serial return serial deprec overrid public thread pool configur builder evict thread pool return expir thread pool overrid public thread pool configur builder expir thread pool return expir thread pool overrid public thread pool configur builder listen thread pool return listen thread pool deprec overrid public thread pool configur builder replic queue thread pool return replic queue thread pool overrid public thread pool configur builder persist thread pool return persist thread pool overrid public thread pool configur builder state transfer thread pool return state transfer thread pool overrid public thread pool configur builder async thread pool return async thread pool overrid public global secur configur builder secur return secur overrid public shutdown configur builder shutdown return shutdown overrid public list builder modul return modul public global configur builder clear modul modul clear return overrid public site configur builder site return site public extend builder add modul class klass tri constructor constructor klass get declar constructor global configur builder class builder constructor new instanc modul add builder return builder catch except e throw new cach configur except could instanti modul configur builder klass get name e overrid public global state configur builder global state return global state overrid public global configur builder default cach name string default cach name default cach name option default cach name return public option string default cach name return default cach name suppress warn uncheck public void valid list runtim except valid except new array list array list expir thread pool listen thread pool replic queue thread pool persist thread pool state transfer thread pool async thread pool global jmx statist transport secur serial shutdown global state site c tri c valid catch runtim except e valid except add e modul c tri c valid catch runtim except e valid except add e cach configur except multipl runtim except valid except present e throw e overrid public global configur build valid list object modul config new link list builder modul modul modul config add modul creat return new global configur expir thread pool creat listen thread pool creat replic queue thread pool creat persist thread pool creat state transfer thread pool creat async thread pool creat global jmx statist creat transport creat secur creat serial creat shutdown creat global state creat modul config site creat default cach name cl get public global configur builder read global configur templat cl new weak refer templat class loader default cach name templat default cach name object c templat modul valu build build c get class get annot build class builder object builder add modul build valu builder read c expir thread pool read templat expir thread pool listen thread pool read templat listen thread pool replic queue thread pool read templat replic queue thread pool persist thread pool read templat persist thread pool state transfer thread pool read templat state transfer thread pool async thread pool read templat async thread pool global jmx statist read templat global jmx statist secur read templat secur serial read templat serial shutdown read templat shutdown global state read templat global state transport read templat transport site read templat site return public static global configur builder default cluster builder global configur builder builder new global configur builder builder transport default transport return builder overrid public string string return global configur builder expir thread pool expir thread pool listen executor thread pool listen thread pool cl cl transport transport global jmx statist global jmx statist serial serial replic queue thread pool replic queue thread pool persist thread pool persist thread pool state transfer thread pool state transfer thread pool async thread pool async thread pool secur secur shutdown shutdown global state global state site site overrid public boolean equal object return true null get class get class return fals global configur builder global configur builder expir thread pool equal expir thread pool return fals listen thread pool equal listen thread pool return fals replic queue thread pool equal replic queue thread pool return fals persist thread pool equal persist thread pool return fals state transfer thread pool equal state transfer thread pool return fals async thread pool equal async thread pool return fals cl null cl equal cl cl null return fals global jmx statist equal global jmx statist return fals serial equal serial return fals shutdown equal shutdown return fals site equal site return fals secur equal secur return fals global state equal global state return fals default cach name equal default cach name return fals return transport equal transport overrid public int hash code int result cl null cl hash code result result transport hash code result result global jmx statist hash code result result serial hash code result result expir thread pool hash code result result listen thread pool hash code result result replic queue thread pool hash code result result persist thread pool hash code result result state transfer thread pool hash code result result async thread pool hash code result result shutdown hash code result result site hash code result result secur hash code result result global state hash code result result modul hash code result result default cach name hash code return result 
packag org marshal core import java io except import java io input stream import java io object input import java io object output import java io output stream import java io serializ import java lang reflect array import java util function bi consum import org command remot command factori import org common cach except import org common io byte buffer import org common io expos byte array output stream import org common marshal advanc extern import org common marshal buffer size predictor import org common marshal extern import org common marshal marshal type hint import org common marshal marshal import org common marshal serializ except import org common marshal serial function import org common marshal serial import org common marshal stream marshal import org configur global global configur import org factori global compon registri import org factori annot inject import org factori annot start import org factori annot stop import org factori scope scope import org factori scope scope import org marshal core class extern map id extern map import org util log log import org util log log factori global scop marshal need transport layer unmarshal request even know cach marshal job author galder zamarr sinc scope scope public class global marshal implement stream marshal privat static final log log log factori get log global marshal class privat static final boolean trace log trace enabl static final int static final int x static final int x static final int x static final int x static final int x static final int x array encod follow flag compon type compon type info array length element type element type info array element ssncieee depend type byte eee depend type flag ss link link link link n link link c link eee link link link link element type present link set case array element will n preced instanc type identifi common element multidimension array support static final int x static final int x type last bit static final int x array size first bit static final int x element type static final int x compon type match instanc type static final int x element array null static final int x length array static final int x static final int x static final int x static final int x privat final marshal type hint marshal type hint new marshal type hint privat global compon registri gcr privat remot command factori cmd factori privat class extern map intern ext privat id extern map revers intern ext privat class extern map extern ext privat id extern map revers extern ext privat class identifi class identifi privat marshal extern public global marshal public global marshal marshal extern extern extern inject public void inject global compon registri gcr remot command factori cmd factori gcr gcr cmd factori cmd factori overrid start prioriti start extern tabl transport public void start intern ext intern extern load gcr cmd factori revers intern ext intern ext revers map id trace log tracef intern class extern id intern ext log tracef intern revers extern revers intern ext extern ext extern extern load gcr get global configur revers extern ext extern ext revers map trace log tracef extern class extern id extern ext log tracef extern revers extern revers extern ext extern null extern start default extern marshal gcr get global configur class identifi class identifi load gcr get global configur public marshal start default extern marshal global configur global cfg stream marshal marshal new extern boss marshal global cfg marshal start return marshal overrid stop prioriti stop transport avoid send receiv marshal readi public void stop intern ext clear revers intern ext clear extern ext clear revers extern ext clear class identifi null stop default extern marshal public void stop default extern marshal extern instanceof stream marshal stream marshal extern stop overrid public byte object byte buffer object obj throw except interrupt except tri byte object output write object output obj return byte trim unus byte catch java io serializ except nse log debug enabl log debug object serializ nse throw new serializ except nse get messag nse get caus privat byte object output write object output object obj throw except buffer size predictor size predictor marshal type hint get buffer size predictor obj byte object output write object output obj size predictor next size obj size predictor record size po return privat byte object output write object output object obj int estim size throw except byte object output new byte object output estim size write nullabl object obj return overrid public object object byte buffer byte buf throw except class find except byte object input byte object input buf return object object input privat object object object input byte object input throw except class find except return read nullabl object overrid public object output start object output output stream os boolean reentrant int estim size throw except byte object output new byte object output estim size return new stream byte object output os overrid public void object object stream object obj object output throw except write object obj overrid public void finish object output object output oo tri oo flush catch except e ignor overrid public object object byte buffer byte byte int offset int len throw except class find except ignor length sinc boundari check use unmarshal code know expect specif g read byte subset within alway append length byte object input byte object input byte offset return object object input overrid public object object input stream input stream throw except class find except limit use case e g read result set input stream copi stream byte problemat far though realli ideal int len avail expos byte array output stream byte byte buf len byte new expos byte array output stream len buf new byte math min len els input stream provid implement avail byte new expos byte array output stream buf new byte int byte read byte read read buf buf length byte write buf byte read return object byte buffer byte get raw buffer byte size overrid public boolean marshal object throw except class clazz get class boolean contain marshal marshal type hint know marshal clazz contain marshal boolean marshal marshal type hint marshal clazz trace log tracef marshal type know marshal b clazz get name marshal return marshal els marshal candid boolean marshal true tri object buffer catch except e marshal fals throw e final marshal type hint mark marshal clazz marshal return marshal return fals privat boolean marshal candid object return instanceof serializ intern ext get get class null extern ext get get class null get class get annot serial class null extern marshal privat boolean extern marshal object tri return extern marshal catch except e throw new serializ except object type get class expect marshal e overrid public buffer size predictor get buffer size predictor object return marshal type hint get buffer size predictor get class overrid public byte buffer object buffer object throw except interrupt except tri byte object output write object output return byte buffer catch java io serializ except nse log debug enabl log debug object serializ nse throw new serializ except nse get messag nse get caus overrid public byte object byte buffer object obj int estim size throw except interrupt except tri byte object output write object output obj estim size return byte catch java io serializ except nse log debug enabl log debug object serializ nse throw new serializ except nse get messag nse get caus overrid public object input start object input input stream boolean reentrant throw new unsupport oper except long use overrid public void finish object input object input oi throw new unsupport oper except long use overrid public object object object stream object input throw new unsupport oper except long use public extern find extern object obj class clazz obj get class extern ext intern ext get clazz ext null ext extern ext get clazz ext null ext find annot extern clazz return ext void write nullabl object object obj byte object output throw except obj null write byte els write non nullabl object obj object read nullabl object byte object input throw except class find except int type read unsign byte return type null read non nullabl object type bi consum object output object find writer object obj class clazz obj get class advanc extern intern ext intern ext get clazz intern ext null return object write intern clean object intern ext advanc extern extern ext extern ext get clazz extern ext null return object write extern clean object extern ext return null advanc extern find extern object input throw except int type read unsign byte switch type case return revers intern ext get read unsign byte case return revers extern ext get read int default return null privat void write non nullabl object object obj byte object output throw except class clazz obj get class int id primit get clazz id write primit obj id els clazz array write array clazz obj els advanc extern ext intern ext get clazz ext null write intern obj ext els ext extern ext get clazz ext null write extern obj ext els extern annot ext find annot extern clazz annot ext null write annot obj annot ext els write unknown obj privat void write array class clazz object array byte object output throw except write byte class compon type clazz get compon type int length array get length array boolean singl type true class element type null int flag length flag els length primit flag els length primit flag els flag object first element array get array first element null element type first element get class int length object element array get array element null element type null singl type fals break els element get class element type singl type fals break boolean compon type match fals singl type flag element type null flag els element type compon type flag compon type match true advanc extern ext ext intern ext get compon type null write flag extern compon type compon type match ext flag els ext extern ext get compon type null write flag extern compon type compon type match ext flag els use annot extern specifi compon type clear compon type match flag use class identifi full name theoret could write annot extern compon type save one byte worth complex compon type match fals flag int class id class id class identifi get id compon type write byte flag class id class id write byte class id els write byte class id write int class id els write byte flag write object compon type length els length primit write byte length primit els length primit write short length primit els write int length singl type extern element ext int primit id element type null return els compon type match note ext null element ext ext els element ext intern ext get element type null write byte write byte advanc extern element ext get id els element ext extern ext get element type null write byte write int advanc extern element ext get id els element ext find annot extern element type null could tri extern class regist class identifi like user regist could rather explicitli regist advanc extern instead write byte write object element ext get class els primit id primit get element type write byte write byte primit id int length object element array get array assert element null primit write raw primit element primit id finish return els write byte write element type element ext null int length object element array get array assert element null element ext write object element els compon type match type extern int length object element array get array assert element null write raw unknown element els int length object element array get array write nullabl object element privat void write flag extern byte object output class compon type boolean compon type match advanc extern ext int flag int extern type throw except class identifi extern compon type match write extern anyway otherwis would write element type later class uniqu identifi extern tri class identifi boolean singl class ext get type class size int class id compon type match singl class write byte flag extern type switch extern type case write byte ext get id break case write int ext get id break default throw new illeg state except singl class class id class identifi get id compon type els class id class identifi get id compon type write byte flag els write byte flag singl class class id write object compon type els class id class id write byte class id els write byte class id write int class id privat void write unknown object obj byte object output throw except assert extern marshal allow obj check support obj get class write byte write raw unknown obj privat void write raw unknown object obj byte object output throw except extern instanceof stream marshal stream marshal extern object object stream obj els tri byte byte extern object byte buffer obj write int byte length write byte catch interrupt except e thread current thread interrupt privat void write annot object obj byte object output extern ext throw except write byte write object ext get class ext write object obj privat void write intern object obj advanc extern ext object output throw except write byte write byte ext get id ext write object obj privat void write intern clean object obj advanc extern ext object output tri write intern obj ext catch except e throw new cach except e privat void write extern object obj advanc extern ext object output throw except write byte write int ext get id ext write object obj privat void write extern clean object obj advanc extern ext object output tri write extern obj ext catch except e throw new cach except e privat void write primit object obj byte object output int id throw except write byte primit write primit obj id privat extern find annot extern class clazz tri serial serial ann clazz get annot serial class serial ann null return extern serial ann valu new instanc els serial function func serial ann clazz get annot serial function class func serial ann null return extern func serial ann valu new instanc return null catch except e throw new illeg argument except string format instanti extern clazz e privat object read non nullabl object int type byte object input throw except class find except switch type case return primit read primit case return read extern read unsign byte revers intern ext case return read extern read int revers extern ext case return read annot case return read unknown case return read array default throw new except unknown type type privat object read extern int id id extern map revers map byte object input throw except class find except advanc extern ext revers map get id return ext read object privat object read annot byte object input throw except class find except class extend extern clazz class extend extern read object tri extern ext clazz new instanc return ext read object catch except e throw new cach except error instanti class clazz e privat object read array byte object input throw except class find except int flag read byte int type flag advanc extern compon ext null class ext clazz null class compon type switch type case case case throw new except unexpect compon type type case compon ext revers intern ext get read byte compon type get read class compon ext break case compon ext revers extern ext get read int compon type get read class compon ext break case ext clazz class read object intent break case compon type class read object break case int class id read byte class id class id compon type class identifi get class class id els compon type class identifi get class read int break default throw new except unknown compon type type int length int mask size flag switch mask size case length break case length read unsign byte primit break case length read unsign short primit break case length read int break default throw new except unknown array size mask size object array array new instanc compon type length flag return array boolean singl type flag boolean compon type match flag compon type match set must singl type assert compon type match singl type true singl type extern ext compon type match ext get extern type compon ext ext clazz els type read byte ext read extern type ext null int length array set array ext read object els switch type case int length array set array read unknown return array case int primit id read byte int length array set array primit read raw primit primit id return array default throw new illeg state except els int length array set array read nullabl object return array privat extern get extern int type advanc extern compon ext class ext clazz throw except switch type case case return compon ext case tri return extern ext clazz new instanc catch except e throw new cach except error instanti class ext clazz e case return null default throw new except unexpect compon type type privat extern read extern byte object input int type throw class find except except class ext clazz switch type case return revers intern ext get read byte case return revers extern ext get read int case ext clazz class read object tri return extern ext clazz new instanc catch except e throw new cach except error instanti class ext clazz e case case return null default throw new except unexpect compon type type privat class get read class byte object input advanc extern compon ext throw class find except except compon ext get type class size return compon ext get type class iter next els return class read object privat object read unknown byte object input throw except class find except extern instanceof stream marshal tri return stream marshal extern object object stream catch interrupt except e thread current thread interrupt return null els int length read int byte byte new byte length read fulli byte return extern object byte buffer byte 
packag org transact xa import java io except import java io object input import java io object output import java util object import java util set import java util concurr atom atom long import org common marshal abstract extern import org common util util import org marshal core id import org remot transport address uniqu identifi transact span ms cluster use replic modif transact messag uniqu identifi associ chang br global transact instanti thorough link transact factori class type depend runtim configur author href mailto bela jboss org bela ban apr author href mailto manik jboss org manik surtani manik jboss org author mircea marku jboss com sinc public class global transact implement cloneabl privat static final atom long sid new atom long protect long id protect address addr null privat int hash code bad case hash code return increas safe privat boolean remot fals empti ctor use extern protect global transact protect global transact address addr boolean remot id sid increment get addr addr remot remot public address get address return addr public long get id return id public boolean remot return remot public void set remot boolean remot remot remot overrid public int hash code hash code hash code addr null addr hash code int id return hash code overrid public boolean equal object return true instanceof global transact return fals global transact gtx global transact boolean aeq addr null gtx addr null addr equal gtx addr return aeq id gtx id overrid public string string return global tx object string addr local id return simplifi represent transact public final string global id return get address get id public void set id long id id id public void set address address address addr address overrid public object clone tri return super clone catch clone support except e throw new illeg state except imposs protect abstract static class abstract global tx extern extend global transact extend abstract extern overrid public void write object object output output gtx throw except output write long gtx id output write object gtx addr factori method global transact return newli construct instanc global transact one subclass protect abstract creat global transact overrid public read object object input input throw except class find except gtx creat global transact gtx id input read long gtx addr address input read object return gtx public static class extern extend abstract global tx extern global transact overrid suppress warn uncheck public set class extend global transact get type class return util class extend global transact set global transact class overrid public integ get id return id overrid protect global transact creat global transact return transact factori tx factori enum new global transact 
packag org interceptor impl import java util list import java util map import java util concurr concurr link queue import org command remot get key group command import org configur cach configur import org contain intern entri factori import org contain entri cach entri import org contain entri entri import org context invoc context import org distribut distribut manag import org distribut group impl group filter import org distribut group impl group manag import org factori annot inject import org interceptor async interceptor import org notif listen import org notif cachelisten cach notifi import org notif cachelisten annot cach entri activ import org notif cachelisten event cach entri activ event interceptor keep track key add remov process link get key group command author pedro ruivo sinc public class group interceptor extend async interceptor privat cach notifi cach notifi privat group manag group manag privat intern entri factori factori privat boolean passiv enabl privat distribut manag distribut manag inject public void inject depend cach notifi cach notifi group manag group manag intern entri factori factori configur configur distribut manag distribut manag cach notifi cach notifi group manag group manag factori factori passiv enabl configur persist passiv distribut manag distribut manag overrid public object visit get key group command invoc context ctx get key group command command throw throwabl final object group name command get group name need contact primari owner backup owner command set group owner distribut manag null distribut manag get cach topolog write owner group name command group owner passiv enabl return invok next final ctx command be ctx be command rv rv instanceof list noinspect uncheck filter list cach entri rv key listen listen new key listen group name group manag factori tri make snapshot recent possibl pick modif fli cach notifi add listen listen return invok next final ctx command r ctx r command rv cach notifi remov listen listen rv instanceof list noinspect uncheck list rv add listen activ key noinspect uncheck filter list cach entri rv els rv instanceof map cach entri entri listen activ key noinspect uncheck map rv put entri get key entri get valu privat void filter list cach entri list int list size cach entri entri list get entri instanceof entri list set factori creat entri listen public static class key listen privat final concurr link queue cach entri activ key privat final group filter object filter privat final intern entri factori factori public key listen object group name group manag group manag intern entri factori factori factori factori filter new group filter group name group manag activ key new concurr link queue cach entri activ public void handl remov cach entri activ event event final object key event get key filter accept key activ key add factori creat key event get valu event get metadata 
packag org distribut group impl import org distribut ch key partition key partition use link org distribut group group annot map group key segment author dan berindei sinc public class group partition implement key partition privat final key partition partition privat final group manag group manag public group partition key partition partition group manag group manag partition partition group manag group manag overrid public int get segment object key object group key group manag get group key return partition get segment group key null group key key public key partition unwrap return partition 
packag org distribut group impl import org configur cach group configur import org factori abstract name cach compon factori import org factori auto instanti factori import org factori annot default factori import org factori scope scope import org factori scope scope scope scope default factori class group manag class public class group manag factori extend abstract name cach compon factori implement auto instanti factori overrid public construct class compon type group configur group configur configur cluster hash group group configur enabl return null return compon type cast new group manag impl group configur grouper 
packag org distribut group impl import static org common util reflect util invok access import java lang reflect method import java secur access control import java secur privileg action import java util collect import java util collect import java util list import java util concurr concurr map import org common util collect factori import org common util reflect util import org common util util import org distribut distribut manag import org distribut group group import org distribut group grouper import org factori annot inject import org remot transport address public class group manag impl implement group manag privat interfac group metadata group metadata instanc null object get group object instanc privat static class group metadata impl implement group metadata privat final method method group metadata impl method method method get paramet type length throw new illeg argument except util format string group method must zero argument method method method overrid public object get group object instanc object object system get secur manag null return invok access instanc method util els return access control privileg privileg action object invok access instanc method util privat static group metadata creat group metadata class clazz collect method possibl method system get secur manag null possibl method reflect util get method clazz group class els possibl method access control privileg privileg action list method reflect util get method clazz group class possibl method empti return group metadata els possibl method size return new group metadata impl possibl method iter next els throw new illeg state except util format string defin one group method class hierarchi root clazz get name privat final concurr map class group metadata group metadata cach privat final list grouper grouper privat distribut manag distribut manag public group manag impl list grouper grouper group metadata cach collect factori make concurr map grouper null grouper grouper els grouper collect empti list inject public void inject depend distribut manag distribut manag distribut manag distribut manag overrid public object get group object key group metadata metadata get metadata key metadata null return appli grouper metadata get group key key els return appli grouper null key overrid public boolean owner object group return distribut manag get cach topolog write owner group overrid public address get primari owner object group return distribut manag get cach topolog get distribut group primari overrid public boolean primari owner object group return distribut manag get cach topolog get distribut group primari privat object appli grouper object group object key grouper grouper grouper grouper get key type assign key get class group grouper object grouper comput group key group return group privat group metadata get metadata final object key final class key class key get class group metadata group metadata group metadata cach get key class group metadata null ideal possibl group metadata redundantli calcul sever time howev profil show use map class futur cach approach significantli slow long run group metadata creat group metadata key class group metadata previou group metadata cach put absent key class group metadata previou null case anoth thread add metadata alreadi discard creat reus exist return previou return group metadata 
packag org configur cach import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set import org common configur attribut ident attribut copier import org common configur attribut simpl instanc attribut copier import org common hash hash import org common hash murmur hash import org distribut ch consist hash import org distribut ch consist hash factori import org distribut ch key partition import org distribut ch impl hash function partition allow fine tune rehash characterist must use distribut cach mode author pmuir public class hash configur public static final attribut definit consist hash factori attribut definit builder consist hash factori null consist hash factori class immut build public static final attribut definit hash attribut definit builder hash hash murmur hash get instanc copier ident attribut copier immut build public static final attribut definit integ attribut definit builder num owner xml name owner immut build assign owner randomli sync consist hash factori n work well low number segment default consist hash factori segment ok node public static final attribut definit integ attribut definit builder num segment xml name segment immut build public static final attribut definit float attribut definit builder capac factor f immut xml name capac build public static final attribut definit key partition attribut definit builder key partition new hash function partition key partition class copier simpl instanc attribut copier immut build static attribut set attribut definit set return new attribut set hash configur class privat final attribut consist hash factori consist hash factori privat final attribut hash hash privat final attribut integ num owner privat final attribut integ num segment privat final attribut float capac factor privat final attribut key partition key partition privat final group configur group configur privat final state transfer configur state transfer configur privat final attribut set attribut hash configur attribut set attribut group configur group configur state transfer configur state transfer configur attribut attribut check protect group configur group configur state transfer configur state transfer configur consist hash factori attribut attribut hash attribut attribut num owner attribut attribut num segment attribut attribut capac factor attribut attribut key partition attribut attribut deprec sinc replac link consist hash factori deprec public consist hash consist hash return null consist hash factori use public consist hash factori consist hash factori return consist hash factori get hash function use use bit spreader gener hash code gener typic one mani default link org distribut ch consist hash implement ship deprec sinc use link key partition instead deprec public hash hash return hash get number cluster wide replica cach entri public int num owner return num owner get control total number hash space segment per cluster p hash space segment granular key distribut cluster node primari one full segment fraction segment larg code num segment valu mean even distribut key node p hand memori bandwidth usag new consist hash grow linearli code num segment recommend keep code num segment cluster size public int num segment return num segment get fals rebalanc rehash take place new node join cluster node leav deprec use link org configur cach state transfer configur fetch memori state instead deprec public boolean rehash enabl return state transfer configur fetch memori state rehash timeout deprec use link org configur cach state transfer configur timeout instead deprec public long rehash rpc timeout return state transfer configur timeout deprec use link org configur cach state transfer configur timeout instead deprec public long rehash wait return state transfer configur timeout control proport entri resid local node compar node cluster suggest guarante node capac factor code twice mani entri node capac factor code public float capac factor return capac factor get public key partition key partition return key partition get configur variou grouper definit see user guid inform public group configur group return group configur public attribut set attribut return attribut overrid public string string return hash configur attribut attribut overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals hash configur hash configur obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result 
packag org configur cach import static org configur cach hash configur import static org configur cach hash configur import static org configur cach hash configur import static org configur cach hash configur import static org configur cach hash configur import static org configur cach hash configur import org common configur builder import org common configur attribut attribut set import org common hash hash import org configur global global configur import org distribut ch consist hash import org distribut ch consist hash factori import org distribut ch key partition import org util log log import org util log log factori allow fine tune rehash characterist must use distribut cach mode author pmuir public class hash configur builder extend abstract cluster configur child builder implement builder hash configur privat static final log log log factori get log hash configur builder class privat final attribut set attribut privat final group configur builder group configur builder hash configur builder cluster configur builder builder super builder attribut hash configur attribut definit set group configur builder new group configur builder builder deprec sinc replac link consist hash factori consist hash factori deprec public hash configur builder consist hash consist hash consist hash log consist hash deprec return consist hash factori use public hash configur builder consist hash factori consist hash factori extend consist hash consist hash factori attribut attribut set consist hash factori return number cluster wide replica cach entri public hash configur builder num owner int num owner num owner throw new illeg argument except num owner less attribut attribut set num owner return boolean num owner set return attribut attribut modifi int num owner return attribut attribut get deprec long use sinc replac link num segment int work like code num virtual node valu entir cluster deprec public hash configur builder num virtual node int num virtual node log hash num virtual node deprec return control total number hash space segment per cluster p hash space segment granular key distribut cluster node primari one full segment fraction segment larg code num segment valu mean even distribut key node p hand memori bandwidth usag new consist hash grow linearli code num segment recommend keep code num segment cluster size param num segment number hash space segment must strictli posit public hash configur builder num segment int num segment num segment throw new illeg argument except num segment less attribut attribut set num segment return enabl rebalanc rehash take place new node join cluster node leav deprec use link state transfer configur builder fetch memori state boolean instead deprec public hash configur builder rehash enabl state transfer fetch memori state true return enabl rebalanc rehash take place new node join cluster node leav deprec use link state transfer configur builder fetch memori state boolean instead deprec public hash configur builder rehash enabl boolean enabl state transfer fetch memori state enabl return disabl rebalanc rehash would take place new node join cluster node leav deprec use link state transfer configur builder fetch memori state boolean instead deprec public hash configur builder rehash disabl state transfer fetch memori state fals return rehash timeout deprec use link state transfer configur builder timeout long instead deprec public hash configur builder rehash rpc timeout long rehash rpc timeout state transfer timeout rehash rpc timeout return deprec long use deprec public hash configur builder rehash wait long rehash wait return hash function use use bit spreader gener hash code gener typic use conjunct mani default link org distribut ch consist hash implement ship current use object instanc instead instanti new instanc class therefor expect state surviv provid arg constructor instanc resolv deprec sinc use link key partition key partition instead deprec public hash configur builder hash hash hash attribut attribut set hash return control proport entri resid local node compar node cluster suggest guarante node capac factor code twice mani entri node capac factor code param capac factor capac factor local node must posit public hash configur builder capac factor float capac factor capac factor throw new illeg argument except capac factor must posit attribut attribut set capac factor return key partition control map key hash segment p default implement code org distribut ch impl hash function partition use hash function configur via link hash hash futur version may ignor hash function sinc public hash configur builder key partition key partition key partition attribut attribut set key partition return public group configur builder group return group configur builder overrid public void valid group configur builder valid overrid public void valid global configur global config group configur builder valid global config overrid public hash configur creat state transfer creat creat duplic state transfer configur instanc ok long none state transfer set modifi runtim return new hash configur attribut protect group configur builder creat state transfer creat overrid public hash configur builder read hash configur templat attribut read templat attribut group configur builder read templat group return overrid public string string return hash configur builder attribut attribut group configur builder group configur builder 
packag org distribut ch impl import java util array list import java util list import java util object import org common hash hash import org common util util import org configur cach hash configur import org distribut ch key partition key partition comput key segment base hash function author dan berindei sinc public class hash function partition implement key partition privat hash hash function privat int num segment privat int segment size overrid public void init hash configur configur object requir non null configur init configur hash configur num segment privat void init hash hash function int num segment object requir non null hash function num segment throw new illeg argument except num segment must strictli posit hash function hash function num segment num segment segment size util get segment size num segment overrid public int get segment object key result must alway posit make sure dividend posit first return hash function hash key integ segment size public hash get hash return hash function public list integ get segment end hash list integ hash new array list num segment int num segment hash add num segment segment size return hash overrid public boolean equal object return true null get class get class return fals hash function partition hash function partition num segment num segment return fals return object equal hash function hash function overrid public int hash code int result hash function null hash function hash code result result num segment return result overrid public string string return hash function partition hash function hash function n num segment 
packag org contain entri import static org common util util str import java io except import java io object input import java io object output import java util set import org common marshal abstract extern import org common util util import org marshal core id import org metadata emb metadata import org metadata metadata cach entri immort expir author manik surtani sinc public class immort cach entri extend abstract intern cach entri public object valu public immort cach entri object key object valu super key valu valu overrid public final boolean expir long return fals overrid public final boolean expir return fals overrid public final boolean expir return fals overrid public final long get creat return overrid public final long get last use return overrid public final long get lifespan return overrid public final long get max idl return overrid public final long get expiri time return overrid public final void touch op overrid public void touch long current time milli op overrid public final void reincarn op overrid public void reincarn long op overrid public intern cach valu intern cach valu return new immort cach valu valu overrid public object get valu return valu overrid public object set valu object valu return valu valu overrid public metadata get metadata return new emb metadata builder build overrid public void set metadata metadata metadata throw new illeg state except metadata set immort entri need recreat via entri factori overrid public immort cach entri clone return immort cach entri super clone public static class extern extend abstract extern immort cach entri overrid public void write object object output output immort cach entri ice throw except output write object ice key output write object ice valu overrid public immort cach entri read object object input input throw except class find except object k input read object object v input read object return new immort cach entri k v overrid public integ get id return id overrid public set class extend immort cach entri get type class return util set immort cach entri class overrid public string string return immort cach entri key str key valu str valu 
packag org contain entri import java io except import java io object input import java io object output import java util set import org common marshal abstract extern import org common util util import org marshal core id import org metadata emb metadata import org metadata metadata immort cach valu correspond link org contain entri immort cach entri author manik surtani sinc public class immort cach valu implement intern cach valu cloneabl public object valu public immort cach valu object valu valu valu overrid public intern cach entri intern cach entri object key return new immort cach entri key valu public final object set valu object valu object old valu valu valu return old overrid public object get valu return valu overrid public boolean expir long return fals overrid public boolean expir return fals overrid public boolean expir return fals overrid public long get creat return overrid public long get last use return overrid public long get lifespan return overrid public long get max idl return overrid public long get expiri time return overrid public metadata get metadata return new emb metadata builder lifespan get lifespan max idl get max idl build overrid public boolean equal object return true instanceof immort cach valu return fals immort cach valu immort cach valu valu null valu equal valu valu null return fals return true overrid public int hash code return valu null valu hash code overrid public string string return get class get simpl name valu valu overrid public immort cach valu clone tri return immort cach valu super clone catch clone support except e throw new runtim except never happen e public static class extern extend abstract extern immort cach valu overrid public void write object object output output immort cach valu icv throw except output write object icv valu overrid public immort cach valu read object object input input throw except class find except object v input read object return new immort cach valu v overrid public integ get id return id overrid public set class extend immort cach valu get type class return util class extend immort cach valu set immort cach valu class 
packag org common util import java io except import java io input stream import java io object input import java io object output import java io reader import java io serializ import java lang reflect array import java util array list import java util collect import java util collect import java util hash map import java util hash set import java util iter import java util list import java util map import java util map entri import java util object import java util set import org common marshal abstract extern import org common marshal id import org common marshal marshal util factori gener immut type wrapper author jason green author galder zamarr author tristan tarrant sinc public class immut whether collect type immut param collect set list map return true immut fals public static boolean immut object return instanceof immut convert collect immut list copi param sourc collect convert return copi convert immut list public static list immut list convert collect extend sourc return new immut list copi sourc creat immut copi list param list list copi return immut copi public static list immut list copi list list list null return null list empti return collect empti list list size return collect singleton list list get return new immut list copi list creat immut copi properti param properti type properti copi return immut copi public static type properti immut type properti type properti properti properti null return null return new immut type properti properti wrap array immut list copi involv param param array array wrap return list contain array public static list immut list wrap array return new immut list copi array creat new immut list contain union combin entri list param list contain first element new list param list contain successor element new list return new immut merg copi list list public static list immut list merg list extend list list extend list return new immut list copi list list public static immut list copi immut list add list list int posit element copi new object list size int posit copi list get copi posit element int posit list size copi list get return new immut list copi copi public static immut list copi immut list replac list list int posit element copi new object list size int posit copi list get copi posit element int posit list size copi list get return new immut list copi copi public static list immut list remov list list int posit copi new object list size int posit copi list get int posit list size copi list get return new immut list copi copi convert collect immut set copi param collect collect convert copi return new immut set contain element collect public static set immut set convert collect extend collect return immut set wrap new hash set collect wrap set immut set copi involv param set set wrap return immut set wrapper deleg origin set public static set immut set wrap set extend set return new immut set wrapper set creat immut copi specifi set param set set copi return immut set copi public static set immut set copi set set set null return null set empti return collect empti set set size return collect singleton set iter next set extend copi object duplic duplic set set copi null set use collect copi ctor copi attempt copi constructor set collect class copi null copi new hash set set return new immut set wrapper copi wrap map immut map copi involv param map map wrap return immut map wrapper deleg origin map public static map immut map wrap map extend extend map return new immut map wrapper map creat immut copi specifi map param map map copi return immut map copi public static map immut map copi map map map null return null map empti return collect empti map map size map entri map entri set iter next return collect singleton map get key get valu map extend extend copi object duplic duplic map map copi null copi attempt copi constructor map map class copi null copi new hash map map return new immut map wrapper copi creat new immut copi specifi collect param collect collect copi return immut copi public static collect immut collect copi collect collect collect null return null collect empti return collect empti set collect size return collect singleton collect iter next collect extend copi object duplic duplic collect collect copi null copi attempt copi constructor collect collect class copi null copi new array list collect return new immut collect wrapper copi wrap collect immut collect copi involv param collect collect wrap return immut collect wrapper deleg origin collect public static collect immut collect wrap collect extend collect return new immut collect wrapper collect suppress warn uncheck privat static attempt copi constructor sourc class super clazz tri return sourc get class get constructor clazz new instanc sourc catch except e return null wrap link map entri immut link map entri copi involv param entri map wrap return immut link map entri wrapper deleg origin map public static map entri immut entri map entri entri return new immut entri entri wrap key valu immut link map entri copi involv param key key wrap param valu valu wrap return immut link map entri wrapper deleg origin map public static map entri immut entri key valu return new immut entri key valu public interfac immut immut wrapper type implement collect unmodifi sinc simpl detect class name depend privat static class immut iter wrapper implement iter privat iter extend iter public immut iter wrapper iter extend iter iter iter overrid public boolean next return iter next overrid public next return iter next overrid public void remov throw new unsupport oper except privat static class immut collect wrapper implement collect serializ immut privat static final long serial version collect extend collect public immut collect wrapper collect extend collect collect collect overrid public boolean add throw new unsupport oper except overrid public boolean add collect extend c throw new unsupport oper except overrid public void clear throw new unsupport oper except overrid public boolean contain object return collect contain overrid public boolean contain collect c return collect contain c overrid public boolean equal object return collect equal overrid public int hash code return collect hash code overrid public boolean empti return collect empti overrid public iter iter return new immut iter wrapper collect iter overrid public boolean remov object throw new unsupport oper except overrid public boolean remov collect c throw new unsupport oper except overrid public boolean retain collect c throw new unsupport oper except overrid public int size return collect size overrid public object array return collect array overrid public array return collect array overrid public string string return collect string immut version map entri travers immut collect privat static class immut entri implement entri immut privat key privat valu privat int hash immut entri entri extend extend entri key entri get key valu entri get valu hash entri hash code immut entri key valu key key valu valu hash object hash code key object hash code valu overrid public get key return key overrid public get valu return valu overrid public set valu valu throw new unsupport oper except privat static boolean eq object object return null equal overrid suppress warn uncheck public boolean equal object instanceof entri return fals entri entri entri return eq entri get key key eq entri get valu valu overrid public int hash code return hash overrid public string string return get key get valu privat static class immut set wrapper extend immut collect wrapper implement set serializ immut privat static final long serial version public immut set wrapper set extend set super set privat static class immut revers order set wrapper extend immut collect wrapper implement revers order set serializ immut privat static final long serial version public immut revers order set wrapper set extend set super set overrid public iter revers iter return new immut iter wrapper revers order set extend collect revers iter privat static class immut entri set wrapper extend immut set wrapper entri privat static final long serial version suppress warn uncheck public immut entri set wrapper set extend entri extend extend set super set entri set overrid public object array object array new object collect size int entri entri array entri return array overrid suppress warn uncheck public array array int size collect size array length size array array new instanc array get class get compon type size int object result array entri entri result entri return array overrid public iter entri iter return new immut iter wrapper entri collect iter overrid public entri next return new immut entri super next public static class immut set wrapper extern extend abstract extern set overrid public void write object object output output set set throw except marshal util marshal collect set output overrid public set read object object input input throw except class find except set object set marshal util unmarshal collect input hash set new return immut immut set wrap set overrid public integ get id return id overrid suppress warn uncheck public set class extend set get type class return util set immut set wrapper class privat static class immut map wrapper implement map serializ immut privat static final long serial version privat map extend extend map public immut map wrapper map extend extend map map map overrid public void clear throw new unsupport oper except overrid public boolean contain key object key return map contain key key overrid public boolean contain valu object valu return map contain valu valu overrid public set entri entri set return new immut entri set wrapper map entri set overrid public boolean equal object return map equal overrid public get object key return map get key overrid public int hash code return map hash code overrid public boolean empti return map empti overrid public set key set return new immut set wrapper map key set overrid public put key valu throw new unsupport oper except overrid public void put map extend extend throw new unsupport oper except overrid public remov object key throw new unsupport oper except overrid public int size return map size overrid public collect valu return new immut collect wrapper map valu overrid public string string return map string public static class immut map wrapper extern extend abstract extern map overrid public void write object object output output map map throw except marshal util marshal map map output overrid public map read object object input input throw except class find except return immut immut map wrap marshal util unmarshal map input hash map new overrid public integ get id return id overrid suppress warn uncheck public set class extend map get type class return util set immut map wrapper class privat static class immut type properti extend type properti immut type properti type properti properti super properti null properti empti map entri object object e properti entri set super put e get key e get valu overrid public synchron void clear throw new unsupport oper except overrid public set java util map entri object object entri set return new immut entri set wrapper super entri set overrid public set object key set return new immut set wrapper super key set overrid public synchron void load input stream stream throw except throw new unsupport oper except overrid public synchron void load reader reader throw except throw new unsupport oper except overrid public synchron void load input stream throw except throw new unsupport oper except overrid public synchron object put object key object valu throw new unsupport oper except overrid public synchron void put map throw new unsupport oper except overrid public synchron object remov object key throw new unsupport oper except overrid public synchron type properti set properti string key string valu throw new unsupport oper except overrid public set string string properti name return new immut set wrapper super string properti name overrid public collect object valu return new immut collect wrapper super valu 
packag org persist sif import java io file import java io except import java io random access file import java nio byte buffer import java nio channel file channel import java util array list import java util list import java util map import java util tree map import java util concurr block queue import java util concurr count latch import java util concurr atom atom long import java util concurr lock lock import java util concurr lock read write lock import java util concurr lock reentrant read write lock import org util time servic import org util log log import org util log log factori keep entri posit persist file consist coupl segment one modulo rang key hashcod accord data contain key equival configur write index segment perform singl thread multipl segment spread load author radim vansa lt rvansa redhat com gt class index privat static final log log log factori get log index class privat static final boolean trace log trace enabl privat static final int x privat static final int x protect static final int privat final string index dir privat final file provid file provid privat final compactor compactor privat final int min node size privat final int max node size privat final read write lock lock new reentrant read write lock privat final segment segment privat final time servic time servic public index file provid file provid string index dir int segment int min node size int max node size index queue index queue temporari tabl temporari tabl compactor compactor time servic time servic throw except file provid file provid compactor compactor time servic time servic index dir index dir min node size min node size max node size max node size new file index dir mkdir segment new segment segment int segment segment new segment index queue sub queue temporari tabl return true index load well persist state public boolean load int segment length segment load return fals return true public void start int segment length segment start get record null expir param key param serial key return throw except public entri record get record object key byte serial key throw except int segment key hash code integ segment length lock read lock lock tri return index node appli leaf segment segment serial key segment segment root read lock index node read oper final lock read lock unlock get posit null expir param key param serial key return throw except public entri posit get posit object key byte serial key throw except int segment key hash code integ segment length lock read lock lock tri return index node appli leaf segment segment serial key segment segment root read lock index node read oper final lock read lock unlock get posit num record without expir param key param serial key return throw except public entri info get info object key byte serial key throw except int segment key hash code integ segment length lock read lock lock tri return index node appli leaf segment segment serial key segment segment root read lock index node read oper final lock read lock unlock public void clear throw except lock write lock lock tri array list count latch paus new array list count latch segment seg segment paus add seg paus clear count latch paus paus paus count catch interrupt except e throw new runtim except e final lock write lock unlock public void stop oper throw interrupt except segment seg segment seg stop oper public long size throw interrupt except long size segment seg segment size seg size return size class segment extend thread privat final block queue index request index queue privat final temporari tabl temporari tabl privat final tree map integ list index space free block new tree map integ list index space privat final read write lock root lock new reentrant read write lock privat final file index file file privat final boolean load privat file channel index file privat long index file size privat atom long size new atom long privat volatil index node root privat segment int id block queue index request index queue temporari tabl temporari tabl throw except super index updat id set daemon true index queue index queue temporari tabl temporari tabl index file file new file index dir index id index file new random access file index file file rw get channel index file posit byte buffer buffer byte buffer alloc index file size read index file buffer buffer get int long root offset buffer get long short root occupi buffer get short long free block offset buffer get long size set buffer get long root new index node root offset root occupi load free block free block offset index file size free block offset load true els index file truncat root index node empti leav load fals reserv space shutdown index file size buffer put int buffer posit buffer limit index file posit write index file buffer privat void write file channel index file byte buffer buffer throw except int write index file write buffer write throw new illeg state except write index file buffer posit buffer limit privat boolean read file channel index file byte buffer buffer throw except int read index file read buffer read return fals buffer posit buffer limit return true overrid public void run tri int counter true counter log debug queue size index queue size final index request request index queue take trace log trace index request index node overwrit hook overwrit hook index node record chang record chang switch request get type case index request clear clear index queue poll null clear set result fals count latch paus new count latch request set result paus log debug wait clear paus await continu case last segment process delet request actual delet file request count file provid delet file request get file compactor releas stat request get file continu case assert index queue poll null shutdown return case request set result size get continu case record chang index node record chang overwrit hook new index node overwrit hook overrid public boolean check int old file int old offset return old file request get prev file old offset request get prev offset overrid public void set overwritten boolean overwritten int prev file int prev offset overwritten request get offset request get prev offset size decrement get break case record chang index node record chang overwrit hook new index node overwrit hook overrid public void set overwritten boolean overwritten int prev file int prev offset request set result overwritten request get offset prev offset size increment get els request get offset prev offset size decrement get break case record chang index node record chang overwrit hook new index node overwrit hook overrid public void set overwritten boolean overwritten int prev file int prev offset request get prev file prev file request get prev offset prev offset size decrement get break case record chang index node record chang overwrit hook index node overwrit hook break default throw new illeg argument except request string tri index node set posit root request get serial key request get file request get offset request get size overwrit hook record chang catch illeg state except e throw new illeg state except request string e temporari tabl remov condit request get key request get file request get offset catch except e throw new runtim except e catch interrupt except e throw new runtim except e catch throwabl e log error error index thread e final tri index file close catch except e log error fail close delet index e privat void shutdown throw except index space root space alloc index space root length root store root space index file posit index file size byte buffer buffer byte buffer alloc buffer put int free block size write index file buffer map entri integ list index space entri free block entri set list index space list entri get valu int requir size list size buffer buffer capac requir size byte buffer alloc requir size buffer buffer posit buffer limit requir size buffer put int entri get key buffer put int list size index space space list buffer put long space offset buffer put short short space length buffer flip write index file buffer int header without magic buffer buffer capac header without magic byte buffer alloc header without magic buffer buffer put long root space offset buffer put short short root space length buffer put long index file size buffer put long size get buffer posit buffer limit header without magic index file posit write index file buffer buffer put int buffer posit buffer limit index file posit write index file buffer privat void load free block long free block offset throw except index file posit free block offset byte buffer buffer byte buffer alloc buffer limit read index file buffer throw new except read free block list int num list buffer get int int num list buffer posit buffer limit read index file buffer throw new except read free block list int block length buffer get int int list size buffer get int int requir size list size buffer buffer capac requir size byte buffer alloc requir size buffer buffer posit buffer limit requir size read index file buffer throw new except read free block list buffer flip array list index space list new array list list size int j j list size j list add new index space buffer get long buffer get short free block put block length list public count latch paus clear throw interrupt except except index request clear index request clear request index queue put clear count latch paus count latch clear get result root index node empti leav index file truncat index file size free block clear size set return paus public long size throw interrupt except index request size request index request size request index queue put size request return long size request get result public file channel get index file return index file public file provid get file provid return file provid public compactor get compactor return compactor public index node get root call root lock lock return root public void set root index node root root lock write lock lock root root root lock write lock unlock public int get max node size return max node size public int get min node size return min node size access updat thread index space alloc index space int length map entri integ list index space entri free block ceil entri length entri null entri get valu empti long old size index file size index file size length return new index space old size length els return entri get valu remov entri get valu size access updat thread void free index space long offset int length length throw new illeg argument except offset offset length length fragment memori bound offset length index file size list index space list free block get length list null free block put length list new array list index space list add new index space offset length els index file size length tri index file truncat index file size catch except e log warn truncat index e public lock root read lock return root lock read lock public void stop oper throw interrupt except index queue put index request stop request join public time servic get time servic return time servic offset length pair static class index space protect long offset protect int length public index space long offset int length offset offset length length overrid public boolean equal object return true null instanceof index space return fals index space inner node index space length inner node length return fals offset inner node offset return fals return true overrid public int hash code int result int offset offset result result length return result overrid public string string return string format offset offset length length 
packag org configur cach import java util hash set import java util set import org common configur abstract type properti configur import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut initi import org common configur attribut attribut set import org common configur attribut collect attribut copier import org common util type properti configur index entri cach search public class index configur extend abstract type properti configur public static final attribut definit index attribut definit builder index index immut build public static final attribut definit boolean attribut definit builder auto config fals immut build public static final attribut definit set class attribut definit builder index entiti null class set class class set class copier collect attribut copier initi new attribut initi set class overrid public set class initi return new hash set immut build static attribut set attribut definit set return new attribut set index configur class abstract type properti configur attribut set privat static final string directori provid legaci name ram replac local heap deprec privat static final string ram privat static final string local heap privat static final string org hibern search store impl directori provid privat final attribut index index privat final attribut boolean auto config privat final attribut set class index entiti public index configur attribut set attribut super attribut index attribut attribut auto config attribut attribut index entiti attribut attribut whether index enabl fals default deprec use link index instead deprec public boolean enabl return index enabl true index chang make local ignor remot chang use index share across cluster prevent redund index updat deprec use link index instead deprec public boolean index local return index local p properti pass directli emb hibern search engin complet date document avail properti refer hibern search refer version use queri p see href http doc jboss org hibern stabl search refer en html singl hibern search overrid public type properti properti overridden replac javadoc return super properti return index mode cach public index index return index get determin autoconfig enabl index configur public boolean auto config return auto config get public set class index entiti return index entiti get public attribut set attribut return attribut check index share current ram base index n allow sort share return fals index ram thu share public boolean index shareabl type properti properti properti boolean ram directori provid fals object obj key properti key set string key string obj key key end string directori implement name string valu properti get key trim equal ignor case directori implement name equal ignor case directori implement name equal directori implement name ram directori provid true els return true return ram directori provid overrid public string string return index configur attribut attribut 
packag org configur cach import static org common configur abstract type properti configur import static org configur cach index configur import static org configur cach index configur import static org configur cach index configur import java util properti import java util set import org common configur builder import org common configur attribut attribut import org common configur attribut attribut set import org common util type properti import org common util util import org configur global global configur import org util log log import org util log log factori configur index entri cach search public class index configur builder extend abstract configur child builder implement builder index configur privat static final log log log factori get log index configur builder class privat final attribut set attribut index configur builder configur builder builder super builder attribut index configur attribut definit set enabl index deprec use link index index instead deprec public index configur builder enabl attribut index index attribut attribut index get index index set index return disabl index deprec use link index index instead deprec public index configur builder disabl attribut attribut set index return enabl disabl index deprec use link index index instead deprec public index configur builder enabl boolean enabl attribut index index attribut attribut index get index enabl index set index els enabl index set index return boolean enabl return attribut attribut get enabl true index chang make local ignor remot chang use index share across cluster prevent redund index updat deprec use link index index instead deprec public index configur builder index local boolean b b attribut attribut set index return boolean index local return attribut attribut get local p defin singl properti use multipl time defin need properti full set overridden link properti properti p p properti pass directli emb hibern search engin complet date document avail properti refer hibern search refer version use queri p see href http doc jboss org hibern stabl search refer en html singl hibern search param key properti key param valu properti valu return code code method chain public index configur builder add properti string key string valu return set properti key valu p defin singl valu use multipl time defin need properti valu full set overridden link properti properti p p properti pass directli emb hibern search engin complet date document avail properti refer hibern search refer version use queri p see href http doc jboss org hibern stabl search refer en html singl hibern search param key properti key param valu properti valu return code code method chain public index configur builder set properti string key object valu type properti properti attribut attribut get properti put key valu attribut attribut set properti return p queri engin reli properti configur p p properti pass directli emb hibern search engin complet date document avail properti refer hibern search refer version use queri p see href http doc jboss org hibern stabl search refer en html singl hibern search param prop properti return code code method chain public index configur builder properti properti prop attribut attribut set type properti type properti prop return indic index mode public index configur builder index index index attribut attribut set index return enabl appli properti default configur base cach type param auto config boolean return code code method chain public index configur builder auto config boolean auto config attribut attribut set auto config return public boolean auto config return attribut attribut get public index configur builder add index entiti class index entiti set class index entiti index entiti index entiti add index entiti attribut attribut set index entiti return set class index entiti return attribut attribut get overrid public void valid enabl index conceptu compat invalid mode cluster cach mode invalid throw log invalid configur index invalid index entiti empti get builder templat anistor take account eventu programmat defin entiti map log index class defin anistor must allow definit index entiti index properti index enabl overrid public void valid global configur global config enabl check queri modul classpath tri string clazz org queri search util load class strict clazz global config class loader catch class find except e throw log invalid configur index without modul overrid public index configur creat type properti type properti attribut attribut get auto config cluster cach mode distribut index overlay appli type properti els index overlay appli type properti attribut attribut set type properti return new index configur attribut protect overrid public index configur builder read index configur templat attribut read templat attribut return overrid public string string return index configur builder attribut attribut 
packag org transact xa recoveri import java io except import java io object input import java io object output import java util collect import java util hash set import java util set import javax transact xa xid import org common marshal abstract extern import org common util small int set import org common util util import org marshal core id import org remot transport address author mircea marku sinc public class doubt tx info impl implement recoveri manag doubt tx info privat xid xid privat long intern id privat small int set statu privat transient set address owner new hash set privat transient boolean local public doubt tx info impl xid xid long intern id integ statu xid xid intern id intern id statu new small int set statu statu set statu public doubt tx info impl xid xid long intern id set integ statu xid xid intern id intern id statu new small int set statu public doubt tx info impl xid xid long intern id xid intern id collect empti set overrid public xid get xid return xid overrid public long get intern id return intern id overrid public set integ get statu return statu overrid public set address get owner return owner public void add statu set integ statu set statu add statu set public void add owner address owner owner add owner overrid public boolean local return local public void set local boolean local local local public static class extern extend abstract extern doubt tx info impl public extern overrid public void write object object output output doubt tx info impl doubt tx info impl throw except output write object doubt tx info impl get xid output write long doubt tx info impl get intern id small int set write output doubt tx info impl statu overrid public doubt tx info impl read object object input input throw except class find except return new doubt tx info impl xid input read object input read long small int set read input overrid public integ get id return id overrid public set class extend doubt tx info impl get type class return util set doubt tx info impl class overrid public boolean equal object return true null get class get class return fals doubt tx info impl doubt tx info impl local local return fals intern id null intern id equal intern id intern id null return fals owner null owner equal owner owner null return fals statu null statu equal statu statu null return fals xid null xid equal xid xid null return fals return true overrid public int hash code int result xid null xid hash code result result intern id null intern id hash code result result statu null statu hash code result result owner null owner hash code result result local return result overrid public string string return get class get simpl name xid xid intern id intern id statu statu owner owner local local 
packag org util concurr lock impl import static java util concurr atom atom refer field updat new updat import static org util concurr complet futur await import java util object import java util queue import java util concurr complet futur import java util concurr concurr hash map import java util concurr concurr link queue import java util concurr concurr map import java util concurr time unit import java util concurr atom atom refer field updat import org util time servic import org util concurr timeout except import org util concurr lock deadlock checker import org util concurr lock deadlock detect except import org util concurr lock extend lock promis import org util concurr lock lock listen import org util concurr lock lock state import org util log log import org util log log factori special lock cach p main differ tradit link java util concurr lock lock allow use object lock owner possibl use link thread lock owner make similar link java util concurr lock lock p addit asynchron interfac link acquir object long time unit acquir lock immedi except free return link extend lock promis promis allow test lock acquir asynchron cancel lock acquisit without block author pedro ruivo sinc public class lock privat static final log log log factori get log lock class privat static final boolean trace log trace enabl privat static final atom refer field updat lock lock place holder new updat lock class lock place holder class current privat static final atom refer field updat lock place holder lock state new updat lock place holder class lock state class lock state privat final queue lock place holder pend request privat final concurr map object lock place holder lock owner privat final runnabl releas runnabl privat time servic time servic privat volatil lock place holder current creat new instanc param time servic link time servic check timeout public lock time servic time servic time servic time servic pend request new concurr link queue lock owner new concurr hash map current null releas runnabl null creat new instanc param time servic link time servic check timeout param releas runnabl link runnabl invok everi time lock releas public lock time servic time servic runnabl releas runnabl time servic time servic pend request new concurr link queue lock owner new concurr hash map current null releas runnabl releas runnabl test purpos public void set time servic time servic time servic time servic null time servic time servic tri acquir lock p invok multipl time owner link extend lock promis return time link releas object invok p lock free immedi acquir otherwis lock owner queue param lock owner lock owner need acquir lock param time timeout valu param time unit timeout unit return link extend lock promis throw null pointer except code lock owner code time unit code null public extend lock promis acquir object lock owner long time time unit time unit object requir non null lock owner lock owner non null object requir non null time unit time unit non null trace log tracef acquir lock timeout lock owner time time unit lock place holder lock place holder lock owner get lock owner lock place holder null trace log tracef lock owner alreadi exist lock place holder return lock place holder lock place holder creat lock info lock owner time time unit lock place holder lock owner put absent lock owner lock place holder null trace log tracef lock owner alreadi exist return trace log tracef creat new one lock place holder pend request add lock place holder tri acquir null return lock place holder tri releas lock hold code lock owner p lock acquir wait time deadlock code lock owner link extend lock promis cancel code lock owner current lock owner lock releas next lock owner avail acquir lock code lock owner never tri acquir lock method noth param lock owner lock owner want releas lock throw null pointer except code lock owner code null public void releas object lock owner object requir non null lock owner lock owner non null trace log tracef releas lock lock owner lock place holder want releas lock owner get lock owner want releas null trace log tracef find lock owner noth releas return final boolean releas want releas set releas trace log tracef releas lock want releas releas lock place holder current lock current current lock want releas tri acquir want releas return current lock owner code null acquir public object get lock owner lock place holder lock place holder current return lock place holder null null lock place holder owner check lock acquir p code fals return valu mean lock free sinc may queue lock owner return code true lock acquir public boolean lock return current null forc deadlock check public void deadlock check deadlock checker deadlock checker deadlock checker null return op lock place holder holder current holder null lock place holder pend pend request pend check deadlock deadlock checker holder owner test lock lock owner p return code true lock owner current lock owner queue param lock owner lock owner test return code true contain lock owner public boolean contain lock owner object lock owner return lock owner contain key lock owner privat void cancel lock place holder cancel trace log tracef releas lock cancel cancel owner lock place holder current lock current current lock cancel tri acquir cancel privat boolean ca releas lock place holder lock place holder return ca lock place holder null privat boolean remov object lock owner return lock owner remov lock owner null privat void trigger releas releas runnabl null releas runnabl run privat boolean ca lock place holder releas lock place holder acquir boolean ca compar set releas acquir trace log tracef lock owner releas acquir ca return ca privat void tri acquir lock place holder releas lock place holder releas releas lock place holder acquir pend request peek trace log tracef tri acquir next queue current acquir current acquir null releas null return els acquir null noth acquir releas current ca releas releas releas null continu meanwhil could new request recheck return ca releas acquir set current lock owner must remov queue pend request remov acquir acquir set acquir trace log tracef success acquir lock acquir return trace log tracef fail acquir invalid state retri acquir oh oh probabl next pend time go retri next queue releas acquir els trace log tracef unabl acquir lock hold thread alreadi set current lock owner return true privat lock place holder creat lock info object lock owner long time time unit time unit return new lock place holder lock owner time servic expect end time time time unit privat class lock place holder implement extend lock promis privat final object owner privat final long timeout privat final complet futur void notifi volatil lock state lock state privat lock place holder object owner long timeout owner owner timeout timeout lock state lock state notifi new complet futur overrid public boolean avail check timeout return lock state lock state overrid public void lock throw interrupt except timeout except lock state current state lock state switch current state case check timeout await notifi time servic remain time timeout time unit time unit break case return acquir case throw new illeg state except lock alreadi releas case cleanup throw new timeout except timeout wait lock case cleanup throw new deadlock detect except dead lock detect default throw new illeg state except unknown lock state current state true overrid public void add listen lock listen listen notifi run invok listen overrid public void cancel lock state state check valid cancel state state lock state current state lock state switch current state case ca state lock state state cancel notifi listen return break case op thread insid critic section case case case return op lock final state default throw new illeg state except unknown lock state current state true overrid public object get requestor return owner overrid public object get owner lock place holder owner current return owner null owner owner null overrid public string string return lock place holder lock state lock state owner owner privat void invok lock listen invok lock state state lock state switch state case throw new illeg state except valid state invok listen case case invok event lock state break case case invok event state break default throw new illeg state except unknown lock state state privat void check valid cancel state lock state state state lock state state lock state throw new illeg argument except lock state state valid cancel privat void check deadlock deadlock checker checker object current owner check timeout check timeout check deadlock check deadlock expens lock state lock state wait lock owner equal current owner need safe checker deadlock detect owner current owner deadlock detect ca state lock state lock state state could chang avail time cancel notifi listen privat boolean set acquir ca state lock state lock state notifi listen return lock state lock state privat boolean set releas lock state state lock state switch state case ca state state lock state cleanup notifi listen return true break case case case ca state state lock state cleanup return true break case return fals default throw new illeg state except unknown lock state state true privat boolean ca state lock state expect lock state updat boolean updat compar set expect updat updat trace log tracef state chang expect updat return updat privat void cleanup remov owner trigger releas privat void check timeout lock state lock state time servic time expir timeout ca state lock state lock state cancel notifi listen privat void notifi listen lock state lock state notifi complet null 
packag org interceptor import java util array list import java util list import org command visit command import org context invoc context import org factori scope scope import org factori scope scope import org interceptor base command interceptor know build manag chain interceptor also charg invok method chain author mircea marku jboss com author galder zamarr sinc deprec sinc use link async interceptor chain instead method ignor interceptor extend link command interceptor scope scope deprec public class interceptor chain privat async interceptor chain async interceptor chain public interceptor chain async interceptor chain async interceptor chain async interceptor chain async interceptor chain insert give interceptor specifi posit chain base index throw illeg argument except posit invalid e g interceptor chain public void add interceptor command interceptor interceptor int posit async interceptor chain add interceptor interceptor posit remov interceptor give postion throw illeg argument except posit invalid e g interceptor chain public void remov interceptor int posit async interceptor chain remov interceptor posit return number interceptor chain public int size return async interceptor chain size return unmofi list interceptor sequenc first chain null empti list return public list command interceptor list array list command interceptor list new array list async interceptor chain get interceptor size async interceptor chain get interceptor ci ci instanceof command interceptor list add command interceptor ci return list remov occur suppli interceptor type chain public void remov interceptor class extend command interceptor clazz async interceptor chain remov interceptor clazz add new interceptor list interceptor give type return true interceptor add e interceptor exist public boolean add interceptor command interceptor add class extend command interceptor interceptor return async interceptor chain add interceptor add interceptor deprec use link add interceptor command interceptor class instead deprec public boolean add interceptor command interceptor add class extend command interceptor interceptor boolean custom return async interceptor chain add interceptor add interceptor add new interceptor list interceptor give type return true interceptor add e interceptor exist public boolean add interceptor command interceptor add class extend command interceptor interceptor return async interceptor chain add interceptor add interceptor replac exist interceptor give type interceptor chain new interceptor instanc pass paramet param replac interceptor interceptor add interceptor chain param replac interceptor type type interceptor swap new one return true interceptor replac public boolean replac interceptor command interceptor replac interceptor class extend command interceptor replac interceptor type return async interceptor chain replac interceptor replac interceptor replac interceptor type append end public void append interceptor command interceptor ci boolean custom async interceptor chain append interceptor ci custom walk command interceptor chain receiv ctx pass p note reus context multipl invoc allow howev two invoc must overlap call code invok ctx command interceptor allow interceptor need invok new command entir chain must first copi invoc context link invoc context clone p public object invok invoc context ctx visit command command return async interceptor chain invok ctx command return first code command interceptor chain sinc like link async interceptor deprec public command interceptor get first chain return async interceptor chain find interceptor extend command interceptor class mainli use unit test replac interceptor chain start point pass param interceptor interceptor use first interceptor chain public void set first chain command interceptor interceptor add interceptor interceptor return interceptor extend give command interceptor public list command interceptor get interceptor extend class extend command interceptor interceptor class array list command interceptor list new array list async interceptor chain get interceptor size async interceptor chain get interceptor ci interceptor class instanc ci list add command interceptor ci return list return interceptor fulli qualifi name class equal suppli class name public list command interceptor get interceptor class class clazz array list command interceptor list new array list async interceptor chain get interceptor size async interceptor chain get interceptor ci clazz ci get class list add command interceptor ci return list check whether chain contain suppli interceptor instanc public boolean contain instanc command interceptor interceptor return async interceptor chain contain instanc interceptor public boolean contain interceptor type class extend command interceptor interceptor type return async interceptor chain contain interceptor type interceptor type public boolean contain interceptor type class extend command interceptor interceptor type boolean also match sub class return async interceptor chain contain interceptor type interceptor type also match sub class 
packag org factori import java util list import org common cach configur except import org common cach except import org configur cach cach mode import org configur cach compat mode configur import org configur cach configur import org configur cach configur import org configur cach custom interceptor configur import org configur cach interceptor configur import org configur cach store configur import org factori annot default factori import org interceptor async interceptor import org interceptor async interceptor chain import org interceptor interceptor chain import org interceptor distribut distribut bulk interceptor import org interceptor distribut last chanc interceptor import org interceptor distribut non tx interceptor import org interceptor distribut tx interceptor import org interceptor distribut non tx distribut interceptor import org interceptor distribut scatter distribut interceptor import org interceptor distribut triangl distribut interceptor import org interceptor distribut tx distribut interceptor import org interceptor distribut version distribut interceptor import org interceptor impl async interceptor chain impl import org interceptor impl batch interceptor import org interceptor impl cach loader interceptor import org interceptor impl cach mgmt interceptor import org interceptor impl cach writer interceptor import org interceptor impl call interceptor import org interceptor impl cluster cach loader interceptor import org interceptor impl compat interceptor import org interceptor impl dist cach writer interceptor import org interceptor impl entri wrap interceptor import org interceptor impl group interceptor import org interceptor impl invalid interceptor import org interceptor impl invoc context interceptor import org interceptor impl marshal interceptor import org interceptor impl notif interceptor import org interceptor impl passiv writer interceptor import org interceptor impl prefetch interceptor import org interceptor impl retri entri wrap interceptor import org interceptor impl scatter cach writer interceptor import org interceptor impl transact store interceptor import org interceptor impl tx interceptor import org interceptor impl version entri wrap interceptor import org interceptor lock non transact lock interceptor import org interceptor lock optimist lock interceptor import org interceptor lock pessimist lock interceptor import org interceptor totalord total order distribut interceptor import org interceptor totalord total order interceptor import org interceptor totalord total order state transfer interceptor import org interceptor totalord total order version distribut interceptor import org interceptor totalord total order version entri wrap interceptor import org interceptor xsite non transact backup interceptor import org interceptor xsite optimist backup interceptor import org interceptor xsite pessimist backup interceptor import org partitionhandl partit handl import org partitionhandl impl partit handl interceptor import org statetransf state transfer interceptor import org statetransf transact synchron interceptor import org transact lock mode import org transact transact mode import org util log log import org util log log factori factori class build interceptor chain base cach configur backward compat factori regist link async interceptor chain link interceptor chain initi interceptor author href mailto manik jboss org manik surtani manik jboss org author mircea marku jboss com author marko luksa author pedro ruivo sinc default factori class async interceptor chain class interceptor chain class public class interceptor chain factori extend abstract name cach compon factori implement auto instanti factori privat static final log log log factori get log interceptor chain factori class privat async interceptor creat interceptor async interceptor interceptor class extend async interceptor interceptor type async interceptor chain interceptor compon registri get compon interceptor type chain interceptor null regist interceptor type interceptor chain interceptor interceptor return chain interceptor privat void regist class extend async interceptor clazz async interceptor chain interceptor tri compon registri regist compon chain interceptor clazz catch runtim except e log unabl creat interceptor clazz e throw e public async interceptor chain build interceptor chain transact mode transact mode configur transact transact mode boolean need version awar compon transact mode transact configur tx version configur async interceptor chain interceptor chain new async interceptor chain impl compon registri get compon metadata repo add interceptor chain registri first sinc interceptor may ask add old class new interfac compon registri regist compon interceptor chain async interceptor chain class compon registri regist compon new interceptor chain interceptor chain interceptor chain class boolean invoc batch configur invoc batch enabl boolean total order configur transact transact protocol total order cach mode cach mode configur cluster cach mode cach mode need state transfer interceptor chain append interceptor creat interceptor new distribut bulk interceptor distribut bulk interceptor class fals load ic interceptor first invoc batch interceptor chain append interceptor creat interceptor new batch interceptor batch interceptor class fals interceptor chain append interceptor creat interceptor new invoc context interceptor invoc context interceptor class fals compat mode configur compat configur compat compat enabl interceptor chain append interceptor creat interceptor new compat interceptor compat interceptor class fals add marshal check interceptor situat want figur marshal async store interceptor chain append interceptor creat interceptor new marshal interceptor marshal interceptor class fals load cach manag interceptor next configur jmx statist avail interceptor chain append interceptor creat interceptor new cach mgmt interceptor cach mgmt interceptor class fals load state transfer lock interceptor state transfer lock ensur cach member list date necessari even state transfer disabl cach mode need state transfer total order interceptor chain append interceptor creat interceptor new total order state transfer interceptor total order state transfer interceptor class fals els interceptor chain append interceptor creat interceptor new state transfer interceptor state transfer interceptor class fals transact mode transact interceptor chain append interceptor creat interceptor new transact synchron interceptor transact synchron interceptor class fals configur cluster partit handl split partit handl interceptor chain append interceptor creat interceptor new partit handl interceptor partit handl interceptor class fals load total order interceptor total order interceptor chain append interceptor creat interceptor new total order interceptor total order interceptor class fals load tx interceptor transact mode transact interceptor chain append interceptor creat interceptor new tx interceptor tx interceptor class fals total order protocol n need lock total order cach mode scatter transact mode transact configur transact lock mode lock mode interceptor chain append interceptor creat interceptor new pessimist lock interceptor pessimist lock interceptor class fals els interceptor chain append interceptor creat interceptor new optimist lock interceptor optimist lock interceptor class fals els interceptor chain append interceptor creat interceptor new non transact lock interceptor non transact lock interceptor class fals notif interceptor use prepar commit rollback notif need lock interceptor guarante lock still hold rais notif transact mode transact configur transact notif interceptor chain append interceptor creat interceptor new notif interceptor notif interceptor class fals configur site enabl backup configur site disabl backup transact mode transact mode configur transact lock mode lock mode interceptor chain append interceptor creat interceptor new optimist backup interceptor optimist backup interceptor class fals els interceptor chain append interceptor creat interceptor new pessimist backup interceptor pessimist backup interceptor class fals els interceptor chain append interceptor creat interceptor new non transact backup interceptor non transact backup interceptor class fals need add lock interceptor tx cach wrap interceptor configur cluster l enabl interceptor chain append interceptor creat interceptor new last chanc interceptor last chanc interceptor class fals configur cluster hash group enabl interceptor chain append interceptor creat interceptor new group interceptor group interceptor class fals cach mode scatter interceptor chain append interceptor creat interceptor new prefetch interceptor prefetch interceptor class fals need version awar compon total order interceptor chain append interceptor creat interceptor new total order version entri wrap interceptor total order version entri wrap interceptor class fals els interceptor chain append interceptor creat interceptor new version entri wrap interceptor version entri wrap interceptor class fals els cach mode scatter interceptor chain append interceptor creat interceptor new retri entri wrap interceptor retri entri wrap interceptor class fals els interceptor chain append interceptor creat interceptor new entri wrap interceptor entri wrap interceptor class fals configur persist use store cach mode cluster interceptor chain append interceptor creat interceptor new cluster cach loader interceptor cluster cach loader interceptor class fals els interceptor chain append interceptor creat interceptor new cach loader interceptor cach loader interceptor class fals configur persist passiv interceptor chain append interceptor creat interceptor new passiv writer interceptor passiv writer interceptor class fals els boolean transact store configur persist store stream match store configur transact transact store transact mode transact interceptor chain append interceptor creat interceptor new transact store interceptor transact store interceptor class fals switch cach mode case case case case interceptor chain append interceptor creat interceptor new dist cach writer interceptor dist cach writer interceptor class fals break case interceptor chain append interceptor creat interceptor new scatter cach writer interceptor scatter cach writer interceptor class fals break default interceptor chain append interceptor creat interceptor new cach writer interceptor cach writer interceptor class fals break configur cluster l enabl transact mode transact interceptor chain append interceptor creat interceptor new tx interceptor tx interceptor class fals els interceptor chain append interceptor creat interceptor new non tx interceptor non tx interceptor class fals switch cach mode case case interceptor chain append interceptor creat interceptor new invalid interceptor invalid interceptor class fals break case case need version awar compon total order interceptor chain append interceptor creat interceptor new total order version distribut interceptor total order version distribut interceptor class fals els interceptor chain append interceptor creat interceptor new version distribut interceptor version distribut interceptor class fals break case case transact mode transact total order interceptor chain append interceptor creat interceptor new total order distribut interceptor total order distribut interceptor class fals els interceptor chain append interceptor creat interceptor new tx distribut interceptor tx distribut interceptor class fals els cach mode distribut configur emb mode global configur interceptor chain append interceptor creat interceptor new triangl distribut interceptor triangl distribut interceptor class fals els interceptor chain append interceptor creat interceptor new non tx distribut interceptor non tx distribut interceptor class fals break case interceptor chain append interceptor creat interceptor new scatter distribut interceptor scatter distribut interceptor class fals break case noth async interceptor call interceptor creat interceptor new call interceptor call interceptor class interceptor chain append interceptor call interceptor fals log trace finish build default interceptor chain build custom interceptor interceptor chain configur custom interceptor return interceptor chain privat void build custom interceptor async interceptor chain interceptor chain custom interceptor configur custom interceptor interceptor configur config custom interceptor interceptor interceptor chain contain interceptor type config async interceptor get class continu async interceptor custom interceptor config async interceptor secur action appli properti custom interceptor config properti regist custom interceptor get class custom interceptor config first interceptor chain add interceptor custom interceptor els config last interceptor chain add interceptor custom interceptor call interceptor class els config index interceptor chain add interceptor custom interceptor config index els config null boolean add interceptor chain add interceptor custom interceptor config add throw new cach configur except add class config interceptor exist default chain els config null boolean add interceptor chain add interceptor custom interceptor config add throw new cach configur except add class config interceptor exist default chain els config posit interceptor configur posit interceptor chain add interceptor custom interceptor privat boolean async store list store configur loader config configur persist store store configur loader config loader config loader config async enabl return true return fals overrid public construct class compon type tri async interceptor chain async interceptor chain build interceptor chain compon type interceptor chain class return compon type cast compon registri get compon interceptor chain class els return compon type cast async interceptor chain catch cach except ce throw ce catch except e throw new cach configur except unabl build interceptor chain e public static interceptor chain factori get instanc compon registri compon registri configur configur interceptor chain factori icf new interceptor chain factori icf compon registri compon registri icf configur configur return icf 
packag org stream impl intop import java io except import java io object input import java io object output import java util compar import java util set import java util function consum import java util function doubl consum import java util function doubl function import java util function doubl predic import java util function doubl int function import java util function doubl long function import java util function doubl unari oper import java util function function import java util function int consum import java util function int function import java util function int predic import java util function int doubl function import java util function int long function import java util function int unari oper import java util function long consum import java util function long function import java util function long predic import java util function long doubl function import java util function long int function import java util function long unari oper import java util function predic import java util function doubl function import java util function int function import java util function long function import org common io unsign numer import org common marshal advanc extern import org common util util import org marshal core id import org stream impl intop object distinct oper import org stream impl intop object filter oper import org stream impl intop object flat map oper import org stream impl intop object flat map doubl oper import org stream impl intop object flat map int oper import org stream impl intop object flat map long oper import org stream impl intop object limit oper import org stream impl intop object map oper import org stream impl intop object map doubl oper import org stream impl intop object map int oper import org stream impl intop object map long oper import org stream impl intop object peek oper import org stream impl intop object sort compar oper import org stream impl intop object sort oper import org stream impl intop primit box doubl oper import org stream impl intop primit distinct doubl oper import org stream impl intop primit filter doubl oper import org stream impl intop primit flat map doubl oper import org stream impl intop primit limit doubl oper import org stream impl intop primit map doubl oper import org stream impl intop primit map int doubl oper import org stream impl intop primit map long doubl oper import org stream impl intop primit map obj doubl oper import org stream impl intop primit peek doubl oper import org stream impl intop primit sort doubl oper import org stream impl intop primit doubl int oper import org stream impl intop primit long int oper import org stream impl intop primit box int oper import org stream impl intop primit distinct int oper import org stream impl intop primit filter int oper import org stream impl intop primit flat map int oper import org stream impl intop primit limit int oper import org stream impl intop primit map int oper import org stream impl intop primit map doubl int oper import org stream impl intop primit map long int oper import org stream impl intop primit map obj int oper import org stream impl intop primit peek int oper import org stream impl intop primit sort int oper import org stream impl intop primit l doubl long oper import org stream impl intop primit l box long oper import org stream impl intop primit l distinct long oper import org stream impl intop primit l filter long oper import org stream impl intop primit l flat map long oper import org stream impl intop primit l limit long oper import org stream impl intop primit l map long oper import org stream impl intop primit l map doubl long oper import org stream impl intop primit l map int long oper import org stream impl intop primit l map obj long oper import org stream impl intop primit l peek long oper import org stream impl intop primit l sort long oper import org jboss marshal util ident int map extern use serial variou intermedi oper public class intermedi oper extern implement advanc extern intermedi oper object stream intermedi oper privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int doubl stream intermedi oper privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int int stream intermedi oper privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int long stream intermedi oper privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat final ident int map class extend intermedi oper oper new ident int map public intermedi oper extern oper put distinct oper class oper put filter oper class oper put flat map oper class oper put flat map doubl oper class oper put flat map int oper class oper put flat map long oper class oper put limit oper class oper put map oper class oper put map doubl oper class oper put map int oper class oper put map long oper class oper put peek oper class oper put sort compar oper class oper put sort oper class oper put box doubl oper class oper put distinct doubl oper class oper put filter doubl oper class oper put flat map doubl oper class oper put limit doubl oper class oper put map doubl oper class oper put map int doubl oper class oper put map long doubl oper class oper put map obj doubl oper class oper put peek doubl oper class oper put sort doubl oper class oper put doubl int oper class oper put long int oper class oper put box int oper class oper put distinct int oper class oper put filter int oper class oper put flat map int oper class oper put limit int oper class oper put map int oper class oper put map doubl int oper class oper put map long int oper class oper put map obj int oper class oper put peek int oper class oper put sort int oper class oper put doubl long oper class oper put box long oper class oper put distinct long oper class oper put filter long oper class oper put flat map long oper class oper put limit long oper class oper put map long oper class oper put map doubl long oper class oper put map int long oper class oper put map obj long oper class oper put peek long oper class oper put sort long oper class overrid public set class extend intermedi oper get type class return util class extend intermedi oper set distinct oper class filter oper class flat map oper class flat map doubl oper class flat map int oper class flat map long oper class limit oper class map oper class map doubl oper class map int oper class map long oper class peek oper class sort compar oper class sort oper class box doubl oper class distinct doubl oper class filter doubl oper class flat map doubl oper class limit doubl oper class map doubl oper class map int doubl oper class map long doubl oper class map doubl oper class peek doubl oper class sort doubl oper class doubl int oper class long int oper class box int oper class distinct oper class filter int oper class flat map int oper class limit int oper class map int oper class map doubl int oper class map long int oper class map obj int oper class peek int oper class sort int oper class doubl long oper class box long oper class distinct oper class filter long oper class flat map long oper class limit oper class map long oper class map doubl long oper class map int long oper class map obj long oper class peek long oper class sort long oper class overrid public integ get id return id overrid public void write object object output output intermedi oper object throw except int number oper get object get class output write byte number switch number case output write object filter oper object get predic break case output write object flat map oper object get function break case output write object flat map doubl oper object get function break case output write object flat map int oper object get function break case output write object flat map long oper object get function break case unsign numer write unsign long output limit oper object get limit break case output write object map oper object get function break case output write object map doubl oper object get function break case output write object map int oper object get function break case output write object map long oper object get function break case output write object peek oper object get consum break case output write object sort compar oper object get compar break case output write object filter doubl oper object get predic break case output write object flat map doubl oper object get function break case unsign numer write unsign long output limit doubl oper object get limit break case output write object map doubl oper object get oper break case output write object map int doubl oper object get function break case output write object map long doubl oper object get function break case output write object map obj doubl oper object get function break case output write object peek doubl oper object get consum break case output write object filter int oper object get predic break case output write object flat map int oper object get function break case unsign numer write unsign long output limit int oper object get limit break case output write object map int oper object get oper break case output write object map doubl int oper object get function break case output write object map long int oper object get function break case output write object map obj int oper object get function break case output write object peek int oper object get consum break case output write object filter long oper object get predic break case output write object flat map long oper object get function break case unsign numer write unsign long output limit long oper object get limit break case output write object map long oper object get oper break case output write object map doubl long oper object get function break case output write object map int long oper object get function break case output write object map obj long oper object get function break case output write object peek long oper object get consum break overrid public intermedi oper read object object input input throw except class find except int number input read unsign byte switch number case return distinct oper get instanc case return new filter oper predic input read object case return new flat map oper function input read object case return new flat map doubl oper function input read object case return new flat map int oper function input read object case return new flat map long oper function input read object case return new limit oper unsign numer read unsign long input case return new map oper function input read object case return new map doubl oper doubl function input read object case return new map int oper int function input read object case return new map long oper long function input read object case return new peek oper consum input read object case return new sort compar oper compar input read object case return sort oper get instanc case return box doubl oper get instanc case return distinct doubl oper get instanc case return new filter doubl oper doubl predic input read object case return new flat map doubl oper doubl function input read object case return new limit doubl oper unsign numer read unsign long input case return new map doubl oper doubl unari oper input read object case return new map int doubl oper doubl int function input read object case return new map long doubl oper doubl long function input read object case return new map obj doubl oper doubl function input read object case return new peek doubl oper doubl consum input read object case return sort doubl oper get instanc case return doubl int oper get instanc case return long int oper get instanc case return box int oper get instanc case return distinct int oper get instanc case return new filter int oper int predic input read object case return new flat map int oper int function input read object case return new limit int oper unsign numer read unsign long input case return new map int oper int unari oper input read object case return new map doubl int oper int doubl function input read object case return new map long int oper int long function input read object case return new map obj int oper int function input read object case return new peek int oper int consum input read object case return sort int oper get instanc case return doubl long oper get instanc case return box long oper get instanc case return distinct long oper get instanc case return new filter long oper long predic input read object case return new flat map long oper long function input read object case return new limit long oper unsign numer read unsign long input case return new map long oper long unari oper input read object case return new map doubl long oper long doubl function input read object case return new map int long oper long int function input read object case return new map obj long oper long function input read object case return new peek long oper long consum input read object case return sort long oper get instanc default throw new illeg argument except find invalid number number 
packag org factori import org advanc cach import org cach import org cach impl cach impl import org cach impl encod cach import org cach impl simpl cach impl import org cach impl stat collect cach import org common cach configur except import org common dataconvers binari encod import org common dataconvers byte array wrapper import org common dataconvers compat mode encod import org common dataconvers encod import org common dataconvers global marshal encod import org common dataconvers ident encod import org common marshal stream marshal import org configur cach configur import org configur cach configur import org configur cach statist configur import org configur cach storag type import org configur global global configur import org encod datum convers import org evict activ manag import org evict passiv manag import org evict impl activ manag stub import org evict impl passiv manag stub import org expir expir manag import org jmx cach jmx registr import org manag default cach manag import org notif cachelisten cluster cluster event manag import org notif cachelisten cluster impl cluster event manag stub import org persist manag persist manag import org persist manag persist manag stub import org stat impl stat collector import org transact xa recoveri recoveri admin oper import org upgrad roll upgrad manag import org xsite site admin oper intern factori construct cach use link default cach manag intend public p special instanc link abstract compon factori contain bootstrap inform link compon registri p author href mailto manik jboss org manik surtani manik jboss org sinc public class intern cach factori extend abstract name cach compon factori implement clone configur pass use param configur use param global compon registri global compon registri attach cach param cach name name cach return cach throw cach configur except problem cfg public cach creat cach configur configur global compon registri global compon registri string cach name throw cach configur except tri configur simpl cach return creat simpl cach configur global compon registri cach name els return creat wire configur global compon registri cach name catch cach configur except ce throw ce catch runtim except throw catch except e throw new runtim except e privat class extend encod get encod class global configur global configur configur configur boolean compat enabl configur compat enabl boolean emb mode configur emb mode global configur compat enabl emb mode return compat mode encod class storag type storag type configur memori storag type storag type storag type return binari encod class emb mode storag type storag type return global marshal encod class return ident encod class protect advanc cach creat wire configur configur global compon registri global compon registri string cach name throw except class extend encod encod class get encod class global compon registri get global configur configur datum convers key datum convers new datum convers encod class byte array wrapper class data convers valu datum convers new datum convers encod class byte array wrapper class stream marshal marshal global compon registri get creat compon stream marshal class advanc cach cach new cach impl cach name cach new encod cach cach key data convers valu datum convers bootstrap cach name cach configur global compon registri marshal marshal null compon registri wire depend marshal return cach privat advanc cach creat simpl cach configur configur global compon registri global compon registri string cach name advanc cach cach class extend encod encod class get encod class global compon registri get global configur configur statist configur jmx statist configur jmx statist boolean statist avail jmx statist null jmx statist avail datum convers key datum convers new datum convers encod class byte array wrapper class data convers valu datum convers new datum convers encod class byte array wrapper class statist avail cach new stat collect cach cach name key data convers valu datum convers els cach new simpl cach impl cach name key data convers valu data convers configur configur cach new encod cach cach key data convers valu data convers compon registri new compon registri cach name configur cach global compon registri global compon registri get class loader overrid protect void bootstrap compon statist avail regist compon new stat collector factori stat collector factori class regist compon new cluster event manag stub cluster event manag class regist compon new passiv manag stub passiv manag class regist compon new activ manag stub activ manag class regist compon new persist manag stub persist manag class overrid public void cach compon get creat compon expir manag class compon registri regist compon new cach jmx registr cach jmx registr class get name true compon registri regist compon new roll upgrad manag roll upgrad manag class get name true compon registri regist compon cach cach class get name true return cach bootstrap factori configur compon registri privat void bootstrap string cach name advanc cach cach configur configur global compon registri global compon registri stream marshal marshal configur configur inject bootstrap stuff compon registri new compon registri cach name configur cach global compon registri global compon registri get class loader bootstrap realli happen regist cach compon registri caus compon registri look cach inject method construct variou compon depend turn compon registri regist compon cach cach class get name true compon registri regist compon new cach jmx registr cach jmx registr class get name true configur transact recoveri enabl compon registri regist compon new recoveri admin oper recoveri admin oper class get name true configur site enabl backup compon registri regist compon new site admin oper site admin oper class get name true roll upgrad manag alway add regist compon registri regist compon new roll upgrad manag roll upgrad manag class get name true overrid public construct class compon type throw new unsupport oper except never invok bootstrap factori 
packag org registri impl import java lang invok method handl import java util enum set import java util set import java util concurr concurr map import org cach import org common util collect factori import org common util concurr concurr hash set import org configur cach configur import org configur cach configur builder import org configur global global configur import org factori annot inject import org manag emb cach manag import org registri intern cach registri import org util log log import org util log log factori intern cach registri impl author tristan tarrant sinc public class intern cach registri impl implement intern cach registri privat static final log log log factori get log method handl lookup lookup class privat emb cach manag cach manag privat final concurr map string enum set flag intern cach collect factori make bound concurr map privat final set string privat cach new concurr hash set inject public void init emb cach manag cach manag cach manag cach manag overrid public void regist intern cach string name configur configur regist intern cach name configur enum set none flag class synchron prevent user regist configur time overrid public synchron void regist intern cach string name configur configur enum set flag flag boolean config present cach manag get cach configur name null check alreadi defin current n support exist user defin configur flag contain flag intern cach contain key name config present throw log exist config intern cach name n redefin config present return configur builder builder new configur builder read configur builder jmx statist disabl intern cach must includ stat count global configur global configur cach manag get cach manag configur flag contain flag global configur global state enabl builder persist add singl file store locat global configur global state persist locat purg startup fals preload true fetch persist state true secur action defin configur cach manag name builder build intern cach put name flag flag contain flag privat cach add name overrid public synchron void unregist intern cach string name intern cach name cach object object cach cach manag get cach name fals cach null cach stop intern cach remov name privat cach remov name secur action undefin configur cach manag name overrid public boolean intern cach string name return intern cach contain key name overrid public boolean privat cach string name return privat cach contain name overrid public set string get intern cach name return intern cach key set overrid public void filter privat cach set string name name remov privat cach overrid public boolean intern cach flag string name flag flag enum set flag flag intern cach get name return flag null flag contain flag 
packag org contain import org contain entri cach entri import org contain entri immort cach entri import org contain entri immort cach valu import org contain entri intern cach entri import org contain entri intern cach valu import org contain entri intern cach entri import org contain entri mortal cach entri import org contain entri mortal cach valu import org contain entri transient cach entri import org contain entri transient cach valu import org contain entri transient mortal cach entri import org contain entri transient mortal cach valu import org contain entri metadata metadata intern cach entri import org contain entri metadata metadata immort cach entri import org contain entri metadata metadata immort cach valu import org contain entri metadata metadata mortal cach entri import org contain entri metadata metadata mortal cach valu import org contain entri metadata metadata transient cach entri import org contain entri metadata metadata transient cach valu import org contain entri metadata metadata transient mortal cach entri import org contain entri metadata metadata transient mortal cach valu import org contain version entri version import org contain version entri version map import org context invoc context import org context impl tx invoc context import org factori annot inject import org metadata emb metadata import org metadata metadata import org util time servic implement gener non version entri author manik surtani sinc public class intern entri factori impl implement intern entri factori privat time servic time servic inject public void inject time servic time servic time servic time servic time servic overrid public intern cach entri creat object key object valu metadata metadata long lifespan metadata null metadata lifespan long max idl metadata null metadata max idl store metadata metadata null lifespan max idl return new immort cach entri key valu lifespan max idl return new mortal cach entri key valu lifespan time servic wall clock time lifespan max idl return new transient cach entri key valu max idl time servic wall clock time return new transient mortal cach entri key valu max idl lifespan time servic wall clock time els lifespan max idl return new metadata immort cach entri key valu metadata lifespan max idl return new metadata mortal cach entri key valu metadata time servic wall clock time lifespan max idl return new metadata transient cach entri key valu metadata time servic wall clock time return new metadata transient mortal cach entri key valu metadata time servic wall clock time overrid public intern cach entri creat cach entri cach entri return creat cach entri get key cach entri get valu cach entri get metadata cach entri get lifespan cach entri get max idl overrid public intern cach entri creat object key object valu intern cach entri cach entri return creat key valu cach entri get metadata cach entri get creat cach entri get lifespan cach entri get last use cach entri get max idl overrid public intern cach entri creat object key object valu entri version version long creat long lifespan long last use long max idl version null lifespan max idl return new immort cach entri key valu lifespan max idl return new mortal cach entri key valu lifespan creat lifespan max idl return new transient cach entri key valu max idl last use return new transient mortal cach entri key valu max idl lifespan last use creat els metadata pass assum emb metadata metadata metadata new emb metadata builder lifespan lifespan max idl max idl version version build lifespan max idl return new metadata immort cach entri key valu metadata lifespan max idl return new metadata mortal cach entri key valu metadata creat lifespan max idl return new metadata transient cach entri key valu metadata last use return new metadata transient mortal cach entri key valu metadata last use creat overrid public intern cach entri creat object key object valu metadata metadata long creat long lifespan long last use long max idl store metadata metadata null lifespan max idl return new immort cach entri key valu lifespan max idl return new mortal cach entri key valu lifespan creat lifespan max idl return new transient cach entri key valu max idl last use return new transient mortal cach entri key valu max idl lifespan last use creat els metadata store take lifespan max idl set long meta lifespan metadata lifespan long meta max idl metadata max idl meta lifespan meta max idl return new metadata immort cach entri key valu metadata meta lifespan meta max idl return new metadata mortal cach entri key valu metadata creat meta lifespan meta max idl return new metadata transient cach entri key valu metadata last use return new metadata transient mortal cach entri key valu metadata last use creat overrid public intern cach valu creat valu cach entri cach entri metadata metadata cach entri get metadata long lifespan cach entri get lifespan long max idl cach entri get max idl store metadata metadata null lifespan max idl return new immort cach valu cach entri get valu lifespan max idl return new mortal cach valu cach entri get valu lifespan lifespan max idl return new transient cach valu cach entri get valu max idl return new transient mortal cach valu cach entri get valu lifespan max idl els lifespan max idl return new metadata immort cach valu cach entri get valu cach entri get metadata lifespan max idl return new metadata mortal cach valu cach entri get valu cach entri get metadata lifespan max idl return new metadata transient cach valu cach entri get valu cach entri get metadata return new metadata transient mortal cach valu cach entri get valu cach entri get metadata overrid need public intern cach entri creat object key object valu metadata metadata long lifespan long max idl store metadata metadata null lifespan max idl return new immort cach entri key valu lifespan max idl return new mortal cach entri key valu lifespan time servic wall clock time lifespan max idl return new transient cach entri key valu max idl time servic wall clock time return new transient mortal cach entri key valu max idl lifespan time servic wall clock time els metadata store take lifespan max idl set long meta lifespan metadata lifespan long meta max idl metadata max idl meta lifespan meta max idl return new metadata immort cach entri key valu metadata meta lifespan meta max idl return new metadata mortal cach entri key valu metadata time servic wall clock time meta lifespan meta max idl return new metadata transient cach entri key valu metadata time servic wall clock time return new metadata transient mortal cach entri key valu metadata time servic wall clock time overrid public intern cach entri updat intern cach entri ice metadata metadata store metadata metadata ice return updat metadata unawar entri ice metadata lifespan metadata max idl els return updat metadata awar entri ice metadata overrid public intern cach entri updat intern cach entri cach entri object valu metadata metadata updat valu metadata atom attempt get copi cach entri also acquir lock avoid return partial appli cach entri updat synchron cach entri cach entri set valu valu intern cach entri origin cach entri cach entri updat cach entri metadata instanc need reincarn mortal cach entri get lifespan origin cach entri cach entri reincarn time servic wall clock time return cach entri overrid public cach entri copi cach entri cach entri synchron cach entri return cach entri clone overrid public intern cach entri creat key valu metadata metadata store metadata metadata null return new intern cach entri key valu metadata lifespan time servic wall clock time els return new metadata intern cach entri key valu metadata time servic wall clock time overrid public intern cach valu get valu ctx creat new object key invoc context ctx cach entri entri ctx lookup entri key entri instanceof intern cach entri return intern cach entri entri intern cach valu els ctx tx scope entri version map updat version tx invoc context ctx get cach transact get updat entri version updat version null entri version version updat version get entri get key version null metadata metadata entri get metadata metadata null metadata pass assum emb metadata metadata new emb metadata builder lifespan entri get lifespan max idl entri get max idl version version build return creat entri get key entri get valu metadata intern cach valu els metadata metadata builder version version build return creat entri get key entri get valu metadata intern cach valu return creat entri intern cach valu privat intern cach entri updat metadata unawar entri intern cach entri ice long lifespan long max idl ice instanceof immort cach entri lifespan max idl return ice els return new transient cach entri ice get key ice get valu max idl time servic wall clock time els max idl return new mortal cach entri ice get key ice get valu lifespan time servic wall clock time els long ctm time servic wall clock time return new transient mortal cach entri ice get key ice get valu max idl lifespan ctm ctm els ice instanceof mortal cach entri lifespan max idl return new immort cach entri ice get key ice get valu els return new transient cach entri ice get key ice get valu max idl time servic wall clock time els max idl mortal cach entri ice set lifespan lifespan return ice els long ctm time servic wall clock time return new transient mortal cach entri ice get key ice get valu max idl lifespan ctm ctm els ice instanceof transient cach entri lifespan max idl return new immort cach entri ice get key ice get valu els transient cach entri ice set max idl max idl return ice els max idl return new mortal cach entri ice get key ice get valu lifespan time servic wall clock time els long ctm time servic wall clock time return new transient mortal cach entri ice get key ice get valu max idl lifespan ctm ctm els ice instanceof transient mortal cach entri lifespan max idl return new immort cach entri ice get key ice get valu els return new transient cach entri ice get key ice get valu max idl time servic wall clock time els max idl return new mortal cach entri ice get key ice get valu lifespan time servic wall clock time els transient mortal cach entri transient mortal entri transient mortal cach entri ice transient mortal entri set lifespan lifespan transient mortal entri set max idl max idl return ice return ice privat intern cach entri updat metadata awar entri intern cach entri ice metadata metadata long lifespan metadata lifespan long max idl metadata max idl ice instanceof metadata immort cach entri lifespan max idl ice set metadata metadata return ice els return new metadata transient cach entri ice get key ice get valu metadata time servic wall clock time els max idl return new metadata mortal cach entri ice get key ice get valu metadata time servic wall clock time els long ctm time servic wall clock time return new metadata transient mortal cach entri ice get key ice get valu metadata ctm ctm els ice instanceof metadata mortal cach entri lifespan max idl return new metadata immort cach entri ice get key ice get valu metadata els return new metadata transient cach entri ice get key ice get valu metadata time servic wall clock time els max idl ice set metadata metadata return ice els long ctm time servic wall clock time return new metadata transient mortal cach entri ice get key ice get valu metadata ctm ctm els ice instanceof metadata transient cach entri lifespan max idl return new metadata immort cach entri ice get key ice get valu metadata els ice set metadata metadata return ice els max idl return new metadata mortal cach entri ice get key ice get valu metadata time servic wall clock time els long ctm time servic wall clock time return new metadata transient mortal cach entri ice get key ice get valu metadata ctm ctm els ice instanceof metadata transient mortal cach entri lifespan max idl return new metadata immort cach entri ice get key ice get valu metadata els return new metadata transient cach entri ice get key ice get valu metadata time servic wall clock time els max idl return new metadata mortal cach entri ice get key ice get valu metadata time servic wall clock time els ice set metadata metadata return ice return ice indic whether entir metadata object need store check do avoid keep entir metadata object around lifespan max idl time store inform need store e version metadata object emb one keep entir metadata object around return true entir metadata object need store otherwis simpli store lifespan max idl exist cach entri privat boolean store metadata metadata metadata intern cach entri ice return metadata null ice null entri metadata awar ice metadata version null metadata instanceof emb metadata privat boolean entri metadata awar intern cach entri ice return ice instanceof metadata immort cach entri ice instanceof metadata mortal cach entri ice instanceof metadata transient cach entri ice instanceof metadata transient mortal cach entri 
packag org interceptor impl import static org common util util str import java util collect import java util collect import javax transact statu import javax transact system except import javax transact transact import org invalid cach usag except import org command flag affect command import org command visit command import org command control lock control command import org command tx transact boundari command import org command write write command import org common cach except import org context invoc context import org context impl flag bit set import org context impl tx invoc context import org factori compon registri import org factori annot inject import org factori annot start import org factori annot stop import org interceptor base async interceptor import org interceptor invoc except function import org lifecycl compon statu import org manag cach contain import org statetransf outdat topolog except import org transact write skew except import org transact impl abstract cach transact import org transact impl transact tabl import org util user rais function except import org util log log import org util log log factori author mircea marku jboss com author galder zamarr sinc public class invoc context interceptor extend base async interceptor privat compon registri compon registri privat transact tabl tx tabl privat static final log log log factori get log invoc context interceptor class privat static final boolean trace log trace enabl privat volatil boolean shut fals privat final invoc except function suppress except handler new invoc except function overrid public object appli invoc context be ctx visit command be command throwabl throwabl throw throwabl throwabl instanceof invalid cach usag except throwabl instanceof interrupt except throw throwabl throwabl instanceof user rais function except throw throwabl get caus els rethrow except r ctx be command throwabl ignor except return be command instanceof lock control command boolean null start prioriti privat void set start statu shut fals stop prioriti privat void set stop statu shut true inject public void init compon registri compon registri transact tabl tx tabl compon registri compon registri tx tabl tx tabl overrid public object visit command invoc context ctx visit command command throw throwabl trace log tracef invok command invoc context command ctx ctx null throw new illeg state except null context allow compon statu statu compon registri get statu statu allow invoc ignor command ctx command statu return invok next except ctx command suppress except handler privat void ignor command invoc context ctx visit command command compon statu statu throw except switch statu case case throw log cach termin get cach name prefix statu string case stop allow statu ctx throw log cach stop get cach name prefix default allow command run privat void rethrow except invoc context ctx visit command command throwabl th throw throwabl check fail silent failur boolean suppress except command instanceof flag affect command flag affect command command flag flag bit set shut everi possibl invoc fail suppress except suppress except shut suppress except shut log trace except execut code shut fail silent th els log trace except execut code fail silent th els th instanceof write skew except log rather see log debug except execut call th els th instanceof outdat topolog except trace log tracef topolog chang retri command th els collect affect key extract written key ctx command log execut error command get class get simpl name str affect key th ctx tx scope ctx origin local trace log trace transact mark rollback except receiv mark tx rollback ctx ctx origin local th instanceof cach except th new cach except th throw th privat collect extract written key invoc context ctx visit command command command instanceof write command return write command command get affect key els command instanceof lock control command return collect empti list els command instanceof transact boundari command return tx invoc context abstract cach transact ctx get affect key return collect empti list privat string get cach name prefix string cach name compon registri get cach name string prefix cach cach name cach name equal cach contain prefix default cach return prefix cach non transact invoc transact invoc transact other ongo one allow method return true circumst meet otherwis return fals privat boolean stop allow compon statu statu invoc context ctx throw except return statu stop ctx tx scope ongo transact ctx privat void mark tx rollback invoc context ctx throw throwabl ctx origin local ctx tx scope transact transact tx invoc context ctx get transact transact null valid run tx transact transact set rollback privat boolean valid run tx transact tx throw except int statu tri statu tx get statu catch system except e throw new cach except unexpect e return statu statu privat boolean ongo transact invoc context ctx throw system except ctx tx scope return fals ctx origin local return tx tabl contain local tx tx invoc context ctx get global transact els return tx tabl contain remot tx tx invoc context ctx get global transact 
packag org marshal core import java io except import java io object output import java util function bi consum import org common marshal advanc extern import org common marshal serial import org common marshal stream marshal import org common marshal jboss abstract boss marshal import org common marshal jboss default context class resolv import org common marshal jboss serial ext factori import org configur global global configur import org jboss marshal class resolv import org jboss marshal extern import org jboss marshal object tabl import org jboss marshal unmarshal boss marshal base marshal orient intern emb usag use custom object tabl base extern instanc either intern user defin p reason implement special rather resort java serial even effici boss serial lot effici gain major serial occur small set know type link org transact xa global transact link org command replic command class type inform replac simpl magic number p unknown type typic user datum fall back java serial author galder zamarr author sann grinovero sinc public class boss marshal extend abstract boss marshal implement stream marshal final global configur global cfg final global marshal marshal public boss marshal global cfg null marshal null public boss marshal global marshal marshal global configur global cfg global cfg global cfg marshal marshal overrid public void start super start base cfg set class extern factori new serial ext factori base cfg set object tabl new object tabl overrid public writer get object writer object object throw except bi consum object output object writer marshal find writer object return writer null writer accept null overrid public object read object unmarshal unmarshal throw except class find except advanc extern object ext marshal find extern unmarshal return ext read object unmarshal class resolv class resolv global cfg serial class resolv class resolv null overrid class resolv one detect inject classload via advanc cach class loader call class loader cl global cfg class loader class resolv new default context class resolv cl base cfg set class resolv class resolv overrid public void stop super stop case avoid leak class resolv refer classload base cfg set class resolv null overrid public boolean marshal candid object return super marshal candid get class get annot serial class null get class get annot extern class null 
packag org remot transport jgroup import java io except import java io object input import java io object output import java util set import org common marshal instanc reus advanc extern import org common util util import org marshal core id import org remot transport address encapsul group address author manik surtani sinc public class group address implement address protect final org jgroup address address privat final int hash code public group address final org jgroup address address address null throw new illeg argument except address shall null address address hash code address hash code overrid public boolean equal final object return true null get class get class return fals group address group address return hash code hash code address equal address overrid public int hash code return hash code overrid public string string return string valu address public org jgroup address get group address return address overrid public int compar address group address oa group address return address compar oa address public static final class extern extend instanc reus advanc extern group address public extern super fals overrid public void write object object output output group address address throw except tri org jgroup util util write address address address output catch except e throw new except e overrid public group address read object object input unmarshal throw except class find except tri note use org jgroup address concret class otherwis applic use local cach would bundl group jar verifi need check argument group address even method never call org jgroup address address org jgroup util util read address unmarshal return group address group address cach group address address catch except e throw new except e overrid public integ get id return id overrid public set class extend group address get type class return util class extend group address set group address class 
packag org remot transport jgroup import java util concurr concurr hash map import java util concurr concurr map import org jgroup address import org jgroup util extend import org jgroup util name cach cach group address instanc author dan berindei sinc public class group address cach privat static final concurr map address group address address cach new concurr hash map public static org remot transport address group address address jgroup address new entri rare add add startup comput absent synchron everi time group address ispn address address cach get jgroup address ispn address null return ispn address return address cach comput absent jgroup address uuid jgroup address instanceof extend return new group topolog awar address extend jgroup address els return new group address jgroup address static void prune address cach prune group address local d long cach address cach address cach address ignor name cach get address null address cach remov address 
packag org remot transport jgroup import java io except import java io object input import java io object output import java util array import java util collect import java util set import org common marshal instanc reus advanc extern import org marshal core id import org remot transport topolog awar address import org jgroup util extend import org jgroup util name cach import org jgroup util util encapsul group link extend site id rack id machin id author bela ban sinc public class group topolog awar address extend group address implement topolog awar address privat static final byte util string byte site id privat static final byte util string byte rack id privat static final byte util string byte machin id public static extend random string name string site id string rack id string machin id extend uuid extend random name name null name cach add uuid name add id uuid site id add id uuid rack id add id uuid machin id return uuid privat static void add id extend uuid byte key string string valu string valu null uuid put key util string byte string valu public group topolog awar address extend address super address overrid public string get site id return get string overrid public string get rack id return get string overrid public string get machin id return get string public boolean match string site id string rack id string machin id return check compon site id check compon rack id check compon machin id overrid public boolean site topolog awar address addr addr instanceof group topolog awar address extend group topolog awar address addr topolog address return check compon return check compon addr get site id overrid public boolean rack topolog awar address addr addr instanceof group topolog awar address extend group topolog awar address addr topolog address return check compon check compon return check compon addr get site id check compon addr get rack id overrid public boolean machin topolog awar address addr addr instanceof group topolog awar address extend group topolog awar address addr topolog address return check compon check compon check compon return check compon addr get site id check compon addr get rack id check compon addr get machin id privat boolean check compon byte key extend uuid return check compon key uuid get key privat boolean check compon byte key string string valu return check compon key util string byte string valu privat boolean check compon byte key byte expect valu return array equal get byte key expect valu privat string get string byte key return util byte string get byte key privat byte get byte byte key return topolog address get key privat extend topolog address return extend address public static final class extern extend instanc reus advanc extern group topolog awar address public extern super fals overrid public void write object object output output group topolog awar address address throw except tri org jgroup util util write address address address output catch except e throw new except e overrid public group topolog awar address read object object input unmarshal throw except class find except tri org jgroup address jgroup address org jgroup address org jgroup util util read address unmarshal note use org jgroup address concret class otherwis applic use local cach would bundl group jar verifi need check argument group address even method never call return group topolog awar address group address cach group address jgroup address catch except e throw new except e overrid public set class extend group topolog awar address get type class return collect singleton group topolog awar address class overrid public integ get id return id 
packag org remot transport jgroup import static org remot transport jgroup group address cach group address import static org util log log factori import java io byte array input stream import java io except import java net import java util array list import java util array import java util collect import java util collect import java util hash map import java util hash set import java util iter import java util list import java util map import java util object import java util properti import java util set import java util concurr complet futur import java util concurr execut except import java util concurr executor import java util concurr executor servic import java util concurr futur import java util concurr schedul executor servic import java util concurr time unit import java util concurr lock condit import java util concurr lock lock import java util concurr lock reentrant lock import java util function function import java util stream collector import javax manag bean server import javax manag object name import org illeg lifecycl state except import org command flag affect command import org command replic command import org common cach configur except import org common cach except import org common io byte buffer import org common marshal stream marshal import org common util file lookup import org common util file lookup factori import org common util type properti import org common util util import org configur global global configur import org configur global transport configur import org configur global transport configur builder import org configur pars xml config helper import org context impl flag bit set import org factori know compon name import org factori annot compon name import org factori annot inject import org jmx jmx util import org notif cachemanagerlisten cach manag notifi import org remot inboundhandl deliv order import org remot inboundhandl inbound invoc handler import org remot inboundhandl repli import org remot respons cach find respons import org remot respons except respons import org remot respons respons import org remot respons success respons import org remot rpc respons filter import org remot rpc respons mode import org remot transport abstract request import org remot transport address import org remot transport backup respons import org remot transport impl filter map respons collector import org remot transport impl multi target request import org remot transport request import org remot transport impl request repositori import org remot transport respons collector import org remot transport transport import org remot transport impl singl target request import org util time servic import org util concurr complet futur import org util log log import org util log log factori import org xsite site backup import org xsite site replic command import org jgroup anycast address import org jgroup event import org jgroup header import org jgroup channel import org jgroup merg view import org jgroup messag import org jgroup receiv import org jgroup handler import org jgroup view import org jgroup block request correl import org jgroup conf class configur import org jgroup jmx jmx configur import org jgroup protocol relay import org jgroup protocol relay rout statu listen import org jgroup protocol relay site address import org jgroup protocol relay site master import org jgroup protocol tom import org jgroup util extend import org jgroup util messag batch encapsul group transport group transport configur use varieti method usual pass one follow properti ul li tt configur string tt group configur string li li tt configur xml tt group configur string li li tt configur file tt string point group configur file li li tt channel lookup tt fulli qualifi class name link group channel lookup instanc li ul normal pass properti link transport configur builder properti properti configur file author manik surtani author galder zamarr sinc public class group transport implement transport public static final string configur string public static final string configur xml public static final string configur file public static final string channel lookup public static final short short messag flag valu messag flag valu messag flag valu protect static final string default config default jgroup udp xml privat static final log log log factori get log group transport class privat static final boolean trace log trace enabl privat static final complet futur map address respons complet futur complet futur collect empti map privat static final respons collector map address respons new singleton map respons collector fals privat static final respons collector map address respons new singleton map respons collector true privat static final short short privat static final short class configur get protocol id request correl class privat static final byte privat static final byte privat static final byte privat final lock view updat lock new reentrant lock privat final condit view updat condit view updat lock new condit privat final thread pool probe handler probe handler privat final channel callback channel callback new channel callback protect boolean connect channel true disconnect channel true close channel true protect global configur configur protect type properti prop protect stream marshal marshal protect cach manag notifi notifi protect time servic time servic protect inbound invoc handler invoc handler protect schedul executor servic timeout executor protect executor remot executor protect channel channel protect address address protect address physic address member valid receiv first view second thread channel connect latch signal protect volatil cluster view cluster view new cluster view cluster view collect empti list null privat volatil set string site view collect empti set privat complet futur void next view futur new complet futur privat request repositori request lifecycl setup stuff privat boolean global stat enabl privat bean server mbean server privat string domain form use transport creat extern sourc pass global configur param channel creat run channel use public group transport channel channel channel channel channel null throw new illeg argument except deal null channel channel connect throw new illeg argument except channel pass alreadi connect probe handler new thread pool probe handler public group transport probe handler new thread pool probe handler privat static list org jgroup address group address list collect address address address null return null return address stream map group transport group address collect collector list initi transport global cach configur transport specif properti inject public void initi global configur configur stream marshal marshal cach manag notifi notifi time servic time servic inbound invoc handler global handler compon name know compon name schedul executor servic timeout executor compon name know compon name executor servic remot executor configur configur marshal marshal notifi notifi time servic time servic invoc handler global handler timeout executor timeout executor remot executor remot executor probe handler updat thread pool remot executor overrid public map address respons invok remot collect address recipi replic command command respons mode mode long timeout respons filter respons filter deliv order deliv order boolean anycast throw except complet futur map address respons futur invok remot async recipi command mode timeout respons filter deliv order anycast tri need set timeout futur rpc invoc guarante complet within timeout millisecond return complet futur await futur catch execut except e throw util rewrap cach except e get caus overrid public complet futur map address respons invok remot async collect address recipi replic command command respons mode mode long timeout respons filter respons filter deliv order deliv order boolean anycast recipi null recipi empti n send recipi list empti log tracef destin list empti need send command command return cluster view view cluster view list address local member view get member int member size local member size boolean ignor leaver mode respons mode mode respons mode boolean total order deliv order deliv order boolean send stagger request mode respons mode deliv order deliv order recipi null recipi size timeout boolean rsvp rsvp command command never allow switch anycast broadcast broadcast unicast still keep option switch case forc broadcast node replic cach impact perform significantli case may need use close connect instead boolean broadcast recipi null total order recipi null member size n send recipi list empti log tracef cluster singl node need broadcast command command return address singl target comput singl target recipi local member member size broadcast total order total order address equal singl target log tracef skip request self command command return mode asynchron asynchron send messag n wait respons return perform async remot invoc recipi command deliv order rsvp broadcast singl target collect address actual target broadcast local member recipi assert singl target null actual target null return perform sync remot invoc actual target command mode timeout respons filter deliv order ignor leaver send stagger request broadcast singl target overrid public void send address destin replic command command deliv order deliv order throw except destin equal address remov requir non null throw case trace log trace send send self return send command destin command request deliv order rsvp command command true overrid public void send mani collect address target replic command command deliv order deliv order throw except target null send command command request deliv order fals els send command target command request deliv order fals overrid public map address respons invok remot map address replic command command respons mode mode long timeout boolean use prioriti queue respons filter respons filter boolean total order boolean anycast throw except deliv order deliv order deliv order total order deliv order deliv order els use prioriti queue deliv order deliv order return invok remot command mode timeout respons filter deliv order anycast overrid public map address respons invok remot map address replic command command respons mode mode long timeout respons filter respons filter deliv order deliv order boolean anycast throw except command null command empti n send recipi list empti log trace destin list empti need send messag return collect empti map mode synchron sync map respons collector collector new sync map respons collector fals command size complet futur map address respons request invok command command key set command get collector timeout deliv order tri return complet futur await request catch execut except e throw util rewrap cach except e get caus els command command send command command request deliv order rsvp command command true return collect empti map overrid public backup respons backup remot collect site backup backup site replic command command throw except trace log tracef send backup command backup command boolean rsvp rsvp command command map site backup futur respons sync backup call new hash map backup size site backup xsb backup address recipi group address cach group address new site master xsb get site name xsb sync long timeout xsb get timeout long request id request new request id singl site request respons request new singl site request passthrough singl respons collector request id request xsb get site name add request request tri send command recipi command request get request id deliv order rsvp fals timeout request set timeout timeout executor timeout time unit catch throwabl request cancel true throw sync backup call put xsb request els send command recipi command request deliv order fals fals return new group backup respons sync backup call time servic overrid public boolean coordin return cluster view coordin overrid public address get coordin return cluster view get coordin overrid public address get address return address overrid public list address get physic address physic address null channel null org jgroup address addr org jgroup address channel new event event channel get address addr null return collect empti list physic address new group address addr return collect singleton list physic address overrid public list address get member return cluster view get member overrid public boolean multicast capabl return channel get protocol stack get transport support multicast overrid public void start prop type properti type properti configur transport properti request new request repositori log info enabl log start group channel configur transport cluster name init channel channel set receiv channel callback set site view listen channel callback set site master picker new site master picker impl start group channel need wait initi node channel get protocol stack get transport regist probe handler probe handler protect void init channel final transport configur transport cfg configur transport channel null build channel connect channel chang name channel lookup alreadi connect channel string transport node name transport cfg node name transport node name null transport node name length long rang short long random rang long math random rang rang transport node name transport node name random rang channel set name transport node name channel must set fals n see messag otherwis invalid target remot instanc receiv self total order need deliv messag invok remot method total order boolean fals discard messag maintain properti need channel set discard messag fals topolog awar consist hash need set address gener group transport cfg topolog info channel n start alreadi connect channel channel add address gener group topolog awar address random channel get name transport cfg site id transport cfg rack id transport cfg machin id els org jgroup address jgroup address channel get address jgroup address instanceof extend group topolog awar address address new group topolog awar address extend jgroup address address match transport cfg site id transport cfg rack id transport cfg machin id throw new cach except topolog inform match one set provid group channel els throw new cach except group address contain topolog coordin privat void set site view listen rout statu listen listen relay channel get protocol stack find protocol class relay null relay set rout statu listen listen privat void set site master picker site master picker impl site master picker relay channel get protocol stack find protocol class relay null relay site master picker site master picker privat void start group channel need string cluster name configur transport cluster name connect channel tri channel connect cluster name catch except e throw new cach except unabl start group channel e tri normal would do cach manag jmx registr channel start cach manag start first cach start safe global stat enabl configur global jmx statist enabl global stat enabl string group name string format type channel cluster object name quot cluster name mbean server jmx util lookup bean server configur domain jmx util build jmx domain configur mbean server group name jmx configur regist channel channel mbean server domain cluster name true catch except e throw new cach except channel connect unabl regist bean e connect channel channel alreadi start extern need initi member list receiv cluster view channel get view log info enabl log local physic address cluster name get address get physic address privat void wait initi node int initi cluster size configur transport initi cluster size initi cluster size return long timeout configur transport initi cluster timeout long remain nano time unit nano timeout view updat lock lock tri channel null channel get view get member size initi cluster size remain nano log debugf wait node current view initi cluster size channel get view get member size remain nano view updat condit await nano remain nano catch interrupt except e log interrupt wait coordin e thread current thread interrupt final view updat lock unlock remain nano throw log timeout wait initi node initi cluster size channel get view get member log debugf initi cluster size node reach initi cluster size per use privat void build channel file lookup file lookup file lookup factori new instanc order prefer first look extern group file set properti final legaci group string properti string cfg prop null prop contain key string channel lookup class name prop get properti tri group channel lookup lookup util get instanc channel lookup class name configur class loader channel lookup get group channel prop connect channel lookup connect disconnect channel lookup disconnect close channel lookup close catch class cast except e log wrong type group channel lookup channel lookup class name e throw new cach except e catch except e log error instanti group channel lookup channel lookup class name e throw new cach except e channel null prop contain key cfg prop get properti collect conf collect empti list tri conf file lookup lookup file locat cfg configur class loader catch except io ignor check conf later variou state conf empti throw log jgroup configur find cfg els conf size log ambigu configur file util str conf tri channel new channel conf iter next catch except e throw log error creat channel config file cfg e channel null prop contain key cfg prop get properti tri channel new channel xml config helper string element cfg catch except e throw log error creat channel cfg e channel null prop contain key cfg prop get properti tri channel new channel new byte array input stream cfg get byte catch except e throw log error creat channel config string cfg e channel null log unabl use group properti provid prop tri channel new channel file lookup lookup file locat configur class loader catch except e throw log error creat channel config file e protect void receiv cluster view view new view first view instal return channel connect need set local address address null address group address channel get address list list address sub group new view instanceof merg view receiv merg view channel cluster name new view sub group new array list list view jgroup sub group merg view new view get subgroup view group jgroup sub group sub group add group address list group get member els receiv cluster view channel cluster name new view sub group collect empti list long view id new view get view id get id list address member group address list new view get member member empti return cluster view old view cluster view updat everi view relat field hold lock wait view return everyth updat complet futur void old futur null view updat lock lock tri delta view debug log larg cluster log debug enabl old view get member null list address join new array list member join remov old view get member list address leav new array list old view get member leav remov member log debugf join left join left cluster view new cluster view int view id member address creat complet futur new view old futur next view futur next view futur new complet futur wake thread wait know coordin notif listen throw except still start view updat condit signal final view updat lock unlock complet futur old view old futur null complet futur void futur old futur remot executor execut futur complet null notifi listen updat coordin boolean notifi notifi null notifi sub group empti final address address get address notifi notifi merg member old view get member address int view id sub group els notifi notifi view chang member old view get member get address int view id target leav may finish request potenti potenti block long time n want block view handl unblock command separ thread remot executor execut request request request new view cluster view get member set group address cach prune address cach privat static list address group address list list org jgroup address list return collect unmodifi list list stream map group address cach group address collect collector list overrid public void stop channel null channel get protocol stack get transport unregist probe handler probe handler string cluster name configur transport cluster name tri disconnect channel channel null channel connect log disconnect group cluster name unregist disconnect close cluster name null global stat enabl jmx configur unregist channel channel mbean server domain channel get cluster name channel disconnect close channel channel null channel open channel close catch except log log problem close channel log cluster name request null request request request cancel log cach manag stop channel null address null cluster view new cluster view cluster view collect empti list null request null complet futur void old futur null view updat lock lock tri creat complet futur new view old futur next view futur next view futur new complet futur wake thread block wait view view updat condit signal final view updat lock unlock final complet futur old view old futur null old futur complet null overrid public int get view id channel null throw new cach except cach stop invoc allow return cluster view get view id overrid public complet futur void view int expect view id cluster view view cluster view view view id least expect view id return complet futur complet null trace log tracef wait transact datum view current view expect view id view get view id view updat lock lock tri view cluster view view view id least cluster view throw new illeg lifecycl state except els view view id least expect view id return complet futur complet null els return next view futur compos nil view expect view id final view updat lock unlock overrid public void wait view int view id throw interrupt except channel null return log tracef wait view accept view id long remain nano long view updat lock lock tri channel null get view id view id remain nano remain nano view updat condit await nano remain nano final view updat lock unlock overrid public log get log return log overrid public final void check total order support replic distribut tx cach use total order protocol channel get protocol stack find protocol class null throw new cach configur except order support total order base transact protocol must present group config overrid public set string get site view return site view overrid public complet futur invok command address target replic command command respons collector collector deliv order deliv order long timeout time unit unit long request id request new request id singl target request request new singl target request collector request id request target add request request send command target command request id deliv order rsvp command command true timeout request set timeout timeout executor timeout unit return request overrid public complet futur invok command collect address target replic command command respons collector collector deliv order deliv order long timeout time unit unit long request id request new request id address exclud target deliv order deliv order null get address multi target request request new multi target request collector request id request target exclud target tri add request request send command target command request id deliv order rsvp command command catch throwabl request cancel true throw timeout request set timeout timeout executor timeout unit return request overrid public complet futur invok command replic command command respons collector collector deliv order deliv order long timeout time unit unit long request id request new request id address exclud target deliv order deliv order null get address multi target request request new multi target request collector request id request cluster view get member exclud target tri add request request send command command request id deliv order rsvp command command catch throwabl request cancel true throw timeout request set timeout timeout executor timeout unit return request overrid public complet futur invok command stagger collect address target replic command command respons collector collector deliv order deliv order long timeout time unit unit long request id request new request id stagger request request new stagger request collector request id request target get address command deliv order timeout unit tri add request request request send next messag catch throwabl request cancel true throw return request overrid public complet futur invok command collect address target function address replic command command gener respons collector respons collector long timeout deliv order deliv order long request id request id request new request id address exclud target get address multi target request request new multi target request respons collector request id request target exclud target add request request tri address target target replic command command command gener appli target boolean rsvp rsvp command command send command target command request id deliv order rsvp true catch throwabl request cancel true throw timeout request set timeout timeout executor timeout time unit return request privat void add request abstract request request tri request add request request request new view cluster view get member set catch throwabl remov request schedul task necessari request cancel true throw void send command address target replic command command long request id deliv order deliv order boolean rsvp boolean relay messag messag new messag group address target marshal request messag command request id set messag flag messag deliv order rsvp relay trace log command command request id target string send messag privat static boolean rsvp command replic command command return command instanceof flag affect command flag affect command command flag flag bit set privat static org jgroup address group address address address return group address address get group address privat void marshal request messag messag replic command command long request id tri byte buffer byte marshal object buffer command messag set buffer byte get buf byte get offset byte get length add request header messag request id catch runtim except e throw e catch except e throw new runtim except failur marshal argument e privat static void set messag flag messag messag deliv order deliv order boolean rsvp boolean relay relay messag set flag messag flag valu short flag encod deliv mode deliv order messag set flag flag command total order must receiv origin deliv order deliv order messag set transient flag messag transient flag valu rsvp messag set flag messag flag valu privat void log command replic command command long request id string target request id request log tracef send request address request id target command els log tracef send command address target command privat void send messag messag tri channel send messag catch except e channel connect throw new cach except e els throw log cach manag stop privat void add request header messag messag long request id remov header store request id buffer request id request header header new request correl header request id messag put header header privat static short encod deliv mode deliv order deliv order switch deliv order case return messag flag valu case return messag flag valu case return short messag flag valu messag flag valu default throw new illeg argument except unsupport deliv mode deliv order return singl target address code null multipl target privat address comput singl target collect address target list address local member int member size boolean broadcast boolean total order address singl target broadcast total order singl target null els target null broadcast mean elimin member size member size possibl assert member size singl target local member get equal address local member get local member get els target size singl target target iter next els singl target null return singl target privat complet futur map address respons perform async remot invoc collect address recipi replic command command deliv order deliv order boolean rsvp boolean broadcast address singl target broadcast send command command request deliv order rsvp els singl target null send command singl target command request deliv order rsvp true els send command recipi command request deliv order rsvp return privat complet futur map address respons perform sync remot invoc collect address target replic command command respons mode mode long timeout respons filter respons filter deliv order deliv order boolean ignor leaver boolean send stagger request boolean broadcast address singl target complet futur map address respons request send stagger request filter map respons collector collector new filter map respons collector respons filter fals target size request invok command stagger target command collector deliv order timeout time unit els singl target null respons collector map address respons collector ignor leaver request invok command singl target command collector deliv order timeout time unit els respons collector map address respons collector mode respons mode collector new filter map respons collector respons filter fals target size els respons filter null collector new filter map respons collector respons filter true target size els collector new sync map respons collector ignor leaver target size broadcast request invok command command collector deliv order timeout time unit els request invok command target command collector deliv order timeout time unit return request public void send replic command command deliv order deliv order throw except send command command request deliv order fals send command entir cluster n send command unless code deliv order privat void send command replic command command long request id deliv order deliv order boolean rsvp messag messag new messag marshal request messag command request id set messag flag messag deliv order rsvp true deliv order deliv order messag dest new anycast address trace log command command request id send messag public channel get channel return channel privat void updat site view collect string site collect string site view updat lock lock tri set string reachabl site new hash set site view reachabl site add site reachabl site remov site log tracef site view chang new view site site reachabl site log receiv site cluster view reachabl site site view collect unmodifi set reachabl site final view updat lock unlock privat void site unreach string site request request request instanceof singl site request singl site request request site unreach collect singleton site send command multipl target n send command unless code deliv order privat void send command collect address target replic command command long request id deliv order deliv order boolean rsvp object requir non null target messag messag new messag marshal request messag command request id set messag flag messag deliv order rsvp true trace log command command request id target string deliv order deliv order messag dest new anycast address group address list target send messag els iter address target iter send skip self messag next next messag copi messag copi true send skip self copi next privat void send skip self messag messag address address address equal get address messag d group address address send messag time servic get time servic return time servic schedul executor servic get timeout executor return timeout executor privat void process messag messag messag org jgroup address src messag src short flag messag get flag byte buffer messag raw buffer int offset messag offset int length messag length request correl header header messag get header byte type long request id header null type header type request id header request id els type request id request address null trace log tracef ignor messag receiv initi view type send respons src cach find respons request id null return switch type case case process request src flag buffer offset length request id break case process respons src buffer offset length request id break default log invalid messag type type src privat void send respons org jgroup address target respons respons long request id replic command command trace log tracef send respons request get address request id target respons byte buffer byte channel channel channel channel null avoid es stop return tri byte marshal object buffer respons catch throwabl tri call succeed except serializ except e instanceof except except new cach except byte marshal object buffer new except respons e catch throwabl tt channel connect log error send respons request id target command return tri messag messag new messag target set flag messag set buffer byte get buf byte get offset byte get length request correl header header new request correl header request id messag put header header channel send messag catch throwabl channel connect log error send respons request id target command privat void process request org jgroup address src short flag byte buffer int offset int length long request id tri deliv order deliv order decod deliv mode flag replic command command replic command marshal object byte buffer buffer offset length repli repli request id request trace log tracef receiv request get address request id src command repli respons send respons src respons request id command els trace log tracef receiv command get address src command repli repli src instanceof site address string origin site site address src get site site replic command command set origin site origin site invoc handler handl remot site origin site site replic command command repli deliv order els invoc handler handl cluster group address src command repli deliv order catch throwabl log error process request request id src except e instanceof except except new cach except send respons src new except respons e request id null privat void process respons org jgroup address src byte buffer int offset int length long request id tri respons respons length empti buffer signal fork channel name run remot node respons cach find respons els respons respons marshal object byte buffer buffer offset length respons null respons success respons trace log tracef receiv respons request get address request id src respons address address group address src request add respons request id address respons catch throwabl log error process respons request id src privat deliv order decod deliv mode short flag boolean total order messag flag set flag messag flag boolean oob messag flag set flag messag flag total order oob return deliv order els total order oob return deliv order els total order oob set point total order flag return deliv order throw new illeg argument except unabl decod order flag flag privat class channel callback implement receiv rout statu listen handler overrid public void view accept view new view receiv cluster view new view overrid public void site string site updat site view array list site collect empti list overrid public void site string site updat site view collect empti list array list site overrid public void receiv messag messag process messag messag overrid public void receiv messag batch batch batch messag messag process messag messag overrid public object event evt switch evt get type case event site unreach evt get arg break return null overrid public object messag msg return null overrid public void messag batch batch 
packag org jmx import java util set import javax manag instanc alreadi exist except import javax manag bean server import javax manag malform object name except import javax manag object instanc import javax manag object name import org common cach except import org configur global global configur import org util log log import org util log log factori class contain relat util method author galder zamarr sinc public class jmx util privat static final log log log factori get log jmx util class privat static final boolean trace log trace enabl look link javax manag bean server instanc base configur paramet param cfg configur instanc indic lookup link javax manag bean server return instanc link javax manag bean server public static bean server lookup bean server global configur cfg bean server lookup lookup cfg global jmx statist mbean server lookup return lookup get bean server cfg global jmx statist properti build domain name param cfg configur instanc containig rule domain allow param bean server link javax manag bean server check whether domain allow param group name string contain group name bean return string combin allow domain group name public static string build jmx domain global configur cfg bean server bean server string group name string jmx domain find jmx domain cfg global jmx statist domain bean server group name string config jmx domain cfg global jmx statist domain jmx domain equal config jmx domain cfg global jmx statist allow duplic domain throw log jmx bean alreadi regist group name config jmx domain return jmx domain regist give dynam bean param mbean dynam bean regist param object name link javax manag object name regist bean param bean server link javax manag bean server store bean throw except registr could complet public static void regist bean object mbean object name object name bean server bean server throw except bean server regist object name tri secur action regist bean mbean object name bean server log tracef regist mbean object name catch instanc alreadi exist except e might happen multipl instanc tri concurr regist object name log could regist object name object name e els log debugf object name alreadi regist object name unregist bean locat give link javax manag object name param object name link javax manag object name bean regist param bean server link javax manag bean server unregist bean throw except unregistr could complet public static void unregist bean object name object name bean server bean server throw except bean server regist object name secur action unregist bean object name bean server log tracef unregist object name unregist mbean whose object name match give filter param filter object name style format filter param bean server mbean server unregist mbean return number mbean unregist public static int unregist bean string filter bean server bean server tri object name filter obj name new object name filter set object instanc mbean bean server queri bean filter obj name null object instanc mbean mbean object name name mbean get object name trace log trace unregist mbean name name secur action unregist bean name bean server return mbean size catch except e throw new cach except unabl regist mbean filter filter e privat static string find jmx domain string jmx domain bean server bean server string group name int index string final name jmx domain boolean done fals do do true tri object name target name new object name final name group name secur action queri name target name null bean server size final name jmx domain index do fals catch malform object name except e throw new cach except unabl check duplic name e return final name 
packag org notif cachelisten filter import java io except import java io object input import java io object output import java util collect import java util object import java util set import org common marshal abstract extern import org factori compon registri import org factori annot inject import org filter key filter import org marshal core id import org metadata metadata cach event filter implement filter sole use provid key filter author wburn sinc public class key filter cach event filter implement cach event filter object privat final key filter super filter public key filter cach event filter key filter super filter filter object requir non null filter overrid public boolean accept key object old valu metadata old metadata object new valu metadata new metadata event type event type return filter accept key inject protect void inject depend compon registri cr cr wire depend filter public static class extern extend abstract extern key filter cach event filter overrid public set class extend key filter cach event filter get type class return collect singleton key filter cach event filter class overrid public void write object object output output key filter cach event filter object throw except output write object object filter overrid public key filter cach event filter read object object input input throw except class find except return new key filter cach event filter key filter input read object overrid public integ get id return id 
packag org filter import java io except import java io object input import java io object output import java util collect import java util set import org common marshal abstract extern import org factori compon registri import org factori annot inject import org marshal core id import org metadata metadata key valu filter implement filter sole use provid key filter author wburn sinc public class key filter key valu filter implement key valu filter privat final key filter super filter public key filter key valu filter key filter super filter filter null throw new null pointer except filter filter overrid public boolean accept key valu metadata metadata return filter accept key inject protect void inject depend compon registri cr cr wire depend filter public static class extern extend abstract extern key filter key valu filter overrid public set class extend key filter key valu filter get type class return collect singleton key filter key valu filter class overrid public void write object object output output key filter key valu filter object throw except output write object object filter overrid public key filter key valu filter read object object input input throw except class find except return new key filter key valu filter key filter input read object overrid public integ get id return id 
packag org distribut ch impl import org distribut ch key partition import org distribut group impl group manag import org distribut group impl group partition import org factori abstract name cach compon factori import org factori auto instanti factori import org factori annot default factori import org factori annot inject key partition factori use hash function defin configur futur probabl remov hash function configur leav key partition author dan berindei sinc default factori class key partition class public class key partition factori extend abstract name cach compon factori implement auto instanti factori privat group manag group manag inject public void inject group manag group manag group manag group manag overrid public construct class compon type key partition partition configur cluster hash key partition partition init configur cluster hash group manag null return compon type cast partition group enabl sinc configur partition regist compon registri need inject depend explicitli compon registri wire depend partition group partition group partition new group partition partition group manag return compon type cast group partition 
packag org filter import java io except import java io object input import java io object output import java util collect import java util set import org common marshal abstract extern import org factori compon registri import org factori annot inject import org marshal core id key filter util give link org filter key valu filter determin filter key note filter pass null valu metadata everi pass author wburn sinc public class key valu filter key filter implement key filter privat final key valu filter super filter public key valu filter key filter key valu filter super filter filter filter overrid public boolean accept key return filter accept key null null inject protect void inject depend compon registri cr cr wire depend filter public static class extern extend abstract extern key valu filter key filter overrid public set class extend key valu filter key filter get type class return collect singleton key valu filter key filter class overrid public void write object object output output key valu filter key filter object throw except output write object object filter overrid public key valu filter key filter read object object input input throw except class find except return new key valu filter key filter key valu filter input read object overrid public integ get id return id 
packag org factori import java util array import java util collect import java util hash map import java util map holder know name compon name use link org factori annot compon name annot author manik surtani sinc public class know compon name public static final string org executor transport public static final string org executor remot public static final string org executor notif public static final string org executor persist public static final string org executor expir deprec sinc long use deprec public static final string org executor replic queue public static final string org modul command initi public static final string org modul command factori public static final string java lang class loader public static final string org executor state transfer executor public static final string org transact version gener public static final string org executor async public static final string org executor timeout public static final string org cach depend graph pleas make sure keep date public static final collect string array list privat static final map string integ new hash map privat static final map string integ new hash map privat static final map string integ new hash map static put put put put put put put put put put put put put put put thread put thread put thread put thread put thread put thread put thread put thread public static int get default thread string compon name return get compon name public static int get default thread prio string compon name return get compon name public static int get default queue size string compon name return get compon name public static string shorten string cn int dot index cn last index int dot index plu one dot index string cname cn dot index plu one cn length cname shorten cn substr cn length els dot index cn length dot index plu one cname cn substr dot index plu one cname thread return cname 
packag org configur cach import java util concurr time unit import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set configur cach behavior distribut cach instanc cach mode element ignor public class configur public static final attribut definit boolean attribut definit builder enabl fals immut auto persist fals build public static final attribut definit integ attribut definit builder invalid threshold immut auto persist fals build public static final attribut definit long attribut definit builder lifespan time unit milli xml name l lifespan immut build public static final attribut definit long attribut definit builder cleanup task frequenc time unit milli xml name l cleanup interv immut build static attribut set attribut definit set return new attribut set configur class privat final attribut boolean enabl privat final attribut integ invalid threshold privat final attribut long lifespan privat final attribut long cleanup task frequenc privat final attribut set attribut configur attribut set attribut attribut attribut check protect enabl attribut attribut invalid threshold attribut attribut lifespan attribut attribut cleanup task frequenc attribut attribut public boolean enabl return enabl get p determin whether multicast web unicast use perform invalid p p default multicast use p p threshold set unicast alway use threshold set multicast alway use p public int invalid threshold return invalid threshold get determin often cleanup thread run clean intern log requestor specif key public long cleanup task frequenc return cleanup task frequenc get maximum lifespan entri place cach default minut public long lifespan return lifespan get public attribut set attribut return attribut overrid public string string return configur attribut attribut overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals configur configur obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result 
packag org configur cach import static org configur cach configur import static org configur cach configur import static org configur cach configur import static org configur cach configur import java util concurr time unit import org common configur builder import org common configur attribut attribut set import org configur global global configur import org util log log import org util log log factori configur cach behavior distribut cach instanc cach mode element ignor public class configur builder extend abstract cluster configur child builder implement builder configur privat final static log log log factori get log configur builder class log class privat final attribut set attribut configur builder cluster configur builder builder super builder attribut configur attribut definit set p determin whether multicast web unicast use perform invalid p p default multicast use p p threshold set unicast alway use threshold set multicast alway use p param invalid threshold threshold use multicast public configur builder invalid threshold int invalid threshold attribut attribut set invalid threshold return maximum lifespan entri place cach public configur builder lifespan long lifespan attribut attribut set lifespan return maximum lifespan entri place cach public configur builder lifespan long lifespan time unit unit return lifespan unit milli lifespan often requestor map clean stale item public configur builder cleanup task frequenc long frequenc milli attribut attribut set frequenc milli return often requestor map clean stale item public configur builder cleanup task frequenc long frequenc milli time unit unit return cleanup task frequenc unit milli frequenc milli public configur builder enabl attribut attribut set true return public configur builder disabl attribut attribut set fals return public configur builder enabl boolean enabl attribut attribut set enabl return overrid public void valid attribut attribut get cluster cach mode distribut throw log l distribut cach cluster cach mode friendli cach mode string attribut attribut get throw log l invalid lifespan overrid public void valid global configur global config overrid public configur creat return new configur attribut protect overrid public configur builder read configur templat attribut read templat attribut return overrid public string string return configur builder attribut attribut 
packag org executor import java util collect import java util collect import java util list import java util concurr callabl import java util concurr execut except import java util concurr executor servic import java util concurr futur import java util concurr thread factori import java util concurr time unit import java util concurr timeout except import org common executor thread pool executor factori import org util time servic import org util concurr block runnabl import org util concurr block task awar executor servic import org util concurr block task awar executor servic impl deleg executor lazili construct initi underli executor author pedro ruivo sinc public final class lazi initi block task awar executor servic implement block task awar executor servic privat final thread pool executor factori executor servic executor factori privat final thread factori thread factori privat final time servic time servic privat final string control thread name privat volatil block task awar executor servic deleg public lazi initi block task awar executor servic thread pool executor factori executor servic executor factori thread factori thread factori time servic time servic string control thread name executor factori executor factori thread factori thread factori time servic time servic control thread name control thread name overrid public void execut block runnabl runnabl init need deleg execut runnabl overrid public void check readi task deleg null deleg check readi task overrid public void shutdown deleg null deleg shutdown overrid public list runnabl shutdown deleg null return collect empti list els return deleg shutdown overrid public boolean shutdown return deleg null deleg shutdown overrid public boolean termin return deleg null deleg termin overrid public boolean await termin long timeout time unit unit throw interrupt except deleg null return true els return deleg await termin timeout unit overrid public futur submit callabl task init need return deleg submit task overrid public futur submit runnabl task result init need return deleg submit task result overrid public futur submit runnabl task init need return deleg submit task overrid public list futur invok collect extend callabl task throw interrupt except init need return deleg invok task overrid public list futur invok collect extend callabl task long timeout time unit unit throw interrupt except init need return deleg invok task timeout unit overrid public invok collect extend callabl task throw interrupt except execut except init need return deleg invok task overrid public invok collect extend callabl task long timeout time unit unit throw interrupt except execut except timeout except init need return deleg invok task timeout unit overrid public void execut runnabl command init need deleg execut command public block task awar executor servic get executor servic return deleg privat void init need deleg null synchron deleg null deleg new block task awar executor servic impl control thread name executor factori creat executor thread factori time servic 
packag org executor import java util collect import java util collect import java util list import java util concurr callabl import java util concurr execut except import java util concurr executor servic import java util concurr futur import java util concurr thread factori import java util concurr time unit import java util concurr timeout except import org common executor thread pool executor factori deleg executor lazili construct initi underli executor sinc unus executor expens author manik surtani sinc public final class lazi initi executor servic implement executor servic privat volatil executor servic deleg privat final thread pool executor factori executor servic executor factori privat final thread factori thread factori public lazi initi executor servic thread pool executor factori executor servic executor factori thread factori thread factori executor factori executor factori thread factori thread factori privat void init need deleg null synchron deleg null deleg executor factori creat executor thread factori overrid public void shutdown deleg null deleg shutdown overrid public list runnabl shutdown deleg null return collect empti list els return deleg shutdown overrid public boolean shutdown return deleg null deleg shutdown overrid public boolean termin return deleg null deleg termin overrid public boolean await termin long timeout time unit unit throw interrupt except deleg null return true els return deleg await termin timeout unit overrid public futur submit callabl task init need return deleg submit task overrid public futur submit runnabl task result init need return deleg submit task result overrid public futur submit runnabl task init need return deleg submit task overrid public list futur invok collect extend callabl task throw interrupt except init need return deleg invok task overrid public list futur invok collect extend callabl task long timeout time unit unit throw interrupt except init need return deleg invok task timeout unit overrid public invok collect extend callabl task throw interrupt except execut except init need return deleg invok task overrid public invok collect extend callabl task long timeout time unit unit throw interrupt except execut except timeout except init need return deleg invok task timeout unit overrid public void execut runnabl command init need deleg execut command 
packag org executor import java util collect import java util collect import java util list import java util concurr callabl import java util concurr execut except import java util concurr futur import java util concurr schedul executor servic import java util concurr schedul futur import java util concurr thread factori import java util concurr time unit import java util concurr timeout except import org common executor thread pool executor factori deleg schedul executor lazili construct initi underli schedul executor sinc unus executor expens author manik surtani sinc public class lazi initi schedul executor servic implement schedul executor servic privat volatil schedul executor servic deleg privat final thread pool executor factori schedul executor servic executor factori privat final thread factori thread factori public lazi initi schedul executor servic thread pool executor factori schedul executor servic executor factori thread factori thread factori executor factori executor factori thread factori thread factori privat void init need deleg null synchron deleg null deleg executor factori creat executor thread factori overrid public void shutdown deleg null deleg shutdown overrid public list runnabl shutdown deleg null return collect empti list els return deleg shutdown overrid public boolean shutdown return deleg null deleg shutdown overrid public boolean termin return deleg null deleg termin overrid public boolean await termin long timeout time unit unit throw interrupt except deleg null return true els return deleg await termin timeout unit overrid public futur submit callabl task init need return deleg submit task overrid public futur submit runnabl task result init need return deleg submit task result overrid public futur submit runnabl task init need return deleg submit task overrid public list futur invok collect extend callabl task throw interrupt except init need return deleg invok task overrid public list futur invok collect extend callabl task long timeout time unit unit throw interrupt except init need return deleg invok task timeout unit overrid public invok collect extend callabl task throw interrupt except execut except init need return deleg invok task overrid public invok collect extend callabl task long timeout time unit unit throw interrupt except execut except timeout except init need return deleg invok task timeout unit overrid public void execut runnabl command init need deleg execut command overrid public schedul futur schedul runnabl command long delay time unit unit init need return deleg schedul command delay unit overrid public schedul futur schedul callabl callabl long delay time unit unit init need return deleg schedul callabl delay unit overrid public schedul futur schedul fix rate runnabl command long initi delay long period time unit unit init need return deleg schedul fix rate command initi delay period unit overrid public schedul futur schedul fix delay runnabl command long initi delay long delay time unit unit init need return deleg schedul fix delay command initi delay delay unit 
packag org persist remot import java util map import org common marshal advanc extern import org configur global global configur import org factori global compon registri import org lifecycl modul lifecycl import org persist remot upgrad migrat task import org persist remot upgrad remov filter author gustavonal sinc public class lifecycl callback implement modul lifecycl overrid public void cach manag start global compon registri gcr global configur global cfg map integ advanc extern extern map global cfg serial advanc extern extern map put extern id new migrat task extern extern map put extern id new remov filter extern 
packag org notif import java lang annot element type import java lang annot retent import java lang annot retent polici import java lang annot target class level annot use annot object valid cach listen use link org cach add listen object relat p note even class annot annot still need method level annot link org notif cachemanagerlisten annot cach start actual receiv notif p object annot annot listen attach run link org cach user notifi link org cach event p p multipl method annot receiv event method may receiv multipl event use super type p p h deliveri semant h p event deliv immedi respect oper underli cach call return reason import keep listen process logic short live long run task need perform recommend use anoth thread p p h transact semant h p sinc event deliv actual cach call transact outcom yet know reason event alway deliv even chang repres discard contain transact applic must process event repres chang complet transact link org notif cachelisten event transact event get global transact use along link org notif cachelisten event transact complet event transact success record event later process transact success commit exampl demonstr p p h thread semant h p listen implement must capabl handl concurr invoc local notif reus call thread remot notif reus network thread p p sinc notif reus call network thread import realis listen implement block perform long run task origin caller trigger cach event may block listen callback complet therefor good idea use listen notifi event perform long run task separ thread block origin caller p p addit lock acquir oper perform still hold callback need keep mind lock may hold longer necessari intend may caus deadlock certain situat see paragraph long run task run separ thread p b note b tt sync tt paramet annot default tt true tt provid semant altern set tt sync tt tt fals tt invoc make separ thread caus block caller network thread separ thread take pool configur use link org config global configur set async listen executor properti java util properti link org config global configur set async listen executor factori class string p b summari notif annot b tabl border cellpad cellspac summari summari notif annot tr th bgcolor align left annot th th bgcolor align left event th th bgcolor align left descript th tr tr td valign top link org notif cachemanagerlisten annot cach start td td valign top link org notif cachemanagerlisten event cach start event td td valign top cach start td tr tr td valign top link org notif cachemanagerlisten annot cach stop td td valign top link org notif cachemanagerlisten event cach stop event td td valign top cach stop td tr tr td valign top link org notif cachelisten annot cach entri modifi td td valign top link org notif cachelisten event cach entri modifi event td td valign top cach entri modifi td tr tr td valign top link org notif cachelisten annot cach entri creat td td valign top link org notif cachelisten event cach entri creat event td td valign top cach entri creat td tr tr td valign top link org notif cachelisten annot cach entri remov td td valign top link org notif cachelisten event cach entri remov event td td valign top cach entri remov td tr tr td valign top link org notif cachelisten annot cach entri visit td td valign top link org notif cachelisten event cach entri visit event td td valign top cach entri visit td tr tr td valign top link org notif cachelisten annot cach entri load td td valign top link org notif cachelisten event cach entri load event td td valign top cach entri load td tr tr td valign top link org notif cachelisten annot cach entri evict td td valign top link org notif cachelisten event cach entri evict event td td valign top cach entri evict td tr tr td valign top link org notif cachelisten annot cach entri activ td td valign top link org notif cachelisten event cach entri activ event td td valign top cach entri activ td tr tr td valign top link org notif cachelisten annot cach entri passiv td td valign top link org notif cachelisten event cach entri passiv event td td valign top one cach entri passiv td tr tr td valign top link org notif cachemanagerlisten annot view chang td td valign top link org notif cachemanagerlisten event view chang event td td valign top view chang event detect td tr tr td valign top link org notif cachelisten annot transact regist td td valign top link org notif cachelisten event transact regist event td td valign top cach start particip transact td tr tr td valign top link org notif cachelisten annot transact complet td td valign top link org notif cachelisten event transact complet event td td valign top cach complet particip transact td tr tr td valign top link org notif cachelisten annot cach entri invalid td td valign top link org notif cachelisten event cach entri invalid event td td valign top cach entri invalid remot cach cach mode td tr p tabl p h exampl method receiv singl event h pre listen public class singl event listen cach start public void someth event event system println quot cach start detail quot event pre p h exampl method receiv multipl event h pre listen public class multipl event listen cach start cach stop public void someth event event event get type event type system println quot cach start detail quot event els event get type event type system println quot cach stop detail quot event pre p h exampl multipl method receiv event h pre listen public class singl event listen cach start public void handl start event event system println quot cach start quot p cach start cach stop cach block cach unblock view chang public void log event event event log system log event event get type pre p p b exampl process event commit transact b p pre listen public class event handler privat concurr map lt global transact queue lt event gt gt map new concurr hash map lt global transact queue lt event gt gt transact regist public void start transact transact regist event event map put event get global transact new concurr link queue lt event gt cach entri creat cach entri modifi cach entri remov public void add event transact event event map get event get global transact add event transact complet public void end transact transact complet event event queue lt event gt event map get event get global transact map remov event get global transact system println end transact event get global transact get id event transact success event e event system println event e pre author href mailto manik jboss org manik surtani author jason green see org notif cachemanagerlisten annot cach start see org notif cachemanagerlisten annot cach stop see org notif cachelisten annot cach entri modifi see org notif cachelisten annot cach entri creat see org notif cachelisten annot cach entri remov see org notif cachelisten annot cach entri visit see org notif cachelisten annot cach entri load see org notif cachelisten annot cach entri evict see org notif cachelisten annot cach entri activ see org notif cachelisten annot cach entri passiv see org notif cachemanagerlisten annot view chang see org notif cachelisten annot transact complet see org notif cachelisten annot transact regist see org notif cachelisten annot cach entri invalid see org notif cachelisten annot datum rehash see org notif cachelisten annot topolog chang sinc retent retent polici target element type public interfac listen specifi whether callback class annot annot happen synchron caller thread asynchron use separ thread default tt true tt return true expect callback call use caller thread fals make separ thread sinc boolean sync default true specifi whether event fire primari datum owner affect key node see updat p note valu ignor link org notif listen cluster true return true expect primari datum owner fire event fals node see updat fire event sinc boolean primari default fals defin whether annot listen cluster import cluster listen notifi cach entri remov cach entri creat cach entri modifi cach entri expir event return true expect listen cluster listen receiv notif datum modif sinc boolean cluster default fals set true entir exist state within cluster evalu exist match valu cach entri creat event trigger listen registr support listen also link org notif listen cluster p use distribut cluster cach possibl retriev new event initi transfer complet handl sinc new event queue segment belong complet iter also help reduc memori strain sinc distribut cluster listen need eventu retriev valu cach return true expect listen instal current datum send new event listen receiv new event sinc boolean includ current state default fals return type observ level listen defin return observ level listen see observ sinc observ observ default observ enumer defin listen event observ listen receiv event oper occur user wish notifi oper complet listen observ use link observ level user wish notifi oper complet listen observ use link observ level user wish event observ use link observ level enum observ observ level use notifi oper complet overrid public boolean invok boolean pre return pre observ level use notifi oper complet overrid public boolean invok boolean pre return pre observ level use notifi oper occur overrid public boolean invok boolean pre return true public abstract boolean invok boolean pre 
packag org stream impl local import java util compar import java util option import java util set import java util spliter import java util concurr time unit import java util function bi consum import java util function bi function import java util function binari oper import java util function consum import java util function function import java util function int function import java util function predic import java util function supplier import java util function doubl function import java util function int function import java util function long function import java util stream collector import java util stream doubl stream import java util stream int stream import java util stream long stream import java util stream stream import org cach import org cach stream import org common util closeabl iter import org common util closeabl import org factori compon registri import org stream cach awar import org stream impl intop intermedi oper import org stream impl intop object distinct oper import org stream impl intop object filter oper import org stream impl intop object flat map oper import org stream impl intop object flat map doubl oper import org stream impl intop object flat map int oper import org stream impl intop object flat map long oper import org stream impl intop object limit oper import org stream impl intop object map oper import org stream impl intop object map doubl oper import org stream impl intop object map int oper import org stream impl intop object map long oper import org stream impl intop object peek oper import org stream impl intop object skip oper import org stream impl intop object sort compar oper import org stream impl intop object sort oper import org util function remov function import org util function serializ supplier cach stream use local allow full function regular stream also option filter key function param type stream public class local cach stream extend abstract local cach stream stream cach stream implement cach stream public local cach stream stream supplier stream stream supplier boolean parallel compon registri registri super stream supplier parallel registri public local cach stream abstract local cach stream super overrid public local cach stream sequenti distribut return overrid public local cach stream parallel distribut return overrid public local cach stream filter key segment set integ segment segment filter segment return overrid public local cach stream filter key set key key filter key return overrid public local cach stream distribut batch size int batch size chang cach loader return overrid public local cach stream segment complet listen segment complet listen listen segment complet get stream complet n track return overrid public local cach stream disabl rehash awar local stream n matter rehash return overrid public local cach stream filter predic super predic registri wire depend predic intermedi oper add new filter oper predic return overrid public local cach stream map function super extend mapper registri wire depend mapper intermedi oper add new map oper mapper return local cach stream overrid public local int cach stream map int int function super mapper intermedi oper add new map int oper mapper return new local int cach stream overrid public local long cach stream map long long function super mapper intermedi oper add new map long oper mapper return new local long cach stream overrid public local doubl cach stream map doubl doubl function super mapper intermedi oper add new map doubl oper mapper return new local doubl cach stream overrid public local cach stream flat map function super extend stream extend mapper intermedi oper add new flat map oper mapper return local cach stream overrid public local int cach stream flat map int function super extend int stream mapper intermedi oper add new flat map int oper mapper return new local int cach stream overrid public local long cach stream flat map long function super extend long stream mapper intermedi oper add new flat map long oper mapper return new local long cach stream overrid public local doubl cach stream flat map doubl function super extend doubl stream mapper intermedi oper add new flat map doubl oper mapper return new local doubl cach stream overrid public local cach stream distinct intermedi oper add distinct oper get instanc return overrid public local cach stream sort intermedi oper add sort oper get instanc return overrid public local cach stream sort compar super compar intermedi oper add new sort compar oper compar return overrid public local cach stream peek consum super action intermedi oper add new peek oper action return overrid public local cach stream limit long max size intermedi oper add new limit oper max size return overrid public local cach stream skip long n intermedi oper add new skip oper n return overrid public void consum super action inject cach action creat stream action overrid public void bi consum cach super action cach cach registri get compon cach class registri wire depend action creat stream e action accept cach e overrid public void order consum super action inject cach action creat stream order action method inject cach consum note support consum time param cach awar instanc may link cach awar privat void inject cach consum super cach awar cach awar instanceof cach awar cach awar cach awar inject cach registri get compon cach class overrid public object array return creat stream array overrid public array int function gener return creat stream array gener overrid public reduc ident binari oper accumul return creat stream reduc ident accumul overrid public option reduc binari oper accumul return creat stream reduc accumul overrid public reduc ident bi function super accumul binari oper combin return creat stream reduc ident accumul combin overrid public collect supplier supplier bi consum super accumul bi consum combin return creat stream collect supplier accumul combin overrid public collect collector super collector return creat stream collect collector overrid public collect serializ supplier collector super supplier return creat stream collect supplier get overrid public collect supplier collector super supplier return creat stream collect supplier get overrid public option min compar super compar return creat stream min compar overrid public option max compar super compar return creat stream max compar overrid public long count return creat stream count overrid public boolean match predic super predic return creat stream match predic overrid public boolean match predic super predic return creat stream match predic overrid public boolean none match predic super predic return creat stream none match predic overrid public option find first return creat stream find first overrid public option find return creat stream find overrid public closeabl iter iter int size intermedi oper size size intermedi oper support remov return stream supplier remov iter closeabl iter creat stream els size intermedi oper int op intermedi oper peek int op instanceof map oper map oper map map oper int op map get function instanceof remov function function remov mean use remov return stream supplier remov iter closeabl iter creat stream return closeabl iter creat stream overrid public spliter spliter return creat stream spliter overrid public local cach stream timeout long timeout time unit unit timeout noth local cach stream return 
packag org persist factori import org common cach configur except import org common util util import org configur cach store configur import org util log log import org util log log factori default implement use local class loader extern class load allow author sebastian laskawiec sinc public class local class loader cach store factori implement cach store factori privat static final log log log factori get log local class loader cach store factori class overrid public creat instanc store configur cfg class class base configur annot configur class extractor get class base configur annot cfg log tri get instanc heavili use refactor might riski howev safe catch ignor except return null perfectli legal object instanc util get instanc class base configur annot instanc null return instanc catch cach configur except unabl instanti log debugv could instanti class use local classload class base configur annot get name return null overrid public store configur process configur store configur store configur return null 
packag org stream impl import java util collect import java util collect import java util hash set import java util iter import java util map import java util set import java util concurr complet futur import java util concurr concurr map import java util concurr fork join pool import java util stream stream import org advanc cach import org cach import org cach set import org cach impl abstract deleg cach import org command command factori import org common cach except import org common util collect factori import org configur cach cach mode import org configur cach configur import org contain entri cach entri import org context flag import org distribut ch consist hash import org factori compon registri import org factori annot inject import org factori annot start import org lifecycl compon statu import org notif listen import org notif cachelisten annot datum rehash import org notif cachelisten event datum rehash event import org remot respons respons import org remot rpc rpc manag import org remot transport address import org statetransf state transfer manag import org topolog cach topolog import org util byte string import org util log log import org util log log factori local stream manag implement handl inject stream supplier invok oper subsequ notifi oper rehash chang one segment param key type underli cach param valu type underli cach listen observ listen observ public class local stream manag impl implement local stream manag privat final static log log log factori get log local stream manag impl class privat static final boolean trace log trace enabl privat advanc cach cach privat compon registri registri privat state transfer manag stm privat rpc manag rpc privat command factori factori privat boolean loader privat address local address privat cach mode cach mode privat final concurr map object segment listen chang listen collect factori make concurr map privat byte string cach name class segment listen privat final set integ segment privat final segment awar oper op privat final set integ segment lose segment listen set integ segment segment awar oper op segment new hash set segment op op segment lose new hash set public void local segment set integ local segment segment local segment contain trace log tracef could process segment segment lose add public void lose segment set integ lose segment integ segment lose segment segment contain segment trace log tracef lose segment segment op lose segment fals segment lose add segment segment lose size segment size trace log tracef segment lose segment op lose segment true inject public void inject cach cach compon registri registri state transfer manag stm rpc manag rpc configur configur command factori factori need unwrap cach local stream deal valu obvious local entri map provid origin node intermedi oper stack oper cach abstract deleg cach unwrap cach cach get advanc cach flag flag cach name byte string string cach get name registri registri stm stm rpc rpc factori factori loader configur persist use store start public void start local address rpc get address cach add listen cach mode cach get cach configur cluster cach mode need listen datum rehash event case datum move iter rehash occur caus node lose segment someth iter stream look valu segment can n guarante datum see correctli must therefor suspect node send back owner param event data rehash event datum rehash public void datum rehash data rehash event event consist hash start hash event get consist hash start consist hash end hash event get consist hash end boolean trace log trace enabl start hash null end hash null trace log tracef data rehash occur start hash end hash new topolog pre start hash end hash event get new topolog id event pre chang listen empti trace log tracef previou segment start hash get segment owner local address log tracef segment end hash get segment owner local address n care newli add segment sinc mean run would n includ anyway set integ segment new hash set start hash get segment owner local address n add n care new segment sinc current request n work retriev later segment remov end hash get segment owner local address segment empti make sure current listen get new hash updat occur new node node leav hash segment chang case map entri object segment listen entri chang listen entri set trace log tracef notifi segment chang listen entri get key entri get valu lose segment segment els trace log tracef segment remov datum rehash notif requir els trace log tracef chang listen present privat advanc cach get cach respect loader boolean includ loader need skip loader one tell skip loader includ loader return cach get advanc cach flag flag return cach privat stream cach entri get stream cach set cach entri cach entri set boolean parallel stream set integ segment set key includ set key exclud stream cach entri stream parallel stream cach entri set parallel stream cach entri set stream filter key key includ filter key segment segment cach mode scatter stream stream filter entri entri get valu null key exclud empti return stream filter e key exclud contain e get key return stream privat stream cach entri get rehash stream cach set cach entri cach entri set object request id segment listen listen boolean parallel stream set integ segment set key includ set key exclud cach topolog topolog stm get cach topolog trace log tracef topolog supplier id topolog request id consist hash read topolog get current consist hash pend topolog get pend pend null set integ lose segment new hash set iter integ iter segment iter iter next integ segment iter next ensur unbox valu twice time happi path int int segment segment int valu segment own h can n use rehash pend locat owner segment int segment contain local address read locat owner segment int segment contain local address iter remov lose segment add segment lose segment empti trace log tracef lose segment rehash id lose segment request id listen lose segment lose segment els trace log tracef current middl rehash id request id els set integ segment read get segment owner local address segment retain segment trace log tracef find miss segment request id request id listen local segment segment els trace log tracef hash id read request id return get stream cach entri set parallel stream segment key includ key exclud privat void handl respons error complet futur map address respons complet futur object request id address origin trace complet futur complet v e v null respons respons v valu iter next respons success log tracef unsuccess respons send respons request id origin els e null log tracef e encount except send respons request id origin els log tracef respons success send request id overrid public void stream oper object request id address origin boolean parallel stream set integ segment set key includ set key exclud boolean includ loader termin oper oper trace log tracef receiv oper request id segment request id origin segment cach set cach entri cach entri set get cach respect loader includ loader cach entri set oper set supplier get stream cach entri set parallel stream segment key includ key exclud oper handl inject registri valu oper perform oper complet futur map address respons complet futur rpc invok remot async collect singleton origin factori build stream respons command request id true collect empti set valu rpc get default rpc option true handl respons error complet futur request id origin overrid public void stream oper rehash awar object request id address origin boolean parallel stream set integ segment set key includ set key exclud boolean includ loader termin oper oper trace log tracef receiv rehash awar oper request id segment request id origin segment cach set cach entri cach entri set get cach respect loader includ loader cach entri set segment listen listen new segment listen segment oper valu oper handl inject registri current allow request per id may chang later chang listen put request id listen trace log tracef regist chang listen request id tri oper set supplier get rehash stream cach entri set request id listen parallel stream segment key includ key exclud valu oper perform oper trace log tracef request complet segment suspect segment request id segment listen segment lose final chang listen remov request id trace log tracef un regist chang listen request id cach get statu compon statu trace log tracef cach statu long run segment suspect request id listen segment lose add segment valu null trace log tracef send respons request id complet futur map address respons complet futur rpc invok remot async collect singleton origin factori build stream respons command request id true listen segment lose valu rpc get default rpc option true handl respons error complet futur request id origin overrid public void stream oper object request id address origin boolean parallel stream set integ segment set key includ set key exclud boolean includ loader key track termin oper oper trace log tracef receiv key awar oper request id segment request id origin segment cach set cach entri cach entri set get cach respect loader includ loader cach entri set oper set supplier get stream cach entri set parallel stream segment key includ key exclud oper handl inject registri collect valu oper perform oper new non rehash intermedi collector origin request id parallel stream complet futur map address respons complet futur rpc invok remot async collect singleton origin factori build stream respons command request id true collect empti set valu rpc get default rpc option true handl respons error complet futur request id origin overrid public void stream oper rehash awar object request id address origin boolean parallel stream set integ segment set key includ set key exclud boolean includ loader key track termin oper oper trace log tracef receiv key rehash awar oper request id segment request id origin segment cach set cach entri cach entri set get cach respect loader includ loader cach entri set segment listen listen new segment listen segment oper collect cach entri result oper handl inject registri current allow request per id may chang later chang listen put request id listen trace log tracef regist chang listen request id tri oper set supplier get rehash stream cach entri set request id listen parallel stream segment key includ key exclud result oper perform oper rehash awar new non rehash intermedi collector origin request id parallel stream trace log tracef request complet segment suspect segment request id segment listen segment lose final chang listen remov request id trace log tracef un regist chang listen request id cach get statu compon statu trace log tracef cach statu long run segment suspect request id listen segment lose add segment result null complet futur map address respons complet futur rpc invok remot async collect singleton origin factori build stream respons command request id true listen segment lose result rpc get default rpc option true handl respons error complet futur request id origin class non rehash intermedi collector implement key track termin oper intermedi collector privat final address origin privat final object request id privat final boolean use manag blocker non rehash intermedi collector address origin object request id boolean use manag blocker origin origin request id request id use manag blocker use manag blocker overrid public void send datum resons respons know parallel stream use manag blocker consum core fork join thread applic use manag blocker tri use manag blocker case invok common thread pool fork join pool manag block new respons blocker respons catch interrupt except e throw new cach except e els rpc invok remot collect singleton origin new stream respons command cach name local address request id fals respons rpc get default rpc option true class respons blocker implement fork join pool manag blocker privat final respons privat boolean complet fals respons blocker respons respons respons overrid public boolean block throw interrupt except complet way n send respons origin node still insid manag blocker n consum thread synchron non rehash intermedi collector rpc invok remot collect singleton origin new stream respons command cach name local address request id fals respons rpc get default rpc option true complet true return complet overrid public boolean releas return complet 
packag org topolog import static org factori know compon name import java util collect import java util hash map import java util map import java util concurr complet futur import java util concurr execut except import java util concurr executor servic import java util concurr futur import java util concurr time unit import java util concurr timeout except import org version import org command replic command import org common cach except import org common marshal serializ except import org distribut ch consist hash import org distribut ch consist hash factori import org evict passiv manag import org executor limit executor import org factori compon registri import org factori global compon registri import org factori annot compon name import org factori annot inject import org factori annot start import org factori annot stop import org globalst global state manag import org globalst global state provid import org globalst scop persist state import org globalst impl global state manag impl import org globalst impl scope persist state impl import org jmx annot data type import org jmx annot bean import org jmx annot manag attribut import org partitionhandl avail mode import org partitionhandl impl partit handl manag import org remot inboundhandl deliv order import org remot respons except respons import org remot respons respons import org remot respons success respons import org remot rpc respons mode import org remot transport address import org remot transport transport import org remot transport jgroup suspect except import org util time servic import org util concurr within thread executor import org util log log import org util log log factori import net jcip annot guard code local topolog manag implement author dan berindei sinc bean object name local topolog manag descript control cach membership state transfer public class local topolog manag impl implement local topolog manag global state provid privat static log log log factori get log local topolog manag impl class privat static final boolean trace log trace enabl privat transport transport privat executor servic async transport executor privat global compon registri gcr privat time servic time servic privat global state manag global state manag privat persist manag persist manag privat final within thread executor within thread executor new within thread executor synchron entir map handl statu request make sure concurr topolog updat old coordin privat final map string local cach statu run cach collect synchron map new hash map string local cach statu privat volatil boolean run guard run cach privat int late statu respons view id privat persist persist inject public void inject transport transport compon name executor servic async transport executor global compon registri gcr time servic time servic global state manag global state manag persist manag persist manag transport transport async transport executor async transport executor gcr gcr time servic time servic global state manag null global state manag global state manag global state manag regist state provid persist manag persist manag arbitrari valu need start option global state manag group transport start prioriti start n call lock run compon access thread guard run cach public void start trace log tracef start local topolog manag transport get address persist null persist persist random global state manag null global state manag write global state persist manag add persist address map transport get address persist run true late statu respons view id transport get view id need stop group transport stop prioriti public void stop trace log tracef stop local topolog manag transport get address persist manag remov persist address map persist run fals within thread executor shutdown overrid public cach topolog join string cach name cach join info join info cach topolog handler stm partit handl manag phm throw except log debugf node join cach transport get address cach name total order cach must move topolog updat anoth thread executor servic topolog updat executor join info total order within thread executor async transport executor local cach statu cach statu new local cach statu cach name join info stm phm topolog updat executor pretend join use thread topolog updat executor ensur initi topolog request happen thread topolog updat handl complet join futur complet futur void join futur new complet futur cach statu get topolog updat executor execut async join futur run cach put cach name cach statu long timeout join info get timeout long end time time servic expect end time timeout time unit tri true int view id transport get view id tri replic command command new cach topolog control command cach name cach topolog control command type transport get address join info view id cach statu respons initi statu cach statu respons execut coordin command timeout initi statu null log debug ignor null join respons coordin probabl shut wait view view id cach statu get join info get timeout time unit continu handl topolog updat cach name initi statu get cach topolog initi statu get avail mode view id transport get coordin cach statu throw new illeg state except alreadi new topolog time receiv join respons handl stabl topolog updat cach name initi statu get stabl topolog view id transport get coordin cach statu return initi statu get cach topolog catch serializ except e point retri cach join info serializ throw new cach join except e catch except e log debugf e error send join request cach coordin cach name e get caus null e get caus instanceof cach join except throw cach join except e get caus time servic time expir end time throw e add configur use fraction state transfer timeout thread sleep final join futur complet null overrid public void leav string cach name log debugf node leav cach transport get address cach name local cach statu cach statu run cach remov cach name replic command command new cach topolog control command cach name cach topolog control command type transport get address transport get view id tri execut coordin command cach statu get join info get timeout catch except e log debugf e error send leav request cach coordin cach name overrid public void confirm rebal phase string cach name int topolog id int rebal id throwabl throwabl note coordin chang send command get anoth queri statu run cach n need retri command fail replic command command new cach topolog control command cach name cach topolog control command type transport get address topolog id rebal id throwabl transport get view id tri execut coordin async command catch except e log debugf e error send rebal complet notif cach coordin cach name call coordin overrid public manag statu respons handl statu request int view id tri long old view still process topolog old coordin wait view view id get global timeout time unit catch interrupt except e shut send back empti statu thread current thread interrupt return new manag statu respons collect empti map true map string cach statu respons cach new hash map synchron run cach late statu respons view id view id map entri string local cach statu e run cach entri set string cach name e get key local cach statu cach statu run cach get cach name cach put e get key new cach statu respons cach statu get join info cach statu get current topolog cach statu get stabl topolog cach statu get partit handl manag get avail mode boolean rebalanc enabl true avoid add direct depend cluster topolog manag replic command command new cach topolog control command null cach topolog control command type transport get address transport get view id tri gcr wire depend command success respons respons success respons command invok rebalanc enabl boolean respons get respons valu catch throwabl log warn fail obtain rebalanc statu log debugf send cluster statu respons view view id return new manag statu respons cach rebalanc enabl overrid public void handl topolog updat final string cach name final cach topolog cach topolog final avail mode avail mode final int view id final address sender throw interrupt except ignor topolog updat cach name cach topolog return final local cach statu cach statu run cach get cach name cach statu get topolog updat executor execut tri handl topolog updat cach name cach topolog avail mode view id sender cach statu catch throwabl log topolog updat error cach name privat boolean ignor topolog updat final string cach name final cach topolog cach topolog run log tracef ignor consist hash updat cach local cach manag run cach topolog get topolog id cach name return true run cach get cach name null log tracef ignor consist hash updat cach n exist local cach topolog get topolog id cach name return true return fals updat cach topolog local cach statu pass cach topolog handler return code true topolog appli code fals ignor privat boolean handl topolog updat string cach name cach topolog cach topolog avail mode avail mode int view id address sender local cach statu cach statu tri wait view view id cach statu get join info get timeout time unit catch interrupt except e shut ignor except rebal return fals synchron cach statu cach topolog null topolog yet happen cach restart state still return true n want send join request return true regist persist d local regist persist cach topolog cach topolog exist topolog cach statu get current topolog exist topolog null cach topolog get topolog id exist topolog get topolog id log debugf ignor late consist hash updat cach current topolog cach name exist topolog get topolog id cach topolog return fals cach topolog handler handler cach statu get handler reset local topolog rebal cach name cach topolog exist topolog handler updat cach topolog cach name cach topolog view id sender cach statu return fals consist hash current cach topolog get current consist hash union null cach topolog get pend null consist hash factori chf cach statu get join info get consist hash factori switch cach topolog get phase case remov member topolog make sure union owner pend use read phase owner current primari owner must match read write union chf union cach topolog get pend cach topolog get current break case ensur node utilis old partit read consist hash conflict resolut updat write consist hash contain owner pre post merg hash union chf union exist topolog get write consist hash cach topolog get pend current exist topolog get current break default union chf union cach topolog get current cach topolog get pend cach topolog union topolog new cach topolog cach topolog get topolog id cach topolog get rebal id current cach topolog get pend union cach topolog get phase cach topolog get actual member persist manag map address cach topolog get actual member union topolog log rout tabl inform boolean updat avail mode first avail mode avail mode updat avail mode first avail mode null cach statu get partit handl manag set avail mode avail mode boolean start conflict resolut cach topolog get phase cach topolog phase start conflict resolut exist topolog null exist topolog get rebal id cach topolog get rebal id union null command send command arriv first start rebal ignor command arriv log tracef topolog updat pend start rebal handler rebal union topolog els handler updat consist hash union topolog updat avail mode first cach statu get partit handl manag set avail mode avail mode return true privat void regist persist cach topolog cach topolog int count cach topolog get actual member size int count persist manag add persist address map cach topolog get actual member get cach topolog get member persist d get privat boolean updat cach topolog string cach name cach topolog cach topolog int view id address sender local cach statu cach statu synchron run cach valid command view id cach topolog view id sender cach name return fals log debugf updat local topolog cach cach name cach topolog cach statu set current topolog cach topolog return true synchron requir prevent topolog updat prepar statu respons guard run cach privat boolean valid command view id cach topolog cach topolog int view id address sender string cach name sender equal transport get coordin log debugf ignor topolog cach old coordin cach topolog get topolog id cach name sender return fals view id late statu respons view id log debugf ignor topolog cach view receiv statu request view cach topolog get topolog id cach name view id late statu respons view id return fals return true privat void reset local topolog rebal string cach name cach topolog new cach topolog cach topolog old cach topolog cach topolog handler handler boolean new rebal new cach topolog get pend null new rebal initi topolog n need reset guarante member old cach topolog null return need reset miss topolog updat new cach topolog get topolog id old cach topolog get topolog id return miss topolog updat topolog might remov segment rebal add segment need remov old datum inbound transfer first happen coordin chang either old one left merg rebal merg arriv merg topolog updat new cach topolog get rebal id old cach topolog get rebal id current chang need instal reset topolog new current first regist persist new cach topolog cach topolog reset topolog new cach topolog new cach topolog get topolog id new cach topolog get rebal id new cach topolog get current null cach topolog phase new cach topolog get actual member persist manag map address new cach topolog get actual member log debugf instal fake cach topolog cach reset topolog cach name handler updat consist hash reset topolog overrid public void handl stabl topolog updat final string cach name final cach topolog new stabl topolog final address sender final int view id final local cach statu cach statu run cach get cach name cach statu null cach statu get topolog updat executor execut handl stabl topolog updat cach name new stabl topolog view id sender cach statu privat void handl stabl topolog updat string cach name cach topolog new stabl topolog int view id address sender local cach statu cach statu synchron run cach valid command view id new stabl topolog view id sender cach name return cach topolog stabl topolog cach statu get stabl topolog stabl topolog null stabl topolog get topolog id new stabl topolog get topolog id log tracef updat stabl topolog cach cach name new stabl topolog cach statu set stabl topolog new stabl topolog overrid public void handl rebal final string cach name final cach topolog cach topolog final int view id final address sender throw interrupt except run log debugf ignor rebal request cach local cach manag run cach topolog get topolog id cach name return final local cach statu cach statu run cach get cach name cach statu null log tracef ignor rebal cach n exist local cach topolog get topolog id cach name return cach statu get topolog updat executor execut tri handl rebal view id cach statu cach topolog cach name sender catch throwabl log rebal start error cach name privat void handl rebal int view id local cach statu cach statu cach topolog cach topolog string cach name address sender tri wait view view id cach statu get join info get timeout time unit catch interrupt except e shut ignor except rebal return synchron cach statu cach topolog exist topolog cach statu get current topolog exist topolog null cach topolog get topolog id exist topolog get topolog id start rebal command send asynchron entir cluster possibl receiv old one joiner joiner alreadi becom member log debugf ignor old rebal cach current topolog cach name exist topolog get topolog id cach topolog return updat cach topolog cach name cach topolog view id sender cach statu return log debugf start local rebal cach topolog cach name cach topolog cach topolog log rout tabl inform cach topolog handler handler cach statu get handler reset local topolog rebal cach name cach topolog exist topolog handler consist hash union cach statu get join info get consist hash factori union cach topolog get current cach topolog get pend cach topolog new topolog new cach topolog cach topolog get topolog id cach topolog get rebal id cach topolog get current cach topolog get pend union cach topolog get phase cach topolog get actual member cach topolog get member persist d handler rebal new topolog overrid public cach topolog get cach topolog string cach name local cach statu cach statu run cach get cach name return cach statu null cach statu get current topolog null overrid public cach topolog get stabl cach topolog string cach name local cach statu cach statu run cach get cach name return cach statu null cach statu get stabl topolog null overrid public boolean total order cach string cach name run log tracef total order cach return fals local cach manag run cach name return fals local cach statu cach statu run cach get cach name cach statu null log tracef total order cach return fals cach n exist local cach name return fals boolean total order cach statu get join info total order log tracef total order cach return cach name total order return total order privat void wait view int view id long timeout time unit time unit throw interrupt except tri transport view view id get timeout time unit catch execut except e view futur never complet except throw new cach except e get caus catch timeout except e throw log timeout wait view view id transport get view id manag attribut descript rebalanc enabl display name rebalanc enabl datum type data type writabl true overrid public boolean rebalanc enabl throw except return cach rebalanc enabl null overrid public void set rebalanc enabl boolean enabl throw except set cach rebalanc enabl null enabl overrid public boolean cach rebalanc enabl string cach name throw except int view id transport get view id replic command command new cach topolog control command cach name cach topolog control command type transport get address view id return execut coordin retri command view id public execut coordin retri replic command command int view id throw except boolean retri fals long end nano time servic expect end time get global timeout time unit true tri long remain milli time servic remain time end nano time unit return execut coordin command remain milli catch suspect except e trace log tracef coordin leav cluster queri rebalanc statu retri view inform group transport updat atom could send request old coordin work around send request second time view id retri view id math max view id transport get view id long remain nano time servic remain time end nano time unit wait view view id remain nano time unit retri fals els retri true overrid public void set cach rebalanc enabl string cach name boolean enabl throw except cach topolog control command type type enabl cach topolog control command type cach topolog control command type replic command command new cach topolog control command cach name type transport get address transport get view id execut cluster sync command get global timeout fals fals overrid public rebalanc statu get rebalanc statu string cach name throw except replic command command new cach topolog control command cach name cach topolog control command type transport get address transport get view id int view id transport get view id return execut coordin retri command view id manag attribut descript cluster avail display name cluster avail datum type data type writabl fals public string get cluster avail avail mode cluster avail avail mode synchron run cach local cach statu cach statu run cach valu avail mode avail mode cach statu get partit handl manag get avail mode cluster avail cluster avail min avail mode return cluster avail string overrid public avail mode get cach avail string cach name local cach statu cach statu run cach get cach name return cach statu get partit handl manag get avail mode overrid public void set cach avail string cach name avail mode avail mode throw except cach topolog control command type type cach topolog control command type replic command command new cach topolog control command cach name type transport get address avail mode transport get view id execut coordin command get global timeout overrid public void cach shutdown string name throw except replic command command new cach topolog control command name cach topolog control command type transport get address transport get view id execut coordin command get global timeout overrid public void handl cach shutdown string cach name compon registri cr gcr get name compon registri cach name perform orderli shutdown oper passiv manag passiv manag cr get compon passiv manag class passiv manag null passiv manag passiv cach shutdown write state scop persist state cach state new scope persist state impl cach name cach state set properti global state manag impl version get version cach state set properti global state manag impl time servic instant string cach state set properti global state manag impl version get major local cach statu cach statu run cach get cach name cach statu get current topolog get current remap address persist manag address persist scop state cach state global state manag null global state manag write scop state cach state privat object execut coordin replic command command long timeout throw except respons respons transport coordin tri trace log tracef attempt execut command self command gcr wire depend command respons respons command invok catch throwabl throw new cach except error handl join request els node coordin address coordin transport get coordin map address respons respons map transport invok remot collect singleton coordin command respons mode timeout null deliv order fals respons respons map get coordin respons null respons success throwabl except respons instanceof except respons except respons respons get except null throw new cach except bad respons receiv coordin respons except return success respons respons get respons valu privat void execut coordin async final replic command command throw except coordin execut actual synchron transport coordin async transport executor execut trace log tracef attempt execut command self command gcr wire depend command tri command invok catch throwabl log errorf fail execut replic command coordin async command get messag els address coordin transport get coordin ignor respons transport invok remot collect singleton coordin command respons mode null deliv order fals privat map address object execut cluster sync final replic command command final int timeout boolean total order boolean distribut throw except first invok remot total order map address respons respons map transport invok remot null command respons mode timeout null deliv order distribut return pars respons respons map futur map address respons remot futur transport invok remot async null command respons mode timeout null deliv order fals invok command local node gcr wire depend command respons local respons tri trace log tracef attempt execut command self command local respons respons command invok catch throwabl throwabl throw new except throwabl local respons success throw new cach except unsuccess local respons wait remot command finish map address respons respons map remot futur get timeout time unit pars respons map address object respons valu pars respons respons map respons valu put transport get address success respons local respons get respons valu return respons valu privat map address object pars respons map address respons respons map map address object respons valu new hash map transport get member size map entri address respons entri respons map entri set address address entri get key respons respons entri get valu respons success throwabl caus respons instanceof except respons except respons respons get except null throw new cach except unsuccess respons receiv node address respons caus respons valu put address success respons respons get respons valu return respons valu privat int get global timeout renam set someth like global rpc timeout return int gcr get global configur transport distribut sync timeout overrid public void prepar persist scope persist state state state set properti uuid persist string overrid public void prepar restor scope persist state state persist persist string state get properti uuid overrid public persist get persist return persist class local cach statu privat final cach join info join info privat final cach topolog handler handler privat final partit handl manag partit handl manag privat volatil cach topolog current topolog privat volatil cach topolog stabl topolog privat final limit executor topolog updat executor local cach statu string cach name cach join info join info cach topolog handler handler partit handl manag phm executor servic executor join info join info handler handler partit handl manag phm topolog updat executor new limit executor topolog cach name executor public cach join info get join info return join info public cach topolog handler get handler return handler public partit handl manag get partit handl manag return partit handl manag cach topolog get current topolog return current topolog void set current topolog cach topolog current topolog current topolog current topolog cach topolog get stabl topolog return stabl topolog void set stabl topolog cach topolog stabl topolog stabl topolog stabl topolog partit handl manag topolog updat current topolog limit executor get topolog updat executor return topolog updat executor 
packag org factori import org factori annot default factori import org util concurr lock impl lock contain import org util concurr lock impl per key lock contain import org util concurr lock impl stripe lock contain factori class creat instanc link lock contain author pedro ruivo sinc default factori class lock contain class public class lock contain factori extend abstract name cach compon factori implement auto instanti factori suppress warn uncheck overrid public construct class compon type return configur lock use lock strip new stripe lock contain configur lock concurr level new per key lock contain 
packag org configur cach import java util concurr time unit import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set import org util concurr isol level defin local lock concurr characterist cach author pmuir public class lock configur public static final attribut definit integ attribut definit builder concurr level immut build public static final attribut definit isol level attribut definit builder isol level isol level xml name isol immut build public static final attribut definit long attribut definit builder lock acquisit timeout time unit milli xml name acquir timeout build public static final attribut definit boolean attribut definit builder strip fals immut build public static final attribut definit boolean attribut definit builder write skew check true xml name write skew immut build static attribut set attribut definit set return new attribut set lock configur class privat final attribut integ concurr level privat final attribut isol level isol level privat final attribut long lock acquisit timeout privat final attribut boolean use lock stripe privat final attribut set attribut lock configur attribut set attribut attribut check protect attribut attribut concurr level attribut attribut isol level attribut attribut lock acquisit timeout attribut attribut use lock stripe attribut attribut concurr level lock contain adjust valu accord number concurr thread interact similar concurr level tune paramet see concurr hash map public int concurr level return concurr level get option appli non transact cach cluster local set true default valu cach keep datum consist case concurr updat cluster cach come cost addit n expect applic write datum concurr disabl flag increas perform deprec option alway code true code modifi sinc version deprec public boolean support concurr updat return true cach isol level support isol level see href http en wikipedia org wiki isol level http en wikipedia org wiki isol level discuss isol level public isol level isol level return isol level get maximum time attempt particular lock acquisit public long lock acquisit timeout return lock acquisit timeout get public lock configur lock acquisit timeout long timeout lock acquisit timeout set timeout return true pool share lock maintain entri need lock otherwis lock creat per entri cach lock stripe help control memori footprint may reduc concurr system public boolean use lock stripe return use lock stripe get set applic case write skew check set fals writer commit time discov work entri underli entri differ version work entri overwrit underli entri true version conflict know write skew throw except deprec sinc deprec public boolean write skew check return true public attribut set attribut return attribut overrid public string string return lock configur attribut attribut overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals lock configur lock configur obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result 
packag org configur cach import static org configur cach lock configur import static org configur cach lock configur import static org configur cach lock configur import static org configur cach lock configur import java util concurr time unit import org common configur builder import org common configur attribut attribut import org common configur attribut attribut set import org configur global global configur import org util concurr isol level import org util log log import org util log log factori defin local lock concurr characterist cach author pmuir public class lock configur builder extend abstract configur child builder implement builder lock configur privat static final log log log factori get log lock configur builder class privat final attribut set attribut protect lock configur builder configur builder builder super builder attribut lock configur attribut definit set concurr level lock contain adjust valu accord number concurr thread interact similar concurr level tune paramet see concurr hash map public lock configur builder concurr level int attribut attribut set return cach isol level support isol level see href http en wikipedia org wiki isol level http en wikipedia org wiki isol level discuss isol level public lock configur builder isol level isol level isol level attribut attribut set isol level return public isol level isol level return attribut attribut get see org configur cach lock configur support concurr updat deprec deprec public lock configur builder support concurr updat boolean log warn concurr updat support can not configur return maximum time attempt particular lock acquisit public lock configur builder lock acquisit timeout long l attribut attribut set l return maximum time attempt particular lock acquisit public lock configur builder lock acquisit timeout long l time unit unit return lock acquisit timeout unit milli l true pool share lock maintain entri need lock otherwis lock creat per entri cach lock stripe help control memori footprint may reduc concurr system public lock configur builder use lock stripe boolean b attribut attribut set b return set applic case write skew check set fals writer commit time discov work entri underli entri differ version work entri overwrit underli entri true version conflict know write skew throw except deprec sinc automat enabl transact deprec public lock configur builder write skew check boolean b return overrid public void valid attribut isol level isol level attribut attribut get builder cluster cach mode cluster isol level get isol level isol level set isol level isol level get isol level isol level set isol level isol level get isol level isol level set isol level overrid public void valid global configur global config overrid public lock configur creat return new lock configur attribut protect overrid public lock configur builder read lock configur templat attribut read templat attribut return overrid public string string return get class get simpl name attribut 
packag org factori import org factori annot default factori import org util concurr lock lock manag import org util concurr lock pend lock manag import org util concurr lock impl default lock manag import org util concurr lock impl default pend lock manag import org util concurr lock impl op pend lock manag factori class creat instanc link lock manag author manik surtani href mailto manik jboss org manik jboss org sinc default factori class lock manag class pend lock manag class public class lock manag factori extend abstract name cach compon factori implement auto instanti factori overrid public construct class compon type pend lock manag class equal compon type return compon type cast configur cluster cach mode cluster new default pend lock manag op pend lock manag get instanc els lock manag class equal compon type return compon type cast new default lock manag throw new illeg argument except unexpect compon type compon type 
packag org util concurr lock link org util concurr lock impl lock possibl state p use listen notifi state chang author pedro ruivo sinc public enum lock state lock owner queue wait lock avail lock owner leav queue avail acquir lock time occur lock owner wait queue deadlock occur anoth possibl lock owner abort lock owner releas lock 
packag org client hotrod log import static org jboss log logger level import static org jboss log logger level import static org jboss log logger level import static org jboss log logger level import static org jboss log logger level import java io except import java lang reflect method import java net socket address import java util collect import java util list import java util element except import java util set import org client hotrod event client event import org client hotrod event incorrect client listen except import org client hotrod except hot rod client except import org client hotrod impl transport transport import org client hotrod impl transport tcp tcp transport import org common cach configur except import org common cach except import org common cach listen except import org jboss log basic logger import org jboss log annot caus import org jboss log annot log messag import org jboss log annot messag import org jboss log annot messag logger log abstract hot rod client modul messag id rang inclus reserv author galder zamarr sinc messag logger project code public interfac log extend basic logger log messag level messag valu could find file classpath use default id void could find properti file string properti file log messag level messag valu perform oper cach associ unstart remot cach manag use remot cach manag start use remot cach id void unstart remot cach manag log messag level messag valu invalid magic number expect x receiv x id void invalid magic number short expect magic number short receiv magic log messag level messag valu invalid messag id expect receiv id void invalid messag id long expect msg id long receiv msg id log messag level messag valu error receiv server id void error server string messag log messag level messag valu send new topolog view id age contain address id void new topolog socket address address int view id int age int topolog size set socket address topolog log messag level messag valu except encount retri id void except retri left int retri int max retri caus hot rod client except te id log log messag level messag valu issu close socket id void error close socket tcp transport transport except e log messag level messag valu hash function configur version id void function configur int hash function version log messag level messag valu could invalid connect id void could invalid connect tcp transport transport caus except e log messag level messag valu could releas connect id void could releas connect tcp transport transport caus except e log messag level messag valu new server add add pool id void new server add socket address server log messag level messag valu fail add new server id void fail add new server socket address server caus except e log messag level messag valu server cluster anymor remov pool id void remov server socket address server log messag level messag valu unabl convert string properti int use default valu id void unabl convert string properti int string valu int default valu log messag level messag valu unabl convert string properti long use default valu id void unabl convert string properti long string valu long default valu log messag level messag valu unabl convert string properti boolean use default valu b id void unabl convert string properti boolean string valu boolean default valu log messag level messag valu version id void version string version messag valu enabl trust store specifi id cach configur except trust manag configur messag valu password requir open key store id cach configur except miss key store password string key store messag valu password requir open trust store id cach configur except miss trust store password string trust store messag valu configur custom key store trust store specifi context id cach configur except xor context messag valu unabl pars server address id cach configur except pars error server address string server messag valu invalid max retri valu valu great equal zero id cach configur except invalid max retri int retri per server messag valu enabl authent without specifi callback handler client subject id cach configur except invalid callback handler messag valu select authent mechan among support server mechan id secur except unsupport mech string auth mech list string server mech messag valu invalid mechan id cach configur except invalid sasl mechan string sasl mechan messag valu connect dedic listen id receiv event listen id id illeg state except unexpect listen id string listen id string expect listen id messag valu unabl unmarshal byte id hot rod client except unabl unmarshal byte string byte caus except e messag valu catch except invok method listen instanc id cach listen except except invok listen string name method object target caus throwabl caus messag valu method annot must accept exactli one paramet assign type id incorrect client listen except incorrect client listen string annot name collect allow paramet messag valu method annot return type void id incorrect client listen except incorrect client listen string annot name log messag level messag valu unexpect error consum event id void unexpect error consum event client event client event caus throwabl log messag level messag valu unabl complet read event server id void unabl read event server caus throwabl socket address server messag valu cach listen class must annot org client hotrod annot client listen id incorrect client listen except miss client listen annot string class name messag valu unknown event type receiv id hot rod client except unknown event short event type id log messag level messag valu unabl set method access id void unabl set acces method caus except e log messag level messag valu unrecover error read event server exit event reader thread id void unrecover error read event caus throwabl socket address server log messag level messag valu unabl read byte id void unabl unmarshal byte error string element string byte caus except e messag valu enabl near cach number max entri must configur id cach configur except near cach max entri undefin log messag level messag valu success close remot iter id void iter close string iter id messag valu invalid iter id id illeg state except error close iter string iter id messag valu invalid iter id id element except error retriev next string iter id log messag level messag valu switch cluster id void switch cluster string cluster name log messag level messag valu switch back main cluster id void switch back main cluster log messag level messag valu manual switch cluster id void manual switch cluster string cluster name log messag level messag valu manual switch back main cluster id void manual switch back main cluster messag valu name failov cluster need specifi id cach configur except miss cluster name definit messag valu host need specifi server definit failov cluster id cach configur except miss host definit messag valu least one server address need specifi failov cluster id cach configur except miss cluster server definit string site name messag valu duplic failov cluster specifi id cach configur except duplic cluster definit string site name messag valu client listen must use raw datum use queri filter id incorrect client listen except client listen must use raw data string class name messag valu client listen must use filter convert factori id incorrect client listen except client listen must use design filter convert factori string filter convert factori name log messag level messag valu ignor error close iter id void ignor error iter close string iter id caus except e log messag level messag valu start iter id void start iter string iter id log messag level messag valu transport obtain iter id void iter transport obtain transport transport string iter id log messag level messag valu track key belong segment alreadi track b id void track segment key string key int segment boolean track log messag level messag valu classpath look correct make sure mix uber jar id void warn uber jar duplic log messag level messag valu unabl convert properti enum use default valu id void unabl convert string properti enum string valu string default valu messag valu specifi callback handler usernam authent id cach configur except callback handler usernam mutual exclus messag valu class block java standard deseri white list adjust client configur java serial white list regular express includ class id cach except class whitelist string class name 
packag org client hotrod log import org jboss log logger factori creat link log instanc author manik surtani sinc public class log factori public static log get log class clazz return logger get messag logger log class clazz get name public static get log class clazz class log class return logger get messag logger log class clazz get name 
packag org topolog import java io except import java io object input import java io object output import java io serializ import java util collect import java util map import java util set import org common marshal instanc reus advanc extern import org marshal core id author dan berindei sinc public class manag statu respons implement serializ privat final map string cach statu respons cach privat final boolean rebalanc enabl public manag statu respons map string cach statu respons cach boolean rebalanc enabl rebalanc enabl rebalanc enabl cach cach public map string cach statu respons get cach return cach public boolean rebalanc enabl return rebalanc enabl overrid public string string return manag statu respons cach cach rebalanc enabl rebalanc enabl public static class extern extend instanc reus advanc extern manag statu respons overrid public void write object object output output manag statu respons cach statu respons throw except output write object cach statu respons cach output write boolean cach statu respons rebalanc enabl overrid public manag statu respons read object object input unmarshal throw except class find except map string cach statu respons cach map string cach statu respons unmarshal read object boolean rebalanc enabl unmarshal read boolean return new manag statu respons cach rebalanc enabl overrid public integ get id return id overrid public set class extend manag statu respons get type class return collect class extend manag statu respons singleton manag statu respons class 
packag org marshal ext import java io except import java io object input import java io object output import java util collect import java util hash map import java util map import java util set import java util tree map import java util concurr concurr hash map import org common equival equival import org common equival equival hash map import org common marshal abstract extern import org common marshal marshal util import org common util fast copi hash map import org common util util import org contain version entri version map import org distribut util read segment awar map import org marshal core id import org jboss marshal util ident int map map extern map implement except immut map singleton map e fast copi hash map hash map tree map author galder zamarr sinc public class map extern extend abstract extern map privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat final ident int map class number new ident int map class public map extern number put hash map class number put read segment awar map class number put tree map class number put fast copi hash map class number put equival hash map class number put concurr hash map class number put entri version map class number put get privat singleton map class number put get privat empti map class overrid public void write object object output output map map throw except int number number get map get class output write number switch number case case case case marshal util marshal map map output break case equival hash map equival map equival hash map map output write object equival map get key equival output write object equival map get valu equival marshal util marshal map map output break case copi map avoid concurr modif except marshal util marshal map fast copi hash map map clone output break case map entri singleton map entri map entri set iter next output write object singleton get key output write object singleton get valu break default break overrid public map read object object input input throw except class find except int magic number input read unsign byte switch magic number case return marshal util unmarshal map input hash map new case return marshal util unmarshal map input size new tree map case return marshal util unmarshal map input fast copi hash map new case equival object key eq equival object input read object equival object valu eq equival object input read object return marshal util unmarshal map input size new equival hash map key eq valu eq case return marshal util unmarshal map input concurr hash map new case return marshal util unmarshal map input entri version map new case return collect singleton map input read object input read object case return collect empti map default throw new illeg state except unknown map type magic number overrid public integ get id return id overrid public set class extend map get type class return util class extend map set hash map class tree map class fast copi hash map class equival hash map class read segment awar map class concurr hash map class entri version map class get privat singleton map class get privat empti map class privat static class extend map get privat singleton map class return get map class java util collect singleton map privat static class extend map get privat empti map class return get map class java util collect empti map privat static class extend map get map class string class name return util map load class class name map class get class loader 
packag org stream impl intop object import java util function function import java util stream stream import org factori compon registri import org stream impl intop intermedi oper perform map oper regular link stream param type input stream param type output stream public class map oper implement intermedi oper stream stream privat final function super extend function public map oper function super extend function function function overrid public stream perform stream stream return stream map function overrid public void handl inject compon registri registri registri wire depend function public function super extend get function return function 
packag org factori import org common cach except import org common marshal marshal import org common marshal stream marshal import org factori annot default factori import org marshal core global marshal marshal factori author galder zamarr sinc default factori class stream marshal class marshal class public class marshal factori extend empti constructor factori implement auto instanti factori overrid public construct class compon type object comp marshal config marshal global configur serial marshal config marshal null comp new global marshal els comp new global marshal config marshal tri return compon type cast comp catch except e throw new cach except problem cast bootstrap compon comp get class type compon type e 
packag org configur cach import org common configur abstract type properti configur import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set import org common configur attribut ident attribut copier import org evict evict type control memori storag configur cach author william burn public class memori configur public static final attribut definit integ attribut definit builder address count build public static final attribut definit storag type attribut definit builder storag storag type copier ident attribut copier immut build public static final attribut definit long attribut definit builder size build public static final attribut definit evict type attribut definit builder type evict type build static public attribut set attribut definit set return new attribut set memori configur class abstract type properti configur attribut set privat final attribut long size privat final attribut evict type evict type privat final attribut storag type storag type privat final attribut integ address count privat final attribut set attribut memori configur attribut set attribut attribut attribut storag type attribut attribut size attribut attribut evict type attribut attribut address count attribut attribut storag type use datum contain return public storag type storag type return storag type get size evict disabl return public long size return size get public void size long new size size set new size configur evict type return public evict type evict type return evict type get public boolean evict enabl return size get address pointer count return public int address count return address count get public attribut set attribut return attribut overrid public string string return memori configur attribut attribut 
packag org configur cach import static org configur cach memori configur import static org configur cach memori configur import static org configur cach memori configur import static org configur cach memori configur import org common cach configur except import org common configur builder import org common configur attribut attribut set import org configur global global configur import org evict evict type control datum contain cach author william burn public class memori configur builder extend abstract configur child builder implement builder memori configur privat attribut set attribut memori configur builder configur builder builder super builder attribut memori configur attribut definit set set link storag type determin datum store datum contain param storag type storag type underli datum return configur builder public memori configur builder storag type storag type storag type attribut attribut set storag type return defin maximum size evict occur see link evict type evict type detail size interpret param size public memori configur builder size long size attribut attribut set size return set evict type either ul li entri evict number entri exceed link size long li li entri evict approxim combin size valu exceed link size long li ul cach size guarante exceed upper limit specifi max entri howev due natur evict unlik ever exactli maximum number entri specifi param type public memori configur builder evict type evict type type attribut attribut set type return configur set use heap defin mani address pointer number round next power two help perform address pointer less collis improv perform read write oper param address count return public memori configur builder address count int address count attribut attribut set address count return overrid public void valid storag type type attribut attribut get type storag type get builder compat enabl throw new cach configur except compat mode requir storag type type long size attribut attribut get size evict type evict type attribut attribut get evict type evict type type storag type throw new cach configur except base evict requir binari type overrid public void valid global configur global config overrid public memori configur creat return new memori configur attribut protect overrid public memori configur builder read memori configur templat attribut read templat attribut return overrid public string string return data contain configur builder attribut attribut 
packag org contain entri metadata import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org contain entri abstract intern cach entri import org contain entri expiri helper import org contain entri intern cach valu import org marshal core id import org metadata metadata cach entri mortal link metadata awar author galder zamarr sinc public class metadata mortal cach entri extend abstract intern cach entri implement metadata awar protect object valu protect metadata metadata protect long creat public metadata mortal cach entri object key object valu metadata metadata long creat super key valu valu metadata metadata creat creat overrid public object get valu return valu overrid public object set valu object valu return valu valu overrid public final boolean expir long return expiri helper expir mortal metadata lifespan creat overrid public final boolean expir return expir system current time milli overrid public final boolean expir return true overrid public final long get creat return creat overrid public final long get last use return overrid public final long get lifespan return metadata lifespan overrid public final long get max idl return overrid public final long get expiri time long lifespan metadata lifespan return lifespan creat lifespan overrid public final void touch op overrid public final void touch long current time milli op overrid public final void reincarn reincarn system current time milli overrid public void reincarn long creat overrid public intern cach valu intern cach valu return new metadata mortal cach valu valu metadata creat overrid public metadata get metadata return metadata overrid public void set metadata metadata metadata metadata metadata public static class extern extend abstract extern metadata mortal cach entri overrid public void write object object output output metadata mortal cach entri ice throw except output write object ice key output write object ice valu output write object ice metadata unsign numer write unsign long output ice creat overrid public metadata mortal cach entri read object object input input throw except class find except object k input read object object v input read object metadata metadata metadata input read object long creat unsign numer read unsign long input return new metadata mortal cach entri k v metadata creat overrid public integ get id return id overrid public set class extend metadata mortal cach entri get type class return util set metadata mortal cach entri class 
packag org contain entri metadata import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org contain entri expiri helper import org contain entri immort cach valu import org contain entri intern cach entri import org marshal core id import org metadata metadata mortal cach valu correspond link org contain entri metadata metadata mortal cach entri author galder zamarr sinc public class metadata mortal cach valu extend immort cach valu implement metadata awar metadata metadata long creat public metadata mortal cach valu object valu metadata metadata long creat super valu metadata metadata creat creat overrid public intern cach entri intern cach entri object key return new metadata mortal cach entri key valu metadata creat overrid public metadata get metadata return metadata overrid public void set metadata metadata metadata metadata metadata overrid public final long get creat return creat overrid public final long get lifespan return metadata lifespan overrid public boolean expir long return expiri helper expir mortal metadata lifespan creat overrid public boolean expir return expir system current time milli overrid public long get expiri time long lifespan metadata lifespan return lifespan creat lifespan overrid public final boolean expir return true public static class extern extend abstract extern metadata mortal cach valu overrid public void write object object output output metadata mortal cach valu mcv throw except output write object mcv valu output write object mcv metadata unsign numer write unsign long output mcv creat overrid public metadata mortal cach valu read object object input input throw except class find except object v input read object metadata metadata metadata input read object long creat unsign numer read unsign long input return new metadata mortal cach valu v metadata creat overrid public integ get id return id overrid public set class extend metadata mortal cach valu get type class return util class extend metadata mortal cach valu set metadata mortal cach valu class 
packag org contain entri metadata import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org contain entri abstract intern cach entri import org contain entri expiri helper import org contain entri intern cach valu import org marshal core id import org metadata metadata cach entri transient e consid expir period use link org contain entri metadata metadata awar author galder zamarr sinc public class metadata transient cach entri extend abstract intern cach entri implement metadata awar protect object valu protect metadata metadata protect long last use public metadata transient cach entri object key object valu metadata metadata long last use super key valu valu metadata metadata last use last use overrid public object get valu return valu overrid public object set valu object valu return valu valu overrid public final void touch touch system current time milli overrid public final void touch long current time milli last use current time milli overrid public final void reincarn op overrid public void reincarn long op overrid public final boolean expir return true overrid public boolean expir long return expiri helper expir transient metadata max idl last use overrid public boolean expir return expir system current time milli overrid public long get creat return overrid public final long get last use return last use overrid public long get lifespan return overrid public long get expiri time long max idl metadata max idl return max idl last use max idl overrid public final long get max idl return metadata max idl overrid public intern cach valu intern cach valu return new metadata transient cach valu valu metadata last use overrid public metadata get metadata return metadata overrid public void set metadata metadata metadata metadata metadata public static class extern extend abstract extern metadata transient cach entri overrid public void write object object output output metadata transient cach entri ice throw except output write object ice key output write object ice valu output write object ice metadata unsign numer write unsign long output ice last use overrid public metadata transient cach entri read object object input input throw except class find except object k input read object object v input read object metadata metadata metadata input read object long last use unsign numer read unsign long input return new metadata transient cach entri k v metadata last use overrid public integ get id return id overrid public set class extend metadata transient cach entri get type class return util set metadata transient cach entri class 
packag org contain entri metadata import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org contain entri expiri helper import org contain entri immort cach valu import org contain entri intern cach entri import org marshal core id import org metadata metadata transient cach valu correspond link org contain entri transient cach entri link org contain entri metadata metadata awar author galder zamarr sinc public class metadata transient cach valu extend immort cach valu implement metadata awar metadata metadata long last use public metadata transient cach valu object valu metadata metadata long last use super valu metadata metadata last use last use overrid public intern cach entri intern cach entri object key return new metadata transient cach entri key valu metadata last use overrid public long get max idl return metadata max idl overrid public long get last use return last use overrid public final boolean expir long return expiri helper expir transient metadata max idl last use overrid public final boolean expir return expir system current time milli overrid public boolean expir return true overrid public metadata get metadata return metadata overrid public void set metadata metadata metadata metadata metadata overrid public long get expiri time long max idl metadata max idl return max idl last use max idl public static class extern extend abstract extern metadata transient cach valu overrid public void write object object output output metadata transient cach valu tcv throw except output write object tcv valu output write object tcv metadata unsign numer write unsign long output tcv last use overrid public metadata transient cach valu read object object input input throw except class find except object v input read object metadata metadata metadata input read object long last use unsign numer read unsign long input return new metadata transient cach valu v metadata last use overrid public integ get id return id overrid public set class extend metadata transient cach valu get type class return util class extend metadata transient cach valu set metadata transient cach valu class 
packag org contain entri metadata import static java lang math min import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org contain entri abstract intern cach entri import org contain entri expiri helper import org contain entri intern cach valu import org marshal core id import org metadata metadata form link org contain entri transient mortal cach entri link org contain entri version version author manik surtani sinc public class metadata transient mortal cach entri extend abstract intern cach entri implement metadata awar object valu metadata metadata long creat long last use public metadata transient mortal cach entri object key object valu metadata metadata long key valu metadata public metadata transient mortal cach entri object key object valu metadata metadata long last use long creat super key valu valu metadata metadata last use last use creat creat overrid public object get valu return valu overrid public long get lifespan return metadata lifespan overrid public final boolean expir return true overrid public long get creat return creat overrid public boolean expir long return expiri helper expir transient mortal metadata max idl last use metadata lifespan creat overrid public boolean expir return expir system current time milli overrid public final long get expiri time long lifespan metadata lifespan long lset lifespan creat lifespan long max idl metadata max idl long muet max idl last use max idl lset return muet muet return lset return min lset muet overrid public intern cach valu intern cach valu return new metadata transient mortal cach valu valu metadata creat last use overrid public long get last use return last use overrid public final void touch last use system current time milli overrid public final void touch long current time milli last use current time milli overrid public final void reincarn reincarn system current time milli overrid public void reincarn long creat overrid public long get max idl return metadata max idl overrid public object set valu object valu return valu valu overrid public metadata get metadata return metadata overrid public void set metadata metadata metadata metadata metadata public static class extern extend abstract extern metadata transient mortal cach entri overrid public void write object object output output metadata transient mortal cach entri ice throw except output write object ice key output write object ice valu output write object ice metadata unsign numer write unsign long output ice creat unsign numer write unsign long output ice last use overrid public metadata transient mortal cach entri read object object input input throw except class find except object k input read object object v input read object metadata metadata metadata input read object long creat unsign numer read unsign long input long last use unsign numer read unsign long input return new metadata transient mortal cach entri k v metadata last use creat overrid public integ get id return id overrid public set class extend metadata transient mortal cach entri get type class return util set metadata transient mortal cach entri class 
packag org contain entri metadata import static java lang math min import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org contain entri expiri helper import org contain entri intern cach entri import org marshal core id import org metadata metadata form link org contain entri transient mortal cach valu link org contain entri version version author manik surtani sinc public class metadata transient mortal cach valu extend metadata mortal cach valu implement metadata awar long last use public metadata transient mortal cach valu object v metadata metadata long creat long last use super v metadata creat last use last use overrid public intern cach entri intern cach entri object key return new metadata transient mortal cach entri key valu metadata last use creat overrid public long get max idl return metadata max idl overrid public long get last use return last use overrid public boolean expir long return expiri helper expir transient mortal metadata max idl last use metadata lifespan creat overrid public boolean expir return expir system current time milli overrid public long get expiri time long lifespan metadata lifespan long lset lifespan creat lifespan long max idl metadata max idl long muet max idl last use max idl lset return muet muet return lset return min lset muet public static class extern extend abstract extern metadata transient mortal cach valu overrid public void write object object output output metadata transient mortal cach valu valu throw except output write object valu valu output write object valu metadata unsign numer write unsign long output valu creat unsign numer write unsign long output valu last use overrid public metadata transient mortal cach valu read object object input input throw except class find except object v input read object metadata metadata metadata input read object long creat unsign numer read unsign long input long last use unsign numer read unsign long input return new metadata transient mortal cach valu v metadata creat last use overrid public integ get id return id overrid public set class extend metadata transient mortal cach valu get type class return util class extend metadata transient mortal cach valu set metadata transient mortal cach valu class 
packag org remot import org common marshal abstract extern import org common util util import org marshal core id import java io except import java io object input import java io object output import java io serializ import java util array import java util set wrapper object entri arriv via tful interfac author michael neal sinc public class cach entri implement serializ privat static final long serial version href http en wikipedia org wiki content type valu exampl applic octet stream often use header public string content type payload actual form content depend content type field string datum content type applic json applic xml text public byte datum public cach entri public cach entri string content type byte datum content type content type datum datum overrid public boolean equal object return true instanceof cach entri return fals cach entri cach entri return content type null content type equal content type content type null array equal datum datum overrid public int hash code return content type null content type hash code datum null array hash code datum public static class extern extend abstract extern cach entri overrid public set class extend cach entri get type class return util class extend cach entri set cach entri class overrid public void write object object output cach entri obj throw except write obj content type write int obj datum length write obj datum overrid public cach entri read object object input throw except class find except string content type read int len read int byte datum new byte len read fulli datum return new cach entri content type datum overrid public integ get id return id 
packag org util import java util collect import java util collect import java util hash map import java util hash set import java util map import java util properti import org command replic command import org command modul modul command extens import org command modul modul command factori import org command modul modul command initi import org command remot cach rpc command import org common util servic finder import org factori compon modul metadata file finder import org lifecycl modul lifecycl import org util log log import org util log log factori code modul properti code class repres modul servic extens author vladimir blagojev author sann grinovero author galder zamarr sinc public class modul properti extend properti privat static final long serial version privat static final log log log factori get log modul properti class privat map byte modul command factori command factori privat map byte modul command initi command initi privat collect class extend replic command modul command public static collect modul lifecycl resolv modul lifecycl class loader cl return servic finder load modul lifecycl class cl retriev iter contain metadata file finder declar modul param cl class loader use return iter modul metadata file finder public static iter modul metadata file finder get modul metadata file class loader cl return servic finder load modul metadata file finder class cl suppress warn uncheck public void load modul command handler class loader cl collect modul command extens modul cmd ext loader servic finder load modul command extens class cl modul cmd ext loader iter next command factori new hash map byte modul command factori command initi new hash map byte modul command initi modul command new hash set class extend replic command modul command extens extens modul cmd ext loader log debugf load modul command extens class extens modul command factori cmd factori extens get modul command factori modul command initi cmd initi extens get modul command initi map entri byte class extend replic command command cmd factori get modul command entri set byte id command get key command factori contain key id throw new illeg argument except string format use id command alreadi use id command factori get id get class get name command factori put id cmd factori modul command add command get valu command initi put id cmd initi els log debugf modul command extens load command initi collect empti map command factori collect empti map public collect class extend replic command modul command return modul command public map byte modul command factori modul command factori return command factori public map byte modul command initi modul command initi return command initi suppress warn uncheck public collect class extend cach rpc command modul cach rpc command collect class extend replic command cmd modul command cmd null cmd empti return collect empti set collect class extend cach rpc command cach rpc cmd new hash set class extend cach rpc command class extend replic command modul cmd class cmd cach rpc command class assign modul cmd class cach rpc cmd add class extend cach rpc command modul cmd class return cach rpc cmd public collect class extend replic command modul replic command collect class extend replic command cmd modul command cmd null cmd empti return collect empti set collect class extend replic command replic cmd new hash set class extend replic command class extend replic command modul cmd class cmd cach rpc command class assign modul cmd class replic cmd add modul cmd class return replic cmd 
packag org contain entri import static org common util util str import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org marshal core id import org metadata emb metadata import org metadata metadata cach entri mortal e lifespan author manik surtani sinc public class mortal cach entri extend abstract intern cach entri protect object valu protect long lifespan protect long creat public mortal cach entri object key object valu long lifespan long creat super key valu valu lifespan lifespan creat creat overrid public object get valu return valu overrid public object set valu object valu return valu valu overrid public final boolean expir long return expiri helper expir mortal lifespan creat overrid public final boolean expir return expir system current time milli overrid public final boolean expir return true public void set lifespan long lifespan lifespan lifespan overrid public final long get creat return creat overrid public final long get last use return overrid public final long get lifespan return lifespan overrid public final long get max idl return overrid public final long get expiri time return lifespan creat lifespan overrid public final void touch op overrid public final void touch long current time milli op overrid public final void reincarn reincarn system current time milli overrid public void reincarn long creat overrid public intern cach valu intern cach valu return new mortal cach valu valu creat lifespan overrid public metadata get metadata return new emb metadata builder lifespan lifespan build overrid public void set metadata metadata metadata throw new illeg state except metadata set mortal entri need recreat via entri factori overrid public mortal cach entri clone return mortal cach entri super clone public static class extern extend abstract extern mortal cach entri overrid public void write object object output output mortal cach entri mce throw except output write object mce key output write object mce valu unsign numer write unsign long output mce creat output write long mce lifespan could neg use unsign long overrid public mortal cach entri read object object input input throw except class find except object k input read object object v input read object long creat unsign numer read unsign long input long lifespan input read long return new mortal cach entri k v lifespan creat overrid public integ get id return id overrid public set class extend mortal cach entri get type class return util set mortal cach entri class overrid public string string return mortal cach entri key str key valu str valu 
packag org contain entri import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org marshal core id mortal cach valu correspond link org contain entri mortal cach entri author manik surtani sinc public class mortal cach valu extend immort cach valu protect long creat protect long lifespan public mortal cach valu object valu long creat long lifespan super valu creat creat lifespan lifespan overrid public final long get creat return creat public final void set creat long creat creat creat overrid public final long get lifespan return lifespan public final void set lifespan long lifespan lifespan lifespan overrid public boolean expir long return expiri helper expir mortal lifespan creat overrid public boolean expir return expir system current time milli overrid public final boolean expir return true overrid public intern cach entri intern cach entri object key return new mortal cach entri key valu lifespan creat overrid public long get expiri time return lifespan creat lifespan overrid public boolean equal object return true instanceof mortal cach valu return fals super equal return fals mortal cach valu mortal cach valu creat creat return fals lifespan lifespan return fals return true overrid public int hash code int result super hash code result result int creat creat result result int lifespan lifespan return result overrid public string string return mortal cach valu valu valu lifespan lifespan creat creat overrid public mortal cach valu clone return mortal cach valu super clone public static class extern extend abstract extern mortal cach valu overrid public void write object object output output mortal cach valu mcv throw except output write object mcv valu unsign numer write unsign long output mcv creat output write long mcv lifespan could neg use unsign long overrid public mortal cach valu read object object input input throw except class find except object v input read object long creat unsign numer read unsign long input long lifespan input read long return new mortal cach valu v creat lifespan overrid public integ get id return id overrid public set class extend mortal cach valu get type class return util class extend mortal cach valu set mortal cach valu class 
packag org common hash import java io object input import java util collect import java util set import org common marshal id import org common marshal wrap byte array import org common marshal ext state extern import net jcip annot immut import net jcip annot thread safe murmur hash implement java base austin applebi href http code googl com p smhasher sourc brows trunk murmur hash cpp origin implement x version alway fast bit nativ processor even bite run bit also fast fast x version modern bit processor author patrick mc farland see href http site googl com site murmurhash murmur hash websit see href http en wikipedia org wiki murmur hash murmur hash entri wikipedia sinc thread safe immut public class murmur hash implement hash privat final static murmur hash instanc new murmur hash public static final byte byte public static murmur hash get instanc return instanc privat murmur hash static class state long h long h long k long k long c long c static long getblock byte key int return key x key x key x key x key x key x key x key x static void bmix state state state k state c state k state k state k state k state c state h state k state h state h state h state h state h state k state c state k state k state k state k state c state h state k state h state h state h state h x dce state h state h x ab state c state c x b c state c state c x bce static long fmix long k k k k xff afd ed ccd k k k xc ceb fe ec k k return k hash valu use x bit variant murmur hash param key valu hash param seed random valu return bit hash key array contain two long public static long murmur hash x final byte key final int seed state state new state state h x e c f af seed state h x dcd f cd fd seed state c x c b state c x cf ad f int key length state k getblock key state k getblock key bmix state state k state k int tail key length switch key length case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k key tail bmix state state h key length state h state h state h state h state h fmix state h state h fmix state h state h state h state h state h return new long state h state h hash valu use x bit variant murmur hash param key valu hash param seed random valu return bit hash key public static long murmur hash x final byte key final int seed exactli murmur hash x except return state h state state new state state h x e c f af seed state h x dcd f cd fd seed state c x c b state c x cf ad f int key length state k getblock key state k getblock key bmix state state k state k int tail key length switch key length case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k long key tail case state k key tail bmix state state h key length state h state h state h state h state h fmix state h state h fmix state h state h state h state h state h return state h hash valu use x bit variant murmur hash param key valu hash param seed random valu return bit hash key public static int murmur hash x final byte key final int seed return int murmur hash x key seed hash valu use x bit variant murmur hash param key valu hash param seed random valu return bit hash key array contain two long public static long murmur hash x final long key final int seed state state new state state h x e c f af seed state h x dcd f cd fd seed state c x c b state c x cf ad f int key length state k key state k key bmix state long tail key key length key length odd key length state k tail bmix state state h key length state h state h state h state h state h fmix state h state h fmix state h state h state h state h state h return new long state h state h hash valu use x bit variant murmur hash param key valu hash param seed random valu return bit hash key public static long murmur hash x final long key final int seed exactli murmur hash x except return state h state state new state state h x e c f af seed state h x dcd f cd fd seed state c x c b state c x cf ad f int key length state k key state k key bmix state long tail key key length key length state k tail bmix state state h key length state h state h state h state h state h fmix state h state h fmix state h state h state h state h state h return state h hash valu use x bit variant murmur hash param key valu hash param seed random valu return bit hash key public static int murmur hash x final long key final int seed return int murmur hash x key seed overrid public int hash byte payload return murmur hash x payload hash byte array effici param payload byte array hash return hash code byte array public static int hash long payload return murmur hash x payload overrid public int hash int hashcod obtain inlin murmur hash x byte remov unus code sinc know input alway byte need byte output byte b byte hashcod byte b byte hashcod byte b byte hashcod byte b byte hashcod state state new state state h x e c f af state h x dcd f cd fd state c x c b state c x cf ad f state k state k state k long b state k long b state k long b state k b bmix state state h state h state h state h state h state h fmix state h state h fmix state h state h state h state h state h return int state h overrid public int hash object instanceof byte return hash byte els instanceof wrap byte array return hash wrap byte array get byte els instanceof long return hash long els instanceof string return hash string string els return hash hash code privat int hash string string return int murmur hash x string privat long murmur hash x string string long seed exactli murmur hash x except work directli string char murmur hash state state new murmur hash state state h x e c f af seed state h x dcd f cd fd seed state c x c b state c x cf ad f int byte len int string len length int string len char c char int cp charact surrog c cp c els charact high surrog c string len char c char charact low surrog c cp charact code point c c els cp els cp els cp cp x f add byte state byte cp byte len els cp x ff byte b byte xc x f cp byte b byte x x f cp add byte state b byte len add byte state b byte len els cp xffff byte b byte xe x f cp byte b byte x x f cp byte b byte x x f cp add byte state b byte len add byte state b byte len add byte state b byte len els byte b byte xf x cp byte b byte x x f cp byte b byte x x f cp byte b byte x x f cp add byte state b byte len add byte state b byte len add byte state b byte len add byte state b byte len long save state k long save state k state k state k switch byte len case state k long byte save case state k long byte save case state k long byte save case state k long byte save case state k long byte save case state k long byte save case state k byte save case state k long byte save case state k long byte save case state k long byte save case state k long byte save case state k long byte save case state k long byte save case state k long byte save case state k byte save bmix state state h byte len state h state h state h state h state h fmix state h state h fmix state h state h state h state h state h return state h privat void add byte state state byte b int len int shift len x long bb b xff shift len x state k bb els state k bb len xf xf bmix state state k state k overrid public boolean equal object return null get class get class overrid public int hash code return overrid public string string return murmur hash public static class extern extend state extern murmur hash overrid public set class extend murmur hash get type class return collect singleton murmur hash class overrid public murmur hash read object object input input return instanc overrid public integ get id return id 
packag org factori import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name get default thread prio import static org factori know compon name shorten import java util concurr executor import java util concurr executor servic import java util concurr schedul executor servic import java util concurr thread factori import org common cach configur except import org common executor block thread pool executor factori import org common executor schedul thread pool executor factori import org common executor thread pool executor factori import org configur global global configur import org configur global thread pool configur import org executor lazi initi block task awar executor servic import org executor lazi initi executor servic import org executor lazi initi schedul executor servic import org factori annot default factori import org factori annot stop import org factori thread default thread factori import org util concurr block task awar executor servic factori specif know creat name executor author manik surtani author pedro ruivo sinc default factori class executor servic class executor class schedul executor servic class block task awar executor servic class public class name executor factori extend name compon factori implement auto instanti factori privat executor servic notif executor privat executor servic async transport executor privat executor servic persist executor privat block task awar executor servic remot command executor privat schedul executor servic expir executor privat executor servic state transfer executor privat executor servic async oper executor privat schedul executor servic timeout executor overrid suppress warn uncheck public construct class compon type string compon name tri construct happen startup either cach manag cach use synchron protect great impact app perform compon name equal synchron notif executor null notif executor creat executor servic global configur listen thread pool executor servic type return notif executor els compon name equal synchron persist executor null persist executor creat executor servic global configur persist thread pool executor servic type return persist executor els compon name equal synchron async transport executor null async transport executor creat executor servic global configur transport transport thread pool executor servic type return async transport executor els compon name equal synchron expir executor null expir executor creat executor servic global configur expir thread pool executor servic type return expir executor els compon name equal synchron remot command executor null remot command executor creat executor servic global configur transport remot command thread pool executor servic type return remot command executor els compon name equal synchron state transfer executor null state transfer executor creat executor servic global configur state transfer thread pool executor servic type return state transfer executor els compon name equal synchron async oper executor null async oper executor creat executor servic global configur async thread pool executor servic type return async oper executor els compon name end synchron timeout executor null timeout executor creat executor servic null executor servic type return timeout executor els throw new cach configur except unknown name executor compon name catch cach configur except ce throw ce catch except e throw new cach configur except unabl instanti executor factori name compon compon name e stop prioriti public void stop remot command executor null remot command executor shutdown notif executor null notif executor shutdown persist executor null persist executor shutdown async transport executor null async transport executor shutdown expir executor null expir executor shutdown state transfer executor null state transfer executor shutdown timeout executor null timeout executor shutdown async oper executor null async oper executor shutdown suppress warn uncheck privat extend executor servic creat executor servic thread pool configur thread pool configur string compon name executor servic type type thread factori thread factori thread pool executor factori executor factori thread pool configur null thread factori thread pool configur thread factori null thread pool configur thread factori creat thread factori default global configur compon name executor factori thread pool configur thread pool factori null thread pool configur thread pool factori creat thread pool factori default compon name type els thread factori creat thread factori default global configur compon name executor factori creat thread pool factori default compon name type switch type case return new lazi initi schedul executor servic executor factori thread factori case final string control name control shorten compon name global configur transport node name return new lazi initi block task awar executor servic executor factori thread factori global compon registri get time servic control name default return new lazi initi executor servic executor factori thread factori privat thread factori creat thread factori default global configur global cfg final string compon name use default return new default thread factori null get default thread prio compon name default thread factori global cfg transport node name shorten compon name privat thread pool executor factori creat thread pool factori default final string compon name executor servic type type switch type case return schedul thread pool executor factori creat default int default queue size know compon name get default queue size compon name int default max thread known compon name get default thread compon name return block thread pool executor factori creat default max thread default queue size privat enum executor servic type 
packag org interceptor lock import java util collect import java util function predic import org invalid cach usag except import org command data command import org command flag affect command import org command write datum write command import org context invoc context import org util log log import org util log log factori lock interceptor use non transact cach author mircea marku public class non transact lock interceptor extend abstract lock interceptor privat static final log log log factori get log non transact lock interceptor class privat final predic object lock key lock key overrid protect log get log return log overrid protect final object visit datum read command invoc context ctx data command command throw throwabl assert non transact ctx return invok next ctx command overrid protect object visit datum write command invoc context ctx data write command command throw throwabl assert non transact ctx return visit non tx data write command ctx command overrid protect object handl read mani command invoc context ctx flag affect command command collect key assert non transact ctx return invok next ctx command overrid protect object handl write mani command invoc context ctx flag affect command command collect key boolean forward throw throwabl assert non transact ctx forward skip lock command return invok next ctx command tri lock record ctx key stream filter lock key get lock timeout milli command catch throwabl lock manag unlock ctx throw return invok next final ctx command unlock return handler privat void assert non transact invoc context ctx happen cach use transact scope ctx tx scope throw new invalid cach usag except non transact cach access transact invoc context 
packag org interceptor distribut import java util array list import java util collect import java util hash map import java util hash set import java util list import java util map import java util map entri import java util set import java util concurr complet futur import java util function bi consum import org command function read write key command import org command function read write key valu command import org command function read write mani command import org command function read write mani entri command import org command function write key command import org command function write key valu command import org command function write mani command import org command function write mani entri command import org command read get cach entri command import org command write comput command import org command write comput absent command import org command write put key valu command import org command write put map command import org command write remov command import org command write replac command import org command write write command import org contain entri cach entri import org context invoc context import org context impl flag bit set import org distribut local cach topolog import org distribut ch consist hash import org interceptor invoc final action import org interceptor invoc success function import org remot respons success respons import org remot transport address import org statetransf outdat topolog except import org util concurr complet futur import org util log log import org util log log factori non transact interceptor use distribut cach support concurr write implement base lock forward g k write node owner k forward give command acquir lock k forward remain owner appli chang return lock acquisit need appli result well releas lock return result oper p note even though introduc addit forward behav well conjunct consist hash awar hotrod client connect directli lock owner author mircea marku author dan berindei sinc public class non tx distribut interceptor extend base distribut interceptor privat static log log log factori get log non tx distribut interceptor class privat static final boolean trace log trace enabl privat final put map helper put map helper new put map helper creat remot callback privat final read write mani helper read write mani helper new read write mani helper creat remot callback privat final read write mani entri helper read write mani entri helper new read write mani entri helper creat remot callback privat final write mani entri helper write mani entri helper new write mani entri helper creat remot callback privat final write mani helper write mani helper new write mani helper creat remot callback privat map address set integ primari owner segment consist hash ch map address set integ map new hash map ch get member size int segment segment ch get num segment segment address owner ch locat primari owner segment segment map comput absent owner new hash set add segment return map assum function run primari owner give segment privat map address set integ backup owner segment consist hash ch set integ segment map address set integ map new hash map ch get member size ch replic address member ch get member map put member segment map remov rpc manag get address els integ segment segment list address owner ch locat owner segment segment int owner size map comput absent owner get new hash set add segment return map overrid public object visit put key valu command invoc context ctx put key valu command command throw throwabl return handl non tx write command ctx command overrid public object visit remov command invoc context ctx remov command command throw throwabl return handl non tx write command ctx command overrid public object visit replac command invoc context ctx replac command command throw throwabl return handl non tx write command ctx command overrid public object visit comput command invoc context ctx comput command command throw throwabl return handl non tx write command ctx command overrid public object visit comput absent command invoc context ctx comput absent command command throw throwabl return handl non tx write command ctx command overrid public object visit read write key valu command invoc context ctx read write key valu command command throw throwabl return handl non tx write command ctx command overrid public object visit read write key command invoc context ctx read write key command command throw throwabl return handl non tx write command ctx command overrid public object visit put map command invoc context ctx put map command command throw throwabl return handl read write mani command ctx command put map helper overrid public object visit write mani entri command invoc context ctx write mani entri command command throw throwabl return handl write mani command ctx command write mani entri helper overrid public object visit write mani command invoc context ctx write mani command command throw throwabl return handl write mani command ctx command write mani helper overrid public object visit read write mani command invoc context ctx read write mani command command throw throwabl return handl read write mani command ctx command read write mani helper overrid public object visit read write mani entri command invoc context ctx read write mani entri command command throw throwabl return handl read write mani command ctx command read write mani entri helper privat extend write command contain item object handl write mani command invoc context ctx command write mani command helper contain item helper throw except due possibl repeat oper outdat topolog except throw possibl function appli multipl time node gener solut proper solut probabl record command invoc id entri implement housekeep local cach topolog cach topolog check topolog id command consist hash ch cach topolog get write consist hash ctx origin local map address set integ segment map primari owner segment ch count complet futur futur new count complet futur segment map size go member node invok next node owner key other key issu remot call everyth finish futur complet entri address set integ pair segment map entri set address member pair get key set integ segment pair get valu handl segment write mani command ctx command helper ch futur member segment return async valu futur els origin local check datum need return handl remot write mani command ctx command helper privat extend write command contain item void handl segment write mani command invoc context ctx command write mani command helper contain item helper consist hash ch count complet futur futur address member set integ segment member equal rpc manag get address contain item filter wrap ctx command segment helper local command helper copi local command item local key back handler counter futur decrement backup call complet invok next final ctx local command creat local invoc handler ch futur segment helper f rv return copi helper copi primari command ch segment int size helper get item copi size size futur count return rpc manag invok remot async collect singleton list member copi default sync option complet respons map throwabl throwabl null futur complet except throwabl els get success respons fail respons map futur rsp futur complet except outdat topolog except null return futur count privat extend write command item object handl remot write mani command invoc context ctx command write mani command helper item helper item item helper get item command object key helper item key item ctx lookup entri key null entri factori wrap extern entri ctx key null fals true helper regist remot callback command return invok next appli ctx command helper remot callback els return invok next ctx command privat extend write command contain item contain filter wrap invoc context ctx command set integ segment write mani command helper contain item helper filter command key entri collect wrap null context yet contain item helper new contain item item helper get item command object key helper item key item segment contain key partition get segment key helper accumul item item cach entri entri ctx lookup entri key entri null execut write command entri factori wrap extern entri ctx key null fals true return item privat extend write command contain item object handl read write mani command invoc context ctx command write mani command helper item contain helper throw except due possibl repeat oper outdat topolog except throw possibl function appli multipl time node gener solut proper solut probabl record command invoc id entri implement housekeep consist hash ch check topolog id command get write consist hash ctx origin local map address set integ segment map primari owner segment ch object result null command flag flag bit set result new object helper get item command size merg complet futur object futur new merg complet futur segment map size result helper transform result mutabl int offset new mutabl int go member node invok next node owner key other key issu remot call everyth finish futur complet entri address set integ pair segment map entri set address member pair get key set integ segment pair get valu member equal rpc manag get address handl local segment read write mani command ctx command helper ch futur offset segment els handl remot segment read write mani command command helper ch futur offset member segment return async valu futur els origin local return handl remot read write mani command ctx command helper privat extend write command contain item void handl local segment read write mani command invoc context ctx command write mani command helper contain item helper consist hash ch merg complet futur object futur mutabl int offset set integ segment throw except contain item helper new contain list complet futur retriev null filter command key entri collect record remot retriev context yet item item helper get item command object key helper item key item segment contain key partition get segment key helper accumul item item retriev add remot get ctx command retriev key int size helper contain size item size futur count return final int offset offset valu offset valu size local command helper copi local command item invoc final action handler creat local invoc handler ch futur segment helper merg complet futur move list item futur offset retriev null invok next final ctx local command handler els must wait retriev finish proceed local command complet futur ra retriev array new complet futur retriev size object result async invok next ctx command complet futur ra make stage result final ctx command handler local key back handler counter futur decrement backup call complet privat extend write command item void handl remot segment read write mani command command write mani command helper item helper consist hash ch merg complet futur object futur mutabl int offset address member set integ segment final int offset offset valu iter entri read segment awar map realli worth copi helper copi primari command ch segment int size helper get item copi size offset valu size size futur count return send command primari owner rpc manag invok remot async collect singleton list member copi default sync option complet respons throwabl throwabl null futur complet except throwabl els success respons respons get success respons fail respons futur rsp futur complet except outdat topolog except respons null return object respons valu respons get respons valu merg complet futur move list item futur respons valu futur offset futur count privat extend write command item object handl remot read write mani command invoc context ctx command write mani command helper item helper throw except list complet futur retriev null check datum need item item helper get item command retriev add remot get ctx command retriev helper item key item complet futur void delay retriev null complet futur ra retriev array new complet futur retriev size delay complet futur ra els delay complet futur complet null object result async invok next ctx command delay helper regist remot callback command return make stage result appli ctx command helper remot callback els return result privat list complet futur add remot get invoc context ctx write command command list complet futur retriev object key throw except cach entri cach entri ctx lookup entri key cach entri null rare situat n mind bit ineffect remot get command flag flag bit set command flag flag bit set entri factori wrap extern entri ctx key null fals true els retriev null retriev new array list get cach entri command fake get command cf build get cach entri command key command get flag bit set complet futur get futur remot get ctx fake get command fake get command get key true retriev add get futur return retriev privat extend write command extend count complet futur item invoc final action creat local invoc handler consist hash ch futur set integ segment write mani command helper item helper bi consum object return valu consum return be ctx be command rv throwabl throwabl null futur complet except throwabl els tri return valu consum accept futur rv map address set integ backup owner backup owner segment ch segment entri address set integ backup backup owner entri set r command origin command backup copi helper copi backup r command ch backup get valu helper get item backup copi empti continu set address backup owner collect singleton backup get key synchron backup copi futur increment rpc manag invok remot async backup owner backup copi default sync option complet respons map remot throwabl remot throwabl null futur complet except remot throwabl els futur count els rpc manag invok remot async backup owner backup copi default async option futur count catch throwabl futur complet except overrid public object visit write key valu command invoc context ctx write key valu command command throw throwabl return handl non tx write command ctx command overrid public object visit write key command invoc context ctx write key command command throw throwabl return handl non tx write command ctx command privat final static class mutabl int public int valu privat extend write command object write mani remot callback write mani command helper helper invoc context ctx command object rv consist hash ch check topolog id command get write consist hash alreadi check command topolog actual assum realli primari owner map address set integ backup backup owner segment ch ch get primari segment owner rpc manag get address backup empti return rv boolean sync synchron command complet futur futur sync new complet futur backup size null int futur entri address set integ backup backup entri set copi helper copi backup command ch backup get valu sync futur futur rpc manag invok remot async collect singleton backup get key copi default sync option els rpc manag invok remot async collect singleton backup get key copi default async option return sync async valu complet futur futur appli nil rv rv privat extend write command invoc success function creat remot callback write mani command helper helper return ctx command rv write mani remot callback helper ctx command rv 
packag org context impl import java util collect import java util map import java util set import org common util collect factori import org contain entri cach entri import org remot transport address context use non transact call remot local author mircea marku jboss com sinc public class non tx invoc context extend abstract invoc context privat static final int privat final map object cach entri look entri privat set object lock key privat object lock owner public non tx invoc context int num entri address origin super origin look entri collect factori make map collect factori comput capac num entri public non tx invoc context address origin super origin look entri collect factori make map overrid public cach entri lookup entri object k return look entri get k overrid public void remov look entri object key look entri remov key overrid public void put look entri object key cach entri e look entri put key e overrid suppress warn uncheck public map object cach entri get look entri return map object cach entri look entri null collect empti map look entri overrid public boolean tx scope return fals overrid public object get lock owner return lock owner overrid public void set lock owner object lock owner lock owner lock owner overrid public non tx invoc context clone non tx invoc context dolli non tx invoc context super clone dolli look entri put look entri return dolli overrid public void add lock key object key lock key null lock key collect factori make set lock key add key overrid public set object get lock key return lock key null collect empti set lock key overrid public void clear lock key lock key null 
packag org common marshal ext import java io except import java io object output import org common marshal abstract extern extern write state simpli marshal class inform author galder zamarr sinc public abstract class state extern extend abstract extern overrid public void write object object output output object throw except instanc state op 
packag org contain offheap import java io except import org common cach except import org common marshal marshal import org common marshal wrap byte array import org common marshal wrap byte import org configur cach configur import org contain intern entri factori import org contain entri intern cach entri import org contain version entri version import org factori annot inject import org metadata emb metadata import org metadata metadata import org util time servic factori creat cach entri instanc heap memori author wburn sinc public class heap entri factori impl implement heap entri factori privat static final heap memori heap memori privat static final byte new byte privat marshal marshal privat heap memori alloc alloc privat time servic time servic privat intern entri factori intern entri factori privat boolean evict enabl custom store metadata bit use privat static final byte version set combin follow type privat static final byte one follow ever set privat static final byte privat static final byte privat static final byte privat static final byte compos hash code int key length int metadata length int valu length int type byte privat static final int inject public void inject marshal marshal heap memori alloc alloc time servic time servic intern entri factori intern entri factori configur configur marshal marshal alloc alloc time servic time servic intern entri factori intern entri factori evict enabl configur memori evict enabl creat entri heap first byte alway reserv futur refer anoth entri param key key use param valu valu use param metadata metadata use return address entri creat heap overrid public long creat wrap byte key wrap byte valu metadata metadata byte type byte metadata byte metadata instanceof emb metadata entri version version metadata version byte version byte version null type tri version byte marshal object byte buffer version catch except interrupt except e throw new cach except e els type version byte long lifespan metadata lifespan long max idl metadata max idl lifespan max idl type metadata byte version byte els lifespan max idl type metadata byte new byte version byte length bit put long metadata byte lifespan bit put long metadata byte time servic wall clock time system arraycopi version byte metadata byte version byte length els lifespan max idl type metadata byte new byte version byte length bit put long metadata byte max idl bit put long metadata byte time servic wall clock time system arraycopi version byte metadata byte version byte length els type metadata byte new byte version byte length bit put long metadata byte max idl bit put long metadata byte lifespan long time time servic wall clock time bit put long metadata byte time bit put long metadata byte time system arraycopi version byte metadata byte version byte length els type tri metadata byte marshal object byte buffer metadata catch except interrupt except e throw new cach except e int key size key get length int metadata size metadata byte length int valu size valu get length evict requir addit memori pointer begin point link node int header offset evict enabl long total size header offset key size metadata size valu size long memori address alloc alloc total size header offset int offset evict enabl write empti link address pointer first put long memori address offset offset put int memori address offset key hash code offset put int memori address offset key get length offset put int memori address offset metadata byte length offset put int memori address offset valu get length offset put byte memori address offset type offset put byte key get byte key back array offset memori address offset key size offset key size put byte metadata byte memori address offset metadata size offset metadata size put byte valu get byte valu back array offset memori address offset valu size offset valu size assert offset total size return memori address overrid public long get size long entri address int header offset evict enabl int key length get int entri address header offset int metadata length get int entri address header offset int valu length get int entri address header offset return header offset key length metadata length valu length overrid public long get next long entri address return get long entri address evict enabl overrid public void set next long entri address long valu put long entri address evict enabl valu overrid public long get lru node long entri address return get long entri address overrid public void set lru node long entri address long valu put long entri address valu overrid public int get hash code long entri address byte evict need option byte link pointer int header offset evict enabl return get int entri address header offset assum address n contain link pointer begin param address address read entri return entri memori locat overrid public intern cach entri wrap byte wrap byte memori long address int header offset evict enabl int offset header offset int hash code get int address offset offset byte key byte new byte get int address offset offset byte metadata byte new byte get int address offset offset byte valu byte new byte get int address offset offset byte metadata type get byte address offset offset get byte address offset key byte key byte length offset key byte length get byte address offset metadata byte metadata byte length offset metadata byte length get byte address offset valu byte valu byte length offset valu byte length metadata metadata custom metadata metadata type tri metadata metadata marshal object byte buffer metadata byte catch except class find except e throw new cach except e return intern entri factori creat new wrap byte array key byte new wrap byte array valu byte metadata els long lifespan long max idl long creat long last use offset boolean version metadata type ignor find type switch metadata type x case lifespan max idl creat last use break case max idl lifespan bit get long metadata byte offset creat bit get long metadata byte offset last use break case lifespan max idl bit get long metadata byte offset creat last use bit get long metadata byte offset break case lifespan bit get long metadata byte offset max idl bit get long metadata byte offset creat bit get long metadata byte offset last use bit get long metadata byte offset break default throw new illeg argument except unsupport type metadata type version tri entri version version entri version marshal object byte buffer metadata byte offset metadata byte length offset return intern entri factori creat new wrap byte array key byte hash code new wrap byte array valu byte version creat lifespan last use max idl catch except class find except e throw new cach except e els return intern entri factori creat new wrap byte array key byte hash code new wrap byte array valu byte metadata null creat lifespan last use max idl overrid public wrap byte get key long address long header offset evict enabl int key length get int address header offset byte key byte new byte key length get byte address header offset key byte key byte length return new wrap byte array key byte assum address point entri exclud pointer refer begin param address address entri read param wrap byte key check equal return whether key address equal overrid public boolean equal key long address wrap byte wrap byte int header offset evict enabl int hash code wrap byte hash code hash code get int address header offset return fals int key length get int address header offset key length wrap byte get length return fals int key length byte b get byte address header offset b wrap byte get byte return fals return true 
packag org distribut ch impl import java util array import java util hash map import java util list import java util map import org distribut ch consist hash import org remot transport address class hold statist consist hash count mani segment own primari own member author dan berindei sinc public class ownership statist privat final map address integ node privat final int primari own privat final int own public ownership statist list address node node new hash map address integ node size int node size node put node get primari own new int node size own new int node size public ownership statist consist hash ch list address activ node activ node int ch get num segment list address owner ch locat owner segment int j j owner size j address address owner get j integ node index node get address node index null j primari own node index own node index public ownership statist ownership statist node new hash map address integ node primari own array copi primari own primari own length own array copi own own length public int get primari own address integ node get null return return primari own public int get own address integ node get null return return own public void inc primari own address integ node get null throw new illeg argument except tri modifi statist node n exist primari own public void inc own address integ node get null throw new illeg argument except tri modifi statist node n exist own public void dec primari own address integ node get null throw new illeg argument except tri modifi statist node n exist primari own public void dec own address integ node get null throw new illeg argument except tri modifi statist node n exist own public int sum primari own int segment primari owner int own count primari own segment primari owner own count return segment primari owner public int sum own int owner count int own count own owner count own count return owner count public string string string builder sb new string builder ownership statist boolean first true map entri address integ e node entri set first sb append address node e get key integ index e get valu sb append node append append primari own index append append own index primari own index first fals return sb string 
packag org configur pars import static org common util string properti replac replac properti import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name import static org factori know compon name shorten import java util collect import java util hash map import java util map import java util object import java util properti import java util concurr thread factori import java util concurr time unit import javax xml stream stream constant import javax xml stream stream except import org common api basic cach contain import org common configur build import org common configur configur import org common equival equival import org common executor block thread pool executor factori import org common executor cach thread pool executor factori import org common executor schedul thread pool executor factori import org common executor thread pool executor factori import org common marshal advanc extern import org common util util import org configur cach abstract store configur builder import org configur cach async store configur builder import org configur cach author configur builder import org configur cach backup configur import org configur cach backup configur builder import org configur cach backup failur polici import org configur cach cach mode import org configur cach cluster loader configur builder import org configur cach configur import org configur cach configur builder import org configur cach custom store configur builder import org configur cach index import org configur cach interceptor configur import org configur cach interceptor configur builder import org configur cach memori configur builder import org configur cach partit handl configur builder import org configur cach secur configur builder import org configur cach singl file store configur builder import org configur cach storag type import org configur cach store configur builder import org configur global global author configur builder import org configur global global configur builder import org configur global global role configur builder import org configur global global state configur builder import org configur global shutdown hook behavior import org configur global thread pool configur import org configur global thread pool configur builder import org configur global transport configur builder import org conflict entri merg polici import org conflict merg polici import org evict evict type import org factori thread default thread factori import org partitionhandl partit handl import org persist cluster cluster loader import org persist file singl file store import org persist spi cach loader import org remot transport transport import org secur princip role mapper import org secur impl cluster role mapper import org secur impl common name role mapper import org secur impl ident role mapper import org transact lock mode import org transact transact protocol import org util concurr isol level import org util log log import org util log log factori import org kohsuk meta inf servic class implement parser schema file author tristan tarrant author galder zamarr sinc meta inf servic namespac namespac uri urn config root namespac uri urn config root namespac uri urn config root namespac root namespac uri urn config root namespac uri urn config root namespac uri urn config root namespac uri urn config root namespac uri urn config root namespac uri urn config root public class parser implement configur parser static final log log log factori get log parser class privat final map string default thread factori thread factori new hash map privat final map string thread pool configur builder thread pool new hash map privat final map string string thread pool thread factori new hash map public parser overrid public void read element final extend stream reader reader final configur builder holder holder throw stream except reader next reader next tag stream constant element element element name reader get local name switch element case pars contain reader holder break case pars group reader holder break case pars thread reader holder break default throw pars util unexpect element reader privat void pars serial final extend stream reader reader final configur builder holder holder throw stream except global configur builder builder holder get global configur builder int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder serial marshal util get instanc valu holder get class loader break case builder serial version valu break default throw pars util unexpect attribut reader pars advanc extern reader holder privat void pars advanc extern final extend stream reader reader final configur builder holder holder throw stream except global configur builder builder holder get global configur builder reader next reader next tag stream constant element element element name reader get local name switch element case int attribut reader get attribut count advanc extern advanc extern null integ id null pars util requir attribut reader attribut get local name int attribut string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case advanc extern util get instanc valu holder get class loader break case id integ valu valu break default throw pars util unexpect attribut reader pars util requir content reader id null builder serial add advanc extern id advanc extern els builder serial add advanc extern advanc extern break default throw pars util unexpect element reader privat void pars thread extend stream reader reader configur builder holder holder throw stream except reader next reader next tag stream constant element element element name reader get local name switch element case pars thread factori reader break case pars cach thread pool reader holder break case pars schedul thread pool reader holder break case pars block bound queue thread pool reader holder break default throw pars util unexpect element reader link thread factori thread pool refer map entri string thread pool configur builder entri thread pool entri set string thread factori name thread pool thread factori get entri get key thread factori name null thread factori thread factori thread factori get thread factori name entri get valu thread factori thread factori privat void pars block bound queue thread pool extend stream reader reader configur builder holder holder throw stream except thread pool configur builder builder new thread pool configur builder holder get global configur builder string name null string thread factori name null int max thread int core thread int queue length long keep aliv int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case name valu break case thread factori name valu break case core thread integ valu valu break case max thread integ valu valu break case queue length integ valu valu break case keep aliv long valu valu break default throw pars util unexpect attribut reader thread pool executor factori factori new block thread pool executor factori max thread core thread queue length keep aliv builder thread pool factori factori keep track thread pool thread factori name map wait thread section process link actual thread factori thread pool thread pool thread factori put name thread factori name thread pool put name builder pars util requir content reader privat void pars schedul thread pool extend stream reader reader configur builder holder holder throw stream except thread pool configur builder builder new thread pool configur builder holder get global configur builder string name null string thread factori name null int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case name valu break case thread factori name valu break default throw pars util unexpect attribut reader thread pool executor factori factori schedul thread pool executor factori creat builder thread pool factori factori keep track thread pool thread factori name map wait thread section process link actual thread factori thread pool thread pool thread factori put name thread factori name thread pool put name builder pars util requir content reader privat void pars cach thread pool extend stream reader reader configur builder holder holder throw stream except thread pool configur builder builder new thread pool configur builder holder get global configur builder string name null string thread factori name null int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case name valu break case thread factori name valu break default throw pars util unexpect attribut reader thread pool executor factori factori cach thread pool executor factori creat builder thread pool factori factori keep track thread pool thread factori name map wait thread section process link actual thread factori thread pool thread pool thread factori put name thread factori name thread pool put name builder pars util requir content reader privat void pars thread factori extend stream reader reader throw stream except string name null thread group thread group null string thread name pattern null int prioriti minimum prioriti int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case name valu break case thread group new thread group valu break case thread name pattern valu break case prioriti integ valu valu break default throw pars util unexpect attribut reader default thread factori thread factori new default thread factori name thread group prioriti thread name pattern null null thread factori put name thread factori pars util requir content reader privat void pars group extend stream reader reader configur builder holder holder throw stream except transport transport null int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case transport util get instanc valu holder get class loader break default throw pars util unexpect attribut reader transport null set default transport holder get global configur builder transport default transport els holder get global configur builder transport transport transport reader next reader next tag stream constant element element element name reader get local name switch element case pars stack file reader holder break default throw pars util unexpect element reader privat void pars stack file extend stream reader reader configur builder holder holder throw stream except string stack name null int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case stack name valu holder get global configur builder transport add properti stack stack name valu break case holder get global configur builder transport add properti stack file path stack name valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars contain extend stream reader reader configur builder holder holder throw stream except holder push scope parser scope global configur builder builder holder get global configur builder reader get schema sinc builder default cach name basic cach contain int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder global jmx statist cach manag name valu break case log ignor xml attribut attribut break case builder default cach name valu break case log ignor xml attribut attribut break case log ignor xml attribut attribut break case builder async thread pool read creat thread pool configur valu break case builder listen thread pool read creat thread pool configur valu break case log evict executor deprec fallthrough case builder expir thread pool read creat thread pool configur valu break case reader get schema sinc throw pars util unexpect attribut reader attribut get local name els log ignor replic queue attribut attribut get local name reader get locat get line number break case builder persist thread pool read creat thread pool configur valu break case builder state transfer thread pool read creat thread pool configur valu break case log ignor xml attribut attribut break case builder global jmx statist enabl boolean valu valu break case builder shutdown hook behavior shutdown hook behavior valu valu break default throw pars util unexpect attribut reader reader next reader next tag stream constant element element element name reader get local name switch element case pars transport reader holder break case pars local cach reader holder fals break case pars local cach reader holder true break case pars invalid cach reader holder fals break case pars invalid cach reader holder true break case pars replic cach reader holder fals break case pars replic cach reader holder true break case pars distribut cach reader holder fals break case pars distribut cach reader holder true break case reader get schema sinc pars scatter cach reader holder fals els throw pars util unexpect element reader break case reader get schema sinc pars scatter cach reader holder true els throw pars util unexpect element reader break case pars serial reader holder break case reader get schema sinc throw pars util unexpect element reader els pars modul reader holder break case pars jmx reader holder break case pars global secur reader holder break case reader get schema sinc pars global state reader holder els throw pars util unexpect element reader break default reader handl holder holder pop scope privat void pars global secur extend stream reader reader configur builder holder holder throw stream except pars util requir attribut reader reader next reader next tag stream constant element element element name reader get local name switch element case pars global author reader holder break default throw pars util unexpect element reader privat void pars global author extend stream reader reader configur builder holder holder throw stream except global author configur builder builder holder get global configur builder secur author enabl int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder audit logger util get instanc valu holder get class loader break default throw pars util unexpect attribut reader princip role mapper role mapper null reader next reader next tag stream constant element element element name reader get local name switch element case role mapper null throw pars util unexpect element reader pars util requir attribut reader pars util requir content reader role mapper new ident role mapper break case role mapper null throw pars util unexpect element reader pars util requir attribut reader pars util requir content reader role mapper new common name role mapper break case role mapper null throw pars util unexpect element reader pars util requir attribut reader pars util requir content reader role mapper new cluster role mapper break case role mapper null throw pars util unexpect element reader role mapper pars custom mapper reader holder break case pars global role reader builder break default throw pars util unexpect element reader role mapper null builder princip role mapper role mapper privat princip role mapper pars custom mapper extend stream reader reader configur builder holder holder throw stream except string mapper class pars util requir singl attribut reader attribut get local name pars util requir content reader return util get instanc mapper class holder get class loader privat void pars global role extend stream reader reader global author configur builder builder throw stream except string attribut pars util requir attribut reader attribut get local name attribut get local name global role configur builder role builder role attribut string permiss attribut split role permiss permiss int reader get attribut count pars util requir namespac attribut reader attribut attribut attribut name reader get attribut local name switch attribut case case alreadi handl break default throw pars util unexpect attribut reader pars util requir content reader privat void pars jmx extend stream reader reader configur builder holder holder throw stream except global configur builder builder holder get global configur builder int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder global jmx statist jmx domain valu break case builder global jmx statist bean server lookup util get instanc valu holder get class loader break case builder global jmx statist allow duplic domain boolean valu valu break default throw pars util unexpect attribut reader properti properti pars properti reader builder global jmx statist properti properti privat void pars modul extend stream reader reader configur builder holder holder throw stream except reader next reader next tag stream constant reader handl holder privat void pars transport extend stream reader reader configur builder holder holder throw stream except global configur builder global builder holder get global configur builder holder get global configur builder transport get transport null holder get global configur builder transport default transport transport configur builder transport holder get global configur builder transport int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case boolean stack find transport get properti stack valu null stack find string file path transport get properti stack file path valu transport add properti stack valu transport add properti configur file file path break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case global builder transport cluster name valu break case break case break case break case break case break case break case break case break case global builder transport transport thread pool read creat thread pool configur valu break case reader get schema sinc throw pars util unexpect attribut reader attribut get local name els log ignor attribut total order executor attribut get local name reader get locat get line number case global builder transport remot command thread pool read creat thread pool configur valu break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case global builder transport distribut sync timeout long valu valu break case global builder transport node name valu default thread factori thread factori thread factori valu thread factori set node valu break case break case global builder transport machin id valu break case global builder transport rack id valu break case global builder transport site id valu global builder site local site valu break case reader get schema sinc global builder transport initi cluster size integ valu valu els throw pars util unexpect attribut reader break case reader get schema sinc global builder transport initi cluster timeout long pars long valu time unit els throw pars util unexpect attribut reader break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break case break default throw pars util unexpect attribut reader pars util requir content reader privat void pars global state extend stream reader reader configur builder holder holder throw stream except pars util requir attribut reader global state configur builder builder holder get global configur builder global state enabl reader next reader next tag stream constant element element element name reader get local name switch element case builder persist locat pars global state path reader break case builder temporari locat pars global state path reader break default throw pars util unexpect element reader privat string pars global state path extend stream reader reader throw stream except string path replac properti pars util requir attribut reader attribut get local name int reader get attribut count attribut attribut attribut name reader get attribut local name switch attribut case log ignor xml attribut attribut break case handl break default throw pars util unexpect attribut reader pars util requir content reader return path privat thread pool configur creat thread pool configur string thread pool name string compon name thread pool configur builder thread pool thread pool get thread pool name thread pool null throw log undefin thread pool name thread pool name thread pool configur thread pool configur thread pool creat default thread factori thread factori thread pool configur thread factori thread factori set compon shorten compon name return thread pool configur privat void pars local cach extend stream reader reader configur builder holder holder boolean templat throw stream except holder push scope templat parser scope parser scope string name reader get attribut valu null attribut get local name string configur reader get attribut valu null attribut get local name configur builder builder get configur builder holder name templat configur builder cluster cach mode cach mode int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name pars cach attribut reader attribut valu builder reader next reader next tag stream constant element element element name reader get local name pars cach element reader element holder holder pop scope privat void pars cach attribut extend stream reader reader int index attribut attribut string valu configur builder builder throw stream except switch attribut case case handl caller break case case case log ignor xml attribut attribut break case builder simpl cach boolean valu valu break case builder jmx statist enabl boolean valu valu break case builder jmx statist avail boolean valu valu break case log ignor xml attribut attribut break case builder unsaf unreli return valu boolean valu valu break default throw pars util unexpect attribut reader index privat void pars share state cach element extend stream reader reader element element configur builder holder holder throw stream except configur builder builder holder get current configur builder switch element case pars state transfer reader builder break default pars cach element reader element holder privat void pars backup extend stream reader reader configur builder builder throw stream except backup present remov exist backup add default config builder site backup clear reader next reader next tag stream constant element element element name reader get local name switch element case pars backup reader builder break default throw pars util unexpect element reader privat void pars partit handl extend stream reader reader configur builder holder holder throw stream except configur builder builder holder get current configur builder partit handl configur builder ph builder cluster partit handl int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case log partit handl configur enabl deprec ph enabl boolean valu valu break case ph split partit handl valu valu upper case break case merg polici mp merg polici string valu entri merg polici merg polici mp merg polici util get instanc valu holder get class loader mp impl ph merg polici merg polici break default throw pars util unexpect attribut reader pars util requir content reader privat void pars backup extend stream reader reader configur builder builder throw stream except backup configur builder backup builder site add backup int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case backup site valu break case backup strategi backup configur backup strategi valu valu break case backup backup failur polici backup failur polici valu valu break case backup replic timeout long valu valu break case backup enabl boolean valu valu break case backup use two phase commit boolean pars boolean valu break case backup failur polici class valu break default throw pars util unexpect attribut reader backup site null throw pars util miss requir reader collect singleton attribut reader next reader next tag stream constant element element element name reader get local name switch element case pars take offlin reader backup break case pars site state transfer reader backup break default throw pars util unexpect element reader privat void pars take offlin extend stream reader reader backup configur builder backup throw stream except int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case backup take offlin failur integ valu valu break case backup take offlin min time wait long valu valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars site state transfer extend stream reader reader backup configur builder backup throw stream except int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case backup state transfer chunk size integ pars int valu break case backup state transfer timeout long pars long valu break case backup state transfer max retri integ pars int valu break case backup state transfer wait time long pars long valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars backup extend stream reader reader configur builder builder throw stream except builder site backup reset int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder site backup remot cach valu break case builder site backup remot site valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars cach secur extend stream reader reader configur builder builder throw stream except secur configur builder secur builder builder secur pars util requir attribut reader reader next reader next tag stream constant element element element name reader get local name switch element case pars cach author reader secur builder author enabl break default throw pars util unexpect element reader privat void pars cach author extend stream reader reader author configur builder authz builder throw stream except int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case authz builder enabl boolean pars boolean valu break case string role valu split authz builder role role break default throw pars util unexpect attribut reader pars util requir content reader protect void pars cach element extend stream reader reader element element configur builder holder holder throw stream except configur builder builder holder get current configur builder switch element case pars lock reader builder break case pars transact reader builder holder break case pars evict reader builder break case pars expir reader builder break case pars persist reader holder break case pars index reader holder break case pars custom interceptor reader holder break case pars version reader holder break case pars compat reader holder break case pars store binari reader holder break case reader get schema sinc throw pars util unexpect element reader els pars modul reader holder break case pars data contain reader holder break case pars memori reader holder break case pars backup reader builder break case pars backup reader builder break case pars partit handl reader holder break case pars cach secur reader builder break default reader handl holder privat void pars data contain final extend stream reader reader final configur builder holder holder throw stream except configur builder builder holder get current configur builder int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case log datum contain configur deprec builder datum contain datum contain util get instanc valu holder get class loader break case builder datum contain key equival util equival get instanc valu holder get class loader break case builder datum contain valu equival util equival get instanc valu holder get class loader break default throw pars util unexpect attribut reader properti properti new properti reader next reader next tag stream constant element element element name reader get local name switch element case pars properti reader properti break default throw pars util unexpect element reader builder datum contain properti properti privat void pars memori final extend stream reader reader final configur builder holder holder throw stream except memori configur builder memori builder holder get current configur builder memori pars util requir attribut reader reader next reader next tag stream constant element element element name reader get local name switch element case memori builder storag type storag type pars heap memori attribut reader holder break case memori builder storag type storag type pars object memori attribut reader holder break case memori builder storag type storag type pars binari memori attribut reader holder break default throw pars util unexpect element reader privat void pars heap memori attribut final extend stream reader reader final configur builder holder holder throw stream except memori configur builder memori builder holder get current configur builder memori int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case memori builder size long pars long valu break case memori builder evict type evict type valu valu break case memori builder address count integ pars int valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars object memori attribut final extend stream reader reader final configur builder holder holder throw stream except memori configur builder memori builder holder get current configur builder memori int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case memori builder size long pars long valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars binari memori attribut final extend stream reader reader final configur builder holder holder throw stream except memori configur builder memori builder holder get current configur builder memori int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case memori builder size long pars long valu break case memori builder evict type evict type valu valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars store binari final extend stream reader reader final configur builder holder holder throw stream except log element deprec use element element configur builder builder holder get current configur builder boolean binari key null boolean binari valu null builder memori storag type storag type int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case binari key boolean pars boolean valu break case binari valu boolean pars boolean valu break default throw pars util unexpect attribut reader binari key null binari key binari valu null binari valu builder memori storag type storag type explicitli disabl pars util requir content reader privat void pars compat extend stream reader reader configur builder holder holder throw stream except configur builder builder holder get current configur builder builder compat enabl int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder compat marshal util get instanc valu holder get class loader break default throw pars util unexpect attribut reader pars util requir content reader privat void pars version final extend stream reader reader final configur builder holder holder throw stream except int reader get attribut count pars util requir namespac attribut reader attribut attribut attribut name reader get attribut local name switch attribut case log ignor attribut version attribut get local name reader get locat get line number break default throw pars util unexpect attribut reader pars util requir content reader privat void pars custom interceptor extend stream reader reader configur builder holder holder throw stream except pars util requir attribut reader reader next reader next tag stream constant element element element name reader get local name switch element case pars interceptor reader holder break default throw pars util unexpect element reader privat void pars interceptor extend stream reader reader configur builder holder holder throw stream except configur builder builder holder get current configur builder interceptor configur builder interceptor builder builder custom interceptor add interceptor int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case interceptor builder util load class valu holder get class loader break case interceptor builder util load class valu holder get class loader break case interceptor builder interceptor class util load class valu holder get class loader break case interceptor builder index integ pars int valu break case interceptor builder posit interceptor configur posit valu valu upper case break default throw pars util unexpect attribut reader interceptor builder properti pars properti reader protect void pars lock extend stream reader reader configur builder builder throw stream except int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder lock isol level isol level valu valu break case builder lock use lock stripe boolean pars boolean valu break case builder lock lock acquisit timeout long pars long valu break case builder lock concurr level integ pars int valu break case log ignor attribut write skew attribut attribut get local name reader get locat get line number break default throw pars util unexpect attribut reader pars util requir content reader protect void pars transact extend stream reader reader configur builder builder configur builder holder holder throw stream except int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder transact cach stop timeout long pars long valu break case transact mode tx mode transact mode valu valu builder transact transact mode tx mode get mode builder transact use synchron tx mode enabl tx mode get mode transact builder transact recoveri enabl tx mode recoveri enabl builder invoc batch enabl tx mode batch enabl break case builder transact lock mode lock mode valu valu break case builder transact transact manag lookup util get instanc valu holder get class loader break case builder transact reaper wake interv long pars long valu break case builder transact complet tx timeout long pars long valu break case builder transact transact protocol transact protocol valu valu break case builder transact auto commit boolean pars boolean valu break case builder transact recoveri recoveri info cach name valu break case builder transact notif boolean pars boolean valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars evict extend stream reader reader configur builder builder throw stream except log element deprec use element element int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case case case log ignor xml element attribut break case log evict max entri deprec case builder memori size long pars long valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars expir extend stream reader reader configur builder builder throw stream except int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder expir max idl long pars long valu break case builder expir lifespan long pars long valu break case builder expir wake interv long pars long valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars invalid cach extend stream reader reader configur builder holder holder boolean templat throw stream except holder push scope templat parser scope parser scope string name reader get attribut valu null attribut get local name string configur reader get attribut valu null attribut get local name configur builder builder get configur builder holder name templat configur cach mode base cach mode configur null cach mode builder cluster cach mode builder cluster cach mode base cach mode int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder cluster hash key partition util get instanc valu holder get class loader break default pars cluster cach attribut reader attribut valu builder base cach mode reader next reader next tag stream constant element element element name reader get local name switch element default pars cach element reader element holder holder pop scope privat void pars segment cach attribut extend stream reader reader int index attribut attribut string valu configur builder builder class loader class loader cach mode base cach mode throw stream except switch attribut case builder cluster hash num segment integ pars int valu break case builder cluster hash consist hash factori util get instanc valu class loader break case reader get schema sinc builder cluster hash key partition util get instanc valu class loader els throw pars util unexpect attribut reader index break default pars cluster cach attribut reader index attribut valu builder base cach mode privat void pars cluster cach attribut extend stream reader reader int index attribut attribut string valu configur builder builder cach mode base cach mode throw stream except switch attribut case reader get schema sinc throw pars util unexpect attribut reader attribut get local name els log ignor replic queue attribut attribut get local name reader get locat get line number break case mode mode mode valu valu builder cluster cach mode mode appli base cach mode break case log ignor replic queue attribut attribut get local name reader get locat get line number break case log ignor replic queue attribut attribut get local name reader get locat get line number break case builder cluster remot timeout long pars long valu break default pars cach attribut reader index attribut valu builder privat void pars replic cach extend stream reader reader configur builder holder holder boolean templat throw stream except holder push scope templat parser scope parser scope string name reader get attribut valu null attribut get local name string configur reader get attribut valu null attribut get local name configur builder builder get configur builder holder name templat configur cach mode base cach mode configur null cach mode builder cluster cach mode builder cluster cach mode base cach mode int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name pars segment cach attribut reader attribut valu builder holder get class loader base cach mode reader next reader next tag stream constant element element element name reader get local name switch element default pars share state cach element reader element holder holder pop scope privat void pars state transfer extend stream reader reader configur builder builder throw stream except int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder cluster state transfer await initi transfer boolean pars boolean valu break case builder cluster state transfer fetch memori state boolean pars boolean valu break case builder cluster state transfer timeout long pars long valu break case builder cluster state transfer chunk size integ pars int valu break default throw pars util unexpect attribut reader pars util requir content reader privat void pars distribut cach extend stream reader reader configur builder holder holder boolean templat throw stream except holder push scope templat parser scope parser scope string name reader get attribut valu null attribut get local name string configur reader get attribut valu null attribut get local name configur builder builder get configur builder holder name templat configur cach mode base cach mode configur null cach mode builder cluster cach mode builder cluster cach mode base cach mode int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder cluster hash num owner integ pars int valu break case long lifespan long pars long valu lifespan builder cluster l enabl lifespan lifespan els builder cluster l disabl break case builder cluster l cleanup task frequenc long pars long valu break case builder cluster hash capac factor float pars float valu break default pars segment cach attribut reader attribut valu builder holder get class loader base cach mode reader next reader next tag stream constant element element element name reader get local name switch element case pars group reader holder break default pars share state cach element reader element holder holder pop scope privat void pars group final extend stream reader reader final configur builder holder holder throw stream except configur builder builder holder get current configur builder pars util requir singl attribut reader enabl int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case boolean pars boolean valu builder cluster hash group enabl els builder cluster hash group disabl break default throw pars util unexpect attribut reader reader next reader next tag stream constant element element element name reader get local name switch element case string valu pars util read string attribut element reader class builder cluster hash group add grouper util get instanc valu holder get class loader break default throw pars util unexpect element reader privat void pars scatter cach extend stream reader reader configur builder holder holder boolean templat throw stream except string name reader get attribut valu null attribut get local name string configur reader get attribut valu null attribut get local name configur builder builder get configur builder holder name templat configur cach mode base cach mode configur null cach mode builder cluster cach mode builder cluster cach mode base cach mode int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder cluster invalid batch size integ pars int valu break default pars segment cach attribut reader attribut valu builder holder get class loader base cach mode reader next reader next tag stream constant element element element name reader get local name switch element default pars share state cach element reader element holder privat configur builder get configur builder configur builder holder holder string name boolean templat string base configur name holder get name configur builder contain key name throw log duplic cach name name configur builder builder holder new configur builder name templat templat base configur name null configur builder base configur builder holder get name configur builder get base configur name base configur builder null throw log undeclar configur base configur name name configur base configur base configur builder build base configur templat throw log configur base configur name builder read base configur return builder privat void pars persist final extend stream reader reader final configur builder holder holder throw stream except configur builder builder holder get current configur builder int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case builder persist passiv boolean pars boolean valu break default throw pars util unexpect attribut reader clear order overrid configur defin default cach builder persist clear store reader next reader next tag stream constant element element element name reader get local name switch element case pars cluster loader reader holder break case pars file store reader holder break case pars custom store reader holder break case log ignor xml element element break default reader handl holder privat void pars cluster loader extend stream reader reader configur builder holder holder throw stream except configur builder builder holder get current configur builder cluster loader configur builder cclb builder persist add cluster loader int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu string attr name reader get attribut local name attribut attribut attribut name attr name switch attribut case cclb remot call timeout long pars long valu break default pars store attribut reader cclb break pars store element reader cclb protect void pars file store extend stream reader reader configur builder holder holder throw stream except singl file store configur builder store builder holder get current configur builder persist add singl file store int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case log ignor xml attribut attribut break case store builder locat valu break case store builder max entri integ valu valu break case store builder fragment factor float pars float valu break default pars store attribut reader store builder pars store element reader store builder method public static reus custom cach store loader configur parser public static void pars store attribut extend stream reader reader int index abstract store configur builder store builder throw stream except string valu replac properti reader get attribut valu index attribut attribut attribut name reader get attribut local name index switch attribut case store builder share boolean pars boolean valu break case store builder ignor modif boolean valu valu break case store builder preload boolean pars boolean valu break case store builder fetch persist state boolean pars boolean valu break case store builder purg startup boolean pars boolean valu break case store builder singleton enabl boolean pars boolean valu break case store builder transact boolean pars boolean valu break case store builder max batch size integ pars int valu break default throw pars util unexpect attribut reader index privat void pars store element extend stream reader reader store configur builder store builder throw stream except reader next reader next tag stream constant pars store element reader store builder public static void pars store element extend stream reader reader store configur builder store builder throw stream except element element element name reader get local name switch element case pars store write behind reader store builder async enabl break case pars store properti reader store builder break default throw pars util unexpect element reader public static void pars store write behind extend stream reader reader async store configur builder store builder throw stream except int reader get attribut count string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case reader get schema sinc throw pars util unexpect attribut reader attribut get local name els store builder flush lock timeout long pars long valu break case store builder modif queue size integ pars int valu break case reader get schema sinc throw pars util unexpect attribut reader attribut get local name els store builder shutdown timeout long pars long valu break case store builder thread pool size integ pars int valu break default throw pars util unexpect attribut reader pars util requir content reader public static void pars store properti extend stream reader reader store configur builder store builder throw stream except string properti pars util requir singl attribut reader attribut get local name string valu reader get element text store builder add properti properti valu privat void pars custom store final extend stream reader reader final configur builder holder holder throw stream except configur builder builder holder get current configur builder boolean fetch persist state null boolean ignor modif null boolean purg startup null boolean preload null boolean share null boolean singleton null boolean transact null cach loader store null int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case store util get instanc valu holder get class loader break case fetch persist state boolean valu valu break case ignor modif boolean valu valu break case purg startup boolean valu valu break case preload boolean pars boolean valu break case share boolean pars boolean valu break case singleton boolean pars boolean valu break case transact boolean pars boolean valu break default throw pars util unexpect attribut reader store null store instanceof singl file store singl file store configur builder sf builder persist add singl file store fetch persist state null sf fetch persist state fetch persist state ignor modif null sf ignor modif ignor modif purg startup null sf purg startup purg startup preload null sf preload preload share null sf share share singleton null sf singleton enabl singleton transact null sf transact transact pars store element reader sf els store instanceof cluster loader cluster loader configur builder cscb builder persist add cluster loader pars store element reader cscb els configur annot store get class get annot configur class class extend store configur builder builder class null annot null class configur annot valu configur null build build configur get annot build class builder class build valu subclass store configur builder class store configur builder config builder n specifi builder use custom configur builder set class builder class null config builder builder persist add store custom store configur builder class custom store class store get class els config builder builder persist add store builder class fetch persist state null config builder fetch persist state fetch persist state ignor modif null config builder ignor modif ignor modif purg startup null config builder purg startup purg startup preload null config builder preload preload share null config builder share share transact null config builder transact transact pars store element reader config builder privat void pars index final extend stream reader reader final configur builder holder holder throw stream except configur builder builder holder get current configur builder int reader get attribut count pars util requir namespac attribut reader string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case index index index valu valu builder index index index break case builder index auto config boolean valu valu break default throw pars util unexpect attribut reader properti index properti new properti reader next reader next tag stream constant element element element name reader get local name switch element case pars index entiti reader holder builder break case pars properti reader index properti break default throw pars util unexpect element reader builder index properti index properti privat void pars index entiti extend stream reader reader configur builder holder holder configur builder builder throw stream except pars util requir attribut reader reader next reader next tag stream constant element element element name reader get local name switch element case pars util requir attribut reader string class name reader get element text class index entiti util load class class name holder get class loader builder index add index entiti index entiti break default throw pars util unexpect element reader privat static void pars properti extend stream reader reader properti properti throw stream except int attribut reader get attribut count pars util requir attribut reader attribut get local name string key null string properti valu int attribut string valu replac properti reader get attribut valu attribut attribut attribut name reader get attribut local name switch attribut case key valu break default throw pars util unexpect attribut reader properti valu replac properti reader get element text properti set properti key properti valu public static properti pars properti final extend stream reader reader throw stream except properti properti new properti reader next reader next tag stream constant element element element name reader get local name switch element case pars properti reader properti break default throw pars util unexpect element reader return properti public enum merg polici null null merg polici merg polici merg polici privat final entri merg polici impl merg polici entri merg polici polici impl polici public entri merg polici get impl return impl public static merg polici string string str merg polici mp merg polici valu mp name equal ignor case str return mp return public static merg polici configur entri merg polici polici polici null return merg polici mp merg polici valu mp impl null object equal mp impl get class polici get class return mp return public enum transact mode org transact transact mode fals fals fals org transact transact mode fals fals true org transact transact mode fals fals fals org transact transact mode true fals fals org transact transact mode true true fals privat final org transact transact mode mode privat final boolean xa enabl privat final boolean recoveri enabl privat final boolean batch enabl transact mode org transact transact mode mode boolean xa enabl boolean recoveri enabl boolean batch enabl mode mode xa enabl xa enabl recoveri enabl recoveri enabl batch enabl batch enabl public static transact mode configur org transact transact mode mode boolean xa enabl boolean recoveri enabl boolean batch enabl mode org transact transact mode return transact mode tx mode transact mode valu tx mode mode mode tx mode xa enabl xa enabl tx mode recoveri enabl recoveri enabl tx mode batch enabl batch enabl return tx mode throw log unknown transact configur mode xa enabl recoveri enabl batch enabl public org transact transact mode get mode return mode public boolean enabl return xa enabl public boolean recoveri enabl return recoveri enabl public boolean batch enabl return batch enabl public enum mode true fals privat final boolean sync mode boolean sync sync sync public static mode cach mode cach mode mode return mode synchron public cach mode appli cach mode mode return sync mode sync mode async public boolean synchron return sync overrid public namespac get namespac return pars util get namespac annot get class 
packag org configur pars import static javax xml stream stream constant import static javax xml stream stream constant import static javax xml stream stream constant import java io buffer input stream import java io buffer output stream import java io file find except import java io except import java io input stream import java io output stream import java lang ref weak refer import java util collect import java util map import java util servic loader import java util concurr concurr map import javax xml namespac name import javax xml stream input factori import javax xml stream output factori import javax xml stream stream except import javax xml stream stream reader import javax xml stream stream writer import org common cach configur except import org common util collect factori import org common util file lookup import org common util file lookup factori import org common util servic finder import org common util util import org configur cach configur import org configur global global configur import org configur serial configur holder import org configur serial serial import org configur serial extend stream writer import org configur serial extend stream writer impl import org util log log import org util log log factori parser registri namespac map awar meta parser provid way deleg pars multi namespac file appropri parser defin link configur parser interfac registri avail parser build use link servic loader system implement link configur parser includ servic org configur pars configur parser file contain list avail parser author tristan tarrant sinc public class parser registri implement namespac map parser privat static final log log log factori get log parser registri class privat final weak refer class loader cl privat final concurr map name configur parser parser map public parser registri thread current thread get context class loader public parser registri class loader class loader class loader fals public parser registri class loader class loader boolean default parser map collect factori make concurr map cl new weak refer class loader collect configur parser parser servic finder load configur parser class cl get parser registri class get class loader configur parser parser parser namespac namespac parser get namespac namespac null throw log parser declar namespac parser get class get name boolean skip parser default skip parser namespac n namespac equal ns uri skip parser fals skip parser namespac ns namespac name q name new name n uri ns root configur parser exist parser parser map put absent q name parser exist parser null parser get class equal exist parser get class log parser root element alreadi regist q name parser get class get name exist parser get class get name public configur builder holder pars file string filenam throw except file lookup file lookup file lookup factori new instanc input stream file lookup lookup file filenam cl get null throw new file find except filenam tri return pars final util close public configur builder holder pars input stream tri configur builder holder holder new configur builder holder cl get pars holder holder valid return holder catch cach configur except e throw e catch except e throw new cach configur except e public void pars input stream configur builder holder holder throw stream except buffer input stream input new buffer input stream stream reader sub reader input factori new instanc creat stream reader input extend stream reader reader new extend stream reader impl sub reader pars reader holder sub reader close fire pars complet event parser context parser context holder get parser context valu parser context fire pars complet public void pars extend stream reader reader configur builder holder holder throw stream except tri reader requir null null reader next tag reader requir null null pars element reader holder reader next consum remain pars event final tri reader close catch except e overrid public void pars element extend stream reader reader configur builder holder holder throw stream except name name reader get name configur parser parser parser map get name parser null throw log unsupport configur name get local part name get namespac schema old schema reader get schema reader set schema schema namespac name get namespac parser read element reader holder reader set schema old schema public void serial output stream os global configur global configur map string configur configur throw stream except buffer output stream output new buffer output stream os stream writer sub writer output factori new instanc creat stream writer output extend stream writer writer new extend stream writer impl sub writer serial writer global configur configur sub writer close public void serial extend stream writer writer global configur global configur map string configur configur throw stream except writer write start document writer write start element serial serial new serial serial serial writer new configur holder global configur configur writer write end element writer write end document 
packag org configur pars import static javax xml stream stream constant import static org common util string properti replac replac properti import java util collect import java util iter import java util set import javax xml constant import javax xml stream locat import javax xml stream stream except import javax xml stream stream reader author href mailto david lloyd redhat com david lloyd public final class pars util privat pars util public static element next element stream reader reader throw stream except reader next tag return null return element name reader get local name get except report unexpect element param reader stream reader return except public static stream except unexpect element final stream reader reader return new stream except unexpect element reader get name encount reader get locat get except report unexpect end tag element param reader stream reader return except public static stream except unexpect end element final stream reader reader return new stream except unexpect end element reader get name encount reader get locat get except report unexpect attribut param reader stream reader param index attribut index return except public static stream except unexpect attribut final stream reader reader final int index return new stream except unexpect attribut reader get attribut name index encount reader get locat get except report unexpect attribut param reader stream reader param name attribut name return except public static stream except unexpect attribut final stream reader reader final string name return new stream except unexpect attribut name encount reader get locat get except report invalid attribut valu param reader stream reader param index attribut index return except public static stream except invalid attribut valu final stream reader reader final int index return new stream except invalid valu reader get attribut valu index attribut reader get attribut name index reader get locat get except report miss requir attribut param reader stream reader param requir set enum whose string method return attribut name return except public static stream except miss requir final stream reader reader final set requir final string builder b new string builder iter iter requir iter iter next final object iter next b append string iter next b append return new stream except miss requir attribut b reader get locat get except report miss requir child element param reader stream reader param requir set enum whose string method return attribut name return except public static stream except miss requir element final stream reader reader final set requir final string builder b new string builder iter iter requir iter iter next final object iter next b append string iter next b append return new stream except miss requir element b reader get locat check current element attribut throw link javax xml stream stream except one find param reader reader throw javax xml stream stream except error occur public static void requir attribut final stream reader reader throw stream except reader get attribut count throw unexpect attribut reader consum remaind current element throw link javax xml stream stream except contain child element param reader reader throw javax xml stream stream except error occur public static void requir content final stream reader reader throw stream except reader next reader next tag throw unexpect element reader get except report attribut give name alreadi declar scope param reader stream reader param name name redeclar return except public static stream except duplic attribut final stream reader reader final string name return new stream except attribut name name alreadi declar reader get locat get except report element give type name alreadi declar scope param reader stream reader param name name redeclar return except public static stream except duplic name element final stream reader reader final string name return new stream except element type name name alreadi declar reader get locat read element contain singl boolean attribut param reader reader param attribut name attribut name usual valu return boolean valu throw javax xml stream stream except error occur element contain specifi attribut contain attribut contain child element public static boolean read boolean attribut element final stream reader reader final string attribut name throw stream except requir singl attribut reader attribut name final boolean valu boolean pars boolean reader get attribut valu requir content reader return valu read element contain singl string attribut param reader reader param attribut name attribut name usual valu name return string valu throw javax xml stream stream except error occur element contain specifi attribut contain attribut contain child element public static string read string attribut element final stream reader reader final string attribut name throw stream except requir singl attribut reader attribut name final string valu reader get attribut valu requir content reader return valu requir current element singl attribut give name param reader reader param attribut name attribut name throw javax xml stream stream except error occur public static string requir singl attribut final stream reader reader final string attribut name throw stream except final int count reader get attribut count count throw miss requir reader collect singleton attribut name requir namespac attribut reader attribut name equal reader get attribut local name throw unexpect attribut reader count throw unexpect attribut reader return reader get attribut valu requir name attribut return valu order param reader reader param attribut name attribut name return attribut valu order throw javax xml stream stream except error occur public static string requir attribut final stream reader reader boolean replac final string attribut name throw stream except final int length attribut name length final string result new string length int length final string name attribut name final string valu reader get attribut valu null name valu null throw miss requir reader collect singleton name result replac replac properti valu valu return result public static string requir attribut final stream reader reader final string attribut name throw stream except return requir attribut reader fals attribut name public static boolean namespac attribut final stream reader reader final int index string namespac reader get attribut namespac index do remov null check return namespac null constant equal namespac public static void requir namespac attribut final stream reader reader final int index throw stream except namespac attribut reader index throw unexpect attribut reader index public static string get warn messag final string msg final locat locat return string format pars problem row col n messag n locat get line number locat get column number msg public static namespac get namespac annot class cl namespac namespac annot cl get annot namespac class namespac annot null return namespac annot valu namespac namespac annot cl get annot namespac class namespac annot null return new namespac namespac annot return null public static string get list attribut valu string valu return valu split 
packag org distribut group impl import java util list import java util object import java util set import java util function unari oper import org common hash hash import org distribut ch consist hash import org distribut ch key partition import org globalst scop persist state import org remot transport address link consist hash wrapper use link key partition instead link hash author dan berindei sinc public class partition consist hash implement consist hash privat final consist hash ch privat final key partition key partition public partition consist hash consist hash ch key partition key partition ch object requir non null ch key partition object requir non null key partition overrid public int get num segment return ch get num segment overrid public int get num owner return ch get num owner overrid public list address get member return ch get member overrid public int get segment object key return key partition get segment key overrid public list address locat owner segment int segment id return ch locat owner segment segment id overrid public address locat primari owner segment int segment id return ch locat primari owner segment segment id overrid public boolean segment local node address node address int segment id return ch segment local node node address segment id overrid public boolean replic return ch replic overrid public set integ get segment owner address owner return ch get segment owner owner overrid public set integ get primari segment owner address owner return ch get primari segment owner owner overrid public string get rout tabl string return ch get rout tabl string overrid public boolean key local node address node address object key int segment ch replic get segment key return ch segment local node node address segment overrid public hash get hash function return ch get hash function public key partition get key partition return key partition overrid public void scop state scope persist state state ch scop state state overrid public consist hash remap address unari oper address remapp return ch remap address remapp overrid public boolean equal object return true null get class get class return fals partition consist hash partition consist hash ch equal ch return fals return key partition equal key partition overrid public int hash code int result ch hash code result result key partition hash code return result overrid public string string return partition consist hash ch 
packag org configur cach import org common configur attribut attribut definit import org common configur attribut attribut set import org conflict entri merg polici import org partitionhandl partit handl control cach handl partit multipl node failur author mircea marku sinc public class partit handl configur deprec public static final attribut definit boolean attribut definit builder enabl fals immut build public static final attribut definit partit handl attribut definit builder split partit handl immut build public static final attribut definit entri merg polici attribut definit builder merg polici null entri merg polici class immut build static attribut set attribut definit set return new attribut set partit handl configur class privat final attribut set attribut public partit handl configur attribut set attribut attribut attribut check protect deprec public boolean enabl return split partit handl public partit handl split return attribut attribut get public entri merg polici merg polici return attribut attribut get public attribut set attribut return attribut overrid public string string return partit handl configur attribut attribut overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals partit handl configur partit handl configur obj attribut null attribut null return fals els attribut equal attribut return fals return true 
packag org configur cach import static org configur cach partit handl configur import static org configur cach partit handl configur import org common configur builder import org common configur attribut attribut set import org configur global global configur import org conflict entri merg polici import org partitionhandl partit handl control cach handl partit multipl node failur author mircea marku sinc public class partit handl configur builder extend abstract cluster configur child builder implement builder partit handl configur privat final attribut set attribut public partit handl configur builder cluster configur builder builder super builder attribut partit handl configur attribut definit set param enabl code true partit enter degrad mode code fals keep work independ deprec public partit handl configur builder enabl boolean enabl split enabl partit handl partit handl return public partit handl configur builder split partit handl partit handl attribut attribut set partit handl return public partit handl configur builder merg polici entri merg polici merg polici attribut attribut set merg polici return overrid public void valid overrid public void valid global configur global config overrid public partit handl configur creat return new partit handl configur attribut protect overrid public builder read partit handl configur templat attribut read templat attribut return 
packag org evict impl import static org common util util str import static org persist persist util intern metadata import static org persist manag persist manag access mode import java util concurr time unit import java util concurr atom atom long import org common cach except import org common util iter mapper import org common util util import org configur cach configur import org contain data contain import org contain entri intern cach entri import org context impl immut context import org distribut distribut manag import org evict passiv manag import org factori annot inject import org factori annot start import org marshal core marshal entri import org marshal core marshal entri factori import org notif cachelisten cach notifi import org persist manag persist manag import org persist spi persist except import org util time servic import org util log log import org util log log factori public class passiv manag impl implement passiv manag persist manag persist manag cach notifi notifi configur cfg privat volatil boolean skip stop fals boolean stat enabl fals boolean enabl fals privat static final log log log factori get log passiv manag impl class privat final atom long passiv new atom long privat data contain object object contain privat time servic time servic privat static final boolean trace log trace enabl privat marshal entri factori marshal entri factori privat distribut manag distribut manag inject public void inject persist manag persist manag cach notifi notifi configur cfg data contain contain time servic time servic marshal entri factori marshal entri factori distribut manag distribut manag persist manag persist manag notifi notifi cfg cfg contain contain time servic time servic marshal entri factori marshal entri factori distribut manag distribut manag start prioriti public void start enabl cfg persist passiv cfg persist use store enabl stat enabl cfg jmx statist enabl overrid public boolean enabl return enabl privat boolean key object key return distribut manag null distribut manag get cach topolog write owner key overrid public void passiv intern cach entri entri object key enabl entri null key key entri get key notifi listen entri passiv notifi notifi cach entri passiv key entri get valu true immut context null trace log tracef passiv entri str key tri marshal entri marshal entri marshal entri factori new marshal entri entri get key entri get valu intern metadata entri persist manag write non tx store marshal entri stat enabl passiv get increment catch cach except e log unabl passiv entri key e notifi notifi cach entri passiv key null fals immut context null overrid public void passiv throw persist except enabl skip stop long start time servic time log passiv entri int count contain size includ expir iter marshal entri iter new iter mapper contain iter e marshal entri factori new marshal entri e get key e get valu intern metadata e persist manag write batch non tx store iter log passiv entri count util pretti print time time servic time durat start time unit overrid public void skip passiv stop boolean skip skip stop skip overrid public long get passiv return passiv get overrid public boolean get statist enabl return stat enabl overrid public void set statist enabl boolean enabl stat enabl enabl overrid public void reset statist passiv set 
packag org util concurr lock impl import java util concurr concurr hash map import java util concurr concurr map import java util concurr time unit import org common util ref import org factori annot inject import org util time servic import org util concurr lock deadlock checker import org util concurr lock extend lock promis lock contain creat maintain new lock per entri author pedro ruivo sinc public class per key lock contain implement lock contain privat static final int privat final concurr map object lock lock map privat time servic time servic public per key lock contain lock map new concurr hash map inject public void inject time servic time servic time servic time servic lock lock lock map valu lock set time servic time servic overrid public extend lock promis acquir object key object lock owner long time time unit time unit ref extend lock promis refer ref creat null lock map comput key key lock lock null lock creat lock key refer set lock acquir lock owner time time unit return lock return refer get overrid public lock get lock object key return lock map get key overrid public void releas object key object lock owner lock map comput present key ignor key lock lock releas lock owner return lock lock null lock remov empti overrid public int get num lock hold int count lock lock lock map valu lock lock count return count overrid public boolean lock object key lock lock lock map get key return lock null lock lock overrid public int size return lock map size overrid public void deadlock check deadlock checker deadlock checker lock map valu lock lock deadlock check deadlock checker overrid public string string return per key lock contain lock lock map privat lock creat lock object key return new lock time servic lock map comput present key ignor key lock lock lock lock null 
packag org configur cach import static org configur cach persist configur import java lang reflect constructor import java util array list import java util list import java util concurr time unit import org common cach configur except import org common configur builder import org common configur configur util import org common configur attribut attribut set import org configur global global configur import org util log log import org util log log factori configur cach store public class persist configur builder extend abstract configur child builder implement builder persist configur privat static final log log log factori get log persist configur builder class privat final list store configur builder store new array list store configur builder privat final attribut set attribut protect persist configur builder configur builder builder super builder attribut persist configur attribut definit set public persist configur builder passiv boolean b attribut attribut set b return true datum write cach store evict memori phenomenon know passiv next time datum request activ mean datum bring back memori remov persist store give abil overflow disk similar swap oper system br br fals cach store contain copi content memori write cach result cach store write essenti give write configur boolean passiv return attribut attribut get add cach loader use specifi builder class build configur public extend store configur builder add store class klass tri constructor constructor klass get declar constructor persist configur builder class builder constructor new instanc store add builder return builder catch except e throw new cach configur except could instanti loader configur builder klass get name e add cach loader use specifi builder instanc build configur param builder instanc link store configur builder public store configur builder add store store configur builder builder store add builder return builder add cluster cach loader public cluster loader configur builder add cluster loader cluster loader configur builder builder new cluster loader configur builder store add builder return builder add singl file cach store public singl file store configur builder add singl file store singl file store configur builder builder new singl file store configur builder store add builder return builder remov configur store builder public persist configur builder clear store store clear return overrid public void valid boolean local cach builder cluster creat cach mode equal cach mode int num fetch persist state store configur builder b store b valid store configur store configur b creat store configur share store configur singleton store enabl throw log singleton store can not share store configur get class get simpl name store configur share store configur transact local cach throw log cluster transact store must share store configur get class get simpl name store configur async enabl store configur transact throw log transact store can not async store configur get class get simpl name store configur fetch persist state num fetch persist state num fetch persist state throw log one fetch persist store allow store guarante reaper expir thread enabl store empti boolean reaper enabl builder expir reaper enabl long wakeup interv builder expir wakeup interv reaper enabl wakeup interv builder expir enabl reaper wakeup interv log debug store present expir reaper wakeup less explicitli enabl set wakeup interv minut builder expir wake interv time unit els log debug store present howev expir reaper enabl explicitli enabl overrid public void valid global configur global config store configur builder b store b valid global config overrid public persist configur creat list store configur store new array list store configur store size store configur builder loader store store add loader creat return new persist configur attribut protect store suppress warn uncheck overrid public persist configur builder read persist configur templat attribut read templat attribut clear store store configur c templat store class extend store configur builder builder class get builder class c store configur builder builder add store builder class builder read c return privat class extend store configur builder get builder class store configur c class extend store configur builder builder class class extend store configur builder configur util builder non strict c builder class null builder class custom store configur builder class return builder class public list store configur builder store return store overrid public string string return persist configur builder store store attribut attribut 
packag org persist manag import static java util concurr time unit import static org context flag import static org context flag import static org context flag import static org context flag import static org context flag import static org context flag import static org context flag import static org factori know compon name import static org persist manag persist manag access mode import java util array list import java util array import java util collect import java util collect import java util hash map import java util hash set import java util iter import java util list import java util map import java util set import java util concurr executor import java util concurr executor servic import java util concurr time unit import java util concurr atom atom integ import java util concurr atom atom refer import java util concurr lock read write lock import java util concurr lock reentrant read write lock import java util function consum import javax transact transact import javax transact transact manag import org advanc cach import org common cach except import org common api lifecycl import org common io byte buffer factori import org common marshal stream marshal import org common util ref import org common util util import org configur cach cach mode import org configur cach configur import org configur cach store configur import org context flag import org context invoc context import org evict evict type import org expir expir manag import org factori annot compon name import org factori annot inject import org factori annot start import org factori annot stop import org filter key filter import org interceptor async interceptor import org interceptor async interceptor chain import org interceptor impl cach loader interceptor import org interceptor impl cach writer interceptor import org interceptor impl transact store interceptor import org marshal core marshal entri import org marshal core marshal entri factori import org metadata metadata import org metadata impl intern metadata impl import org persist initi context impl import org persist async advanc async cach loader import org persist async advanc async cach writer import org persist async async cach loader import org persist async async cach writer import org persist async state import org persist factori cach store factori registri import org persist spi advanc cach expir writer import org persist spi advanc cach loader import org persist spi advanc cach writer import org persist spi cach loader import org persist spi cach writer import org persist spi flag affect store import org persist spi local cach loader import org persist spi persist except import org persist spi transact cach writer import org persist support advanc singleton cach writer import org persist support batch modif import org persist support deleg cach loader import org persist support deleg cach writer import org persist support singleton cach writer import org util time servic import org util concurr within thread executor import org util log log import org util log log factori public class persist manag impl implement persist manag privat static final log log log factori get log persist manag impl class privat static final boolean trace log trace enabl configur configur advanc cach object object cach stream marshal transact manag transact manag privat time servic time servic privat final list cach loader loader new array list privat final list cach writer non tx writer new array list privat final list transact cach writer tx writer new array list privat final read write lock store mutex new reentrant read write lock privat final map object store configur config map new hash map privat cach store factori registri cach store factori registri privat expir manag expir manag privat advanc purg listen advanc listen make volatil might chang start need visibl volatil boolean enabl privat executor persist executor privat byte buffer factori byte buffer factori privat marshal entri factori marshal entri factori privat volatil boolean clear stop privat boolean preload inject public void inject advanc cach object object cach stream marshal marshal configur configur transact manag transact manag time servic time servic compon name executor servic persist executor byte buffer factori byte buffer factori marshal entri factori marshal entri factori cach store factori registri cach store factori registri expir manag expir manag cach cach marshal configur configur transact manag transact manag time servic time servic persist executor persist executor byte buffer factori byte buffer factori marshal entri factori marshal entri factori cach store factori registri cach store factori registri expir manag expir manag advanc listen new advanc purg listen expir manag overrid start prioriti public void start preload fals enabl configur persist use store enabl return tri creat loader writer transact xa tx null transact manag null xa tx transact manag suspend tri set undeleg new hash set black magic make sure store start get invok consum cach writer start writer writer writer start writer instanceof deleg cach writer cach writer actual undeleg writer actual start undeleg add actual els undeleg add writer config map get writer purg startup writer instanceof advanc cach writer throw new persist except purg startup set store implement advanc cach writer class get name advanc cach writer writer clear non tx writer start writer tx writer start writer cach loader l loader undeleg contain l l start l instanceof deleg cach loader cach loader actual undeleg l undeleg contain actual actual start final xa tx null transact manag resum xa tx catch except e throw new cach except unabl start cach loader e overrid stop public void stop need clear persist store stop clear stop clear store access mode set undeleg new hash set consum cach writer stop writer writer writer stop writer instanceof deleg cach writer cach writer actual undeleg writer actual stop undeleg add actual els undeleg add writer non tx writer stop writer non tx writer clear tx writer stop writer tx writer clear cach loader l loader undeleg contain l l stop l instanceof deleg cach loader cach loader actual undeleg l undeleg contain actual actual stop loader clear preload fals overrid public boolean preload return preload overrid start prioriti public void preload enabl return advanc cach loader preload cl null cach loader l loader config map get l preload l instanceof advanc cach loader throw new persist except preload cach loader l get class get name n implement advanc cach loader class get name preload cl advanc cach loader l preload cl instanceof advanc async cach loader preload cl advanc cach loader advanc async cach loader preload cl undeleg break preload cl null return long start time servic time final long max entri get max entri final atom integ load entri new atom integ final advanc cach object object flag cach get cach state insert ref boolean preload new ref boolean true preload cl process null task context load entri get increment max entri task context stop preload set fals return metadata metadata get metadata null intern metadata impl get metadata actual null downcast go away preload key flag cach get key get valu metadata new within thread executor true true preload preload get log debugf preload key load entri get util pretti print time time servic time durat start overrid public void disabl store string store type enabl store mutex write lock lock tri remov cach loader store type loader remov cach writer store type non tx writer remov cach writer store type tx writer final store mutex write lock unlock loader empti non tx writer empti tx writer empti async interceptor chain chain cach get advanc cach get async interceptor chain async interceptor loader interceptor chain find interceptor extend cach loader interceptor class loader interceptor null log persist without cach loader interceptor els chain remov interceptor loader interceptor get class async interceptor writer interceptor chain find interceptor extend cach writer interceptor class writer interceptor null writer interceptor chain find interceptor class transact store interceptor class writer interceptor null log persist without cach write interceptor els chain remov interceptor writer interceptor get class els chain remov interceptor writer interceptor get class enabl fals overrid public set get store class store class store mutex read lock lock tri set result new hash set cach loader l loader cach loader real undeleg l store class instanc real result add real consum cach writer get writer writer cach writer real undeleg writer store class instanc real result add real non tx writer get writer tx writer get writer return result final store mutex read lock unlock overrid public collect string get store string store mutex read lock lock tri set string loader type new hash set loader size cach loader loader loader loader type add undeleg loader get class get name cach writer writer non tx writer loader type add undeleg writer get class get name cach writer writer tx writer loader type add undeleg writer get class get name return loader type final store mutex read lock unlock privat static class advanc purg listen implement advanc cach expir writer expir purg listen privat final expir manag expir manag privat advanc purg listen expir manag expir manag expir manag expir manag overrid public void marshal entri purg marshal entri entri expir manag handl store expir entri overrid public void entri purg key expir manag handl store expir key overrid public void purg expir enabl return long start tri trace log trace purg cach store expir entri start time servic time store mutex read lock lock tri consum cach writer purg writer writer share store purg coordin config map get writer share cach get cach manag coordin return writer instanceof advanc cach expir writer advanc cach expir writer writer purg persist executor advanc listen els writer instanceof advanc cach writer advanc cach writer writer purg persist executor key expir manag handl store expir key non tx writer purg writer tx writer purg writer final store mutex read lock unlock trace log tracef purg cach store complet util pretti print time time servic time durat start time unit catch except e log except purg data contain e overrid public void clear store access mode mode store mutex read lock lock tri appli tx writer well clear happen tx context consum cach writer clear writer writer writer instanceof advanc cach writer mode perform config map get writer advanc cach writer writer clear non tx writer clear writer tx writer clear writer final store mutex read lock unlock overrid public boolean delet store object key access mode mode store mutex read lock lock tri boolean remov fals cach writer w non tx writer mode perform config map get w remov w delet key return remov final store mutex read lock unlock overrid public void process store key filter key filter advanc cach loader cach loader task task boolean fetch valu boolean fetch metadata process store persist executor key filter task fetch valu fetch metadata overrid public void process store executor executor key filter key filter advanc cach loader cach loader task task boolean fetch valu boolean fetch metadata process store executor key filter task fetch valu fetch metadata overrid public void process store key filter key filter advanc cach loader cach loader task task boolean fetch valu boolean fetch metadata access mode mode process store persist executor key filter task fetch valu fetch metadata mode overrid public void process store executor executor key filter key filter advanc cach loader cach loader task task boolean fetch valu boolean fetch metadata access mode mode store mutex read lock lock tri cach loader loader loader mode perform config map get loader loader instanceof advanc cach loader advanc cach loader loader process key filter task executor fetch valu fetch metadata final store mutex read lock unlock overrid public marshal entri load store object key invoc context context store mutex read lock lock tri cach loader l loader context origin local local loader l continu marshal entri load l load key load null return load return null final store mutex read lock unlock privat boolean local loader cach loader loader loader instanceof local cach loader return true loader instanceof deleg cach loader cach loader unwrap loader deleg cach loader loader undeleg unwrap loader instanceof local cach loader return true return fals overrid public void write non tx store marshal entri marshal entri access mode access mode write non tx store marshal entri access mode overrid public void write non tx store marshal entri marshal entri access mode access mode long flag store mutex read lock lock tri non tx writer stream filter writer writer instanceof flag affect store flag affect store class cast writer write flag filter writer access mode perform config map get writer writer writer write marshal entri final store mutex read lock unlock overrid public void write batch non tx store iter marshal entri entri access mode access mode long flag store mutex read lock lock tri non tx writer stream filter writer writer instanceof flag affect store flag affect store class cast writer write flag filter writer access mode perform config map get writer writer writer write batch entri final store mutex read lock unlock overrid public void delet batch non tx store iter object key access mode access mode long flag store mutex read lock lock tri non tx writer stream filter writer access mode perform config map get writer writer writer delet batch key final store mutex read lock unlock overrid public void prepar tx store transact transact batch modif batch modif access mode access mode throw persist except store mutex read lock lock tri cach writer writer tx writer access mode perform config map get writer configur cluster cach mode equal cach mode transact cach writer tx writer transact cach writer undeleg writer tx writer prepar modif transact batch modif final store mutex read lock unlock overrid public void commit tx store transact transact access mode access mode perform tx store access mode writer writer commit transact overrid public void rollback tx store transact transact access mode access mode perform tx store access mode writer writer rollback transact overrid public advanc cach loader get state transfer provid store mutex read lock lock tri cach loader l loader store configur store configur config map get l store configur fetch persist state store configur share return advanc cach loader l return null final store mutex read lock unlock overrid public int size store mutex read lock lock tri cach loader l loader l instanceof advanc cach loader return advanc cach loader l size final store mutex read lock unlock return overrid public void set clear stop boolean clear stop clear stop clear stop public list cach loader get loader return collect unmodifi list loader public list cach writer get writer return collect unmodifi list non tx writer public list cach writer get tx writer return collect unmodifi list tx writer privat void creat loader writer store configur cfg configur persist store object bare instanc cach store factori registri creat instanc cfg store configur process configur cach store factori registri process store configur cfg cach writer writer creat cach writer bare instanc cach loader loader creat cach loader bare instanc writer post process writer process configur writer loader post process reader process configur writer loader initi context impl ctx new initi context impl process configur cach time servic byte buffer factori marshal entri factori initi loader process configur loader ctx initi writer process configur writer ctx initi bare instanc bare instanc ctx privat cach loader post process reader store configur cfg cach writer writer cach loader loader cfg async enabl loader null writer null loader creat async loader loader async cach writer writer return loader privat cach writer post process writer store configur cfg cach writer writer writer null cfg ignor modif writer null els cfg singleton store enabl writer creat singleton writer cfg writer els cfg async enabl writer creat async writer writer return writer privat cach loader creat async loader cach loader loader async cach writer async writer atom refer state state async writer get state loader loader instanceof advanc cach loader new advanc async cach loader loader state new async cach loader loader state return loader privat singleton cach writer creat singleton writer store configur cfg cach writer writer return writer instanceof advanc cach writer new advanc singleton cach writer writer cfg singleton store new singleton cach writer writer cfg singleton store privat void initi writer store configur cfg cach writer writer initi context impl ctx writer null writer instanceof deleg cach writer writer init ctx undeleg writer instanceof transact cach writer cfg transact configur transact transact mode transact tx writer add transact cach writer writer els cach non transact possibl store treat normal store n happen cach configur except throw valid non tx writer add writer els non tx writer add writer config map put writer cfg privat void initi loader store configur cfg cach loader loader initi context impl ctx loader null loader instanceof deleg cach loader loader init ctx loader add loader config map put loader cfg privat void initi bare instanc object instanc initi context impl ctx deleg propag init underlay object deleg well order assur init invok instanc instanceof cach writer cach writer instanc init ctx els cach loader instanc init ctx privat cach loader creat cach loader object instanc return instanc instanceof cach loader cach loader instanc null privat cach writer creat cach writer object instanc return instanc instanceof cach writer cach writer instanc null protect async cach writer creat async writer cach writer writer return writer instanceof advanc cach writer new advanc async cach writer writer new async cach writer writer privat cach loader undeleg cach loader l return l instanceof deleg cach loader deleg cach loader l undeleg l privat cach writer undeleg cach writer w return w instanceof deleg cach writer deleg cach writer w undeleg w privat advanc cach object object get cach state insert list flag flag new array list array list boolean share fals cach writer w non tx writer config map get w share share true break share index shareabl flag add els flag add return cach get advanc cach flag flag array new flag flag size privat boolean index shareabl return configur index index shareabl privat long get max entri configur memori evict enabl configur memori evict type evict type return configur memori size return long privat void preload key advanc cach object object cach object key object valu metadata metadata final transact transact suspend need boolean success fals tri tri begin need cach put key valu metadata success true catch except e throw new persist except unabl preload e final commit need success final commit need throw except need tri final resum need transact privat void resum need transact transact configur transact transact mode transact transact manag null transact null tri transact manag resum transact catch except e throw new persist except e privat transact suspend need configur transact transact mode transact transact manag null tri return transact manag suspend catch except e throw new persist except e return null privat void begin need configur transact transact mode transact transact manag null tri transact manag begin catch except e throw new persist except e privat void commit need boolean success configur transact transact mode transact transact manag null tri success transact manag commit els transact manag rollback catch except e throw new persist except e public executor get persist executor return persist executor public stream marshal get marshal return privat void remov cach loader string store type collect cach loader collect iter cach loader collect iter next cach loader loader next remov store type loader undeleg loader privat void remov cach writer string store type collect extend cach writer collect iter extend cach writer collect iter next cach writer writer next remov store type writer undeleg writer privat void remov iter extend lifecycl string store type lifecycl wrapper lifecycl actual actual get class get name equal store type wrapper stop actual wrapper actual stop remov privat void perform tx store access mode access mode consum transact cach writer action store mutex read lock lock tri tx writer stream filter writer access mode perform config map get writer action final store mutex read lock unlock 
packag org topolog import java io except import java io object input import java io object output import java util collect import java util set import java util import org common marshal abstract extern import org common util util import org marshal core id import org remot transport address persist special link address whose purpos remain unchang across node restart use global state author tristan tarrant sinc public class persist implement address final uuid final int hash code privat persist uuid uuid uuid hash code uuid hash code public persist long msb long lsb new msb lsb public static persist random return new persist util thread local random public static persist string string name return new persist string name public long get signific bit return uuid get signific bit public long get least signific bit return uuid get least signific bit overrid public int compar address persist persist return uuid compar uuid overrid public int hash code return hash code overrid public string string return uuid string overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals persist persist obj uuid null uuid null return fals els uuid equal uuid return fals return true public static class extern extend abstract extern persist overrid public set class extend persist get type class return collect class extend persist singleton persist class overrid public void write object object output output persist uuid throw except output write long uuid get signific bit output write long uuid get least signific bit overrid public persist read object object input input throw except class find except return new persist input read long input read long overrid public integ get id return id 
packag org topolog import java util array list import java util list import java util concurr concurr hash map import java util concurr concurr map import java util function unari oper import org remot transport address import org util log log import org util log log factori implement link persist manag interfac author tristan tarrant sinc public class persist manag impl implement persist manag privat static final log log log factori get log persist manag impl class privat final concurr map address persist address uuid new concurr hash map privat final concurr map persist address uuid address new concurr hash map overrid public void add persist address map address address persist persist address uuid put address persist uuid address put persist address overrid public persist get persist uuid address address return address uuid get address overrid public address get address persist persist return uuid address get persist overrid public void remov persist address map persist persist persist null null would invalid let proceed would trigger would hide real issu return address address uuid address get persist address null address uuid remov address uuid address remov persist overrid public void remov persist address map address address persist uuid address uuid get address uuid null uuid address remov uuid address uuid remov address overrid public list persist map address list address address array list persist list new array list address size address address address persist persist address uuid get address persist null never happen good log avoid swallow elsewher null pointer except npe new null pointer except log fatal find map address address npe throw npe els list add persist return list overrid public unari oper address address persist return address address uuid get address overrid public unari oper address persist address return address uuid address get address 
packag org jmx import java lang manag manag factori import java util properti import javax manag bean server default implement link bean server lookup return platform bean server p note enabl platform bean server follow system properti pass sun b dcom sun manag jmxremot b author mircea marku jboss com sinc public class platform bean server lookup implement bean server lookup overrid public bean server get bean server properti properti return manag factori get platform bean server 
packag org partitionhandl impl import static org util log event messag import java util array list import java util compar import java util list import java util map import java util object import java util stream collector import org distribut ch consist hash import org distribut ch consist hash factori import org partitionhandl avail mode import org remot transport address import org topolog cach join info import org topolog cach statu respons import org topolog cach topolog import org topolog persist manag import org util log log import org util log log factori import org util log event event log categori import org util log event event log manag public class prefer avail strategi implement avail strategi public static final compar cach statu respons null return cach topolog get cach topolog cach topolog get cach topolog int topolog id integ get topolog id compar get topolog id topolog id return topolog id int rebal id integ get rebal id compar get rebal id rebal id return topolog id list address get member list address get member size size int compar address get compar get compar address return integ hash code compar hash code return size size privat static final log log log factori get log prefer avail strategi class privat final event log manag event log manag privat final persist manag persist manag privat final lost data check lose datum check privat final boolean resolv conflict merg public prefer avail strategi event log manag event log manag persist manag persist manag lost data check lose datum check boolean resolv conflict merg event log manag event log manag persist manag persist manag lose datum check lost datum check resolv conflict merg resolv conflict merg overrid public void join avail strategi context context address joiner context queue rebal context get expect member overrid public void grace leav avail strategi context context address leaver cach topolog current topolog context get current topolog list address new member new array list current topolog get member new member remov leav new member empti log debugf last node cach leav context get cach name context updat current topolog new member return context get stabl topolog null lost datum check test context get stabl topolog get current new member event log manag get event logger context context get cach name warn event log categori lose data grace leaver leaver case rebalanc disabl anoth rebal progress context updat current topolog new member context queue rebal new member overrid public void cluster view chang avail strategi context context list address cluster member cach topolog current topolog context get current topolog list address new member new array list current topolog get member new member retain cluster member log tracef cach lose member skip rebal context get cach name return check lost data context new member updat case rebalanc disabl anoth rebal progress context updat current topolog new member context queue rebal new member protect void check lost data avail strategi context context list address new member cach topolog stabl topolog context get stabl topolog list address stabl member stabl topolog get member list address lose member new array list stabl member lose member remov new member lose datum check test stabl topolog get current new member event log manag get event logger context context get cach name fatal event log categori lose data abrupt leaver lose member els lose member size math ceil stabl member size event log manag get event logger context context get cach name warn event log categori minor partit new member lose member stabl member overrid public void partit merg avail strategi context context map address cach statu respons statu respons map must first sort respons list ensur max topolog choos determinist event multipl topolog exist number member list cach statu respons statu respons statu respons map valu stream sort collect collector list pick big stabl topolog e one member cach topolog max stabl topolog null cach statu respons respons statu respons cach topolog stabl topolog respons get stabl topolog stabl topolog null node n properli join yet continu max stabl topolog null max stabl topolog get member size stabl topolog get member size max stabl topolog stabl topolog pick big current topolog deriv big stabl topolog cach topolog max topolog null cach statu respons respons statu respons cach topolog stabl topolog respons get stabl topolog object equal stabl topolog max stabl topolog continu cach topolog topolog respons get cach topolog topolog null node n properli join yet continu max topolog null max topolog get member size topolog get member size max topolog topolog max topolog null log debugf current topolog recov joiner cach context get cach name sinc pick big topolog topolog id may big int max topolog id int max rebal id cach statu respons respons statu respons cach topolog topolog respons get cach topolog topolog null max topolog id topolog get topolog id max topolog id topolog get topolog id max rebal id topolog get rebal id max rebal id topolog get rebal id increment topolog id big topolog might send old coordin enough node wait new group view answer statu request new view can n process topolog updat old view id also cancel pend rebal remov pend n recov rebal confirm statu yet cach topolog merg topolog null list address new member context get expect member boolean resolv conflict resolv conflict merg split brain heal context max topolog max stabl topolog max topolog null requir resolv conflict utilis expect member necessari conflict resolut write go owner resolv conflict cach join info join info context get join info consist hash factori chf join info get consist hash factori consist hash mergehash chf creat join info get hash function join info get num owner join info get num segment new member context get capac factor merg topolog new cach topolog max topolog id max rebal id max topolog get current mergehash mergehash cach topolog phase new member persist manag map address new member els merg topolog new cach topolog max topolog id max rebal id max topolog get current null cach topolog phase max topolog get actual member persist manag map address max topolog get actual member context updat topolog merg merg topolog max stabl topolog null resolv conflict first updat h remov node leav current topolog list address surviv member new array list new member merg topolog null surviv member retain merg topolog get member check lost data context surviv member context updat current topolog surviv member start rebal merg member context queue rebal new member expect member stabl member know split brain heal occur howev max topolog size know new coordin privat boolean split brain heal avail strategi context context cach topolog max topolog cach topolog max stabl topolog boolean new coordin max topolog null max topolog get member size boolean membership increas new coordin max stabl topolog null context get expect member size max stabl topolog get member size return new coordin membership increas overrid public void rebal end avail strategi context context noth need anoth rebal alreadi queue overrid public void manual avail chang avail strategi context context avail mode new avail mode cach alway 
packag org command write import static org common util util str import java io except import java io object input import java io object output import org command command invoc id import org command metadata awar command import org command visitor import org common marshal marshal util import org contain entri entri import org context invoc context import org context impl flag bit set import org metadata metadata import org metadata metadata import org notif cachelisten cach notifi implement function defin link org cach put object object author mircea marku jboss com sinc public class put key valu command extend abstract data write command implement metadata awar command public static final byte privat object valu privat boolean put absent privat cach notifi object object notifi privat boolean success true privat metadata metadata privat valu matcher valu matcher public put key valu command public put key valu command object key object valu boolean put absent cach notifi notifi metadata metadata long flag bit set command invoc id command invoc id super key flag bit set command invoc id valu valu put absent put absent valu matcher put absent valu matcher valu matcher noinspect uncheck notifi notifi metadata metadata public void init cach notifi notifi noinspect uncheck notifi notifi public object get valu return valu public void set valu object valu valu valu overrid public object accept visitor invoc context ctx visitor visitor throw throwabl return visitor visit put key valu command ctx overrid public load type load type condit flag flag bit set return load type els return load type overrid public object perform invoc context ctx throw throwabl worth look entri never go appli chang valu matcher valu matcher success fals return null noinspect uncheck entri object object e entri ctx lookup entri key e null throw new illeg state except wrap object prev valu e get valu valu matcher match prev valu null valu success fals return prev valu return perform put e ctx overrid public byte get command id return overrid public void write object output output throw except output write object key output write object valu output write object metadata marshal util marshal enum valu matcher output command invoc id write output command invoc id output write long flag bit set copi without remot flag get flag bit set output write boolean put absent overrid public void read object input input throw except class find except key input read object valu input read object metadata metadata input read object valu matcher marshal util unmarshal enum input valu matcher valu command invoc id command invoc id read input set flag bit set input read long put absent input read boolean overrid public metadata get metadata return metadata overrid public void set metadata metadata metadata metadata metadata public boolean put absent return put absent public void set put absent boolean put absent put absent put absent overrid public boolean equal object return true null get class get class return fals super equal return fals put key valu command put key valu command put absent put absent return fals valu null valu equal valu valu null return fals return metadata null metadata equal metadata metadata null overrid public int hash code int result super hash code result result valu null valu hash code result result put absent result result metadata null metadata hash code return result overrid public string string return new string builder append put key valu command key append str key append valu append str valu append flag append print flag append command invoc id append command invoc id show command invoc id append put absent append put absent append valu matcher append valu matcher append metadata append metadata append success append success append topolog id append get topolog id append string overrid public boolean success return success overrid public boolean condit return put absent overrid public valu matcher get valu matcher return valu matcher overrid public void set valu matcher valu matcher valu matcher valu matcher valu matcher overrid public void init backup write rpc command backup write rpc command command command set write command invoc id key valu metadata get flag bit set get topolog id overrid public void fail success fals overrid public boolean return valu expect return condit super return valu expect privat object perform put entri object object e invoc context ctx object entri valu e get valu object non tx tx set state transfer flag flag bit set flag bit set e creat notifi notifi cach entri creat key valu metadata true ctx els notifi notifi cach entri modifi key valu metadata entri valu e get metadata true ctx e set valu valu metadata updat metadata e metadata e remov e set creat true e set expir fals e set remov fals e set valid true null e set chang true return expect valu retri put absent command e null return valu matcher valu matcher null 
packag org client hotrod impl oper import java util concurr time unit import java util concurr atom atom integ import org client hotrod configur configur import org client hotrod except invalid respons except import org client hotrod impl protocol codec import org client hotrod impl protocol hot rod constant import org client hotrod impl transport transport import org client hotrod impl transport transport factori import net jcip annot immut implement put defin href http commun jboss org wiki hot rod protocol hot rod protocol specif author mircea marku jboss com sinc immut public class put oper extend abstract key valu oper public put oper codec codec transport factori transport factori object key byte key byte byte cach name atom integ topolog id int flag configur cfg byte valu long lifespan time unit lifespan time unit long max idl time unit max idl time unit super codec transport factori key key byte cach name topolog id flag cfg valu lifespan lifespan time unit max idl max idl time unit overrid protect execut oper transport transport short statu send put oper transport hot rod constant success statu throw new invalid respons except unexpect respons statu integ hex string statu return return possibl prev valu transport statu 
packag org transact xa recoveri import java io except import java io object input import java io object output import java util collect import java util set import javax transact xa xid import org common util util import org marshal core id import org remot transport address import org transact xa dld global transact import org transact xa global transact dld global transact also hold xid inform requir recoveri purpos class avoid serial xid object wire case recoveri enabl author mircea marku jboss com sinc deprec sinc long use deprec public class recoveri awar dld global transact extend dld global transact implement recover transact identifi public recoveri awar dld global transact public recoveri awar dld global transact address addr boolean remot super addr remot privat volatil xid xid privat volatil long intern id overrid public xid get xid return xid overrid public void set xid xid xid xid xid overrid public long get intern id return intern id overrid public void set intern id long intern id intern id intern id deprec public static class extern extend global transact abstract global tx extern recoveri awar dld global transact overrid public void write object object output output recoveri awar dld global transact global transact throw except super write object output global transact output write long global transact get coin toss global transact lock origin empti output write object null els output write object global transact lock origin output write object global transact xid output write long global transact intern id overrid protect recoveri awar dld global transact creat global transact return new recoveri awar dld global transact overrid suppress warn uncheck public recoveri awar dld global transact read object object input input throw except class find except recoveri awar dld global transact global transact super read object input global transact set coin toss input read long object lock origin obj input read object lock origin obj null global transact set lock hold origin collect empti set els global transact set lock hold origin set object lock origin obj xid xid xid input read object global transact set xid xid global transact set intern id input read long return global transact overrid public integ get id return id overrid public set class extend recoveri awar dld global transact get type class return util class extend recoveri awar dld global transact set recoveri awar dld global transact class overrid public string string return get class get simpl name xid xid intern id intern id super string 
packag org transact xa recoveri import java io except import java io object input import java io object output import java util set import javax transact xa xid import org common util util import org marshal core id import org remot transport address import org transact xa global transact import org transact xa transact factori global transact also hold xid inform requir recoveri author mircea marku jboss com sinc public class recoveri awar global transact extend global transact implement recover transact identifi privat volatil xid xid privat volatil long intern id public recoveri awar global transact super public recoveri awar global transact address addr boolean remot super addr remot overrid public xid get xid return xid overrid public void set xid xid xid xid xid overrid public long get intern id return intern id overrid public void set intern id long intern id intern id intern id overrid public string string return get class get simpl name xid xid intern id intern id super string public static class extern extend global transact abstract global tx extern recoveri awar global transact overrid protect recoveri awar global transact creat global transact return recoveri awar global transact transact factori tx factori enum new global transact overrid public void write object object output output recoveri awar global transact xid gtx throw except super write object output xid gtx output write object xid gtx xid output write long xid gtx get intern id overrid public recoveri awar global transact read object object input input throw except class find except recoveri awar global transact xid gtx super read object input xid xid xid input read object xid gtx set xid xid xid gtx set intern id input read long return xid gtx overrid public integ get id return id overrid public set class extend recoveri awar global transact get type class return util class extend recoveri awar global transact set recoveri awar global transact class 
packag org configur cach import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set defin recoveri configur cach author pmuir public class recoveri configur public static final string recoveri info cach name public static final attribut definit boolean attribut definit builder enabl fals immut build public static final attribut definit string attribut definit builder recoveri info cach name xml name recoveri cach immut build static attribut set attribut definit set return new attribut set recoveri configur class privat final attribut boolean enabl privat final attribut string recoveri info cach name privat final attribut set attribut recoveri configur attribut set attribut attribut attribut check protect enabl attribut attribut recoveri info cach name attribut attribut determin recoveri enabl cach public boolean enabl return enabl get set name cach recoveri relat inform hold specifi default cach name link recoveri configur public string recoveri info cach name return recoveri info cach name get public attribut set attribut return attribut overrid public string string return recoveri configur attribut attribut overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals recoveri configur recoveri configur obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result 
packag org configur cach import static org configur cach recoveri configur import static org configur cach recoveri configur import java lang invok method handl import org common configur builder import org common configur attribut attribut set import org configur global global configur import org transact transact mode import org transact transact protocol import org util log log import org util log log factori defin recoveri configur cach author pmuir public class recoveri configur builder extend abstract transport configur child builder implement builder recoveri configur privat static final log log log factori get log method handl lookup lookup class privat final attribut set attribut recoveri configur builder transact configur builder builder super builder attribut recoveri configur attribut definit set enabl recoveri cach public recoveri configur builder enabl attribut attribut set true return disabl recoveri cach public recoveri configur builder disabl attribut attribut set fals return enabl recoveri cach public recoveri configur builder enabl boolean enabl attribut attribut set enabl return boolean enabl return attribut attribut get set name cach recoveri relat inform hold specifi default cach name link recoveri configur public recoveri configur builder recoveri info cach name string recoveri info name attribut attribut set recoveri info name return overrid public void valid attribut attribut get return noth valid transact transact mode transact mode throw log recoveri support non tx cach transact use synchron throw log recoveri support synchron transact transact protocol transact protocol throw log unavail total order tx recoveri overrid public void valid global configur global config valid overrid public recoveri configur creat return new recoveri configur attribut protect overrid public recoveri configur builder read recoveri configur templat attribut read templat attribut return overrid public string string return recoveri configur builder attribut attribut 
packag org factori import java util concurr concurr map import java util concurr time unit import org cach import org common cach configur except import org configur cach cach mode import org configur cach configur import org configur cach configur builder import org configur cach recoveri configur import org factori annot default factori import org manag emb cach manag import org registri intern cach registri import org transact transact mode import org transact xa recoveri recoveri awar remot transact import org transact xa recoveri recoveri info key import org transact xa recoveri recoveri manag import org transact xa recoveri recoveri manag impl import org util log log import org util log log factori factori recoveri manag author mircea marku jboss com sinc default factori class recoveri manag class public class recoveri manag factori extend abstract name cach compon factori implement auto instanti factori privat static final log log log factori get log recoveri manag factori class privat static final long time unit milli overrid suppress warn uncheck public recoveri manag recoveri manag construct class recoveri manag compon type configur transact recoveri enabl string recoveri cach name configur transact recoveri recoveri info cach name log tracef use recoveri cach name recoveri cach name emb cach manag cm compon registri get global compon registri get compon emb cach manag class boolean use default cach recoveri cach name equal recoveri configur use defin cach use default cach check see cach defin cm get cach configur name contain recoveri cach name throw new cach configur except recoveri cach recoveri cach name exist els intern cach registri intern cach registri compon registri get global compon registri get compon intern cach registri class intern cach registri regist intern cach recoveri cach name get default recoveri cach config return recoveri manag build recoveri manag compon registri get cach name recoveri cach name cm use default cach els return null privat configur get default recoveri cach config configur builder builder new configur builder recoveri cach particip main cach transact especi remov cach execut context finalis transact caus issu builder transact transact mode transact mode builder cluster cach mode cach mode builder expir lifespan builder transact recoveri disabl return builder build privat recoveri manag build recoveri manag string cach name string recoveri cach name emb cach manag cm boolean default log tracef obtain refer recoveri cach recoveri cach name cach recoveri cach cm get cach recoveri cach name recoveri cach get cach configur transact transact mode transact see comment get default recoveri cach config throw new cach configur except recoveri cach n transact log tracef obtain refer recoveri cach recoveri cach name return new recoveri manag impl concurr map recoveri info key recoveri awar remot transact recoveri cach cach name 
packag org common util import java lang annot annot import java lang reflect field import java lang reflect method import java util array list import java util array import java util collect import java util link list import java util list import org common cach except import org common log log import org common log log factori basic reflect util enhanc provid author manik surtani href mailto manik jboss org manik jboss org sinc public class reflect util privat static final log log log factori get log reflect util class privat static final string privat static final class primit int class byte class short class long class float class doubl class boolean class char class privat static final class primit array int class byte class short class long class float class doubl class boolean class char class public static final class new class return set method contain give method annot includ public protect packag privat method well superclass note includ overridden method param c class inspect param annot type type annot look return list method object requir inject public static list method get method class c class extend annot annot type list method annot new link list inspect recurs c annot annot type return annot return set method contain give method annot includ public protect packag privat method superclass interfac param c class inspect param annot type type annot look return list method object requir inject public static list method get method shallow class c class extend annot annot type list method annot new link list method c get declar method annot present annot type annot add return annot privat static void get annot field helper list field list class c class extend annot annot type field declar field c get declar field field field declar field field annot present annot type list add field public static list field get annot field class c class extend annot annot type list field field new array list class could null case interfac c null c equal object class c c get superclass get annot field helper field c annot type return field public static method find method class type string method name tri return type get declar method method name catch method except e type equal object class type interfac throw new cach except e return find method type get superclass method name public static method find method class type string method name class paramet throw class find except tri return type get declar method method name paramet catch method except e type equal object class type interfac throw new cach except e return find method type get superclass method name paramet inspect class superclass way link object method instanc contain give annot even identifi privat packag protect method public one param c param param annot type privat static void inspect recurs class c list method class extend annot annot type method c get declar method n bother method alreadi overrid subclass find annot present annot type add c equal object class c interfac inspect recurs c get superclass annot type class ifc c get interfac inspect recurs ifc annot type test whether method alreadi find e overridden param method inspect param collect method find return true method signatur alreadi exist privat static boolean find method collect method method find get name equal find get name array equal get paramet type find get paramet type return fals return true privat static field find field recurs class c string field name field f null tri f c get declar field field name catch field except e c equal object class f find field recurs c get superclass field name return f invok method use reflect access manner use link method set access boolean param instanc instanc execut method param method method execut param paramet paramet public static object invok access object instanc method method object paramet return secur action invok access instanc method paramet public static method find getter field class c string field name method retval find getter field use reflect c field name retval null c equal object class c interfac retval find getter field c get superclass field name retval null class ifc c get interfac retval find getter field ifc field name retval null break return retval privat static method find getter field use reflect class c string field name method c get declar method string name get name string null name start get name substr els name start name substr null equal ignor case field name return return null public static method find setter field class c string field name c object class return null method c get declar method string name get name string null name start set name substr null equal ignor case field name return tri parent class run return find setter field c get superclass field name public static string extract field name string setter getter string field null setter getter start set setter getter start get field setter getter substr els setter getter start field setter getter substr field null field length string builder sb new string builder sb append charact lower case field char field length sb append field substr return sb string return null retriev valu field object instanc via reflect param instanc inspect param field name name field retriev return valu public static object get valu object instanc string field name field f find field recurs instanc get class field name f null throw new cach except could find field name field name instanc instanc tri f set access true return f get instanc catch illeg access except iae throw new cach except access field f iae inspect class pass class level annot specifi annot avail method recurs inspect superclass interfac find requir annot p return null annot find param clazz class inspect param ann annot search must class level annot return annot instanc null suppress warn uncheck public static extend annot get annot class clazz class ann true first check class clazz get annot ann null return check interfac clazz interfac class interfac clazz get interfac class inter interfac get annot inter ann null return check superclass class superclass clazz get superclass superclass null return null els look clazz superclass test whether annot present class order test ul li class li li implement interfac li li superclass li ul param clazz class test param annot annot look return true annot find fals otherwis public static boolean annot present class clazz class extend annot annot return get annot clazz annot null public static class class array string type list class loader class loader throw class find except type list null return class retval new class type list length int string type list retval get class name class loader return retval public static class get class name string name class loader cl throw class find except tri return util load class strict name cl catch class find except cnfe could primit let check class primit primit name equal primit get name return primit class primit primit array name equal primit get name return primit throw new class find except class name find public static string string array class class class null return els string class name new string class length int class length class name class get name return class name public static field get field string field name class object class tri return object class get declar field field name catch field except e object class equal object class return get field field name object class get superclass els return null public static unwrap object obj class clazz clazz null clazz assign obj get class return clazz cast obj throw log unabl unwrap obj clazz public static unwrap class clazz object obj clazz null object obj clazz assign get class return clazz cast throw log unabl unwrap array string obj clazz 
packag org command import java util map import org command control lock control command import org command function read key command import org command function read mani command import org command function read write key command import org command function read write key valu command import org command function read write mani command import org command function read write mani entri command import org command function tx read key command import org command function tx read mani command import org command function write key command import org command function write key valu command import org command function write mani command import org command function write mani entri command import org command modul modul command factori import org command read distribut execut command import org command read get cach entri command import org command read get key valu command import org command remot cach rpc command import org command remot cluster get command import org command remot cluster get command import org command remot get key group command import org command remot singl rpc command import org command remot recoveri complet transact command import org command remot recoveri get doubt transact command import org command remot recoveri get doubt tx info command import org command remot recoveri tx complet notif command import org command tx commit command import org command tx prepar command import org command tx rollback command import org command tx version commit command import org command tx version prepar command import org command tx totalord total order commit command import org command tx totalord total order non version prepar command import org command tx totalord total order rollback command import org command tx totalord total order version commit command import org command tx totalord total order version prepar command import org command write backup put map rpc command import org command write backup write rpc command import org command write clear command import org command write comput command import org command write comput absent command import org command write invalid command import org command write invalid command import org command write invalid version command import org command write put key valu command import org command write put map command import org command write remov command import org command write remov expir command import org command write replac command import org common cach except import org factori know compon name import org factori annot compon name import org factori annot inject import org factori scope scope import org factori scope scope import org manag emb cach manag import org manag impl replic command manag function import org manag impl replic command runnabl import org statetransf state request command import org statetransf state respons command import org stream impl stream request command import org stream impl stream respons command import org stream impl stream segment respons command import org topolog cach topolog control command import org util byte string import org xsite singl site rpc command import org xsite site admin command import org xsite statetransf site state push command import org xsite statetransf site state transfer control command specif use creat un initi link org command replic command byte stream link scope compon n knowledg initi command inject cach specif compon p usual second step unmarshal command byte stream creat un initi version use factori pass command though link command factori initi replic command replic command boolean see command factori initi replic command replic command boolean author manik surtani author mircea marku jboss com sinc scope scope public class remot command factori privat emb cach manag cach manag privat map byte modul command factori command factori inject public void inject emb cach manag cach manag compon name know compon name map byte modul command factori command factori cach manag cach manag command factori command factori creat un initi command un initi sens paramet set compon specif cach question set p would typic set paramet use link command factori initi replic command replic command boolean p param id id command param type type command return replic command public replic command stream byte id byte type replic command command type switch id case put key valu command command new put key valu command break case put map command command new put map command break case remov command command new remov command break case replac command command new replac command break case comput command command new comput command break case comput absent command command new comput absent command break case get key valu command command new get key valu command break case clear command command new clear command break case invalid command command new invalid command break case invalid command command new invalid command break case cach topolog control command command new cach topolog control command break case get key group command command new get key group command break case get cach entri command command new get cach entri command break case read write key command command new read write key command break case read write key valu command command new read write key valu command break case read write mani command command new read write mani command break case read write mani entri command command new read write mani entri command break case write key command command new write key command break case write key valu command command new write key valu command break case write mani command command new write mani command break case write mani entri command command new write mani entri command break case remov expir command command new remov expir command break case replic command runnabl command new replic command runnabl break case replic command manag function command new replic command manag function break case read key command command new read key command break case read mani command command new read mani command break case tx read key command command new tx read key command break case tx read mani command command new tx read mani command break default throw new cach except unknown command id id els modul command factori mcf command factori get id mcf null return mcf stream id els throw new cach except unknown command id id return command resolv link cach rpc command stream param id id command param type type command whether intern user defin param cach name cach name command direct return instanc link cach rpc command public cach rpc command stream byte id byte type byte string cach name cach rpc command command type switch id case lock control command command new lock control command cach name break case prepar command command new prepar command cach name break case version prepar command command new version prepar command cach name break case total order non version prepar command command new total order non version prepar command cach name break case total order version prepar command command new total order version prepar command cach name break case commit command command new commit command cach name break case version commit command command new version commit command cach name break case total order commit command command new total order commit command cach name break case total order version commit command command new total order version commit command cach name break case rollback command command new rollback command cach name break case total order rollback command command new total order rollback command cach name break case singl rpc command command new singl rpc command cach name break case cluster get command command new cluster get command cach name break case state request command command new state request command cach name break case state respons command command new state respons command cach name break case remov cach command command new remov cach command cach name cach manag break case tx complet notif command command new tx complet notif command cach name break case get doubt transact command command new get doubt transact command cach name break case distribut execut command command new distribut execut command cach name break case get doubt tx info command command new get doubt tx info command cach name break case complet transact command command new complet transact command cach name break case creat cach command command new creat cach command cach name break case site admin command command new site admin command cach name break case cancel command command new cancel command cach name break case site state transfer control command command new site state transfer control command cach name break case site state push command command new site state push command cach name break case singl site rpc command command new singl site rpc command cach name break case cluster get command command new cluster get command cach name break case stream request command command new stream request command cach name break case stream segment respons command command new stream segment respons command cach name break case stream respons command command new stream respons command cach name break case backup write rpc command command new backup write rpc command cach name break case backup put map rpc command command new backup put map rpc command cach name break case invalid version command command new invalid version command cach name break default throw new cach except unknown command id id els modul command factori mcf command factori get id mcf null return mcf stream id cach name els throw new cach except unknown command id id return command 
packag org command write import static org common util util str import java io except import java io object input import java io object output import java util object import org command command invoc id import org command metadata awar command import org command visitor import org common marshal marshal util import org contain entri entri import org context invoc context import org context impl flag bit set import org metadata metadata import org notif cachelisten cach notifi import org util log log import org util log log factori author mircea marku jboss com author href mailto galder zamarreno jboss com galder zamarreno sinc public class remov command extend abstract data write command implement metadata awar command privat static final log log log factori get log remov command class public static final byte protect cach notifi object object notifi protect boolean success true privat boolean non exist fals protect metadata metadata protect valu matcher valu matcher null valu indic entri remov key map valu null entri remov regardless valu map protect object valu public remov command object key object valu cach notifi notifi long flag bit set command invoc id command invoc id super key flag bit set command invoc id valu valu noinspect uncheck notifi notifi valu matcher valu null valu matcher valu matcher public void init cach notifi notifi noinspect uncheck notifi notifi public remov command overrid public object accept visitor invoc context ctx visitor visitor throw throwabl return visitor visit remov command ctx overrid public object perform invoc context ctx throw throwabl worth look entri never go appli chang valu matcher valu matcher success fals return null entri e entri ctx lookup entri key object prev valu e get valu prev valu null non exist true valu matcher match null valu null e set chang true e set remov true e set creat fals instanceof evict command e set evict true e set valu null return condit true null els log trace noth remov sinc entri n exist context null success fals return fals valu matcher match prev valu valu null success fals return fals instanceof evict command e set evict true return perform remov e prev valu ctx public void notifi invoc context ctx object remov valu metadata remov metadata boolean pre notifi notifi cach entri remov key remov valu remov metadata pre ctx overrid public byte get command id return overrid public void set metadata metadata metadata metadata metadata overrid public metadata get metadata return metadata overrid public boolean equal object super equal return fals remov command remov command return object equal valu valu overrid public int hash code int result super hash code result result valu null valu hash code return result overrid public string string return new string builder append remov command key append str key append valu append str valu append metadata append metadata append flag append print flag append command invoc id append command invoc id show command invoc id append valu matcher append valu matcher append topolog id append get topolog id append string overrid public boolean success return success overrid public boolean condit return valu null public boolean non exist return non exist overrid public void write object output output throw except output write object key output write object valu output write object metadata output write long flag bit set copi without remot flag get flag bit set marshal util marshal enum valu matcher output command invoc id write output command invoc id overrid public void read object input input throw except class find except key input read object valu input read object metadata metadata input read object set flag bit set input read long valu matcher marshal util unmarshal enum input valu matcher valu command invoc id command invoc id read input overrid public valu matcher get valu matcher return valu matcher overrid public void set valu matcher valu matcher valu matcher valu matcher valu matcher overrid public void fail success fals overrid public load type load type return condit flag flag bit set load type load type public object get valu return valu public void set valu object valu valu valu overrid public final boolean return valu expect ignor condit remov return condit super return valu expect overrid public void init backup write rpc command backup write rpc command command command set remov command invoc id key get flag bit set get topolog id protect object perform remov entri e object prev valu invoc context ctx notifi ctx prev valu e get metadata true e set remov true e set valid fals e set chang true e set valu null metadata null e set metadata metadata valu matcher valu matcher return condit true prev valu els return expect valu retri return condit true valu 
packag org command write import static org common util util str import java io except import java io object input import java io object output import java util object import org command command invoc id import org common util enum util import org contain entri entri import org context invoc context import org context impl flag bit set import org metadata metadata import org notif cachelisten cach notifi import org util log log import org util log log factori remov entri expir memori author william burn sinc public class remov expir command extend remov command public static final int privat static final log log log factori get log remov expir command class privat long lifespan public remov expir command valu matcher alway n need serial like command valu matcher valu matcher public remov expir command object key object valu long lifespan cach notifi notifi command invoc id command invoc id valu equival null command never compar valu super key valu notifi enum util command invoc id lifespan lifespan valu matcher valu matcher perform expir specifi entri param ctx invoc context return null overrid public object perform invoc context ctx throw throwabl entri e entri ctx lookup entri key e null e remov object valu e get valu provid lifespan null mean store remov command can n compar lifespan object prev valu e get valu lifespan null valu matcher match prev valu valu null e set expir true return perform remov e prev valu ctx els e get metadata null metadata valu mean go current show due expir valu though verifi match valu well valu null valu matcher match prev valu valu null e set expir true return perform remov e prev valu ctx els e get lifespan e get lifespan lifespan entri lifespan posit mean can n expir n even tri remov lastli metadatum verifi equal lifespan valu match add threshold verifi n creat valu lifespan expir valu matcher match prev valu valu null e set expir true return perform remov e prev valu ctx els log trace remov entri lifespan valu match els log trace noth remov sinc entri n exist context alreadi remov success fals return fals overrid public boolean condit return true overrid public void notifi invoc context ctx object remov valu metadata remov metadata boolean pre pre notifi notifi cach entri expir key valu remov metadata ctx overrid public byte get command id return overrid public string string return remov expir command key str key valu str valu lifespan lifespan overrid public void write object output output throw except command invoc id write output command invoc id output write object key output write object valu lifespan null output write boolean true output write long lifespan els output write boolean fals overrid public void read object input input throw except class find except command invoc id command invoc id read input key input read object valu input read object boolean lifespan provid input read boolean lifespan provid lifespan input read long els lifespan null overrid public boolean equal object return true null get class get class return fals super equal return fals remov expir command remov expir command return object equal lifespan lifespan overrid public int hash code return object hash super hash code lifespan overrid public long get flag bit set overrid flag return flag bit set overrid public void init backup write rpc command backup write rpc command command command set remov expir command invoc id key valu flag bit set get topolog id 
packag org client hotrod impl oper import java util concurr atom atom integ import org client hotrod configur configur import org client hotrod impl protocol codec import org client hotrod impl protocol hot rod constant import org client hotrod impl transport transport import org client hotrod impl transport transport factori import net jcip annot immut implement remov oper describ href http commun jboss org wiki hot rod protocol hot rod protocol specif author mircea marku jboss com sinc immut public class remov oper extend abstract key oper public remov oper codec codec transport factori transport factori object key byte key byte byte cach name atom integ topolog id int flag configur cfg super codec transport factori key key byte cach name topolog id flag cfg overrid public execut oper transport transport short statu send key oper key byte transport result return possibl prev valu transport statu hot rod constant exist statu return null return result 
packag org command import java io except import java io object input import java io object output import java util concurr complet futur import java util concurr complet except import org context invoc context import org remot transport address import org util concurr complet futur core command base cach framework command correspond specif area function cach replic use link org remot rpc rpc manag author mircea marku jboss com author manik surtani sinc public interfac replic command invok command asynchron p p method replac link perform invoc context remot execut default implement link perform invoc context remov futur version p sinc default complet futur object invok async throw throwabl return complet futur complet futur perform null invok command synchron p p method option unless command never block pleas implement link invok async instead p sinc default object invok throw throwabl tri return invok async join catch complet except e throw complet futur extract except e perform primari function command pleas see specif implement class detail perform well return type b import b method invok end interceptor chain never call directli custom interceptor param ctx invoc context return arbitrari return valu gener perform command throw throwabl event problem deprec sinc split link invok async link visit command perform invoc context deprec default object perform invoc context ctx throw throwabl return invok use marshal convert command id stream return method id command compat pre method call id byte get command id true return valu provid perform remot otherwis remot link org remot respons respons gener may choos simpli return null save marshal cost return true fals boolean return valu expect true return valu marshal link org remot respons success respons otherwis marshal link org remot respons unsuccess respons default boolean success return true true command process asynchron thread provid thread pool otherwis command process directli group thread p featur allow avoid keep group thread busi origin discard messag retransmiss command block wait state acquir lock etc return true return code true command block wait code fals otherwis boolean block write instanc link object output param output stream throw except error occur void write object output output throw except read instanc stream write link write object output param input stream read throw except error occur throw class find except tri load undefin class void read object input input throw except class find except set sender link address p default n set anyth implement method sender link address need param origin sender link address default void set origin address origin op default 
packag org marshal ext import java io except import java io object input import java io object output import java util collect import java util set import org command remot command factori import org command replic command import org command topolog affect command import org command function read key command import org command function read mani command import org command function read write key command import org command function read write key valu command import org command function read write mani command import org command function read write mani entri command import org command function tx read key command import org command function tx read mani command import org command function write key command import org command function write key valu command import org command function write mani command import org command function write mani entri command import org command read distribut execut command import org command read get key valu command import org command remot cach rpc command import org command remot get key group command import org command write clear command import org command write comput command import org command write comput absent command import org command write evict command import org command write invalid command import org command write invalid command import org command write put key valu command import org command write put map command import org command write remov command import org command write remov expir command import org command write replac command import org common marshal abstract extern import org common util util import org factori global compon registri import org manag impl replic command manag function import org manag impl replic command runnabl import org marshal core id import org topolog cach topolog control command import org util byte string replic command extern author galder zamarr sinc public class replic command extern extend abstract extern replic command privat final remot command factori cmd factori privat final global compon registri global compon registri public replic command extern remot command factori cmd factori global compon registri global compon registri cmd factori cmd factori global compon registri global compon registri overrid public void write object object output output replic command command throw except write command header output command write command paramet output command protect void write command paramet object output output replic command command throw except command write output command instanceof topolog affect command output write int topolog affect command command get topolog id protect void write command header object output output replic command command throw except decid whether core user defin command load check collect class extend replic command modul command get modul command write index separ command defin extern core modul one defin via modul command modul command null modul command contain command get class output write byte els output write byte output write short command get command id overrid public replic command read object object input input throw except class find except replic command replic command read command header input read command paramet input replic command return replic command privat replic command read command header object input input throw except byte type input read byte short method id input read short return cmd factori stream byte method id type void read command paramet object input input replic command command throw except class find except command read input command instanceof topolog affect command topolog affect command command set topolog id input read int protect cach rpc command stream byte id byte type byte string cach name return cmd factori stream id type cach name overrid public integ get id return id overrid public set class extend replic command get type class noinspect uncheck set class extend replic command core command util set cach topolog control command class distribut execut command class get key valu command class clear command class evict command class invalid command class invalid command class put key valu command class put map command class remov command class remov expir command class replac command class comput command class comput absent command class get key group command class read key command class read mani command class read write key command class read write key valu command class write key command class write key valu command class write mani command class write mani entri command class read write mani command class read write mani entri command class tx read key command class tx read mani command class replic command runnabl class replic command manag function class search command replic cach specif replic command collect class extend replic command modul command global compon registri get modul properti modul replic command modul command null modul command empti core command add modul command return core command privat collect class extend replic command get modul command return global compon registri get modul properti modul command 
packag org distribut ch impl import java io except import java io object input import java io object output import java util array list import java util array import java util collect import java util collect import java util hash set import java util iter import java util list import java util set import java util function unari oper import org common hash hash import org common marshal instanc reus advanc extern import org common util util import org distribut ch consist hash import org globalst scop persist state import org marshal core id import org remot transport address import org topolog persist import org common util small int set import org util rang set special implement link org distribut ch consist hash replic cach hash space sever segment own member primari ownership segment evenli spread member author dan berindei author anistor redhat com sinc public class replic consist hash implement consist hash privat static final string primari owner privat static final string primari owner privat final hash hash function privat final int primari owner privat final list address member privat final set address member set privat final set integ segment privat final int segment size public replic consist hash hash hash function list address member int primari owner hash function hash function member collect unmodifi list new array list member member set collect unmodifi set new hash set member primari owner primari owner segment new rang set primari owner length segment size util get segment size primari owner length public replic consist hash union replic consist hash ch get hash function equal ch get hash function throw new illeg argument except consist hash object must hash function get num segment ch get num segment throw new illeg argument except consist hash object must number segment list address union member new array list get member address member ch get member union member contain member union member add member int primari owner new int get num segment int segment id segment id primari owner length segment id address primari owner locat primari owner segment segment id int primari owner index union member index primari owner primari owner segment id primari owner index return new replic consist hash get hash function union member primari owner replic consist hash scop persist state state hash function util get instanc state get properti consist hash persist constant null int num member integ pars int state get properti consist hash persist constant member new array list num member int num member persist uuid persist string state get properti string format consist hash persist constant member add uuid member set collect unmodifi set new hash set member int num primari owner state get int properti primari owner new int num primari owner int num primari owner primari owner state get int properti string format segment new rang set primari owner length segment size util get segment size primari owner length overrid public int get num segment return primari owner length overrid public int get num owner return member size overrid public list address get member return member overrid public hash get hash function return hash function overrid public int get segment object key result must alway posit make sure dividend posit first return hash function hash key integ segment size overrid public list address locat owner segment int segment id address primari owner locat primari owner segment segment id list address owner new array list member size owner add primari owner address member member member equal primari owner owner add member return owner overrid public address locat primari owner segment int segment id return member get primari owner segment id overrid public set integ get segment owner address owner owner null throw new illeg argument except owner null member set contain owner throw new illeg argument except node member owner return segment overrid public set integ get primari segment owner address owner int index member index owner index throw new illeg argument except node member owner set integ primari segment new small int set primari owner length int primari owner length primari owner index primari segment add return primari segment overrid public string get rout tabl string string builder sb new string builder address member sb length sb append n set integ primari segment get primari segment owner sb append append primari append primari segment return sb string overrid public set address locat owner collect object key return member set overrid public boolean key local node address node address object key return segment local node node address overrid public boolean segment local node address node address int segment id return member set contain node address overrid public boolean replic return true public void scop state scope persist state state state set properti consist hash persist constant get class get name state set properti consist hash persist constant hash function get class get name state set properti consist hash persist constant integ string member size int member size state set properti string format consist hash persist constant member get string state set properti integ string primari owner length int primari owner length state set properti string format integ string primari owner overrid public consist hash remap address unari oper address remapp list address remap member new array list member size iter address member iter next address remapp appli next null return null remap member add return new replic consist hash hash function remap member primari owner overrid public string string string builder sb new string builder replic consist hash sb append n append segment size sb append owner append member size append int primari own new int member size int primari owner length primari own primari owner boolean first true int member size address member get first first fals els sb append sb append append append primari own sb append return sb string overrid public int hash code final int prime int result result prime result hash function null hash function hash code result prime result member null member hash code result prime result array hash code primari owner return result overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals replic consist hash replic consist hash obj hash function null hash function null return fals els hash function equal hash function return fals member null member null return fals els member equal member return fals array equal primari owner primari owner return fals return true public static class extern extend instanc reus advanc extern replic consist hash overrid public void write object object output output replic consist hash ch throw except output write object ch hash function output write object ch member output write object ch primari owner overrid suppress warn uncheck public replic consist hash read object object input unmarshal throw except class find except hash hash function hash unmarshal read object list address member list address unmarshal read object int primari owner int unmarshal read object return new replic consist hash hash function member primari owner overrid public integ get id return id overrid public set class extend replic consist hash get type class return collect singleton replic consist hash class 
packag org distribut ch impl import java io object input import java io object output import java util array dequ import java util collect import java util list import java util map import java util queue import java util set import org common hash hash import org common marshal abstract extern import org distribut ch consist hash factori import org globalst scop persist state import org marshal core id import org remot transport address import org util log log import org util log log factori factori replic consist hash author dan berindei author anistor redhat com sinc public class replic consist hash factori implement consist hash factori replic consist hash privat static final log log log factori get log replic consist hash factori class overrid public replic consist hash creat hash hash function int num owner int num segment list address member map address float capac factor int primari owner new int num segment int num segment primari owner member size return new replic consist hash hash function member primari owner overrid public replic consist hash persist state scope persist state state string consist hash class state get properti consist hash replic consist hash class get name equal consist hash class throw log persist consist hash mismatch get class get name consist hash class return new replic consist hash state overrid public replic consist hash updat member replic consist hash base list address new member map address float actual capac factor new member equal base get member return base recomput primari ownership base new list member remov leaver int num segment base get num segment int primari owner new int num segment int node usag new int new member size boolean find orphan segment fals int segment id segment id num segment segment id address primari owner base locat primari owner segment segment id int primari owner index new member index primari owner primari owner segment id primari owner index primari owner index find orphan segment true els node usag primari owner index ensur leaver replac exist member segment orphan find orphan segment int num segment primari owner int least use find least use node node usag primari owner least use node usag least use ensur even spread ownership int min segment per node num segment new member size queue integ segment node new queue new member size int segment id segment id primari owner length segment id int owner primari owner segment id queue integ segment segment node owner segment null segment node owner segment new array dequ integ min segment per node segment add segment id int use node int node node node usag length node node usag node min segment per node take segment node min segment per node use node usag use node min segment per node use node find use node node usag int segment id segment node use node poll n add segment id new owner queue primari owner segment id node node usag use node node usag node return new replic consist hash base get hash function new member primari owner privat int find least use node int node usag int re int node node node usag length node node usag node node usag re re node return re privat int find use node int node usag int re int node node node usag length node node usag node node usag re re node return re overrid public replic consist hash rebal replic consist hash base return base overrid public replic consist hash union replic consist hash ch replic consist hash ch return ch union ch overrid public boolean equal object return null get class get class overrid public int hash code return public static class extern extend abstract extern replic consist hash factori overrid public void write object object output output replic consist hash factori chf overrid suppress warn uncheck public replic consist hash factori read object object input unmarshal return new replic consist hash factori overrid public integ get id return id overrid public set class extend replic consist hash factori get type class return collect class extend replic consist hash factori singleton replic consist hash factori class 
packag org jmx import java lang reflect field import java lang reflect invoc target except import java lang reflect method import java lang reflect modifi import java util hash map import java util map import javax manag attribut import javax manag attribut list import javax manag attribut find except import javax manag dynam bean import javax manag bean attribut info import javax manag bean except import javax manag bean info import javax manag bean oper info import javax manag bean paramet info import javax manag reflect except import javax manag servic find except import org common util collect factori import org common util reflect util import org factori compon jmx attribut metadata import org factori compon jmx oper metadata import org factori compon jmx oper paramet import org factori compon manag compon metadata import org jmx annot bean import org jmx annot manag oper import org util log log import org util log log factori class entir copi group name could not simpli reus group ship bean manag attribut manag oper p origin group resourc bean logic modifi invok method check whether oper call expos link manag oper otherwis call fail group deviat logic purpos like fact could expos class method simpli annot class link bean annot author mircea marku jboss com author galder zamarr sinc public class resourc bean implement dynam bean privat static final string dynam bean descript privat static final log log log factori get log resourc bean class privat static final boolean trace log trace enabl privat final object obj privat final class object class privat final ispn bean oper info op info privat final bean attribut info att info privat final hash map string invok bean attribut info att new hash map string invok bean attribut info privat final manag compon metadata bean metadata privat static final map string field collect factori make concurr map privat static final map string method collect factori make concurr map public resourc bean object instanc manag compon metadata bean metadata throw field except class find except instanc null throw new null pointer except make bean wrapper null instanc obj instanc object class instanc get class bean metadata bean metadata load field int att info new bean attribut info bean metadata get attribut metadata size jmx attribut metadata attribut metadata bean metadata get attribut metadata string attribut name attribut metadata get name invok bean attribut info info jmx info attribut metadata att contain key attribut name throw new illeg argument except compon bean metadata get name metadata duplic attribut attribut name att put attribut name info att info info get bean attribut info trace log tracef attribut r b w b b type attribut name info get bean attribut info readabl info get bean attribut info writabl info get bean attribut info info get bean attribut info get type oper ispn bean oper info op op info new ispn bean oper info bean metadata get oper metadata size jmx oper metadata oper bean metadata get oper metadata op jmx info oper op info op trace log tracef oper op get return type op get name privat static field find field class object class string field name throw field except string key object class get name field name field f get key f null f reflect util get field field name object class f null put key f return f privat static method find setter class object class string field name throw field except string key object class get name field name method get key null reflect util find setter field object class field name null put key return privat static method find getter class object class string field name throw field except string key object class get name g field name method get key null reflect util find getter field object class field name null put key return privat invok bean attribut info jmx info jmx attribut metadata attribut metadata throw field except attribut metadata use setter field field find field object class attribut metadata get name field null return new invok field base bean attribut info attribut metadata get name attribut metadata get type attribut metadata get descript true attribut metadata writabl attribut metadata field method setter attribut metadata writabl find setter object class attribut metadata get name null method getter find getter object class attribut metadata get name return new invok setter base bean attribut info attribut metadata get name attribut metadata get type attribut metadata get descript true attribut metadata writabl attribut metadata getter setter privat ispn bean oper info jmx info jmx oper metadata oper metadata throw class find except jmx oper paramet paramet oper metadata get method paramet bean paramet info param new bean paramet info paramet length int paramet length param new bean paramet info paramet get name paramet get type paramet get descript return new ispn bean oper info oper metadata get method name oper metadata get descript param oper metadata get return type bean oper info oper metadata get oper name object get object return obj overrid public synchron bean info get bean info client n know ispn bean oper info need convert first bean oper info oper info client new bean oper info op info length int op info length ispn bean oper info current op info oper info client new bean oper info current get oper name current get descript current get signatur current get return type bean oper info return new bean info get object get class get canon name bean metadata get descript att info null oper info client null overrid public object get attribut string name throw attribut find except name null name length throw new null pointer except invalid attribut request name attribut attr get name attribut name attr null throw new attribut find except unknown attribut name know attribut name att key set return attr get valu overrid public synchron void set attribut attribut attribut throw attribut find except bean except attribut null attribut get name null throw new null pointer except invalid attribut request attribut set name attribut attribut overrid public synchron attribut list get attribut string name attribut list al new attribut list string name name attribut attr get name attribut name attr null al add attr els log could find attribut name return al overrid public synchron attribut list set attribut attribut list list attribut list result new attribut list object list list attribut attr attribut list tri set name attribut attr result add attr catch except e log fail updat attribut attr get name attr get valu return result overrid public object invok string name object arg string sig throw bean except reflect except log debug enabl log debugf invok method call name bean oper info op info null ispn bean oper info op op info op get oper name equal name op info op break op info null final string msg oper name amongst oper op info throw new bean except new servic find except msg msg argument type transform accord signatur int sig length client e g pass argument java lang string need field number arg null log debug enabl log debugf argument valu transform class method invok need class arg arg get class sig sig equal int class get canon name sig equal integ class get canon name arg get class integ class arg get class int class arg integ pars int string arg sig equal long class get canon name sig equal long class get canon name arg get class long class arg get class long class arg long pars long string arg tri class class new class sig length int class length class reflect util get class name sig null method method get object get class get method op info get name class return method invok get object arg catch except e throw new bean except new except get root caus e public throwabl get root caus throwabl throwabl throwabl caus caus throwabl get caus null throwabl caus return throwabl privat attribut get name attribut string name attribut result null name equal result new attribut bean metadata get descript els invok bean attribut info att get name null name length legaci earli version use upper case start letter attribut charact first char name char charact upper case first char name name replac first charact string first char charact string charact lower case first char att get name null tri result new attribut name invok null trace log tracef attribut r b w b b valu name get bean attribut info readabl get bean attribut info writabl get bean attribut info result get valu catch except e log debugf e except read valu attribut name els log queri attribut find name return result privat void set name attribut attribut attribut throw bean except attribut find except log debug enabl log debugf invok set attribut valu attribut get name attribut get valu string name attribut get name invok bean attribut info att get name null name length legaci earli version use upper case start letter attribut charact first char name char charact upper case first char name name replac first charact string first char charact string charact lower case first char att get name null tri invok attribut catch except e log error write valu attribut name e throw new bean except e error invok setter attribut name els log could invok set attribut name attribut get valu throw new attribut find except could find attribut name privat static abstract class invok bean attribut info privat final bean attribut info attribut info public invok bean attribut info string name string type string descript boolean readabl boolean writabl boolean attribut info new bean attribut info name type descript readabl writabl public abstract object invok attribut throw illeg access except invoc target except public bean attribut info get bean attribut info return attribut info privat static class invok field base bean attribut info extend invok bean attribut info privat transient final field field privat transient final resourc bean resourc public invok field base bean attribut info string name string type string descript boolean readabl boolean writabl boolean field field resourc bean resourc super name type descript readabl writabl field field resourc resourc overrid public object invok attribut throw illeg access except modifi public field get modifi field set access true null return field get resourc get object els field set resourc get object get valu return null privat static class invok setter base bean attribut info extend invok bean attribut info privat transient final method setter privat transient final method getter privat transient final resourc bean resourc public invok setter base bean attribut info string name string type string descript boolean readabl boolean writabl boolean method getter method setter resourc bean resourc super name type descript readabl writabl setter setter getter getter resourc resourc overrid public object invok attribut throw illeg access except invoc target except null modifi public getter get modifi getter set access true return getter invok resourc get object null els modifi public setter get modifi setter set access true return setter invok resourc get object get valu public string get object name string bean metadata get jmx object name return null trim length object class get simpl name 
packag org factori import org factori annot default factori import org remot respons default respons gener import org remot respons respons gener creat respons gener author manik surtani sinc default factori class respons gener class public class respons gener factori extend abstract name cach compon factori implement auto instanti factori overrid public construct class compon type return compon type cast new default respons gener 
packag org remot rpc repres differ handl mechan deal remot command respons includ wait respons node cluster link respons mode wait respons link respons mode wait first valid respons link respons mode author manik surtani sinc public enum respons mode command use mode prevent suspect except broadcast anycast translat group broadcast would caus suspect except mode situat node leav want address live member topolog alreadi updat view yet use asymmetr cluster node respond cach find respons broadcast public boolean synchron return asynchron public boolean asynchron return 
packag org upgrad import java util hash set import java util set import java util concurr time unit import org cach import org common util servic finder import org common util util import org factori annot inject import org factori annot surviv restart import org factori scope scope import org factori scope scope import org jmx annot bean import org jmx annot manag oper import org jmx annot paramet import org util time servic import org util log log import org util log log factori compon handl control hook handl migrat one version anoth author manik surtani author tristan tarrant sinc bean object name roll upgrad manag descript compon handl control hook handl migrat datum one version anoth scope valu scope surviv restart public class roll upgrad manag privat static final log log log factori get log roll upgrad manag class privat final set sourc migrat sourc migrat new hash set privat cach object object cach privat time servic time servic inject public void initi final cach object object cach time servic time servic cach cach time servic time servic manag oper descript synchron datum old cluster use specifi migrat display name synchron datum old cluster use specifi migrat public long synchron datum paramet name migrat name descript name migrat use string migrat name throw except target migrat migrat get migrat migrat name long start time servic time long count migrat synchron data cach log entri migrat count cach get name util pretti print time time servic time durat start time unit return count manag oper descript synchron datum old cluster use specifi migrat display name synchron datum old cluster use specifi migrat public long synchron datum paramet name migrat name descript name migrat use string migrat name paramet name read batch descript number entri transfer time old cluster int read batch paramet name thread descript number thread per node use write datum new cluster int thread throw except target migrat migrat get migrat migrat name long start time servic time long count migrat synchron data cach read batch thread log entri migrat count cach get name util pretti print time time servic time durat start time unit return count manag oper descript disconnect target cluster sourc cluster accord specifi migrat display name disconnect target cluster sourc cluster public void disconnect sourc paramet name migrat name descript name migrat use string migrat name throw except target migrat migrat get migrat migrat name migrat disconnect sourc cach privat target migrat get migrat string name throw except class loader cl cach get cach manag get cach manag configur class loader target migrat servic finder load target migrat class cl name equal ignor case get name return throw log unknown migrat name regist migrat specif datum format endpoint ecosystem typic one migrat implement hot rod one memcach one one emb mode would typic add upgrad manag first access via protocol param migrat public void add sourc migrat sourc migrat migrat sourc migrat add migrat 
packag org factori import org common cach configur except import org factori annot default factori import org remot rpc rpc manag import org remot rpc rpc manag impl factori rpc manag author manik surtani href mailto manik jboss org manik jboss org sinc default factori class rpc manag class public class rpc manag factori extend abstract name cach compon factori implement auto instanti factori overrid public construct class compon type configur cluster cach mode cluster return null transport configur global configur cluster throw new cach configur except transport configur order use cluster cach return compon type cast new rpc manag impl 
packag org remot rpc import java text number format import java util collect import java util hash map import java util list import java util map import java util set import java util concurr complet futur import java util concurr complet except import java util concurr execut except import java util concurr time unit import java util concurr atom atom long import org command command factori import org command replic command import org command topolog affect command import org command remot cach rpc command import org common cach except import org configur cach configur import org distribut ch consist hash import org factori annot inject import org factori annot start import org jmx jmx statist expos import org jmx annot data type import org jmx annot display type import org jmx annot bean import org jmx annot manag attribut import org jmx annot manag oper import org jmx annot measur type import org jmx annot paramet import org jmx annot unit import org remot inboundhandl deliv order import org remot respons respons import org remot transport address import org remot transport transport import org statetransf state transfer manag import org topolog cach topolog import org util time servic import org util concurr complet futur import org util log log import org util log log factori compon realli wrapper around link org remot transport transport implement use set transport provid lifecycl depend hook extern transport implement author manik surtani author galder zamarr author mircea marku jboss com author pedro ruivo sinc bean object name rpc manag descript manag remot call remot cach instanc cluster public class rpc manag impl implement rpc manag jmx statist expos privat static final log log log factori get log rpc manag impl class privat static final boolean trace log trace enabl privat transport privat final atom long replic count new atom long privat final atom long replic failur new atom long privat final atom long total replic time new atom long privat boolean statist enabl fals default n gather statist privat configur configur privat command factori cf privat state transfer manag state transfer manag privat time servic time servic inject public void inject depend transport configur cfg command factori cf state transfer manag state transfer manag time servic time servic configur cfg cf cf state transfer manag state transfer manag time servic time servic start prioriti privat void start statist enabl configur jmx statist enabl configur transact transact protocol total order check total order support manag attribut descript retriev commit view display name commit view datum type data type public string get commit view string cach topolog cach topolog state transfer manag get cach topolog cach topolog null return return cach topolog get current get member string manag attribut descript retriev pend view display name pend view datum type data type public string get pend view string cach topolog cach topolog state transfer manag get cach topolog cach topolog null return consist hash pend cach topolog get pend return pend null pend get member string null overrid public complet futur map address respons invok remot async collect address recipi replic command rpc rpc option option trace log tracef invok recipi list option get address rpc recipi option configur cluster cach mode cluster throw new illeg state except tri invok remot command cach cluster set topolog id command case n yet set topolog id rpc cach rpc command cach rpc rpc instanceof cach rpc command cach rpc command rpc cf build singl rpc command rpc long start time nano statist enabl time servic time complet futur map address respons invoc tri invoc invok remot async recipi cach rpc option respons mode option time unit milli option timeout option respons filter option deliv order configur cluster cach mode distribut catch except e log unexpect error replic e statist enabl replic failur increment get return rethrow cach except e return invoc handl respons map throwabl statist enabl long time take time servic time durat start time nano time unit total replic time get add time take throwabl null statist enabl replic count increment get trace log tracef respons rpc respons map return respons map els statist enabl replic failur increment get return rethrow cach except throwabl privat rethrow cach except throwabl throwabl throwabl get caus null throwabl instanceof complet except throwabl throwabl get caus throwabl instanceof cach except log trace replic except throwabl throw cach except throwabl els log unexpect error replic throwabl throw new cach except throwabl overrid public map address respons invok remot collect address recipi replic command rpc rpc option option complet futur map address respons futur invok remot async recipi rpc option tri return complet futur await futur catch interrupt except e thread current thread interrupt throw new cach except thread interrupt invok e catch execut except e throwabl caus e get caus caus instanceof cach except throw cach except caus els throw new cach except unexpect except replic command caus overrid public map address respons invok remot map address replic command rpc rpc option option trace log tracef invok option get address rpc option n use replic queue n want send command node configur cluster cach mode cluster throw new illeg state except tri invok remot command cach cluster map address replic command replac command null map entri address replic command entri rpc entri set replic command rpc entri get valu set topolog id command case n yet set topolog id rpc rpc instanceof cach rpc command rpc cf build singl rpc command rpc can n modifi map iter replac command null replac command new hash map replac command put entri get key rpc replac command null rpc put replac command long start time nano statist enabl start time nano time servic time tri map address respons result invok remot rpc option respons mode option time unit milli option timeout option respons filter option deliv order configur cluster cach mode distribut statist enabl replic count increment get trace log tracef respons rpc result return result catch interrupt except e thread current thread interrupt throw new cach except thread interrupt invok e catch cach except e log trace replic except e statist enabl replic failur increment get throw e catch throwabl th log unexpect error replic th statist enabl replic failur increment get throw new cach except th final statist enabl long time take time servic time durat start time nano time unit total replic time get add time take privat cach rpc command cach rpc command replic command command return command instanceof cach rpc command cach rpc command command cf build singl rpc command command overrid public void send address destin replic command command deliv order deliv order trace log tracef invok order get address command destin deliv order set topolog id command case n yet set topolog id command cach rpc command cach rpc cach rpc command command tri send destin cach rpc deliv order catch except e error replic e overrid public void send mani collect address destin replic command command deliv order deliv order trace log tracef invok list order get address command destin deliv order set topolog id command case n yet set topolog id command cach rpc command cach rpc cach rpc command command tri send mani destin cach rpc deliv order catch except e error replic e privat void error replic except e log unexpect error replic e statist enabl replic failur increment get rethrow cach except e overrid public transport get transport return privat void set topolog id replic command command command instanceof topolog affect command topolog affect command topolog affect command topolog affect command command topolog affect command get topolog id int current topolog id state transfer manag get cach topolog get topolog id trace log tracef topolog id miss command set command current topolog id topolog affect command set topolog id current topolog id inform overrid manag oper descript reset statist gather compon display name reset statist public void reset statist replic count set replic failur set total replic time set manag attribut descript number success replic display name number success replic measur type measur type display type display type public long get replic count statist enabl return return replic count get manag attribut descript number fail replic display name number fail replic measur type measur type display type display type public long get replic failur statist enabl return return replic failur get manag attribut descript enabl disabl gather statist compon display name statist enabl datum type data type writabl true public boolean statist enabl return statist enabl overrid public boolean get statist enabl return statist enabl deprec alreadi attribut n oper thing overrid deprec manag oper display name enabl disabl statist deprec use statist enabl attribut instead public void set statist enabl paramet name enabl descript whether statist enabl disabl true fals boolean statist enabl statist enabl statist enabl manag attribut descript success replic ratio total replic display name success replic ratio public string get success ratio replic count get statist enabl return doubl ration calcul success ratio return number format get instanc format ration manag attribut descript success replic ratio total replic numer doubl format display name success replic ratio unit unit display type display type public doubl get success ratio float point replic count get statist enabl return return calcul success ratio privat doubl calcul success ratio doubl total count replic count get replic failur get return replic count get total count manag attribut descript averag time spend transport layer millisecond display name averag time spend transport layer unit unit display type display type public long get averag replic time replic count get return return total replic time get replic count get manag attribut descript retriev x site view display name cross site x site view datum type data type public string get site view set string site view get site view return site view null site view string mainli unit test public void set transport transport overrid public address get address return null get address null overrid public int get topolog id cach topolog cach topolog state transfer manag get cach topolog return cach topolog null cach topolog get topolog id overrid public rpc option builder get rpc option builder respons mode respons mode return get rpc option builder respons mode respons mode synchron deliv order deliv order overrid public rpc option builder get rpc option builder respons mode respons mode deliv order deliv order return new rpc option builder configur cluster remot timeout time unit respons mode deliv order overrid public rpc option get default rpc option boolean sync return get default rpc option sync sync deliv order deliv order overrid public rpc option get default rpc option boolean sync deliv order deliv order return get rpc option builder sync respons mode respons mode deliv order build overrid public list address get member return state transfer manag get cach topolog get member 
packag org common executor import java util concurr schedul executor servic import java util concurr schedul thread pool executor import java util concurr thread factori author galder zamarr public enum schedul thread pool executor factori implement thread pool executor factori schedul executor servic overrid public schedul executor servic creat executor thread factori factori schedul thread pool executor result new schedul thread pool executor factori result set remov cancel polici true return result overrid public void valid op public static schedul thread pool executor factori creat return 
packag org client hotrod event import java lang reflect method import java secur access control import java secur privileg action import org client hotrod log log import org client hotrod log log factori secur action org client hotrod event packag move chang class method visibl avoid call link java secur code sourc thu grant privileg escal extern code author galder zamarr sinc final class secur action privat static final log log log factori get log secur action class privat secur action static void set access final method tri system get secur manag null access control privileg new privileg action void overrid public void run set access true return null els set access true catch except e log unabl set acces e 
packag org stream impl termop import java util concurr atom atom boolean import java util concurr atom atom refer import java util function function import java util function supplier import java util stream base stream import java util stream stream import org stream impl termin oper import org stream impl intop intermedi oper import org util log log import org util log log factori termin base oper run provid function evalu oper segment lose evalu function function result ignor subsequ retri new stabl segment repeat either full stabl run complet function lose segment state segment leav param output type function param type stream entri param type stream public class segment retri oper extend base stream extend extend base termin oper implement termin oper privat static final log log log factori get log segment retri oper class privat static final base stream stream empti privat final function super extend function privat transient atom refer base stream stream ref new atom refer privat transient atom boolean continu tri new atom boolean true public segment retri oper iter intermedi oper intermedi oper supplier extend stream supplier function super extend function super intermedi oper supplier function function overrid public boolean lose segment boolean stop lose base stream old stream stream ref get continu tri set stop lose boolean affect old stream null stream non null n empti mean process time segment lose tell one close old stream fail oper complet concurr affect stream ref compar set old stream short circuit thing like send respons wait retriev cach loader old stream close els affect true els affect fals return affect privat inner perform oper base stream stream intermedi oper int op intermedi oper stream int op perform stream return function appli stream overrid public perform oper boolean keep tri true base stream stream valu stream supplier get stream ref set stream valu inner perform oper stream log trace complet oper tri see do stream ref compar set stream null keep tri continu tri get log tracef oper do due tri denial keep tri return keep tri valu null public function super extend get function return function 
packag org transact xa recoveri import java io except import java io object input import java io object output import java util array import java util set import javax transact xa xid import org common marshal abstract extern import org common util util import org marshal core id import net jcip annot immut xid implement need link javax transact xa xid link java io serializ need serial send network spec enforc anyway equal hashcod method xid provid expect abl cope xid class return resourc method author mircea marku jboss com sinc deprec use link org common tx xid impl instead immut deprec public class serializ xid implement xid privat final byte branch qualifi privat final byte global transact id privat final int format id public serializ xid byte branch qualifi byte global transact id int formant id branch qualifi branch qualifi global transact id global transact id format id formant id public serializ xid xid xid xid get branch qualifi xid get global transact id xid get format id overrid public byte get branch qualifi return branch qualifi overrid public byte get global transact id return global transact id overrid public int get format id return format id overrid public boolean equal object return true null instanceof xid return fals xid xid xid format id xid get format id return fals array equal branch qualifi xid get branch qualifi return fals array equal global transact id xid get global transact id return fals return true overrid public int hash code int result branch qualifi null array hash code branch qualifi result result global transact id null array hash code global transact id result result format id return result overrid public string string take com arjuna at jta xa string builder string builder new string builder string builder append string builder append format id string builder append string builder append global transact id length string builder append string builder append branch qualifi length string builder append byte global transact id global transact id string builder append global transact id string builder append byte branch qualifi branch qualifi string builder append branch qualifi string builder append return string builder string public static class xid extern extend abstract extern serializ xid overrid public void write object object output output serializ xid object throw except output write object object get branch qualifi output write object object get global transact id output write int object get format id overrid public serializ xid read object object input input throw except class find except byte bq byte input read object byte gt id byte input read object int type input read int return new serializ xid bq gt id type overrid public set class extend serializ xid get type class return util class extend serializ xid set serializ xid class overrid public integ get id return id 
packag org configur global import java util map import org version import org common configur attribut attribut definit import org common configur attribut attribut set import org common marshal advanc extern import org common marshal marshal import org jboss marshal class resolv public class serial configur public static final attribut definit marshal attribut definit builder marshal null marshal class immut build public static final attribut definit short attribut definit builder version version get marshal version immut build public static final attribut definit class resolv attribut definit builder class resolv null class resolv class immut build static attribut set attribut definit set return new attribut set serial configur class privat final map integ advanc extern advanc extern privat final class resolv class resolv privat final marshal marshal privat final short version privat final attribut set attribut serial configur attribut set attribut map integ advanc extern advanc extern attribut attribut check protect marshal attribut attribut get version attribut attribut get class resolv attribut attribut get advanc extern advanc extern public marshal marshal return marshal public short version return version public map integ advanc extern advanc extern return advanc extern public class resolv class resolv return class resolv public attribut set attribut return attribut overrid public string string return serial configur advanc extern advanc extern attribut attribut overrid public int hash code final int prime int result result prime result advanc extern null advanc extern hash code result prime result attribut null attribut hash code return result overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals serial configur serial configur obj advanc extern null advanc extern null return fals els advanc extern equal advanc extern return fals attribut null attribut null return fals els attribut equal attribut return fals return true 
packag org configur global import static org configur global serial configur import static org configur global serial configur import static org configur global serial configur import java util hash map import java util map import org version import org common cach configur except import org common configur builder import org common configur attribut attribut set import org common marshal advanc extern import org common marshal marshal import org jboss marshal class resolv configur serial marshal set public class serial configur builder extend abstract global configur builder implement builder serial configur privat final attribut set attribut privat map integ advanc extern advanc extern new hash map serial configur builder global configur builder global config super global config attribut serial configur attribut definit set set marshal instanc marshal unmarshal cach entri param marshal public serial configur builder marshal marshal marshal attribut attribut set marshal return public marshal get marshal return attribut attribut get larg allow version use marshal intern state set low version cach instanc cluster ensur compat commun howev set low mean lose benefit improv new version marshal param marshal version public serial configur builder version short marshal version attribut attribut set marshal version return larg allow version use marshal intern state set low version cach instanc cluster ensur compat commun howev set low mean lose benefit improv new version marshal param marshal version public serial configur builder version string marshal version version version get version short marshal version return helper method allow quick registr link advanc extern implement alongsid correspond identifi rememb identifi need posit number includ clash identifi system param id param advanc extern public serial configur builder add advanc extern int id advanc extern advanc extern advanc extern ext advanc extern get id ext null throw new cach configur except string format duplic extern id find extern id share anoth extern id advanc extern get class get name ext get class get name advanc extern put id advanc extern return helper method allow quick registr link advanc extern implement alongsid correspond identifi rememb identifi need posit number includ clash identifi system param advanc extern public serial configur builder add advanc extern advanc extern advanc extern integ id advanc extern get id id null throw new cach configur except string format advanc extern identifi set extern advanc extern get class get name add advanc extern id int valu advanc extern return helper method allow quick registr link advanc extern implement param advanc extern public serial configur builder add advanc extern advanc extern advanc extern advanc extern advanc extern advanc extern add advanc extern advanc extern return class resolv use unmarshal object param class resolv public serial configur builder class resolv class resolv class resolv attribut attribut set class resolv return overrid public void valid op valid requir overrid public serial configur creat return new serial configur attribut protect advanc extern overrid public serial configur builder read serial configur templat attribut read templat attribut advanc extern templat advanc extern return overrid public string string return serial configur builder attribut attribut advanc extern advanc extern 
packag org common marshal jboss import org common marshal serial function import org common marshal serial import org jboss marshal annot class extern factori import org jboss marshal class extern factori import org jboss marshal extern boss marshal plugin class link class extern factori allow annot use instead boss marshal one order discov class serializ extern author galder zamarr sinc public class serial ext factori implement class extern factori final class extern factori jbmar ext factori new annot class extern factori overrid public extern get extern class type serial serial ann type get annot serial class serial function lambda serial ann type get annot serial function class serial ann null lambda serial ann null check boss marshal extern return jbmar ext factori get extern type els tri org common marshal extern ext serial ann null serial ann valu new instanc lambda serial ann valu new instanc return new boss extern adapt ext catch except e throw new illeg argument except string format instanti extern type e 
packag org common util import java util collect import java util iter import java util link hash map import java util map import java util servic configur error import java util servic loader import org common log log import org common log log factori import org osgi framework bundl context import org osgi framework framework util import org osgi util tracker servic tracker servic finder link java util servic loader replac understand multipl classpath author tristan tarrant author brett meyer sinc public class servic finder privat static final log log factori get log servic finder class public static collect load class contract class loader loader map string servic new link hash map loader length tri servic loader load servic servic loader load contract add servic load servic servic catch except e ignor els class loader loader loader loader null continu tri servic loader load servic servic loader load contract loader add servic load servic servic catch except e ignor add osgi servic contract servic servic empti debugf servic impl find contract get simpl name return servic valu privat static void add servic servic loader load servic map string servic iter load servic iter next tri servic next servic put absent servic get class get name servic null debugf load servic impl servic get class get simpl name els debugf ignor alreadi load servic servic get class get simpl name catch servic configur error e debugf skip servic impl e privat static void add osgi servic class contract map string servic util gi context return final bundl context bundl context framework util get bundl servic finder class get bundl context final servic tracker servic tracker new servic tracker bundl context contract get name null servic tracker open tri final object osgi servic servic tracker get servic osgi servic null object osgi servic osgi servic servic put absent osgi servic get class get name osgi servic null debugf load servic impl osgi servic get class get simpl name els debugf ignor alreadi load servic osgi servic get class get simpl name catch except e ignor 
packag org context import java util collect import java util map import java util set import org contain entri cach entri import org remot transport address author mircea marku author sann grinovero deprec sinc class go move intern packag deprec public final class singl key non tx invoc context implement invoc context possibl key wrap lock e g get take place privat boolean lock privat object key privat cach entri cach entri move origin address invoc context factori origin local true address memori alloc cost verifi worth look object align would need differ implement point null would n help privat final address origin privat object lock owner public singl key non tx invoc context final address origin origin origin overrid public boolean origin local return origin null overrid public boolean tx scope return fals overrid public object get lock owner return lock owner overrid public void set lock owner object lock owner lock owner lock owner overrid public invoc context clone tri return invoc context super clone catch clone support except e throw new illeg state except imposs e overrid public set object get lock key return lock collect singleton key collect empti set overrid public void clear lock key lock fals dan n necessari n clear look key retri non tx command topolog chang cach entri null overrid public void add lock key final object key key null set key key key els key equal key throw illeg state except lock true privat illeg state except illeg state except return new illeg state except singl key invoc context use multipl key n possibl overrid public cach entri lookup entri final object key key null key equal key return cach entri return null public boolean key equal object key return key key key equal key overrid public map object cach entri get look entri return cach entri null collect empti map collect singleton map key cach entri overrid public void put look entri final object key final cach entri e key null set key key key els key equal key throw illeg state except cach entri e overrid public void remov look entri final object key key null key equal key cach entri null public object get key return key public cach entri get cach entri return cach entri overrid public address get origin return origin overrid public class loader get class loader return null overrid public void set class loader class loader class loader op overrid public boolean lock key final object key return lock key equal key overrid public boolean entri remov context final object key cach entri ce lookup entri key return ce null ce remov ce chang public void reset state key null cach entri null lock fals overrid public string string final string builder sb new string builder singl key non tx invoc context sb append lock append lock sb append key append key sb append cach entri append cach entri sb append origin append origin sb append lock owner append lock owner sb append return sb string 
packag org configur cach import java util array list import java util collect import java util hash set import java util list import java util set import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut initi import org common configur attribut attribut set author mircea marku jboss com sinc public class site configur public static final attribut definit boolean attribut definit builder disabl fals immut build public static final attribut definit set string attribut definit builder backup site use null class set string class set class initi new attribut initi set string overrid public set string initi return new hash set immut build static final attribut set attribut definit set return new attribut set site configur class privat final backup configur backup privat final list backup configur backup privat final attribut boolean disabl backup privat final attribut set string use backup site privat final attribut set attribut public site configur attribut set attribut list backup configur backup backup configur backup attribut attribut check protect backup collect unmodifi list backup disabl backup attribut attribut use backup site attribut attribut backup backup return true cach will n backup datum remot would still accept site back datum site public boolean disabl backup return disabl backup get return list site cach might back datum list actual site defin link use backup site public list backup configur backup return backup return list link backup configur link org configur cach backup configur enabl true public list backup configur enabl backup list backup configur result new array list backup configur bc backup bc enabl result add bc return result return inform cach backup data cach public backup configur backup return backup public backup failur polici get failur polici string site name backup configur bc backup bc site equal site name return bc backup failur polici throw new illeg state except must site configur site name public boolean use backup string site name backup configur bc backup bc site equal site name return bc enabl return fals public boolean enabl backup backup configur bc backup bc enabl return true return fals public set string use backup site return use backup site get public attribut set attribut return attribut overrid public int hash code final int prime int result result prime result attribut null attribut hash code result prime result backup null backup hash code return result overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals site configur site configur obj attribut null attribut null return fals els attribut equal attribut return fals backup null backup null return fals els backup equal backup return fals return true overrid public string string return site configur backup backup backup backup attribut attribut 
packag org statetransf import static org context flag import static org context flag import static org context flag import static org context flag import static org context flag import static org context flag import static org context flag import static org context flag import static org factori know compon name import static org persist manag persist manag access mode import java util array list import java util collect import java util collect import java util hash map import java util hash set import java util iter import java util list import java util map import java util set import java util concurr complet futur import java util concurr count latch import java util concurr executor servic import java util concurr time unit import java util concurr atom atom boolean import java util concurr atom atom integ import java util stream collector import java util stream int stream import javax transact system except import javax transact transact manag import org cach import org command command factori import org command write invalid command import org command write put key valu command import org common cach except import org common util enum util import org common util small int set import org common util concurr concurr hash set import org configur cach cach mode import org configur cach configur import org configur cach partit handl configur import org conflict impl intern conflict manag import org contain data contain import org contain entri intern cach entri import org context invoc context import org context invoc context factori import org context impl tx invoc context import org distexec distribut callabl import org distribut distribut info import org distribut distribut manag import org distribut triangl order manag import org distribut ch consist hash import org distribut ch key partition import org executor limit executor import org factori know compon name import org factori annot compon name import org factori annot inject import org factori annot start import org factori annot stop import org filter key filter import org interceptor async interceptor chain import org notif cachelisten cach notifi import org partitionhandl partit handl import org persist manag persist manag import org remot respons cach find respons import org remot respons respons import org remot respons success respons import org remot rpc respons mode import org remot rpc rpc manag import org remot rpc rpc option import org remot transport address import org remot transport jgroup suspect except import org topolog cach topolog import org topolog local topolog manag import org transact impl remot transact import org transact impl transact tabl import org transact totalord total order latch import org transact totalord total order manag import org transact xa cach transact import org transact xa global transact import org util concurr block task awar executor servic import org util concurr command ack collector import org util concurr complet futur import org util concurr timeout except import org util log log import org util log log factori import net jcip annot guard link state consum implement author anistor redhat com sinc public class state consum impl implement state consum protect static final log log log factori get log state consum impl class protect static final boolean trace log trace enabl protect static final int protect static final long enum util bit set protect cach cach protect state transfer manag state transfer manag protect local topolog manag local topolog manag protect string cach name protect configur configur protect rpc manag rpc manag protect transact manag transact manag option protect command factori command factori protect transact tabl transact tabl option protect data contain object object datum contain protect persist manag persist manag protect async interceptor chain interceptor chain protect invoc context factori icf protect state transfer lock state transfer lock protect cach notifi cach notifi protect total order manag total order manag protect block task awar executor servic remot command executor protect long timeout protect boolean fetch enabl protect boolean transact protect boolean invalid mode protect boolean total order protect volatil key invalid listen key invalid listen test purpos protect commit manag commit manag protect executor servic state transfer executor protect command ack collector command ack collector protect triangl order manag triangl order manag protect distribut manag distribut manag protect key partition key partition privat intern conflict manag conflict manag protect volatil cach topolog cach topolog indic state transfer progress set new topolog id topolog updat rebal true call chang back topolog updat null pend receiv protect final atom integ state transfer topolog id new atom integ indic rebal progress local node yet receiv new segment yet set true rebal start becom inbound transfer complet state transfer topolog id set back protect final atom boolean wait state new atom boolean fals protect complet futur void state transfer futur complet futur complet null protect final object transfer map lock new object map keep track current inbound state transfer sourc address could multipl transfer flow sourc differ segment valu list work tandem transfer segment alway need keep sync updat need atom guard transfer map lock privat final map address list inbound transfer task transfer sourc new hash map map keep track current inbound state transfer segment id one transfer per segment work tandem transfer sourc alway need keep sync updat need atom guard transfer map lock protect final map integ list inbound transfer task transfer segment new hash map push c background thread protect limit executor state request executor privat volatil boolean own data fals protect rpc option synchron rpc option protect rpc option synchron ignor leaver rpc option public state consum impl stop appli incom state also stop track updat key call end state transfer clear command commit state transfer param topolog id overrid public void stop appli state int topolog id trace log tracef stop keep track chang key state transfer topolog topolog id commit manag stop track inject public void init cach cach compon name executor servic state transfer executor state transfer manag state transfer manag local topolog manag local topolog manag async interceptor chain interceptor chain invoc context factori icf configur configur rpc manag rpc manag transact manag transact manag command factori command factori persist manag persist manag data contain object object datum contain transact tabl transact tabl state transfer lock state transfer lock cach notifi cach notifi total order manag total order manag compon name know compon name block task awar executor servic remot command executor commit manag commit manag command ack collector command ack collector triangl order manag triangl order manag distribut manag distribut manag key partition key partition intern conflict manag conflict manag cach cach cach name cach get name state transfer executor state transfer executor state transfer manag state transfer manag local topolog manag local topolog manag interceptor chain interceptor chain icf icf configur configur rpc manag rpc manag transact manag transact manag command factori command factori persist manag persist manag datum contain datum contain transact tabl transact tabl state transfer lock state transfer lock cach notifi cach notifi total order manag total order manag remot command executor remot command executor commit manag commit manag command ack collector command ack collector triangl order manag triangl order manag distribut manag distribut manag key partition key partition conflict manag conflict manag invalid mode configur cluster cach mode invalid transact configur transact transact mode transact total order configur transact transact protocol total order timeout configur cluster state transfer timeout public boolean activ transfer synchron transfer map lock return transfer sourc empti overrid public boolean state transfer progress return state transfer topolog id get overrid public boolean state transfer progress key object key invalid mode invalid mode much relev key actual transfer right fals respons mean usual remot lookup write oper perform null assum invalid mode user must expect datum disappear cach time null previou valu caus troubl return fals distribut info distribut info distribut manag get cach topolog get distribut key return distribut info write owner distribut info read owner overrid public boolean own data return own data overrid public complet futur void topolog updat final cach topolog cach topolog final boolean rebal final boolean member cach topolog get member contain rpc manag get address final boolean start conflict resolut rebal cach topolog get phase cach topolog phase trace log tracef receiv new topolog cach rebal b member b topolog cach name rebal member cach topolog own data member own data true els own data member happen merg local node minor partit own data fals member leav crash immedi rebal start new command may execut command start rebal boolean start rebal rebal rebal start conflict resolut cach topolog get pend null cach topolog get pend null trace log tracef forc start rebal true start rebal true start rebal updat rebal topolog id start rebal go ignor state respons small topolog id state transfer topolog id compar set cach topolog get topolog id conflict manag cancel version request cach notifi notifi datum rehash cach topolog get current cach topolog get pend cach topolog get union cach topolog get topolog id true start conflict resolut stop state appli prior rebal also prevent track stop state transfer topolog id set await total order transact cach topolog start rebal make sure n send command add transfer task even task remov add wait state set fals state transfer futur new complet futur final consist hash new write ch cach topolog get write consist hash final cach topolog previou cach topolog cach topolog final consist hash previou read ch previou cach topolog null previou cach topolog get current null final consist hash previou write ch previou cach topolog null previou cach topolog get write consist hash null ensur write datum contain use right consist hash need tri final block sinc assign state transfer lock acquir exclus topolog lock topolog instal cach topolog get topolog id start rebal previou write ch new write ch cach topolog cach topolog triangl order manag updat cach topolog cach topolog distribut manag null distribut manag set cach topolog cach topolog conflict manag topolog updat distribut manag get cach topolog need track chang user put conflict resolut prioritis merg polici updat track stop subsequ rebal complet start rebal start conflict resolut trace log tracef start keep track key rebal commit manag stop track commit manag start track state transfer lock releas exclus topolog lock state transfer lock notifi topolog instal cach topolog get topolog id remot command executor check readi task tri fetch transact datum segment owner enabl start conflict resolut transact fetch enabl set integ add segment remov segment previou write ch null segment assign initi mean first member first member add segment via rebal remov segment collect empti set add segment collect empti set perhap member listen instal happen cach member configur cluster cach mode distribut configur cluster cach mode scatter collect distribut callabl callabl get cluster listen cach topolog distribut callabl callabl callabl callabl set environ cach null tri callabl call catch except e log cluster listen instal failur e trace log tracef cach add segment cach name add segment els set integ previou segment get own segment previou write ch set integ new segment get own segment new write ch new segment size new write ch get num segment optim replic cach remov segment new small int set els remov segment new small int set previou segment remov segment remov new segment rebal need request segment new add segment new small int set new segment add segment remov previou segment trace log tracef cach new segment old segment cach name new segment previou segment log tracef cach add segment remov segment cach name add segment remov segment remov inbound transfer segment long cancel transfer remov segment scatter cach get add segment first want keep start rebal add segment empti configur cluster cach mode scatter last owner segment leaf cluster new set owner assign new owner tri retriev segment happen rebal might alreadi send rebal confirm coordin will n wait we retriev segment anyway log debugf request segment last owner leav cluster add segment add segment clear check exist transfer restart differ sourc initi sourc long member restart broken transfer cach topolog add segment handl segment start rebal add segment remov segment int state transfer topolog id state transfer topolog id get trace log tracef topolog updat process state transfer topolog id start rebal pend object state transfer topolog id start rebal cach topolog get pend state transfer topolog id start rebal cach topolog get phase rebal receiv topolog updat without pend signal end rebal boolean chang state transfer topolog id compar set state transfer topolog id chang stop appli state state transfer topolog id coordin chang might get two concurr topolog updat want notifi datum rehash listen consist hash next consist hash cach topolog get pend next consist hash null next consist hash cach topolog get current cach notifi notifi datum rehash previou read ch next consist hash previou write ch cach topolog get topolog id fals trace log tracef unlock state transfer progress topolog cach topolog get topolog id total order total order manag notifi state transfer end final state transfer lock notifi transact data receiv cach topolog get topolog id remot command executor check readi task set flag transfer add transfer sourc map state transfer topolog id get member wait state set true notifi end state transfer need remov transact whose origin leav cach need appli transact node notifi transact data receiv otherwis rollback command would block tri transact tabl null transact tabl cleanup leaver transact rpc manag get transport get member catch except e fail state transfer cleanup fail see detail log transact cleanup error e command ack collector member chang new write ch get member rebal complet notifi end state transfer need confirm switch cach topolog get phase case case state transfer futur complet null partit handl configur ph config configur cluster partit handl boolean member previou write ch null previou write ch get member contain rpc manag get address boolean delet past member val member ph config split partit handl ph config merg polici null datum segment remov datum contain cach store need discard datum segment n previous own lose membership e g merg local partit degrad mode partit avail enabl except merg polici enabl case must perform remov node member new topolog otherwis entri updat conflict resolut remov result subset owner host resolv entri set integ remov segment member delet past member val cach topolog get phase cach topolog phase remov segment int stream rang new write ch get num segment box collect collector set set integ new segment get own segment new write ch remov segment remov new segment tri remov stale data remov segment catch interrupt except e thread current thread interrupt throw new cach except e conflict manag restart version request return state transfer futur protect void topolog instal int topolog id boolean start rebal consist hash previou write ch consist hash new write ch protect void handl segment boolean start rebal set integ add segment set integ remov segment add segment empti add transfer new restart segment add transfer add segment privat void await total order transact cach topolog cach topolog boolean rebal total order wait remot transact proceed total order trace log trace state transfer total order cach wait remot transact finish tri total order latch block total order manag notifi state transfer start cach topolog get topolog id rebal block await un block catch interrupt except e interrupt thread current thread interrupt throw new cach except e trace log trace state transfer total order cach remot transact finish move protect void notifi end state transfer need wait state get activ transfer return wait state compar set true fals int topolog id state transfer topolog id get log debugf finish receiv segment cach topolog cach name topolog id stop appli state topolog id state transfer futur complet null protect set integ get own segment consist hash consist hash address address rpc manag get address return consist hash get member contain address consist hash get segment owner address collect empti set overrid public void appli state final address sender int topolog id boolean push transfer collect state chunk state chunk consist hash w ch cach topolog get write consist hash ignor respons receiv long member w ch get member contain rpc manag get address trace log tracef ignor receiv state long member cach cach name return ignor segment request previou rebal happen coordin leaf new coordin cancel rebal progress int rebal topolog id state transfer topolog id get rebal topolog id push transfer log debugf discard state respons topolog id cach n state transfer progress topolog id cach name return topolog id rebal topolog id log debugf discard state respons old topolog id cach state transfer request topolog b topolog id cach name wait state return trace log tracef appli receiv state datum contain cach key cach name datum contain size includ expir final count latch count latch new count latch state chunk size push transfer push transfer specif scatter cach easi way integr state chunk state chunk state chunk state chunk get cach entri null state transfer executor submit appli state sender state chunk get segment id state chunk get cach entri count latch count els set integ segment w ch get segment owner rpc manag get address state chunk state chunk state chunk state transfer executor submit tri appli chunk sender segment state chunk catch throwabl e log error fail appli state e count latch count log tracef latch count latch get count tri boolean await count latch await timeout time unit await throw new timeout except time appli state catch interrupt except e thread current thread interrupt throw new cach except e trace log tracef appli receiv state datum contain cach key cach name datum contain size includ expir synchron transfer map lock log tracef segment receiv yet cach cach name transfer sourc privat void appli chunk address sender set integ segment state chunk state chunk segment contain state chunk get segment id log warnf discard receiv cach entri segment cach belong node state chunk get segment id cach name return notifi inbound task chunk cach entri receiv inbound transfer task inbound transfer null synchron transfer map lock list inbound transfer task inbound transfer transfer segment get state chunk get segment id inbound transfer null inbound transfer inbound transfer stream filter task task get sourc equal sender find first els null inbound transfer null state chunk get cach entri null appli state sender state chunk get segment id state chunk get cach entri inbound transfer state receiv state chunk get segment id state chunk last chunk els cach get statu allow invoc log ignor unsolicit state sender state chunk get segment id cach name privat void appli state address sender int segment id collect intern cach entri cach entri trace log tracef appli new state chunk segment cach node receiv cach entri segment id cach name sender cach entri size avoid handl state transfer interceptor potenti lock state transfer lock boolean transact transact manag null intern cach entri e cach entri tri invoc context ctx transact transact manag begin ctx icf creat invoc context transact manag get transact true tx invoc context ctx get cach transact set state transfer flag els non tx cach ctx icf creat singl key non tx invoc context put key valu command put command factori build put key valu command e get key e get valu e get metadata ctx set lock owner put get key lock owner interceptor chain invok ctx put transact manag null transact manag commit catch except ex cach get statu allow invoc log debugf cach shut stop state transfer cach name break els log problem appli state key ex get messag e get key ex final tri transact transact manag get transact null transact manag rollback catch system except e ignor trace log tracef finish appli chunk segment cach segment id cach name privat void appli transact address sender collect transact info transact int topolog id log debugf appli transact cach transfer node transact size cach name sender transact transact info transact info transact global transact gtx transact info get global transact rpc manag get address equal gtx get address continu transact origin node happen partit handl mark global transact remot use log hash code equal ignor gtx set remot true cach transact tx transact tabl get local transact gtx tx null tx transact tabl get remot transact gtx tx null tri tx transact tabl get creat remot transact gtx transact info get modif forc node replay give transact datum make think behind remot transact tx set look entri topolog topolog id catch throwabl trace log tracef fail creat remot transact gtx tx null transact info get lock key tx add backup lock key must run persist manag start prioriti public void start cach mode mode configur cluster cach mode fetch enabl mode need state transfer configur cluster state transfer fetch memori state configur persist fetch persist state rpc option chang runtim use alway instanc synchron rpc option rpc manag get rpc option builder respons mode timeout timeout time unit build synchron ignor leaver rpc option rpc manag get rpc option builder respons mode timeout timeout time unit build state request executor new limit executor state request cach name state transfer executor stop prioriti overrid public void stop trace log tracef shut state consum cach node cach name rpc manag get address tri synchron transfer map lock cancel inbound transfer state request executor cancel queu task make copi cancel might remov transfer collect list inbound transfer task transfer new array list transfer sourc valu list inbound transfer task inbound transfer transfer inbound transfer inbound transfer task cancel transfer sourc clear transfer segment clear catch throwabl log errorf fail stop state consum cach node cach name rpc manag get address overrid public cach topolog get cach topolog return cach topolog public void set key invalid listen key invalid listen key invalid listen key invalid listen key invalid listen use scatter cach privat void add transfer set integ segment log debugf add inbound state transfer segment segment set node report error fetch datum retri topolog set address exclud sourc new hash set sourc segment go get sourc map address set integ sourc new hash map transact total order request transact segment sourc exclud sourc fetch enabl request segment segment sourc exclud sourc trace log tracef finish add inbound state transfer segment segment cach name privat void find sourc set integ segment map address set integ sourc set address exclud sourc cach get statu termin return small int set segment without sourc new small int set configur cluster hash num segment integ segment id segment address sourc find sourc segment id exclud sourc ignor segment owner pull datum segment consid empti lose requir state transfer sourc null set integ segment sourc sourc comput absent sourc k new small int set segment sourc add segment id els segment without sourc set segment id segment without sourc empti log live owner find segment segment without sourc cach name exclud sourc privat address find sourc int segment id set address exclud sourc list address owner cach topolog get read consist hash locat owner segment segment id owner contain rpc manag get address prefer transact sourc primari owner need pessimist mode origin primari owner key lock command replic backup owner see pessimist distribut interceptor acquir remot need address owner equal rpc manag get address exclud sourc contain return return null privat void request transact set integ segment map address set integ sourc set address exclud sourc find sourc segment sourc exclud sourc boolean see failur fals true small int set fail segment new small int set int topolog id cach topolog get topolog id map entri address set integ sourc entri sourc entri set address sourc sourc entri get key set integ segment sourc sourc entri get valu boolean fail fals boolean exclud fals tri respons respons get transact sourc segment sourc topolog id respons instanceof success respons list transact info transact list transact info success respons respons get respons valu appli transact sourc transact topolog id els respons instanceof cach find respons log debugf cach stop node send transact inform cach name sourc fail true exclud true els log unsuccess respons retriev transact segment sourc respons fail true catch suspect except e log debugf node leav cluster send transact inform sourc fail true exclud true catch except e cach get statu termin log debugf cach stop request transact cach name sourc clear return els log fail retriev transact segment cach name sourc segment e primari owner still cluster can not exclud see fail true request transact fail need retri fail fail segment add segment sourc primari owner long run retri backup owner exclud exclud sourc add sourc fail segment empti break look sourc fail segment see failur true sourc clear find sourc fail segment sourc exclud sourc see failur start fresh next step start fetch segment sourc clear privat collect distribut callabl get cluster listen cach topolog topolog address sourc topolog get member n send sourc equal rpc manag get address trace log tracef request cluster listen cach node cach name sourc get cluster listen tri state request command cmd command factori build state request command state request command type rpc manag get address topolog get topolog id null map address respons respons rpc manag invok remot collect singleton sourc cmd synchron ignor leaver rpc option respons respons respons get sourc respons instanceof success respons return collect distribut callabl success respons respons get respons valu els log unsuccess respons cluster listen sourc respons catch cach except e log except cluster listen retriev sourc e trace log trace unabl acquir cluster listen member assum none present return collect empti set privat respons get transact address sourc set integ segment int topolog id trace log tracef request transact node segment sourc segment get transact lock state request command cmd command factori build state request command state request command type rpc manag get address topolog id segment map address respons respons rpc manag invok remot collect singleton sourc cmd synchron rpc option return respons get sourc use scatter cach privat void request segment set integ segment map address set integ sourc set address exclud sourc sourc empti find sourc segment sourc exclud sourc map entri address set integ e sourc entri set add transfer e get key e get valu cancel transfer segment long param remov segment segment cancel protect void cancel transfer set integ remov segment synchron transfer map lock list integ segment cancel new array list remov segment segment cancel empti int segment id segment cancel remov list inbound transfer task inbound transfer transfer segment get segment id inbound transfer null need check transfer alreadi complet inbound transfer task inbound transfer inbound transfer set integ cancel segment new small int set remov segment cancel segment retain inbound transfer get segment segment cancel remov cancel segment transfer segment key set remov cancel segment also remov transfer sourc entir task get cancel inbound transfer cancel segment cancel segment inbound transfer cancel remov transfer inbound transfer protect void remov stale data final set integ remov segment throw interrupt except log debugf remov long own entri cach cach name key invalid listen null key invalid listen invalid remov segment collect empti set remov segment empti return key use need remov datum contain cach store final concurr hash set object key remov new concurr hash set datum contain execut task key filter ice object key ice get key int key segment get segment key remov segment contain key segment key remov add key gather key cach store belong segment remov move remov segment empti tri key filter filter key datum contain contain key key return fals int key segment get segment key return remov segment contain key segment persist manag process store filter marshal entri task context key remov add marshal entri get key fals fals catch cach except e log fail load key cach store e key remov empti tri invalid command invalid cmd command factori build invalid command enum util bit set key remov array invoc context ctx icf creat non tx invoc context ctx set lock owner invalid cmd get key lock owner interceptor chain invok ctx invalid cmd trace log tracef remov key datum contain key key remov size datum contain size includ expir catch cach except e log fail invalid key e check exist transfer restart differ sourc initi sourc long member privat void restart broken transfer cach topolog cach topolog set integ add segment set address member new hash set cach topolog get read consist hash get member synchron transfer map lock iter map entri address list inbound transfer task transfer sourc entri set iter next map entri address list inbound transfer task entri next address sourc entri get key member contain sourc trace log tracef remov inbound transfer sourc cach sourc cach name list inbound transfer task inbound transfer entri get valu remov inbound transfer task inbound transfer inbound transfer segment restart still new write trace log tracef remov inbound transfer node segment sourc inbound transfer get segment inbound transfer cancel transfer segment key set remov inbound transfer get segment add segment add inbound transfer get unfinish segment exclud alreadi progress valid sourc add segment remov transfer segment key set privat int get segment object key use version rout tabl involv comput segment return key partition get segment key use scatter cach privat inbound transfer task add transfer address sourc set integ segment sourc final inbound transfer task inbound transfer synchron transfer map lock trace log tracef add transfer segment sourc segment sourc segment sourc remov transfer segment key set alreadi progress segment exclud segment sourc empti trace log tracef segment alreadi progress skip return null inbound transfer new inbound transfer task segment sourc sourc cach topolog get topolog id rpc manag command factori timeout cach name true add transfer inbound transfer segment sourc state request executor execut async complet futur void transfer start inbound transfer request segment trace log tracef wait inbound transfer finish inbound transfer return transfer start complet void throwabl task complet inbound transfer return inbound transfer guard transfer map lock protect void add transfer inbound transfer task inbound transfer set integ segment int segment id segment transfer segment comput absent segment id new array list add inbound transfer transfer sourc comput absent inbound transfer get sourc new array list add inbound transfer protect boolean remov transfer inbound transfer task inbound transfer boolean find fals synchron transfer map lock trace log tracef remov inbound transfer node segment inbound transfer get segment inbound transfer get sourc cach name list inbound transfer task transfer transfer sourc get inbound transfer get sourc transfer null find transfer remov inbound transfer transfer empti transfer sourc remov inbound transfer get sourc int segment inbound transfer get segment transfer transfer segment get segment transfer null transfer remov inbound transfer transfer empti transfer segment remov segment return find protect void task complet final inbound transfer task inbound transfer trace log tracef inbound transfer finish inbound transfer inbound transfer complet success remov transfer inbound transfer notifi end state transfer need public interfac key invalid listen void invalid set integ remov segment set integ stale segment 
packag org statetransf import static org factori know compon name import java util array list import java util collect import java util collect import java util hash map import java util hash set import java util iter import java util list import java util map import java util set import java util concurr complet futur import java util concurr executor servic import java util concurr time unit import java util concurr timeout except import org cach import org command command factori import org command write write command import org configur cach configur import org contain data contain import org contain intern entri factori import org distexec distribut callabl import org distribut ch consist hash import org distribut ch key partition import org factori annot compon name import org factori annot inject import org factori annot start import org factori annot stop import org notif listen import org notif cachelisten cluster cluster cach notifi import org persist manag persist manag import org remot rpc rpc manag import org remot transport address import org topolog cach topolog import org transact impl local transact import org transact impl transact origin checker import org transact impl transact tabl import org transact xa cach transact import org transact xa global transact import org util concurr complet futur import org util log log import org util log log factori link state provid implement author anistor redhat com sinc listen public class state provid impl implement state provid protect static final log log log factori get log state provid impl class protect static final boolean trace log trace enabl protect string cach name privat configur configur protect rpc manag rpc manag protect command factori command factori privat cluster cach notifi cluster cach notifi privat transact tabl transact tabl option protect data contain datum contain protect persist manag persist manag option protect executor servic executor servic protect state transfer lock state transfer lock protect intern entri factori entri factori protect long timeout protect int chunk size protect key partition key partition protect state consum state consum privat transact origin checker transact origin checker map keep track current outbound state transfer destin address could multipl transfer flow destin differ segment valu list privat final map address list outbound transfer task transfer destin new hash map public state provid impl inject public void init cach cach compon name executor servic executor servic use dedic executor servic configur configur rpc manag rpc manag command factori command factori cluster cach notifi cluster cach notifi persist manag persist manag data contain datum contain transact tabl transact tabl state transfer lock state transfer lock state consum state consum intern entri factori entri factori key partition key partition transact origin checker transact origin checker cach name cach get name executor servic executor servic configur configur rpc manag rpc manag command factori command factori cluster cach notifi cluster cach notifi persist manag persist manag datum contain datum contain transact tabl transact tabl state transfer lock state transfer lock state consum state consum entri factori entri factori transact origin checker transact origin checker timeout configur cluster state transfer timeout chunk size configur cluster state transfer chunk size key partition key partition public boolean state transfer progress synchron transfer destin return transfer destin empti public complet futur void topolog updat cach topolog cach topolog boolean rebal cancel outbound state transfer destin long member new topolog rebal cancel stop everi outbound transfer prevent leak transfer one rebal next set address member new hash set cach topolog get write consist hash get member synchron transfer destin iter address transfer destin key set iter next address destin next member contain destin list outbound transfer task transfer transfer destin get destin remov outbound transfer task outbound transfer transfer outbound transfer cancel return complet futur complet null todo anistor must cancel transfer segment long start prioriti overrid public void start stop prioriti overrid public void stop trace log tracef shut state provid cach node cach name rpc manag get address cancel outbound transfer tri synchron transfer destin iter list outbound transfer task transfer destin valu iter next list outbound transfer task transfer next remov outbound transfer task outbound transfer transfer outbound transfer cancel catch throwabl log errorf fail stop state provid cach node cach name rpc manag get address public list transact info get transact segment address destin int request topolog id set integ segment throw interrupt except trace log tracef receiv request transact node cach topolog id segment destin cach name request topolog id segment final cach topolog cach topolog get cach topolog request topolog id destin true final consist hash read ch cach topolog get read consist hash set integ own segment read ch get segment owner rpc manag get address own segment contain segment segment remov own segment throw new illeg argument except segment segment own rpc manag get address list transact info transact new array list migrat lock cach transact distribut configur transact transact mode transact collect transact transfer destin transact transact tabl get remot transact segment cach topolog collect transact transfer destin transact transact tabl get local transact segment cach topolog trace log tracef find transact transfer transact size return transact overrid public collect distribut callabl get cluster listen instal return cluster cach notifi retriev cluster listen callabl instal privat cach topolog get cach topolog int request topolog id address destin boolean req transact throw interrupt except cach topolog cach topolog state consum get cach topolog int current topolog id cach topolog null cach topolog get topolog id request topolog id current topolog id req transact log debugf transact request node topolog old local topolog destin request topolog id current topolog id els log debugf segment request node topolog old local topolog destin request topolog id current topolog id els request topolog id current topolog id trace log tracef request node topolog great local topolog wait topolog instal local req transact transact segment destin request topolog id current topolog id request topolog id tri state transfer lock wait topolog request topolog id timeout time unit catch timeout except e throw log fail wait topolog request topolog id cach topolog state consum get cach topolog return cach topolog privat void collect transact transfer address destin list transact info transact transfer collect extend cach transact transact set integ segment cach topolog cach topolog int topolog id cach topolog get topolog id set address member new hash set cach topolog get member need filter state transfer gener transact transact run request segment cach transact tx transact final global transact gtx tx get global transact skip transact whose origin leav topolog id check need joiner also skip transact origin state transfer start tx get topolog id topolog id transact origin checker origin miss gtx member trace log tracef skip transact start current topolog leaver tx continu transfer lock key belong request segment set object filter lock key new hash set set object lock key tx get lock key synchron lock key object key lock key segment contain key partition get segment key filter lock key add key set object backup lock key tx get backup lock key synchron backup lock key object key backup lock key segment contain key partition get segment key filter lock key add key filter lock key empti trace log tracef skip transact state requestor n key tx destin continu trace log tracef send transact new owner tx destin list write command tx modif tx get modif write command modif null tx modif empti modif tx modif array new write command tx modif size key affect local transact new owner must add new owner transact affect node set receiv commit rollback command see tx instanceof local transact local transact local tx local transact tx local tx lock acquir collect singleton destin trace log tracef add affect node transfer transact key destin gtx filter lock key transact transfer add new transact info gtx tx get topolog id modif filter lock key overrid public void start outbound transfer address destin int request topolog id set integ segment boolean appli state throw interrupt except trace log tracef start outbound transfer node cach topolog id segment destin cach name request topolog id segment destin node must alreadi inbound transfer task wait segment outbound transfer task outbound transfer new outbound transfer task destin segment chunk size request topolog id key partition task complet chunk outbound transfer task default map entri data contain outbound transfer task default map entri store datum contain persist manag rpc manag command factori entri factori timeout cach name appli state fals add transfer outbound transfer outbound transfer execut executor servic protect void add transfer outbound transfer task transfer task trace log tracef add outbound transfer segment transfer task get destin transfer task get segment synchron transfer destin list outbound transfer task transfer transfer destin comput absent transfer task get destin k new array list transfer add transfer task overrid public void cancel outbound transfer address destin int topolog id set integ segment trace log tracef cancel outbound transfer node cach topolog id segment destin cach name topolog id segment get outbound transfer address give segment cancel transfer synchron transfer destin list outbound transfer task transfer task transfer destin get destin transfer task null get array copi collect avoid concurr modif except entir task get cancel remov transfer transfer task call outbound transfer task task list copi transfer task array new outbound transfer task transfer task size outbound transfer task transfer task task list copi transfer task get topolog id topolog id transfer task cancel segment segment potenti result call remov transfer transfer task privat void remov transfer outbound transfer task transfer task synchron transfer destin list outbound transfer task transfer task transfer destin get transfer task get destin transfer task null transfer task remov transfer task transfer task empti transfer destin remov transfer task get destin protect void task complet outbound transfer task transfer task trace log tracef remov outbound transfer segment cach segment transfer task cancel cancel complet transfer task get destin cach name transfer task get segment remov transfer transfer task 
packag org configur cach import java util concurr time unit import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set configur state retriev new cach join cluster use invalid replic cluster mode sinc public class state transfer configur public static final attribut definit boolean attribut definit builder await initi transfer true immut build public static final attribut definit boolean attribut definit builder fetch memori state true xml name enabl immut build public static final attribut definit long attribut definit builder timeout time unit milli immut build public static final attribut definit integ attribut definit builder chunk size immut build static final attribut set attribut definit set return new attribut set store binari configur class privat final attribut boolean await initi transfer privat final attribut boolean fetch memori state privat final attribut long timeout privat final attribut integ chunk size privat final attribut set attribut state transfer configur attribut set attribut attribut attribut check protect await initi transfer attribut attribut fetch memori state attribut attribut timeout attribut attribut chunk size attribut attribut code true cach fetch datum neighbor cach start cach start warm although impact startup time p distribut mode state transfer run cach well ownership key chang e g cach leav cluster disabl set mean key sometim less code num owner owner public boolean fetch memori state return fetch memori state get maximum amount time millisecond wait state neighbor cach throw except abort startup public long timeout return timeout get maximum amount time millisecond wait state neighbor cach throw except abort startup public state transfer configur timeout long l timeout set l return state transfer batch code chunk size cach entri chunk size equal integ state transfer recommend public int chunk size return chunk size get code true caus first call method code cach manag get cach joiner node block wait join complet cach finish receiv state neighbor cach fetch memori state enabl option appli distribut replic cach enabl default pleas note set code fals make cach object avail immedi access key avail local yet transfer actual caus transpar remot access impact logic applic might impact perform public boolean await initi transfer return await initi transfer get want rememb user n configur await initi transfer default cach privat boolean origin await initi transfer return await initi transfer modifi public attribut set attribut return attribut overrid public string string return get class get simpl name attribut overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals state transfer configur state transfer configur obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result 
packag org configur cach import static org configur cach state transfer configur import static org configur cach state transfer configur import static org configur cach state transfer configur import static org configur cach state transfer configur import java util concurr time unit import org common cach configur except import org common configur builder import org common configur attribut attribut import org common configur attribut attribut set import org configur global global configur import org util log log import org util log log factori configur state transfer cach join leaf cluster use distribut replic cluster mode sinc public class state transfer configur builder extend abstract cluster configur child builder implement builder state transfer configur privat static final log log log factori get log state transfer configur builder class privat final attribut set attribut state transfer configur builder cluster configur builder builder super builder attribut state transfer configur attribut definit set code true cach fetch datum neighbor cach start cach start warm although impact startup time p distribut mode state transfer run cach well ownership key chang e g cach leav cluster disabl set mean key sometim less code num owner owner public state transfer configur builder fetch memori state boolean b attribut attribut set b return code true caus first call method code cach manag get cach joiner node block wait join complet cach finish receiv state neighbor cach fetch memori state enabl option appli distribut replic cach enabl default pleas note set code fals make cach object avail immedi access key avail local yet transfer actual caus transpar remot access impact logic applic might impact perform public state transfer configur builder await initi transfer boolean b attribut attribut set b return state transfer batch code chunk size cach entri chunk size equal integ state transfer recommend public state transfer configur builder chunk size int attribut attribut set return maximum amount time millisecond wait state neighbor cach throw except abort startup public state transfer configur builder timeout long l attribut attribut set l return maximum amount time millisecond wait state neighbor cach throw except abort startup public state transfer configur builder timeout long l time unit unit return timeout unit milli l overrid public void valid attribut attribut get throw new cach configur except chunk size cluster cach mode invalid attribut boolean fetch attribut attribut attribut fetch attribut modifi fetch attribut get throw log attribut allow invalid mode name attribut boolean await initi transfer attribut attribut await initi transfer modifi await initi transfer get get cluster builder cach mode need state transfer throw log await initi transfer dist repl overrid public void valid global configur global config overrid public state transfer configur creat return new state transfer configur attribut protect overrid public state transfer configur builder read state transfer configur templat attribut read templat attribut return overrid public string string return state transfer configur builder attribut attribut 
packag org statetransf import java util concurr complet futur import org command topolog affect command import org command visit command import org command control lock control command import org command function read write key command import org command function read write key valu command import org command function read write mani command import org command function read write mani entri command import org command function write key command import org command function write key valu command import org command function write mani command import org command function write mani entri command import org command tx commit command import org command tx prepar command import org command tx rollback command import org command tx transact boundari command import org command write clear command import org command write comput command import org command write comput absent command import org command write evict command import org command write invalid command import org command write invalid command import org command write put key valu command import org command write put map command import org command write remov command import org command write replac command import org command write write command import org context invoc context import org context impl flag bit set import org context impl tx invoc context import org interceptor invoc final function import org interceptor impl base state transfer interceptor import org remot remot except import org remot respons unsur respons import org remot transport address import org remot transport jgroup suspect except import org util log log import org util log log factori interceptor two task ol li command topolog id high current topolog id wait node receiv transact datum new topolog id li li topolog id chang command execut retri command origin replic new owner li ol cach configur asynchron replic owner signal origin see new topolog instead owner forward command owner new topolog author anistor redhat com public class state transfer interceptor extend base state transfer interceptor privat static final log log log factori get log state transfer interceptor class privat static final boolean trace log trace enabl privat final invoc final function handl tx return handl tx return privat final invoc final function handl tx write return handl tx write return privat final invoc final function handl non tx write return handl non tx write return overrid public object visit prepar command tx invoc context ctx prepar command command throw throwabl return handl tx command ctx command overrid public object visit commit command tx invoc context ctx commit command command throw throwabl return handl tx command ctx command overrid public object visit rollback command tx invoc context ctx rollback command command throw throwabl return handl tx command ctx command overrid public object visit lock control command tx invoc context ctx lock control command command throw throwabl trace log tracef handl tx command command origin command get origin ctx updat topolog id command return invok next handl ctx command handl tx return overrid public object visit put key valu command invoc context ctx put key valu command command throw throwabl return handl write command ctx command overrid public object visit put map command invoc context ctx put map command command throw throwabl return handl write command ctx command overrid public object visit remov command invoc context ctx remov command command throw throwabl return handl write command ctx command overrid public object visit replac command invoc context ctx replac command command throw throwabl return handl write command ctx command overrid public object visit comput command invoc context ctx comput command command throw throwabl return handl write command ctx command overrid public object visit comput absent command invoc context ctx comput absent command command throw throwabl return handl write command ctx command overrid public object visit clear command invoc context ctx clear command command throw throwabl return handl write command ctx command overrid public object visit invalid command invoc context ctx invalid command command throw throwabl return handl write command ctx command overrid public object visit invalid command invoc context ctx invalid command command throw throwabl need forward command return invok next ctx command overrid public object visit evict command invoc context ctx evict command command throw throwabl necessari propag evict new owner case state transfer return invok next ctx command overrid public object visit read write key valu command invoc context ctx read write key valu command command throw throwabl return handl write command ctx command overrid public object visit read write key command invoc context ctx read write key command command throw throwabl return handl write command ctx command overrid public object visit write key command invoc context ctx write key command command throw throwabl return handl write command ctx command overrid public object visit write mani entri command invoc context ctx write mani entri command command throw throwabl return handl write command ctx command overrid public object visit write key valu command invoc context ctx write key valu command command throw throwabl return handl write command ctx command overrid public object visit write mani command invoc context ctx write mani command command throw throwabl return handl write command ctx command overrid public object visit read write mani command invoc context ctx read write mani command command throw throwabl return handl write command ctx command overrid public object visit read write mani entri command invoc context ctx read write mani entri command command throw throwabl return handl write command ctx command special process requir transact command privat object handl tx command tx invoc context ctx transact boundari command command trace log tracef handl tx command command origin command get origin ctx updat topolog id command return invok next handl ctx command handl tx return privat address get origin tx invoc context ctx local command may global transact yet return ctx origin local ctx get origin ctx get global transact get address privat object handl tx return invoc context ctx visit command command object rv throwabl throw throwabl transact boundari command tx command transact boundari command command int retri topolog id int current topolog current topolog id instanceof outdat topolog except instanceof owner lose except happen origin retri topolog id math max current topolog tx command get topolog id els null throw ctx origin local origin retri get outdat topolog except could caus either owner leav owner new topolog need retri new topolog origin entri wrap anyway retri topolog id origin retri command tx command set topolog id retri topolog id tx command instanceof prepar command prepar command tx command set retri command true complet futur void transact datum futur state transfer lock transact datum futur retri topolog id return retri do transact datum futur retri topolog id ctx tx command handl tx return els current topolog tx command get topolog id signal origin retri return unsur respons return rv privat object handl write command invoc context ctx write command command ctx tx scope return handl tx write command ctx command els return handl non tx write command ctx command privat object handl tx write command invoc context ctx write command command trace log tracef handl tx write command command origin command ctx get origin updat topolog id command return invok next handl ctx command handl tx write return privat object handl tx write return invoc context be ctx visit command r command object rv throwabl throw throwabl int retri topolog id write command write command write command r command instanceof outdat topolog except instanceof owner lose except happen origin retri topolog id math max current topolog id write command get topolog id els null throw r ctx origin local origin retri get outdat topolog except could caus either owner leav owner new topolog need retri new topolog origin entri wrap anyway retri topolog id origin retri command write command set topolog id retri topolog id complet futur void transact datum futur state transfer lock transact datum futur retri topolog id return retri do transact datum futur retri topolog id be ctx write command handl tx write return els current topolog id write command get topolog id signal origin retri return unsur respons return rv non tx write command retri command local topolog chang retri origin command n code flag privat object handl non tx write command invoc context ctx write command command trace log tracef handl non tx write command command topolog id command command get topolog id updat topolog id command catch outdat topolog except origin ctx origin local return invok next ctx command return invok next handl ctx command handl non tx write return privat object handl non tx write return invoc context be ctx visit command r command object rv throwabl throw throwabl null return rv throwabl ce ce instanceof remot except ce ce get caus ce instanceof outdat topolog except ce instanceof suspect except ce instanceof owner lose except throw increment topolog id updat topolog id wait transact data wait next topolog without could retri command fast could get outdat topolog except int current topolog id current topolog id write command write command write command r command int new topolog id get new topolog id ce current topolog id write command trace log tracef retri command topolog chang current topolog request current topolog id new topolog id write command write command set topolog id new topolog id write command add flag flag bit set non tx context wait transact datum equal wait topolog complet futur void transact datum futur state transfer lock transact data futur new topolog id return retri do transact datum futur new topolog id be ctx write command handl non tx write return overrid public object handl default invoc context ctx visit command command throw throwabl command instanceof topolog affect command return handl topolog affect command ctx command ctx get origin els return invok next ctx command privat object handl topolog affect command invoc context ctx visit command command address origin trace log tracef handl topolog affect command command origin command origin updat topolog id topolog affect command command return invok next ctx command overrid protect log get log return log 
packag org statetransf import java util concurr complet futur import java util concurr lock read write lock import java util concurr lock reentrant read write lock import org factori annot stop import org util concurr complet futur import org util log log import org util log log factori code state transfer lock implement author anistor redhat com author dan berindei sinc public class state transfer lock impl implement state transfer lock privat static final log log log factori get log state transfer lock impl class privat static final boolean trace log trace enabl privat static final int integ privat final read write lock ownership lock new reentrant read write lock privat volatil int topolog id futur topolog equal topolog id privat complet futur void topolog futur new complet futur privat volatil int transact datum topolog id privat complet futur void transact datum futur new complet futur stop public void stop notifi topolog instal notifi transact data receiv suppress warn lock acquir safe releas overrid public void acquir exclus topolog lock ownership lock write lock lock overrid public void releas exclus topolog lock ownership lock write lock unlock suppress warn lock acquir safe releas overrid public void acquir share topolog lock ownership lock read lock lock overrid public void releas share topolog lock ownership lock read lock unlock overrid public void notifi transact data receiv int topolog id topolog id transact datum topolog id log debugf tri set topolog id low current one topolog id topolog id return trace log tracef signal transact datum receiv topolog topolog id transact datum topolog id topolog id complet futur void old futur null tri synchron old futur transact datum futur transact datum futur new complet futur final old futur null old futur complet null overrid public complet futur void transact datum futur int expect topolog id transact datum topolog id expect topolog id return complet futur complet null trace log tracef wait transact datum topolog current topolog expect topolog id transact datum topolog id synchron transact datum topolog id expect topolog id return complet futur complet null els return transact datum futur compos nil transact datum futur expect topolog id overrid public boolean transact datum receiv int expect topolog id trace log tracef check transact datum receiv topolog current topolog expect topolog id transact datum topolog id return transact datum topolog id expect topolog id overrid public void notifi topolog instal int topolog id topolog id topolog id log debugf tri set topolog id low current one topolog id topolog id return trace log tracef signal topolog instal topolog id topolog id topolog id complet futur void old futur null tri synchron old futur topolog futur topolog futur new complet futur final old futur null old futur complet null overrid public complet futur void topolog futur int expect topolog id topolog id expect topolog id return complet futur complet null trace log tracef wait topolog instal current topolog expect topolog id topolog id synchron topolog id expect topolog id return complet futur complet null els return topolog futur compos nil topolog futur expect topolog id overrid public boolean topolog receiv int expect topolog id return topolog id expect topolog id 
packag org statetransf import java util collect import java util collect import java util hash set import java util map import java util option import java util set import java util concurr complet futur import java util concurr count latch import java util concurr time unit import org cach import org command topolog affect command import org common cach except import org configur cach cach mode import org configur cach configur import org configur global global configur import org distribut distribut manag import org distribut local cach topolog import org distribut ch consist hash import org distribut ch consist hash factori import org distribut ch key partition import org distribut ch impl scatter consist hash factori import org distribut ch impl sync consist hash factori import org distribut ch impl sync replic consist hash factori import org distribut ch impl topolog awar sync consist hash factori import org distribut group impl partition consist hash import org factori annot inject import org factori annot start import org factori annot stop import org globalst global state manag import org globalst scop persist state import org notif cachelisten cach notifi import org partitionhandl impl partit handl manag import org remot inboundhandl deliv order import org remot respons respons import org remot rpc rpc manag import org remot rpc rpc option import org remot transport address import org topolog cach join info import org topolog cach topolog import org topolog cach topolog handler import org topolog local topolog manag import org util log log import org util log log factori link state transfer manag implement author anistor redhat com sinc public class state transfer manag impl implement state transfer manag privat static final log log log factori get log state transfer manag impl class privat static final boolean trace log trace enabl privat state consum state consum privat state provid state provid privat partit handl manag partit handl manag privat distribut manag distribut manag privat string cach name privat cach notifi cach notifi privat configur configur privat global configur global configur privat rpc manag rpc manag privat local topolog manag local topolog manag privat option integ persist state checksum privat final count latch initi state transfer complet new count latch first topolog local node member command low topolog id ignor privat volatil int first topolog member integ privat key partition key partition public state transfer manag impl inject public void init state consum state consum state provid state provid cach cach cach notifi cach notifi configur configur global configur global configur rpc manag rpc manag key partition key partition local topolog manag local topolog manag partit handl manag partit handl manag global state manag global state manag distribut manag distribut manag state consum state consum state provid state provid cach name cach get name cach notifi cach notifi configur configur global configur global configur rpc manag rpc manag key partition key partition local topolog manag local topolog manag partit handl manag partit handl manag distribut manag distribut manag global state manag null persist state checksum global state manag read scope state cach name map scop persist state get checksum els persist state checksum option empti need distribut manag cach loader manag init preload start prioriti overrid public void start throw except trace log tracef start state transfer manag cach node cach name rpc manag get address cach join info join info new cach join info pick consist hash factori configur cluster hash hash configur cluster hash num segment configur cluster hash num owner configur cluster state transfer timeout configur transact transact protocol total order configur cluster cach mode configur cluster partit handl enabl configur cluster hash capac factor local topolog manag get persist persist state checksum cach topolog initi topolog local topolog manag join cach name join info new cach topolog handler overrid public void updat consist hash cach topolog cach topolog topolog updat cach topolog fals overrid public void rebal cach topolog cach topolog topolog updat cach topolog true partit handl manag trace log tracef state transfer manag cach node receiv initi topolog cach name rpc manag get address initi topolog consist hash factori explicitli configur choos suitabl one base cach mode privat consist hash factori pick consist hash factori consist hash factori factori configur cluster hash consist hash factori factori null cach mode cach mode configur cluster cach mode cach mode cluster cach mode distribut global configur transport topolog info factori new topolog awar sync consist hash factori els factori new sync consist hash factori els cach mode replic cach mode invalid factori new sync replic consist hash factori els cach mode scatter factori new scatter consist hash factori els throw new cach except unexpect cach mode cach mode return factori decor give cach topolog add key partition key partition may includ support group well privat cach topolog add partition cach topolog cach topolog consist hash current cach topolog get current current new partition consist hash current key partition consist hash pend cach topolog get pend pend null pend new partition consist hash pend key partition consist hash union cach topolog get union union null union new partition consist hash union key partition return new cach topolog cach topolog get topolog id cach topolog get rebal id current pend union cach topolog get phase cach topolog get actual member cach topolog get member persist d privat void topolog updat cach topolog new cach topolog boolean rebal cach topolog old cach topolog state consum get cach topolog int new topolog id new cach topolog get topolog id old cach topolog null old cach topolog get topolog id new topolog id throw new illeg state except old topolog high old old cach topolog new new cach topolog trace log tracef instal new cach topolog cach new cach topolog cach name need extra synchron sinc local topolog manag alreadi serial topolog updat first topolog member integ new cach topolog get member contain rpc manag get address first topolog member new topolog id trace log tracef first topolog local node member first topolog member handl partition new cach topolog add partition new cach topolog int new rebal id new cach topolog get rebal id cach topolog phase phase new cach topolog get phase cach notifi notifi topolog chang old cach topolog new cach topolog new topolog id true complet futur void consum futur state consum topolog updat new cach topolog rebal complet futur void provid futur state provid topolog updat new cach topolog rebal complet futur consum futur provid futur run switch phase case case case case local topolog manag confirm rebal phase cach name new topolog id new rebal id null cach notifi notifi topolog chang old cach topolog new cach topolog new topolog id fals initi state transfer complet get count assert state consum get cach topolog new cach topolog boolean join phase cach topolog phase new cach topolog get read consist hash get member contain rpc manag get address join initi state transfer complet count log tracef initi state transfer complet cach node cach name rpc manag get address partit handl manag topolog updat new cach topolog start prioriti suppress warn unus public void wait initi state transfer complet throw except configur cluster state transfer await initi transfer local topolog manag cach rebalanc enabl cach name initi state transfer complet count trace log tracef wait initi state transfer finish cach cach name rpc manag get address boolean success initi state transfer complet await configur cluster state transfer timeout time unit success throw new cach except string format initi state transfer time cach cach name rpc manag get address stop prioriti overrid public void stop trace log tracef shut state transfer manag cach node cach name rpc manag get address initi state transfer complet count local topolog manag leav cach name overrid public boolean join complet return state consum get cach topolog null anistor mean receiv topolog updat rebal yet overrid public string get rebalanc statu throw except return local topolog manag get rebalanc statu cach name string overrid public boolean state transfer progress return state consum state transfer progress overrid public boolean state transfer progress key object key return state consum state transfer progress key key overrid public cach topolog get cach topolog return state consum get cach topolog overrid public map address respons forward command need topolog affect command command set object affect key address origin local cach topolog cach topolog distribut manag get cach topolog cach topolog null trace log tracef foward command topolog null command return collect empti map int cmd topolog id command get topolog id forward command old topolog id new target need make sure late topolog int local topolog id cach topolog get topolog id tx lock write command forward new owner trace log tracef command topolog id local topolog id cmd topolog id local topolog id cmd topolog id local topolog id collect address new target new hash set cach topolog get write owner affect key new target remov rpc manag get address forward origin would creat cycl may real origin one origin recipi even one node one origin recipi forward command non transact cach real origin keep lock durat mean could get deadlock forward new target remov origin new target empti updat topolog id prevent cycl command set topolog id local topolog id trace log tracef forward command new target command new target final rpc option rpc option rpc manag get default rpc option fals deliv order find way forward command async receiv async tx complet notif command command forward asynchron must return rpc manag invok remot new target command rpc option return collect empti map investig merg own datum get first topolog member serv similar purpos overrid public boolean own data return state consum own data overrid public int get first topolog member return first topolog member overrid public string string return state transfer manag impl cach name rpc manag get address 
packag org configur cach import org configur pars element enumer defin variou storag type datum contain author wburn sinc public enum storag type object store heap object provid serial across node store deseri instanc object equal defin equal method implement class element entri store java heap byte instanc mode equal defin byte creat serial provid object element entri store normal java heap mode equal defin byte creat serial provid object element element element storag type element element element element public element get element return element 
packag org configur cach import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set control whether store memori key valu store refer origin object serial binari format benefit approach often use cluster mode store object binari mean cost serial happen earli amort deseri cost incur lazili improv throughput p possibl control fine grain basi choos store key valu binari p see store binari configur builder deprec use link memori configur instead deprec public class store binari configur public static final attribut definit boolean attribut definit builder enabl fals auto persist fals build public static final attribut definit boolean attribut definit builder key true immut build public static final attribut definit boolean attribut definit builder valu true immut build static attribut set attribut definit set return new attribut set store binari configur class privat final attribut boolean enabl privat final attribut boolean store key binari privat final attribut boolean store valu binari privat final attribut set attribut store binari configur attribut set attribut attribut attribut check protect enabl attribut attribut store key binari attribut attribut store valu binari attribut attribut enabl store key valu binari deprec use link memori configur storag type instead deprec public boolean enabl return enabl get deprec public store binari configur enabl boolean enabl enabl set enabl return enabl store key binari deprec store binari enabl key alway store binari deprec public boolean store key binari return store key binari get enabl store valu binari deprec store binari enabl valu alway store binari deprec public boolean store valu binari return store valu binari get enabl defens copi deprec store binari configur alway defens deprec public boolean defens return true public attribut set attribut return attribut overrid public string string return store binari configur attribut attribut overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals store binari configur store binari configur obj attribut null attribut null return fals els attribut equal attribut return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code return result 
packag org configur cach import static org configur cach store binari configur import org common configur builder import org common configur attribut attribut set import org configur global global configur control whether store memori key valu store refer origin object serial binari format benefit approach often use cluster mode store object binari mean cost serial happen earli amort deseri cost incur lazili improv throughput p possibl control fine grain basi choos store key valu binari p see store binari configur deprec pleas use link memori configur builder storag type storag type method instead deprec public class store binari configur builder extend abstract configur child builder implement builder store binari configur privat final attribut set attribut store binari configur builder configur builder builder super builder attribut store binari configur attribut definit set enabl store key valu binari public store binari configur builder enabl attribut attribut set true get builder memori storag type storag type return disabl store key valu binari public store binari configur builder disabl attribut attribut set fals get builder memori storag type storag type return set whether featur enabl disabl param enabl true featur enabl fals disabl public store binari configur builder enabl boolean enabl attribut attribut set enabl get builder memori storag type enabl storag type storag type return specifi whether key store binari param store key binari true key store binari fals key store object refer deprec longer support key valu enabl store binari deprec public store binari configur builder store key binari boolean store key binari return specifi whether valu store binari param store valu binari true valu store binari fals valu store object refer deprec longer support key valu enabl store binari deprec public store binari configur builder store valu binari boolean store valu binari return defens copi disabl keep object refer around marshal key lazili client modifi entri via origin object refer marshal happen entri replic distribut store cach store sinc client refer valid client make chang entri cach use refer modif local still need call one cach put replac method order chang replic defens copi enabl marshal object moment store henc chang make object refer store cach even local cach param defens boolean indic whether defens copi enabl cach wide return configur builder fluent programmat configur deprec store binari configur alway defens deprec public store binari configur builder defens boolean defens return overrid public void valid noth valid overrid public void valid global configur global config overrid public store binari configur creat return new store binari configur attribut protect overrid public store binari configur builder read store binari configur templat attribut read templat attribut return overrid public string string return store binari configur builder attribut attribut 
packag org factori import org configur cach cach mode import org factori annot default factori import org partitionhandl partit handl import org stream impl cluster stream manag import org stream impl cluster stream manag impl import org stream impl local stream manag import org stream impl local stream manag impl import org stream impl partit awar cluster stream manag factori allow creation link local stream manag link cluster stream manag base provid configur author wburn sinc default factori class local stream manag class cluster stream manag class public class stream manag factori extend abstract name cach compon factori implement auto instanti factori overrid public construct class compon type cach mode cach mode configur cluster cach mode cach mode need state transfer compon type equal local stream manag class return compon type cast new local stream manag impl compon type equal cluster stream manag class configur cluster partit handl split partit handl return compon type cast new partit awar cluster stream manag els return compon type cast new cluster stream manag impl return null 
packag org stream import java io except import java io object input import java io object output import java util hash map import java util map import java util object import java util set import java util function function import java util function predic import org advanc cach import org cach import org common marshal advanc extern import org common util util import org contain entri cach entri import org factori annot inject import org marshal core id static factori class contain method provid marshal instanc common use case everi instanc return variou static method use marshal reduc payload size consider use whenev possibl public class stream marshal privat stream marshal provid predic return true object equal param object instanc test equal return predic public static predic object equal predic object object return new equal predic object predic return true object pass null return predic public static predic object non null predic return non null predic get instanc predic taht alway return true irrespect valu provid return predic public static predic object alway true predic return alway true predic get instanc provid function return key entri invok param key type entri param valu type entri return function appli give entri return key public static function map entri entri key function return entri key function get instanc provid function return valu entri invok param key type entri param valu type entri return function appli give entri return valu public static function map entri entri valu function return entri valu function get instanc provid function give key return link cach entri map key function work use link org cach stream return desir link cach entri read b cach b b cach stream b creat param key type param expect valu type entri return function appli return entri give key public static function cach entri key entri function return new key entri function privat static final class equal predic implement predic object privat final object object privat equal predic object object object non null object object object overrid public boolean test object return object equal privat static final class non null predic implement predic object privat static final non null predic new non null predic public static non null predic get instanc return overrid public boolean test object return null privat static final class alway true predic implement predic object privat static final alway true predic new alway true predic public static alway true predic get instanc return overrid public boolean test object return true privat static final class entri key function implement function map entri privat static final entri key function new entri key function public static entri key function get instanc return entri key function overrid public appli map entri kv entri return kv entri get key privat static final class entri valu function implement function map entri privat static final entri valu function new entri valu function public static entri valu function get instanc return entri valu function overrid public appli map entri kv entri return kv entri get valu privat static final class key entri function implement function cach entri privat advanc cach advanc cach overrid public cach entri appli k return advanc cach get cach entri k inject public void inject cach cach advanc cach cach get advanc cach public static final class stream marshal extern implement advanc extern object enum extern id equal predic class entri key function class entri valu function class non null predic class alway true predic class key entri function class privat final class extend object marshal class extern id class extend object marshal class marshal class marshal class privat final map class extend object extern id object new hash map public stream marshal extern extern id id extern id valu object put id marshal class id overrid public set class get type class return util class extend object set equal predic class entri key function class entri valu function class non null predic class alway true predic class key entri function class overrid public integ get id return id overrid public void write object object output output object object throw except extern id id object get object get class id null throw new illeg argument except unsupport class object get class provid output write byte id ordin switch id case output write object equal predic object object break overrid public object read object object input input throw except class find except int number input read unsign byte extern id id extern id valu number number id length throw new illeg argument except find invalid number number extern id id id number switch id case return new equal predic input read object case return entri key function get instanc case return entri valu function get instanc case return non null predic get instanc case return alway true predic get instanc case return new key entri function default throw new illeg argument except extern id support id 
packag org stream impl import java io except import java io object input import java io object output import java util hash set import java util set import java util concurr complet futur import org command topolog affect command import org command remot base rpc command import org common marshal marshal util import org common util util import org factori annot inject import org remot transport address import org util byte string import org util concurr complet futur stream request command send remot node handl execut remot intermedi termin oper param key type public class stream request command extend base rpc command implement topolog affect command public static final byte privat local stream manag lsm privat object id privat type type privat boolean parallel stream privat set integ segment privat set key privat set exclud key privat boolean includ loader privat object termin oper privat int topolog id overrid public int get topolog id return topolog id overrid public void set topolog id int topolog id topolog id topolog id public object get id return id public enum type privat static final type valu command id uniqu test privat stream request command super null public stream request command byte string cach name super cach name public stream request command byte string cach name address origin object id boolean parallel stream type type set integ segment set key set exclud key boolean includ loader object termin oper super cach name set origin origin id id parallel stream parallel stream type type segment segment key key exclud key exclud key includ loader includ loader termin oper termin oper inject public void inject local stream manag lsm lsm lsm overrid public complet futur object invok async throw throwabl switch type case lsm stream oper id get origin parallel stream segment key exclud key includ loader termin oper termin oper break case lsm stream oper rehash awar id get origin parallel stream segment key exclud key includ loader termin oper termin oper break case lsm stream oper id get origin parallel stream segment key exclud key includ loader key track termin oper termin oper break case lsm stream oper rehash awar id get origin parallel stream segment key exclud key includ loader key track termin oper termin oper break return complet futur complet null overrid public byte get command id return overrid public void write object output output throw except output write object get origin output write object id output write boolean parallel stream marshal util marshal enum type output marshal util marshal collect segment output marshal util marshal collect key output marshal util marshal collect exclud key output output write boolean includ loader output write object termin oper overrid public void read object input input throw except class find except set origin address input read object id input read object parallel stream input read boolean type marshal util unmarshal enum input ordin type ordin segment marshal util unmarshal collect unbound input hash set new key marshal util unmarshal collect unbound input hash set new exclud key marshal util unmarshal collect unbound input hash set new includ loader input read boolean termin oper input read object overrid public boolean return valu expect return fals overrid public boolean block return true overrid public string string final string builder sb new string builder stream request command sb append type append type sb append includ loader append includ loader sb append termin oper append termin oper sb append topolog id append topolog id sb append id append id sb append segment append segment sb append key append util str key sb append exclud key append util str exclud key sb append return sb string 
packag org common util import java io file import java util properti import org common log log import org common log log factori util class replac properti string author href mailto jason planet com jason dillon author href scott stark jboss org scott stark author href claudio vesco previnet claudio vesco author href mailto adrian jboss com adrian brock author href mailto dimitri jboss org dimitri andreadi sinc public class string properti replac privat static final log log log factori get log string properti replac class new line string constant public static final string secur action get properti line separ n file separ valu privat static final string file separ path separ valu privat static final string file path separ file separ alia privat static final string path separ alia privat static final string state use properti pars privat static final int privat static final int privat static final int go input string replac occur p system get properti p valu properti p defin p refer remain unchang p properti refer form p v properti p default valu v return p properti refer form p p p p v primari secondari properti tri turn return either unchang input default valu p properti replac system get properti file separ valu properti replac system get properti path separ param string string possibl refer return input string properti refer replac valid refer input string return public static string replac properti final string string return replac properti string null go input string replac occur p prop get properti p valu properti p defin p refer remain unchang p properti refer form p v properti p default valu v return p properti refer form p p p p v primari secondari properti tri turn return either unchang input default valu p properti replac system get properti file separ valu properti replac system get properti path separ param string string possibl refer param prop sourc x properti ref valu null mean use system get properti return input string properti refer replac valid refer input string return public static string replac properti final string string final properti prop string null return null final char char string char array string builder buffer new string builder boolean properti fals int state int start int char length char c char dollar sign outsid bracket c state state open bracket immediatley dollar els c state buffer append string substr start state start open bracket dollar els state state close bracket open bracket els c state content start buffer append correct els collect system properti string valu string key string substr start check alia equal key valu els equal key valu els check properti prop null valu prop get properti key els valu secur action get properti key valu null check default valu key default int colon key index colon string real key key substr colon prop null valu prop get properti real key els valu secur action get properti real key valu null check composit key key key valu resolv composit key real key prop composit key either use specifi default valu null valu key substr colon els default check composit key key key valu resolv composit key key prop valu null properti true buffer append valu els buffer append buffer append key buffer append log properti could replac key start state properti properti return string collect trail charact start char length buffer append string substr start char length do return buffer string tri resolv key provid properti check actual key key case tri first key key fail return null p also accept key key param key key resolv param prop properti use return resolv key null privat static string resolv composit key string key properti prop string valu null look comma int comma key index comma first part tri resolv comma check first part string key key substr comma prop null valu prop get properti key els valu secur action get properti key check second part one first lookup fail valu null comma key length string key key substr comma prop null valu prop get properti key els valu secur action get properti key return whatev find null return valu 
packag org remot respons import java io except import java io object input import java io object output import java util set import org common marshal abstract extern import org common util util import org marshal core id success respons author manik surtani sinc public class success respons extend valid respons public static final success respons new success respons null privat final object respons valu privat success respons object respons valu respons valu respons valu public static success respons creat object respons valu return respons valu null new success respons respons valu overrid public boolean success return true public object get respons valu return respons valu overrid public boolean equal object return true null get class get class return fals success respons success respons respons valu null respons valu equal respons valu respons valu null return fals return true overrid public int hash code return respons valu null respons valu hash code overrid public string string return success respons util str respons valu public static class extern extend abstract extern success respons overrid public void write object object output output success respons respons throw except output write object respons respons valu overrid public success respons read object object input input throw except class find except return creat input read object overrid public integ get id return id overrid public set class extend success respons get type class return util class extend success respons set success respons class 
packag org configur cach import java util concurr time unit import org common configur builder import org common configur attribut attribut set import org configur global global configur configur commun synchron whenev thread send messag send wire block receiv acknowledg recipi sync config mutual exclus async config deprec sinc code repl timeout attribut code cluster configur builder remot timeout deprec public class sync configur builder extend abstract cluster configur child builder implement builder sync configur privat final attribut set attribut protect sync configur builder cluster configur builder builder super builder attribut sync configur attribut definit set timeout use wait acknowledg make remot call call abort except throw deprec sinc pleas use link cluster configur builder remot timeout long deprec public sync configur builder repl timeout long l attribut attribut cluster configur set l return timeout use wait acknowledg make remot call call abort except throw deprec sinc pleas use link cluster configur builder remot timeout long time unit deprec public sync configur builder repl timeout long l time unit unit return repl timeout unit milli l overrid public void valid overrid public void valid global configur global config overrid public sync configur creat return new sync configur attribut protect overrid public sync configur builder read sync configur templat attribut read templat attribut return overrid public string string return sync configur builder attribut attribut 
packag org distribut ch impl import java io object input import java io object output import java util array list import java util collect import java util compar import java util hash map import java util hash set import java util list import java util map import java util set import org common hash hash import org common marshal abstract extern import org common util util import org distribut ch consist hash factori import org globalst scop persist state import org marshal core id import org remot transport address import org util log log import org util log log factori one assumpt person make consist hash involv think give particular key topolog would produc consist hash valu matter cach store howev exactli case order optimis number segment move join leav use consist hash depend previou consist hash give two cach even contain exactli keyset easi consist hash histori differ e g node join might see two separ topolog chang one cach singl topolog chang reason node send link org topolog cach topolog control command cach want join batch cach topolog chang exampl rebal progress join queue send one go rebal finish link org distribut ch consist hash factori implement avoid issu mention guarante multipl cach member consist hash drawback compar link org distribut ch impl default consist hash factori though potenti move lot segment rebal strictli necessari take advantag optimis mention author dan berindei sinc public class sync consist hash factori implement consist hash factori default consist hash privat static final log log log factori get log sync consist hash factori class public static final float f public static final float f overrid public default consist hash creat hash hash function int num owner int num segment list address member map address float capac factor check capac factor member capac factor builder builder creat builder hash function num owner num segment member capac factor builder popul owner num segment builder copi owner return new default consist hash hash function num owner num segment member capac factor builder segment owner overrid public default consist hash persist state scope persist state state string consist hash class state get properti consist hash default consist hash class get name equal consist hash class throw log persist consist hash mismatch get class get name consist hash class return new default consist hash state protect builder creat builder hash hash function int num owner int num segment list address member map address float capac factor return new builder hash function num owner num segment member capac factor protect void check capac factor list address member map address float capac factor capac factor null float total capac address node member float capac factor capac factor get node capac factor null capac factor throw new illeg argument except invalid capac factor node node total capac capac factor total capac throw new illeg argument except must least one node non zero capac factor overrid public default consist hash updat member default consist hash base list address new member map address float actual capac factor check capac factor new member actual capac factor consist hash factori contract say return instanc make chang boolean capac factor actual capac factor null base get capac factor null actual capac factor equal base get capac factor new member equal base get member capac factor return base int num segment base get num segment int num owner base get num owner assum leaver far few member make sens check leaver hash set address leaver new hash set address base get member leaver remov new member creat new balanc case need alloc new owner segment owner default consist hash rebal null remov leaver list address new segment owner new list num segment int num segment list address owner new array list address base locat owner segment owner remov leaver owner empti new segment owner owner els segment owner fix rebal null rebal creat base get hash function num owner num segment new member actual capac factor new segment owner rebal locat owner segment return new default consist hash base get hash function num owner num segment new member actual capac factor new segment owner overrid public default consist hash rebal default consist hash base default consist hash rebal creat base get hash function base get num owner base get num segment base get member base get capac factor consist hash factori contract say return instanc make chang rebal equal base return base return rebal overrid public default consist hash union default consist hash ch default consist hash ch return ch union ch protect static class builder protect final hash hash function protect final int num owner protect final map address float capac factor protect final int actual num owner protect final int num segment protect final list address sort member protect final int segment size protect final list address segment owner protect final ownership statist stat protect boolean ignor max segment protect builder hash hash function int num owner int num segment list address member map address float capac factor hash function hash function num segment num segment num owner num owner actual num owner math min num owner member size sort member sort member capac factor capac factor popul capac factor capac factor sort member segment size util get segment size num segment segment owner new list num segment int num segment segment owner new array list address actual num owner stat new ownership statist member privat map address float popul capac factor map address float capac factor list address sort member capac factor null return capac factor map address float real capac factor new hash map address member sort member real capac factor put member f return real capac factor protect void add owner check int segment address owner segment owner segment add owner stat inc own owner segment owner segment size stat inc primari own owner protect float comput total capac capac factor null return sort member size float total capac address member sort member float capac factor capac factor get member total capac capac factor return total capac protect list address sort list address member final map address float capac factor array list address result new array list address member collect sort result new compar address overrid public int compar address address sort descend capac factor ascend address int capac comparison capac factor null capac factor get compar capac factor get return capac comparison capac comparison compar return result protect void copi owner ignor max segment fals copi owner ignor max segment true copi owner protect void copi owner primari owner alreadi assign sometim backup owner well segment enough owner add owner previou segment int segment segment num segment segment list address owner segment owner segment int addit owner segment next segment segment add owner owner addit owner segment segment list address addit owner segment owner addit owner segment address addit owner addit owner add backup owner segment addit owner add owner owner break addit owner segment next segment addit owner segment protect boolean add owner list address owner return owner size actual num owner protect int next segment int segment segment num segment return return segment protect void popul owner int num segment int virtual node loop alreadi assign primari owner segment address member sort member int segment comput segment member virtual node add primari owner segment member virtual node stat sum primari own num segment segment member may segment point loop assign least one segment member assign num owner owner segment virtual node boolean member zero segment fals address member sort member stat get own member continu member zero segment true int segment comput segment member virtual node add backup owner segment member virtual node member zero segment stat sum own num segment privat int comput segment address member int virtual node add virtual node count appli murmur hash node hash code make badli spread test address int virtual node hash normal hash hash function member hash code virtual node virtual node hash normal hash hash function virtual node hash virtual node return virtual node hash segment size protect doubl comput expect segment node address node int num copi float node capac factor capac factor get node node capac factor return doubl remain capac comput total capac doubl remain copi num copi num segment address sort member float capac factor capac factor get doubl node segment capac factor remain capac remain copi node segment num segment node segment num segment remain capac capac factor remain copi node segment node equal return node segment els node less num segment segment stop iter node equal node segment node capac factor remain capac remain copi return math max node segment throw new illeg state except node collect includ node protect boolean add primari owner int segment address candid list address owner segment owner segment owner empti doubl expect segment comput expect segment node candid long max segment math round math ceil expect segment stat get primari own candid max segment add owner check segment candid return true return fals protect boolean add backup owner int segment address candid list address owner segment owner segment owner size actual num owner owner contain candid ignor max segment doubl expect segment comput expect segment node candid actual num owner long max segment math round math ceil expect segment stat get own candid max segment add owner check segment candid return true els capac factor get candid equal f add owner check segment candid return true return fals protect int normal hash hash hash function int hashcod return hash function hash hashcod integ overrid public boolean equal object return null get class get class overrid public int hash code return public static class extern extend abstract extern sync consist hash factori overrid public void write object object output output sync consist hash factori chf overrid suppress warn uncheck public sync consist hash factori read object object input unmarshal return new sync consist hash factori overrid public integ get id return id overrid public set class extend sync consist hash factori get type class return collect class extend sync consist hash factori singleton sync consist hash factori class 
packag org distribut ch impl import java io object input import java io object output import java util collect import java util list import java util map import java util set import org common hash hash import org common marshal abstract extern import org distribut ch consist hash factori import org globalst scop persist state import org marshal core id import org remot transport address import org util log log import org util log log factori link sync consist hash factori adapt replic cach primari owner key replic distribut cach author dan berindei sinc public class sync replic consist hash factori implement consist hash factori replic consist hash privat static final log log log factori get log sync replic consist hash factori class public static final float f public static final float f privat static final sync consist hash factori sync new sync consist hash factori overrid public replic consist hash creat hash hash function int num owner int num segment list address member map address float capac factor default consist hash dch sync creat hash function num segment member null return replic default dch overrid public replic consist hash persist state scope persist state state string consist hash class state get properti consist hash replic consist hash class get name equal consist hash class throw log persist consist hash mismatch get class get name consist hash class return new replic consist hash state privat replic consist hash replic default default consist hash dch int num segment dch get num segment list address member dch get member int primari owner new int num segment int segment segment num segment segment primari owner segment member index dch locat primari owner segment segment return new replic consist hash dch get hash function member primari owner overrid public replic consist hash updat member replic consist hash base list address new member map address float actual capac factor default consist hash base default replic base default consist hash dch sync updat member base new member null return replic default dch privat default consist hash default replic replic consist hash base int num segment base get num segment list address base segment owner new list num segment int segment segment num segment segment base segment owner segment collect singleton list base locat primari owner segment segment return new default consist hash base get hash function num segment base get member null base segment owner overrid public replic consist hash rebal replic consist hash base default consist hash base default replic base default consist hash dch sync rebal base return replic default dch overrid public replic consist hash union replic consist hash ch replic consist hash ch return ch union ch public static class extern extend abstract extern sync replic consist hash factori overrid public void write object object output output sync replic consist hash factori chf overrid suppress warn uncheck public sync replic consist hash factori read object object input unmarshal return new sync replic consist hash factori overrid public integ get id return id overrid public set class extend sync replic consist hash factori get type class return collect class extend sync replic consist hash factori singleton sync replic consist hash factori class 
packag org stream impl import java io except import java io object input import java io object output import java util compar import java util doubl summari statist import java util int summari statist import java util long summari statist import java util option doubl import java util option int import java util option long import java util function bi consum import java util function bi function import java util function binari oper import java util function consum import java util function doubl binari oper import java util function doubl consum import java util function doubl predic import java util function function import java util function int binari oper import java util function int consum import java util function int function import java util function int predic import java util function long binari oper import java util function long consum import java util function long predic import java util function obj doubl consum import java util function obj int consum import java util function obj long consum import java util function predic import java util function supplier import java util stream collector import java util stream doubl stream import java util stream int stream import java util stream long stream import java util stream stream import org cach import org cach stream import org doubl cach stream import org int cach stream import org long cach stream import org common marshal extern import org common marshal serial import org util log log import org util log log factori static factori class use provid marshal termin oper final class termin function privat static final log log log factori get log termin function class privat termin function public static function stream boolean match function predic super predic return new match function predic public static function doubl stream boolean match function doubl predic predic return new match doubl function predic public static function int stream boolean match function int predic predic return new match int function predic public static function long stream boolean match function long predic predic return new match long function predic public static function stream boolean match function predic super predic return new match function predic public static function doubl stream boolean match function doubl predic predic return new match doubl function predic public static function int stream boolean match function int predic predic return new match int function predic public static function long stream boolean match function long predic predic return new match long function predic public static function doubl stream doubl averag doubl function return averag doubl function get instanc public static function int stream long averag int function return averag int function get instanc public static function long stream long averag long function return averag long function get instanc public static function stream collect function supplier supplier bi consum super accumul bi consum combin return new collect function supplier accumul combin public static function doubl stream collect function supplier supplier obj doubl consum accumul bi consum combin return new collect doubl function supplier accumul combin public static function int stream collect function supplier supplier obj int consum accumul bi consum combin return new collect int function supplier accumul combin public static function long stream collect function supplier supplier obj long consum accumul bi consum combin return new collect long function supplier accumul combin public static function stream collector function collector super collector return new collector function collector public static function stream long count function return count function get instanc public static function doubl stream long count doubl function return count doubl function get instanc public static function int stream long count int function return count int function get instanc public static function long stream long count long function return count long function get instanc public static function stream find function return find function get instanc public static function doubl stream doubl find doubl function return find doubl function get instanc public static function int stream integ find int function return find int function get instanc public static function long stream long find long function return find long function get instanc public static function stream void function consum super consum return new function consum public static function cach stream void function bi consum cach super consum return new bi consum function consum public static function doubl stream void function doubl consum consum return new doubl function consum public static function doubl cach stream void function obj doubl consum cach consum return new obj doubl function consum public static function int stream void function int consum consum return new int function consum public static function int cach stream void function obj int consum cach consum return new obj int function consum public static function long stream void function long consum consum return new long function consum public static function long cach stream void function obj long consum cach consum return new obj long function consum public static function stream max function compar super compar return new max function compar public static function doubl stream doubl max doubl function return max doubl function get instanc public static function int stream integ max int function return max int function get instanc public static function long stream long max long function return max long function get instanc public static function stream min function compar super compar return new min function compar public static function doubl stream doubl min doubl function return min doubl function get instanc public static function int stream integ min int function return min int function get instanc public static function long stream long min long function return min long function get instanc public static function stream boolean none match function predic super predic return new none match function predic public static function doubl stream boolean none match function doubl predic predic return new none match doubl function predic public static function int stream boolean none match function int predic predic return new none match int function predic public static function long stream boolean none match function long predic predic return new none match long function predic public static function stream reduc function binari oper accumul return new reduc function accumul public static function doubl stream doubl reduc function doubl binari oper accumul return new reduc doubl function accumul public static function int stream integ reduc function int binari oper accumul return new reduc int function accumul public static function long stream long reduc function long binari oper accumul return new reduc long function accumul public static function stream reduc function ident binari oper accumul return new ident reduc function ident accumul public static function doubl stream doubl reduc function doubl ident doubl binari oper accumul return new ident reduc doubl function ident accumul public static function int stream integ reduc function int ident int binari oper accumul return new ident reduc int function ident accumul public static function long stream long reduc function long ident long binari oper accumul return new ident reduc long function ident accumul public static function stream reduc function ident bi function super accumul binari oper combin return new ident reduc combin function ident accumul combin public static function doubl stream doubl sum doubl function return sum doubl function get instanc public static function int stream integ sum int function return sum int function get instanc public static function long stream long sum long function return sum long function get instanc public static function doubl stream doubl summari statist summari statist doubl function return summari statist doubl function get instanc public static function long stream long summari statist summari statist long function return summari statist long function get instanc public static function int stream int summari statist summari statist int function return summari statist int function get instanc public static function stream object array function return array function get instanc public static function doubl stream doubl array doubl function return array doubl function get instanc public static function int stream int array int function return array int function get instanc public static function long stream long array long function return array long function get instanc public static function stream array function int function gener return new array gener function gener serial valu match function match function extern class privat static final class match function implement function stream boolean privat final predic super predic privat match function predic super predic predic predic overrid public boolean appli stream stream return stream match predic public static final class match function extern implement extern match function overrid public void write object object output output match function object throw except output write object object predic overrid public match function read object object input input throw except class find except return new match function predic input read object serial valu match doubl function match doubl function extern class privat static final class match doubl function implement function doubl stream boolean privat final doubl predic predic privat match doubl function doubl predic predic predic predic overrid public boolean appli doubl stream stream return stream match predic public static final class match doubl function extern implement extern match doubl function overrid public void write object object output output match doubl function object throw except output write object object predic overrid public match doubl function read object object input input throw except class find except return new match doubl function doubl predic input read object serial valu match int function match int function extern class privat static final class match int function implement function int stream boolean privat final int predic predic privat match int function int predic predic predic predic overrid public boolean appli int stream stream return stream match predic public static final class match int function extern implement extern match int function overrid public void write object object output output match int function object throw except output write object object predic overrid public match int function read object object input input throw except class find except return new match int function int predic input read object serial valu match long function match long function extern class privat static final class match long function implement function long stream boolean privat final long predic predic privat match long function long predic predic predic predic overrid public boolean appli long stream stream return stream match predic public static final class match long function extern implement extern match long function overrid public void write object object output output match long function object throw except output write object object predic overrid public match long function read object object input input throw except class find except return new match long function long predic input read object serial valu match function match function extern class privat static final class match function implement function stream boolean privat final predic super predic privat match function predic super predic predic predic overrid public boolean appli stream stream return stream match predic public static final class match function extern implement extern match function overrid public void write object object output output match function object throw except output write object object predic overrid public match function read object object input input throw except class find except return new match function predic input read object serial valu match doubl function match doubl function extern class privat static final class match doubl function implement function doubl stream boolean privat final doubl predic predic privat match doubl function doubl predic predic predic predic overrid public boolean appli doubl stream stream return stream match predic public static final class match doubl function extern implement extern match doubl function overrid public void write object object output output match doubl function object throw except output write object object predic overrid public match doubl function read object object input input throw except class find except return new match doubl function doubl predic input read object serial valu match int function match int function extern class privat static final class match int function implement function int stream boolean privat final int predic predic privat match int function int predic predic predic predic overrid public boolean appli int stream stream return stream match predic public static final class match int function extern implement extern match int function overrid public void write object object output output match int function object throw except output write object object predic overrid public match int function read object object input input throw except class find except return new match int function int predic input read object serial valu match long function match long function extern class privat static final class match long function implement function long stream boolean privat final long predic predic privat match long function long predic predic predic predic overrid public boolean appli long stream stream return stream match predic public static final class match long function extern implement extern match long function overrid public void write object object output output match long function object throw except output write object object predic overrid public match long function read object object input input throw except class find except return new match long function long predic input read object serial valu averag doubl function averag doubl function extern class privat static final class averag doubl function implement function doubl stream doubl privat static final averag doubl function new averag doubl function privat averag doubl function public static averag doubl function get instanc return overrid public doubl appli doubl stream stream doubl summari statist stat stream summari statist return new doubl stat get sum stat get count public static final class averag doubl function extern implement extern averag doubl function overrid public void write object object output output averag doubl function object throw except overrid public averag doubl function read object object input input throw except class find except return get instanc serial valu averag int function averag int function extern class privat static final class averag int function implement function int stream long privat static final averag int function new averag int function privat averag int function public static averag int function get instanc return overrid public long appli int stream stream int summari statist stat stream summari statist return new long stat get sum stat get count public static final class averag int function extern implement extern averag int function overrid public void write object object output output averag int function object throw except overrid public averag int function read object object input input throw except class find except return get instanc serial valu averag long function averag long function extern class privat static final class averag long function implement function long stream long privat static final averag long function new averag long function privat averag long function public static averag long function get instanc return overrid public long appli long stream stream long summari statist stat stream summari statist return new long stat get sum stat get count public static final class averag long function extern implement extern averag long function overrid public void write object object output output averag long function object throw except overrid public averag long function read object object input input throw except class find except return get instanc serial valu count function count function extern class privat static final class count function implement function stream long privat static final count function new count function privat count function public static count function get instanc return count function overrid public long appli stream stream long count stream count log tracef count valu count return count public static final class count function extern implement extern count function overrid public void write object object output output count function object throw except overrid public count function read object object input input throw except class find except return get instanc serial valu count doubl function count doubl function extern class privat static final class count doubl function implement function doubl stream long privat static final count doubl function new count doubl function privat count doubl function public static count doubl function get instanc return count doubl function overrid public long appli doubl stream stream return stream count public static final class count doubl function extern implement extern count doubl function overrid public void write object object output output count doubl function object throw except overrid public count doubl function read object object input input throw except class find except return get instanc serial valu count int function count int function extern class privat static final class count int function implement function int stream long privat static final count int function new count int function privat count int function public static count int function get instanc return count int function overrid public long appli int stream stream return stream count public static final class count int function extern implement extern count int function overrid public void write object object output output count int function object throw except overrid public count int function read object object input input throw except class find except return get instanc serial valu count long function count long function extern class privat static final class count long function implement function long stream long privat static final count long function new count long function privat count long function public static count long function get instanc return count long function overrid public long appli long stream stream return stream count public static final class count long function extern implement extern count long function overrid public void write object object output output count long function object throw except overrid public count long function read object object input input throw except class find except return get instanc serial valu find function find function extern class privat static final class find function implement function stream privat static final find function new find function privat find function public static find function get instanc return find function overrid public appli stream stream return stream find els null public static final class find function extern implement extern find function overrid public void write object object output output find function object throw except overrid public find function read object object input input throw except class find except return get instanc serial valu find doubl function find doubl function extern class privat static final class find doubl function implement function doubl stream doubl privat static final find doubl function new find doubl function privat find doubl function public static find doubl function get instanc return find doubl function overrid public doubl appli doubl stream stream option doubl stream find present return get doubl els return null public static final class find doubl function extern implement extern find doubl function overrid public void write object object output output find doubl function object throw except overrid public find doubl function read object object input input throw except class find except return get instanc serial valu find int function find int function extern class privat static final class find int function implement function int stream integ privat static final find int function new find int function privat find int function public static find int function get instanc return find int function overrid public integ appli int stream stream option int stream find present return get int els return null public static final class find int function extern implement extern find int function overrid public void write object object output output find int function object throw except overrid public find int function read object object input input throw except class find except return get instanc serial valu find long function find long function extern class privat static final class find long function implement function long stream long privat static final find long function new find long function privat find long function public static find long function get instanc return find long function overrid public long appli long stream stream option long stream find present return get long els return null public static final class find long function extern implement extern find long function overrid public void write object object output output find long function object throw except overrid public find long function read object object input input throw except class find except return get instanc serial valu none match function none match function extern class privat static final class none match function implement function stream boolean privat final predic super predic privat none match function predic super predic predic predic overrid public boolean appli stream stream return stream none match predic public static final class none match function extern implement extern none match function overrid public void write object object output output none match function object throw except output write object object predic overrid public none match function read object object input input throw except class find except return new none match function predic input read object serial valu none match doubl function none match doubl function extern class privat static final class none match doubl function implement function doubl stream boolean privat final doubl predic predic privat none match doubl function doubl predic predic predic predic overrid public boolean appli doubl stream stream return stream none match predic public static final class none match doubl function extern implement extern none match doubl function overrid public void write object object output output none match doubl function object throw except output write object object predic overrid public none match doubl function read object object input input throw except class find except return new none match doubl function doubl predic input read object serial valu none match int function none match int function extern class privat static final class none match int function implement function int stream boolean privat final int predic predic privat none match int function int predic predic predic predic overrid public boolean appli int stream stream return stream none match predic public static final class none match int function extern implement extern none match int function overrid public void write object object output output none match int function object throw except output write object object predic overrid public none match int function read object object input input throw except class find except return new none match int function int predic input read object serial valu none match long function none match long function extern class privat static final class none match long function implement function long stream boolean privat final long predic predic privat none match long function long predic predic predic predic overrid public boolean appli long stream stream return stream none match predic public static final class none match long function extern implement extern none match long function overrid public void write object object output output none match long function object throw except output write object object predic overrid public none match long function read object object input input throw except class find except return new none match long function long predic input read object serial valu collect function collect function extern class privat static final class collect function implement function stream privat final supplier supplier privat final bi consum super accumul privat final bi consum combin privat collect function supplier supplier bi consum super accumul bi consum combin supplier supplier accumul accumul combin combin overrid public appli stream stream return stream collect supplier accumul combin public static final class collect function extern implement extern collect function overrid public void write object object output output collect function object throw except output write object object supplier output write object object accumul output write object object combin overrid public collect function read object object input input throw except class find except return new collect function supplier input read object bi consum input read object bi consum input read object serial valu collect doubl function collect doubl function extern class privat static final class collect doubl function implement function doubl stream privat final supplier supplier privat final obj doubl consum accumul privat final bi consum combin privat collect doubl function supplier supplier obj doubl consum accumul bi consum combin supplier supplier accumul accumul combin combin overrid public appli doubl stream stream return stream collect supplier accumul combin public static final class collect doubl function extern implement extern collect doubl function overrid public void write object object output output collect doubl function object throw except output write object object supplier output write object object accumul output write object object combin overrid public collect doubl function read object object input input throw except class find except return new collect doubl function supplier input read object obj doubl consum input read object bi consum input read object serial valu collect int function collect int function extern class privat static final class collect int function implement function int stream privat final supplier supplier privat final obj int consum accumul privat final bi consum combin privat collect int function supplier supplier obj int consum accumul bi consum combin supplier supplier accumul accumul combin combin overrid public appli int stream stream return stream collect supplier accumul combin public static final class collect int function extern implement extern collect int function overrid public void write object object output output collect int function object throw except output write object object supplier output write object object accumul output write object object combin overrid public collect int function read object object input input throw except class find except return new collect int function supplier input read object obj int consum input read object bi consum input read object serial valu collect long function collect long function extern class privat static final class collect long function implement function long stream privat final supplier supplier privat final obj long consum accumul privat final bi consum combin privat collect long function supplier supplier obj long consum accumul bi consum combin supplier supplier accumul accumul combin combin overrid public appli long stream stream return stream collect supplier accumul combin public static final class collect long function extern implement extern collect long function overrid public void write object object output output collect long function object throw except output write object object supplier output write object object accumul output write object object combin overrid public collect long function read object object input input throw except class find except return new collect long function supplier input read object obj long consum input read object bi consum input read object serial valu collector function collector function extern class privat static final class collector function implement function stream privat final collector super collector privat collector function collector super collector collector collector overrid public appli stream stream return stream collect collector public static final class collector function extern implement extern collector function overrid public void write object object output output collector function object throw except output write object object collector overrid public collector function read object object input input throw except class find except return new collector function collector input read object serial valu function function extern class privat static final class function implement function stream void privat final consum super consum privat function consum super consum consum consum overrid public void appli stream stream stream consum return null public static final class function extern implement extern function overrid public void write object object output output function object throw except output write object object consum overrid public function read object object input input throw except class find except return new function consum input read object serial valu bi consum function bi consum function extern class privat static final class bi consum function implement function cach stream void privat final bi consum cach super consum privat bi consum function bi consum cach super consum consum consum overrid public void appli cach stream stream stream consum return null public static final class bi consum function extern implement extern bi consum function overrid public void write object object output output bi consum function object throw except output write object object consum overrid public bi consum function read object object input input throw except class find except return new bi consum function bi consum input read object serial valu doubl function doubl function extern class privat static final class doubl function implement function doubl stream void privat final doubl consum consum privat doubl function doubl consum consum consum consum overrid public void appli doubl stream stream stream consum return null public static final class doubl function extern implement extern doubl function overrid public void write object object output output doubl function object throw except output write object object consum overrid public doubl function read object object input input throw except class find except return new doubl function doubl consum input read object serial valu obj doubl function obj doubl function extern class privat static final class obj doubl function implement function doubl cach stream void privat final obj doubl consum cach consum privat obj doubl function obj doubl consum cach consum consum consum overrid public void appli doubl cach stream stream stream consum return null public static final class obj doubl function extern implement extern obj doubl function overrid public void write object object output output obj doubl function object throw except output write object object consum overrid public obj doubl function read object object input input throw except class find except return new obj doubl function obj doubl consum input read object serial valu int function int function extern class privat static final class int function implement function int stream void privat final int consum consum privat int function int consum consum consum consum overrid public void appli int stream stream stream consum return null public static final class int function extern implement extern int function overrid public void write object object output output int function object throw except output write object object consum overrid public int function read object object input input throw except class find except return new int function int consum input read object serial valu obj int function obj int function extern class privat static final class obj int function implement function int cach stream void privat final obj int consum cach consum privat obj int function obj int consum cach consum consum consum overrid public void appli int cach stream stream stream consum return null public static final class obj int function extern implement extern obj int function overrid public void write object object output output obj int function object throw except output write object object consum overrid public obj int function read object object input input throw except class find except return new obj int function obj int consum input read object serial valu long function long function extern class privat static final class long function implement function long stream void privat final long consum consum privat long function long consum consum consum consum overrid public void appli long stream stream stream consum return null public static final class long function extern implement extern long function overrid public void write object object output output long function object throw except output write object object consum overrid public long function read object object input input throw except class find except return new long function long consum input read object serial valu obj long function obj long function extern class privat static final class obj long function implement function long cach stream void privat final obj long consum cach consum privat obj long function obj long consum cach consum consum consum overrid public void appli long cach stream stream stream consum return null public static final class obj long function extern implement extern obj long function overrid public void write object object output output obj long function object throw except output write object object consum overrid public obj long function read object object input input throw except class find except return new obj long function obj long consum input read object serial valu max function max function extern class privat static final class max function implement function stream privat final compar super compar privat max function compar super compar compar compar overrid public appli stream stream return stream max compar els null public static final class max function extern implement extern max function overrid public void write object object output output max function object throw except output write object object compar overrid public max function read object object input input throw except class find except return new max function compar input read object serial valu max doubl function max doubl function extern class privat static final class max doubl function implement function doubl stream doubl privat static final max doubl function new max doubl function privat max doubl function public static max doubl function get instanc return overrid public doubl appli doubl stream stream option doubl op stream max op present return op get doubl els return null public static final class max doubl function extern implement extern max doubl function overrid public void write object object output output max doubl function object throw except overrid public max doubl function read object object input input throw except class find except return max doubl function get instanc serial valu max int function max int function extern class privat static final class max int function implement function int stream integ privat static final max int function new max int function privat max int function public static max int function get instanc return overrid public integ appli int stream stream option int op stream max op present return op get int els return null public static final class max int function extern implement extern max int function overrid public void write object object output output max int function object throw except overrid public max int function read object object input input throw except class find except return max int function get instanc serial valu max long function max long function extern class privat static final class max long function implement function long stream long privat static final max long function new max long function privat max long function public static max long function get instanc return overrid public long appli long stream stream option long op stream max op present return op get long els return null public static final class max long function extern implement extern max long function overrid public void write object object output output max long function object throw except overrid public max long function read object object input input throw except class find except return max long function get instanc serial valu min function min function extern class privat static final class min function implement function stream privat final compar super compar privat min function compar super compar compar compar overrid public appli stream stream return stream min compar els null public static final class min function extern implement extern min function overrid public void write object object output output min function object throw except output write object object compar overrid public min function read object object input input throw except class find except return new min function compar input read object serial valu min doubl function min doubl function extern class privat static final class min doubl function implement function doubl stream doubl privat static final min doubl function new min doubl function privat min doubl function public static min doubl function get instanc return overrid public doubl appli doubl stream stream option doubl op stream min op present return op get doubl els return null public static final class min doubl function extern implement extern min doubl function overrid public void write object object output output min doubl function object throw except overrid public min doubl function read object object input input throw except class find except return min doubl function get instanc serial valu min int function min int function extern class privat static final class min int function implement function int stream integ privat static final min int function new min int function privat min int function public static min int function get instanc return overrid public integ appli int stream stream option int op stream min op present return op get int els return null public static final class min int function extern implement extern min int function overrid public void write object object output output min int function object throw except overrid public min int function read object object input input throw except class find except return min int function get instanc serial valu min long function min long function extern class privat static final class min long function implement function long stream long privat static final min long function new min long function privat min long function public static min long function get instanc return overrid public long appli long stream stream option long op stream min op present return op get long els return null public static final class min long function extern implement extern min long function overrid public void write object object output output min long function object throw except overrid public min long function read object object input input throw except class find except return min long function get instanc serial valu reduc function reduc function extern class privat static final class reduc function implement function stream privat final binari oper accumul privat reduc function binari oper accumul accumul accumul overrid public appli stream stream return stream reduc accumul els null public static final class reduc function extern implement extern reduc function overrid public void write object object output output reduc function object throw except output write object object accumul overrid public reduc function read object object input input throw except class find except return new reduc function binari oper input read object serial valu reduc doubl function reduc doubl function extern class privat static final class reduc doubl function implement function doubl stream doubl privat final doubl binari oper accumul privat reduc doubl function doubl binari oper accumul accumul accumul overrid public doubl appli doubl stream stream option doubl option int stream reduc accumul option int present return option int get doubl els return null public static final class reduc doubl function extern implement extern reduc doubl function overrid public void write object object output output reduc doubl function object throw except output write object object accumul overrid public reduc doubl function read object object input input throw except class find except return new reduc doubl function doubl binari oper input read object serial valu reduc int function reduc int function extern class privat static final class reduc int function implement function int stream integ privat final int binari oper accumul privat reduc int function int binari oper accumul accumul accumul overrid public integ appli int stream stream option int option int stream reduc accumul option int present return option int get int els return null public static final class reduc int function extern implement extern reduc int function overrid public void write object object output output reduc int function object throw except output write object object accumul overrid public reduc int function read object object input input throw except class find except return new reduc int function int binari oper input read object serial valu reduc long function reduc long function extern class privat static final class reduc long function implement function long stream long privat final long binari oper accumul privat reduc long function long binari oper accumul accumul accumul overrid public long appli long stream stream option long option int stream reduc accumul option int present return option int get long els return null public static final class reduc long function extern implement extern reduc long function overrid public void write object object output output reduc long function object throw except output write object object accumul overrid public reduc long function read object object input input throw except class find except return new reduc long function long binari oper input read object serial valu ident reduc function ident reduct function extern class privat static final class ident reduc function implement function stream privat final ident privat final binari oper accumul privat ident reduc function ident binari oper accumul ident ident accumul accumul overrid public appli stream stream return stream reduc ident accumul public static final class ident reduct function extern implement extern ident reduc function overrid public void write object object output output ident reduc function object throw except output write object object ident output write object object accumul overrid public ident reduc function read object object input input throw except class find except return new ident reduc function input read object binari oper input read object serial valu ident reduc doubl function ident reduct function extern class privat static final class ident reduc doubl function implement function doubl stream doubl privat final doubl ident privat final doubl binari oper accumul privat ident reduc doubl function doubl ident doubl binari oper accumul ident ident accumul accumul overrid public doubl appli doubl stream stream return stream reduc ident accumul public static final class ident reduct function extern implement extern ident reduc doubl function overrid public void write object object output output ident reduc doubl function object throw except output write doubl object ident output write object object accumul overrid public ident reduc doubl function read object object input input throw except class find except return new ident reduc doubl function input read doubl doubl binari oper input read object serial valu ident reduc int function ident reduct function extern class privat static final class ident reduc int function implement function int stream integ privat final int ident privat final int binari oper accumul privat ident reduc int function int ident int binari oper accumul ident ident accumul accumul overrid public integ appli int stream stream return stream reduc ident accumul public static final class ident reduct function extern implement extern ident reduc int function overrid public void write object object output output ident reduc int function object throw except output write int object ident output write object object accumul overrid public ident reduc int function read object object input input throw except class find except return new ident reduc int function input read i not int binari oper input read object serial valu ident reduc long function ident reduct function extern class privat static final class ident reduc long function implement function long stream long privat final long ident privat final long binari oper accumul privat ident reduc long function long ident long binari oper accumul ident ident accumul accumul overrid public long appli long stream stream return stream reduc ident accumul public static final class ident reduct function extern implement extern ident reduc long function overrid public void write object object output output ident reduc long function object throw except output write long object ident output write object object accumul overrid public ident reduc long function read object object input input throw except class find except return new ident reduc long function input read long long binari oper input read object serial valu ident reduc combin function ident reduct function extern class privat static final class ident reduc combin function implement function stream privat final ident privat final bi function super accumul privat final binari oper combin privat ident reduc combin function ident bi function super accumul binari oper combin ident ident accumul accumul combin combin overrid public appli stream stream return stream reduc ident accumul combin public static final class ident reduct function extern implement extern ident reduc combin function overrid public void write object object output output ident reduc combin function object throw except output write object object ident output write object object accumul output write object object combin overrid public ident reduc combin function read object object input input throw except class find except return new ident reduc combin function input read object bi function input read object binari oper input read object serial valu sum doubl function sum doubl function extern class privat static final class sum doubl function implement function doubl stream doubl privat static final sum doubl function new sum doubl function privat sum doubl function public static sum doubl function get instanc return overrid public doubl appli doubl stream stream return stream sum public static final class sum doubl function extern implement extern sum doubl function overrid public void write object object output output sum doubl function object throw except overrid public sum doubl function read object object input input throw except class find except return sum doubl function get instanc serial valu sum int function sum int function extern class privat static final class sum int function implement function int stream integ privat static final sum int function new sum int function privat sum int function public static sum int function get instanc return overrid public integ appli int stream stream return stream sum public static final class sum int function extern implement extern sum int function overrid public void write object object output output sum int function object throw except overrid public sum int function read object object input input throw except class find except return sum int function get instanc serial valu sum long function sum long function extern class privat static final class sum long function implement function long stream long privat static final sum long function new sum long function privat sum long function public static sum long function get instanc return overrid public long appli long stream stream return stream sum public static final class sum long function extern implement extern sum long function overrid public void write object object output output sum long function object throw except overrid public sum long function read object object input input throw except class find except return sum long function get instanc serial valu summari statist doubl function summari statist doubl function extern class privat static final class summari statist doubl function implement function doubl stream doubl summari statist privat static final summari statist doubl function new summari statist doubl function privat summari statist doubl function public static summari statist doubl function get instanc return overrid public doubl summari statist appli doubl stream stream return stream summari statist public static final class summari statist doubl function extern implement extern summari statist doubl function overrid public void write object object output output summari statist doubl function object throw except overrid public summari statist doubl function read object object input input throw except class find except return summari statist doubl function get instanc serial valu summari statist int function summari statist int function extern class privat static final class summari statist int function implement function int stream int summari statist privat static final summari statist int function new summari statist int function privat summari statist int function public static summari statist int function get instanc return overrid public int summari statist appli int stream stream return stream summari statist public static final class summari statist int function extern implement extern summari statist int function overrid public void write object object output output summari statist int function object throw except overrid public summari statist int function read object object input input throw except class find except return summari statist int function get instanc serial valu summari statist long function summari statist long function extern class privat static final class summari statist long function implement function long stream long summari statist privat static final summari statist long function new summari statist long function privat summari statist long function public static summari statist long function get instanc return overrid public long summari statist appli long stream stream return stream summari statist public static final class summari statist long function extern implement extern summari statist long function overrid public void write object object output output summari statist long function object throw except overrid public summari statist long function read object object input input throw except class find except return summari statist long function get instanc serial valu array function array function extern class privat static final class array function implement function stream object privat static final array function new array function privat array function public static array function get instanc return overrid public object appli stream stream return stream array public static final class array function extern implement extern array function overrid public void write object object output output array function object throw except overrid public array function read object object input input throw except class find except return array function get instanc serial valu array doubl function array doubl function extern class privat static final class array doubl function implement function doubl stream doubl privat static final array doubl function new array doubl function privat array doubl function public static array doubl function get instanc return overrid public doubl appli doubl stream stream return stream array public static final class array doubl function extern implement extern array doubl function overrid public void write object object output output array doubl function object throw except overrid public array doubl function read object object input input throw except class find except return array doubl function get instanc serial valu array int function array int function extern class privat static final class array int function implement function int stream int privat static final array int function new array int function privat array int function public static array int function get instanc return overrid public int appli int stream stream return stream array public static final class array int function extern implement extern array int function overrid public void write object object output output array int function object throw except overrid public array int function read object object input input throw except class find except return array int function get instanc serial valu array long function array long function extern class privat static final class array long function implement function long stream long privat static final array long function new array long function privat array long function public static array long function get instanc return overrid public long appli long stream stream return stream array public static final class array long function extern implement extern array long function overrid public void write object object output output array long function object throw except overrid public array long function read object object input input throw except class find except return array long function get instanc serial valu array gener function array gener function extern class privat static final class array gener function implement function stream privat final int function gener privat array gener function int function gener gener gener overrid public appli stream stream return stream array gener public static final class array gener function extern implement extern array gener function overrid public void write object object output output array gener function object throw except output write object object gener overrid public array gener function read object object input input throw except class find except return new array gener function int function input read object 
packag org stream impl termop import java io except import java io object input import java io object output import java util set import java util function bi consum import java util function consum import java util function doubl consum import java util function function import java util function int consum import java util function long consum import java util function obj doubl consum import java util function obj int consum import java util function obj long consum import org common io unsign numer import org common marshal advanc extern import org common util util import org marshal core id import org stream impl intop intermedi oper import org stream impl termop object flat map iter oper import org stream impl termop object bi oper import org stream impl termop object oper import org stream impl termop object map iter oper import org stream impl termop object map iter oper import org stream impl termop primit doubl oper import org stream impl termop primit flat map doubl oper import org stream impl termop primit flat map int oper import org stream impl termop primit flat map long oper import org stream impl termop primit flat map obj doubl oper import org stream impl termop primit flat map obj int oper import org stream impl termop primit flat map obj long oper import org stream impl termop primit int oper import org stream impl termop primit long oper import org stream impl termop primit obj doubl oper import org stream impl termop primit obj int oper import org stream impl termop primit obj long oper import org jboss marshal util ident int map link advanc extern provid function requir marshal variou termin oper use variou distribut stream includ primit form public class termin oper extern implement advanc extern base termin oper privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat final ident int map class extend base termin oper oper new ident int map public termin oper extern oper put singl run oper class oper put segment retri oper class oper put flat map iter oper class oper put map iter oper class oper put map iter oper class oper put oper class oper put flat map doubl oper class oper put flat map int oper class oper put flat map long oper class oper put doubl oper class oper put int oper class oper put long oper class oper put bi oper class oper put obj doubl oper class oper put obj int oper class oper put obj long oper class oper put flat map obj doubl oper class oper put flat map obj int oper class oper put flat map obj long oper class overrid public set class extend base termin oper get type class return util class extend base termin oper set singl run oper class segment retri oper class flat map iter oper class map iter oper class map iter oper class oper class flat map doubl oper class flat map int oper class flat map long oper class doubl oper class int oper class long oper class bi oper class obj doubl oper class obj int oper class obj long oper class flat map obj doubl oper class flat map obj int oper class flat map obj long oper class overrid public integ get id return id overrid public void write object object output output base termin oper object throw except int number oper get object get class output write byte number output write object object get intermedi oper switch number case output write object singl run oper object get function break case output write object segment retri oper object get function break case unsign numer write unsign int output flat map iter oper object get batch size break case unsign numer write unsign int output map iter oper object get batch size break case unsign numer write unsign int output map iter oper object get batch size break case unsign numer write unsign int output oper object get batch size output write object oper object get consum break case unsign numer write unsign int output flat map doubl oper object get batch size output write object flat map doubl oper object get consum break case unsign numer write unsign int output flat map int oper object get batch size output write object flat map int oper object get consum break case unsign numer write unsign int output flat map long oper object get batch size output write object flat map long oper object get consum break case unsign numer write unsign int output doubl oper object get batch size output write object doubl oper object get consum break case unsign numer write unsign int output int oper object get batch size output write object int oper object get consum break case unsign numer write unsign int output long oper object get batch size output write object long oper object get consum break case unsign numer write unsign int output bi oper object get batch size output write object bi oper object get consum break case unsign numer write unsign int output obj doubl oper object get batch size output write object obj doubl oper object get consum break case unsign numer write unsign int output obj int oper object get batch size output write object obj int oper object object get consum break case unsign numer write unsign int output obj long oper object get batch size output write object obj long oper object get consum break case unsign numer write unsign int output flat map obj doubl oper object get batch size output write object flat map obj doubl oper object get consum break case unsign numer write unsign int output flat map obj int oper object get batch size output write object flat map obj int oper object get consum break case unsign numer write unsign int output flat map obj long oper object get batch size output write object flat map obj long oper object get consum break default throw new illeg argument except overrid public base termin oper read object object input input throw except class find except int number input read unsign byte switch number case return new singl run oper iter intermedi oper input read object null function input read object case return new segment retri oper iter intermedi oper input read object null function input read object case return new flat map iter oper iter intermedi oper input read object null unsign numer read unsign int input case return new map iter oper iter intermedi oper input read object null unsign numer read unsign int input case return new map iter oper iter intermedi oper input read object null unsign numer read unsign int input case return new oper iter intermedi oper input read object null unsign numer read unsign int input consum input read object case return new flat map doubl oper iter intermedi oper input read object null unsign numer read unsign int input doubl consum input read object case return new flat map int oper iter intermedi oper input read object null unsign numer read unsign int input int consum input read object case return new flat map long oper iter intermedi oper input read object null unsign numer read unsign int input long consum input read object case return new doubl oper iter intermedi oper input read object null unsign numer read unsign int input doubl consum input read object case return new int oper iter intermedi oper input read object null unsign numer read unsign int input int consum input read object case return new long oper iter intermedi oper input read object null unsign numer read unsign int input long consum input read object case return new bi oper iter intermedi oper input read object null unsign numer read unsign int input bi consum input read object case return new obj doubl oper iter intermedi oper input read object null unsign numer read unsign int input obj doubl consum input read object case return new obj int oper iter intermedi oper input read object null unsign numer read unsign int input obj int consum input read object case return new obj long oper iter intermedi oper input read object null unsign numer read unsign int input obj long consum input read object case return new flat map obj doubl oper iter intermedi oper input read object null unsign numer read unsign int input obj doubl consum input read object case return new flat map obj int oper iter intermedi oper input read object null unsign numer read unsign int input obj int consum input read object case return new flat map obj long oper iter intermedi oper input read object null unsign numer read unsign int input obj long consum input read object default throw new illeg argument except find invalid number number 
packag org factori thread import java util regex matcher import java util regex pattern author galder zamarr public class thread name info privat final long global thread sequenc num privat final long per factori thread sequenc num privat final long factori sequenc num privat final string node privat final string compon thread name info long global thread sequenc num long per factori thread sequenc num long factori sequenc num string node string compon global thread sequenc num global thread sequenc num per factori thread sequenc num per factori thread sequenc num factori sequenc num factori sequenc num node node compon compon privat static final pattern search pattern pattern compil format thread name string ul li code emit percent sign li li code emit per factori thread sequenc number li li code g emit global thread sequenc number li li code f emit factori sequenc number li li code p emit code separ thread group path li li code emit thread li li code emit thread group name li li code n emit node name li li code c emit compon name li ul param thread thread param format string format string return thread name string public string format thread thread string format string final string builder builder new string builder format string length final thread group group thread get thread group final matcher matcher search pattern matcher format string matcher find matcher group null builder append matcher group els switch matcher group char case builder append break case builder append per factori thread sequenc num break case g builder append global thread sequenc num break case f builder append factori sequenc num break case p group null append group path group builder break case builder append thread get id break case group null builder append group get name break case n node null builder append node break case c compon null builder append compon break return builder string privat static void append group path thread group group string builder builder final thread group parent group get parent parent null append group path parent builder builder append builder append group get name 
packag org configur global import java util concurr thread factori import org common executor thread pool executor factori author galder zamarr public class thread pool configur privat final thread factori thread factori privat final thread pool executor factori thread pool factori protect thread pool configur thread factori thread factori thread pool executor factori thread pool factori thread factori thread factori thread pool factori thread pool factori public extend thread pool executor factori thread pool factori return thread pool factori public extend thread factori thread factori return thread factori overrid public string string return thread pool configur thread factori thread factori thread pool factori thread pool factori 
packag org configur global import java util concurr thread factori import org common configur builder import org common executor thread pool executor factori author galder zamarr public class thread pool configur builder extend abstract global configur builder implement builder thread pool configur thread factori thread factori thread pool executor factori thread pool factori public thread pool configur builder global configur builder global config super global config overrid public void valid thread pool factori null thread pool factori valid public thread pool configur builder thread factori thread factori thread factori thread factori thread factori return public thread pool configur builder thread pool factori thread pool executor factori thread pool factori thread pool factori thread pool factori return overrid public thread pool configur creat return new thread pool configur thread factori thread pool factori overrid public thread pool configur builder read thread pool configur templat thread factori templat thread factori thread pool factori templat thread pool factori return overrid public boolean equal object return true null get class get class return fals thread pool configur builder thread pool configur builder thread pool factori null thread pool factori equal thread pool factori thread pool factori null return fals thread factori null thread factori equal thread factori thread factori null return fals return true overrid public int hash code int result thread factori null thread factori hash code result result thread pool factori null thread pool factori hash code return result 
packag org remot transport jgroup import java util hash map import java util map import java util concurr executor servic import java util concurr thread pool executor import java util concurr time unit import org executor lazi initi block task awar executor servic import org util concurr block task awar executor servic impl import org jgroup stack diagnost handler probe handler link org jgroup test probe protocol group p contain singl key return inform remot thread pool executor servic author pedro ruivo sinc class thread pool probe handler implement diagnost handler probe handler privat static final string ispn remot privat volatil executor servic executor overrid public map string string handl probe string key key null key length return null thread pool executor exec extract executor exec null return null map string string map new hash map string key key switch key case map put activ thread string valu exec get activ count map put min thread string valu exec get core pool size map put max thread string valu exec get maximum pool size map put current pool size string valu exec get pool size map put larg pool size string valu exec get largest pool size map put keep aliv string valu exec get keep aliv time time unit map put queue size string valu exec get queue size break return map empti null map overrid public string support key return new string void updat thread pool executor servic executor servic executor servic null executor executor servic privat static thread pool executor extract executor servic servic servic instanceof thread pool executor return thread pool executor servic els servic instanceof block task awar executor servic impl return extract block task awar executor servic impl servic get executor servic els servic instanceof lazi initi block task awar executor servic return extract lazi initi block task awar executor servic servic get executor servic return null n know handl remain case 
packag org distribut ch impl import java io object input import java io object output import java util collect import java util hash set import java util list import java util set import org common marshal abstract extern import org distribut topologyawar topolog info import org distribut topologyawar topolog level import org marshal core id import org remot transport address import org remot transport topolog awar address default topolog awar consist hash factori implement author dan berindei sinc public class topolog awar consist hash factori extend default consist hash factori overrid protect void add backup owner builder builder topolog info topolog info new topolog info builder get member builder get capac factor remov extra owner could leftov add primari owner n worri locat inform yet remov extra backup owner builder owner segment num owner add new owner unlik parent class allow mani segment one node order get mani differ site rack machin owner list add backup owner level builder topolog info topolog level add backup owner level builder topolog info topolog level add backup owner level builder topolog info topolog level add backup owner level builder topolog info topolog level owner segment num owner everi segment step replac backup owner level builder topolog info topolog level replac backup owner level builder topolog info topolog level replac backup owner level builder topolog info topolog level replac owner mani segment owner replac backup owner level builder topolog info privat void add backup owner level builder builder topolog info topolog info topolog level level first phase new owner must min segment segment may possibl fill segment num owner owner way repeat loop iter high limit own segment int extra segment add backup owner level builder topolog info level extra segment extra segment privat boolean add backup owner level builder builder topolog info topolog info topolog level level int extra segment boolean suffici owner true int segment segment builder get num segment segment list address owner builder get owner segment owner size builder get actual num owner continu int max distinct locat topolog info get distinct locat count level builder get actual num owner topolog info owner info new topolog info owner builder get capac factor int distinct locat owner info get distinct locat count level builder get actual num owner distinct locat max distinct locat continu float total capac topolog info comput total capac builder get member builder get capac factor address candid builder get member int node extra segment int extra segment builder get capac factor candid total capac int max segment topolog info comput expect segment builder get num segment builder get actual num owner candid node extra segment builder get own candid max segment owner contain candid locat duplic owner candid level builder add owner segment candid distinct locat owner list live need queri owner size builder get actual num owner break distinct locat max distinct locat owner size builder get actual num owner suffici owner fals return suffici owner privat void replac backup owner level builder builder topolog info topolog info topolog level level int extra segment replac backup owner level builder topolog info level extra segment extra segment privat boolean replac backup owner level builder builder topolog info topolog info topolog level level int extra segment boolean suffici locat true point segment alreadi actual num owner owner int segment segment builder get num segment segment list address owner builder get owner segment int max distinct locat topolog info get distinct locat count level builder get actual num owner topolog info owner info new topolog info owner builder get capac factor int distinct locat owner info get distinct locat count level builder get actual num owner distinct locat max distinct locat continu float total capac topolog info comput total capac builder get member builder get capac factor int owner size address owner owner get locat duplic owner owner level get duplic site rack machin might altern address candid builder get member int expect segment topolog info comput expect segment builder get num segment builder get actual num owner candid int node extra segment int extra segment builder get capac factor candid total capac builder get own candid expect segment node extra segment owner contain candid locat duplic owner candid level builder add owner segment candid builder remov owner segment owner distinct locat owner list live need queri break distinct locat max distinct locat suffici locat fals return suffici locat privat void replac backup owner level builder builder topolog info topolog info owner own owner max segment find anoth node own node max segment replac owner replac backup owner level builder topolog info step also replac owner max segment segment separ iter minim number move node own node max segment num owner num segment n divid evenli num node replac backup owner level builder topolog info step allow replac node alreadi own node max segment necessari num owner num segment n divid evenli num node node could max segment segment yet one node could max segment num owner num segment num node segment replac backup owner level builder topolog info privat void replac backup owner level builder builder topolog info topolog info int min segment diff int max segment diff iter owner outer loop minim number owner chang segment point segment alreadi actual num owner owner int owner idx builder get actual num owner owner idx owner idx int segment segment builder get num segment segment list address owner builder get owner segment address owner owner get owner idx int max segment topolog info comput expect segment builder get num segment builder get actual num owner owner max segment diff builder get own owner max segment owner mani segment find anoth node replac address candid builder get member int min segment topolog info comput expect segment builder get num segment builder get actual num owner candid min segment diff builder get own candid min segment owner contain candid maintain divers owner candid owner builder add owner segment candid builder remov owner segment owner owner list live need queri break privat object get locat id address address topolog level level topolog awar address taa topolog awar address address object locat id switch level case locat id taa get site id break case locat id taa get site id taa get rack id break case locat id taa get site id taa get rack id taa get machin id break case locat id address break default throw new illeg state except unknown level level return locat id privat boolean locat duplic list address address address target topolog level level object target locat id get locat id target level address address address address target get locat id address level equal target locat id return true return fals privat boolean maintain divers list address owner address candid address replac return maintain divers owner candid replac topolog level maintain divers owner candid replac topolog level maintain divers owner candid replac topolog level privat boolean maintain divers list address owner address candid address replac topolog level machin set object old machin new hash set object owner size set object new machin new hash set object owner size new machin add get locat id candid machin address node owner old machin add get locat id node machin node equal replac new machin add get locat id node machin return new machin size old machin size public static class extern extend abstract extern topolog awar consist hash factori overrid public void write object object output output topolog awar consist hash factori chf overrid suppress warn uncheck public topolog awar consist hash factori read object object input unmarshal return new topolog awar consist hash factori overrid public integ get id return id overrid public set class extend topolog awar consist hash factori get type class return collect class extend topolog awar consist hash factori singleton topolog awar consist hash factori class 
packag org distribut ch impl import java io object input import java io object output import java util collect import java util list import java util map import java util set import org common hash hash import org common marshal abstract extern import org distribut topologyawar topolog info import org distribut topologyawar topolog level import org marshal core id import org remot transport address import org remot transport topolog awar address link org distribut ch consist hash factori implement guarante cach member consist hash also tri distribut segment base topolog inform link org configur global transport configur p drawback compar link org distribut ch impl default consist hash factori potenti move lot segment rebal strictli necessari p recommend use code topolog awar sync consist hash factori small number segment distribut segment owner get good high number segment especi bad code num segment lt num node author dan berindei sinc public class topolog awar sync consist hash factori extend sync consist hash factori overrid protect builder creat builder hash hash function int num owner int num segment list address member map address float capac factor return new builder hash function num owner num segment member capac factor protect static class builder extend sync consist hash factori builder protect final topolog info topolog info protect topolog level current level topolog level protect builder hash hash function int num owner int num segment list address member map address float capac factor super hash function num owner num segment member capac factor topolog info new topolog info member capac factor overrid protect void copi owner copi owner level topolog level copi owner level topolog level copi owner level topolog level copi owner level topolog level privat void copi owner level topolog level topolog level current level topolog level ignor max segment fals super copi owner ignor max segment true super copi owner overrid protect boolean add backup owner int segment address candid list address owner segment owner segment owner size actual num owner locat alreadi add candid owner current level ignor max segment owner empti long max segment math round comput expect segment node candid stat get primari own candid max segment add owner check segment candid return true els long max segment math round comput expect segment node candid actual num owner stat get own candid max segment add owner check segment candid return true els capac factor get candid equal f add owner check segment candid return true return fals overrid protect boolean add owner list address owner return owner size topolog info get distinct locat count current level actual num owner overrid protect doubl comput expect segment node address node int num copi return topolog info comput expect segment num segment num copi node privat boolean locat alreadi add address candid list address owner topolog level level topolog awar address topolog awar candid topolog awar address candid boolean locat alreadi add fals address owner owner topolog awar address topolog awar owner topolog awar address owner switch level case locat alreadi add topolog awar candid site topolog awar owner break case locat alreadi add topolog awar candid rack topolog awar owner break case locat alreadi add topolog awar candid machin topolog awar owner break case locat alreadi add owner equal candid locat alreadi add break return locat alreadi add public static class extern extend abstract extern topolog awar sync consist hash factori overrid public void write object object output output topolog awar sync consist hash factori chf overrid suppress warn uncheck public topolog awar sync consist hash factori read object object input unmarshal return new topolog awar sync consist hash factori overrid public integ get id return id overrid public set class extend topolog awar sync consist hash factori get type class return collect class extend topolog awar sync consist hash factori singleton topolog awar sync consist hash factori class 
packag org transact totalord import java util array list import java util collect import java util collect import java util list import java util concurr concurr map import java util concurr atom atom refer import org common util collect factori import org factori know compon name import org factori annot compon name import org factori annot inject import org transact impl total order remot transact state import org util concurr block task awar executor servic import org util log log import org util log log factori class behav synchron point incom transact total order incom transact state transfer p main function ul li ensur order prepar send thread pool e non conflict prepar process concurr li li ensur state transfer wait previou deliv prepar li li ensur prepar wait state transfer progress li ul author pedro ruivo sinc public class total order manag privat static final log log log factori get log total order manag class privat static final boolean trace log trace enabl map use keep track concurr transact privat final concurr map object total order latch key lock privat final atom refer total order latch state transfer progress privat block task awar executor servic total order executor public total order manag key lock collect factori make concurr map state transfer progress new atom refer null inject public void inject compon name known compon name block task awar executor servic total order executor total order executor total order executor ensur valid order transact correspond prepar command allow prepar command move thread pool param state total order prepar state public final void ensur order total order remot transact state state collect key modifi throw interrupt except retri due state transfer use state need key previou lock releas order insert key lock method need synchron invok one thread time name thread deliv messag total order state await reset total order latch transact synchron block new total order latch impl state get global transact global id state set transact synchron block transact synchron block collect count latch correspond previou transact queue object key key modifi total order latch prev tx key lock put key transact synchron block prev tx null state add synchron block prev tx state add lock key key total order latch state transfer state transfer progress get state transfer null state add synchron block state transfer trace log tracef transact wait lock state get global transact global id state get conflict transact block state get lock key null clear command state get lock key releas lock key possibl unblock wait prepar param state state public final void releas total order remot transact state state total order latch synchron block state get transact synchron block synchron block null alreadi releas return collect object lock key state get lock key synchron block un block object key lock key key lock remov key synchron block trace log tracef releas lock key check pend task synchron block lock key state reset notifi state transfer start param topolog id new topolog return current pend prepar public final collect total order latch notifi state transfer start int topolog id boolean rebal state transfer progress get null return collect empti list list total order latch prepar transact new array list key lock size prepar transact add key lock valu rebal state transfer progress set new total order latch impl state transfer topolog id trace log tracef state transfer start wait prepar transact return prepar transact notifi end state transfer possibl unblock wait prepar public final void notifi state transfer end total order latch block state transfer progress get set null block null block un block trace log tracef state transfer finish releas block total order executor check readi task public final boolean lock acquir return key lock empti 
packag org configur cach import java util concurr time unit import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set import org common configur attribut ident attribut copier import org transact lock mode import org transact transact mode import org transact transact protocol import org transact lookup gener transact manag lookup import org transact lookup transact manag lookup import org transact lookup transact synchron registri lookup defin transact characterist cach author pmuir author pedro ruivo public class transact configur public static final attribut definit boolean attribut definit builder auto commit true immut build public static final attribut definit long attribut definit builder stop timeout time unit milli build public static final attribut definit lock mode attribut definit builder lock lock mode build public static final attribut definit transact manag lookup attribut definit transact manag lookup builder transact manag lookup gener transact manag lookup copier ident attribut copier auto persist fals build public static final attribut definit transact synchron registri lookup attribut definit builder transact synchron registri lookup null transact synchron registri lookup class copier ident attribut copier auto persist fals build public static final attribut definit transact mode attribut definit builder mode transact mode immut auto persist fals build public static final attribut definit boolean attribut definit builder synchron fals immut auto persist fals build public static final attribut definit boolean attribut definit builder singl phase auto commit fals build public static final attribut definit long attribut definit builder reaper wake interv immut xml name reaper interv build public static final attribut definit long attribut definit builder complet timeout immut build public static final attribut definit transact protocol attribut definit builder transact protocol transact protocol immut xml name protocol build public static final attribut definit boolean attribut definit builder notif true immut build static attribut set attribut definit set return new attribut set transact configur class privat final attribut boolean auto commit privat final attribut long cach stop timeout privat final attribut lock mode lock mode privat final attribut transact manag lookup transact manag lookup privat final attribut transact synchron registri lookup transact synchron registri lookup privat final attribut transact mode transact mode privat final attribut boolean use synchron privat final attribut boolean use pc auto commit transact privat final attribut long reaper wake interv privat final attribut long complet tx timeout privat final attribut transact protocol transact protocol privat final attribut boolean notif privat final attribut set attribut privat final recoveri configur recoveri transact configur attribut set attribut recoveri configur recoveri attribut attribut check protect auto commit attribut attribut cach stop timeout attribut attribut lock mode attribut attribut transact manag lookup attribut attribut transact synchron registri lookup attribut attribut transact mode attribut attribut use synchron attribut attribut use pc auto commit transact attribut attribut reaper wake interv attribut attribut complet tx timeout attribut attribut transact protocol attribut attribut notif attribut attribut recoveri recoveri cach transact e link transact mode transact mode transact auto commit enabl singl oper transact user n need manual start transact transact inject system default true public boolean auto commit return auto commit get ongo transact cach stop wait ongo remot local transact finish amount time wait defin cach stop timeout recommend valu exceed transact timeout even new transact start cach stop could last long transact timeout allow public transact configur cach stop timeout long l cach stop timeout set l return ongo transact cach stop wait ongo remot local transact finish amount time wait defin cach stop timeout recommend valu exceed transact timeout even new transact start cach stop could last long transact timeout allow public long cach stop timeout return cach stop timeout get configur whether cach use optimist pessimist lock cach transact lock mode ignor see transact configur transact mode public lock mode lock mode return lock mode get configur whether cach use optimist pessimist lock cach transact lock mode ignor see transact configur transact mode public transact configur lock mode lock mode lock mode lock mode set lock mode return true cluster wide commit phase two phase commit transact synchron wait respons node commit send otherwis commit phase asynchron keep fals improv perform transact lead inconsist primari owner releas lock backup commit chang deprec sinc long support deprec public boolean sync commit phase return true true cluster wide commit phase two phase commit transact synchron wait respons node commit send otherwis commit phase asynchron keep fals improv perform transact lead inconsist primari owner releas lock backup commit chang deprec sync rollback phase set long modifi runtim must node deprec public transact configur sync commit phase boolean b return true cluster wide rollback phase two phase commit transact synchron wait respons node rollback send otherwis rollback phase asynchron keep fals improv perform transact deprec sinc long support deprec public boolean sync rollback phase return true true cluster wide rollback phase two phase commit transact synchron wait respons node rollback send deprec sync rollback phase set long modifi runtim must node deprec public transact configur sync rollback phase boolean b return configur transact manag lookup directli use instanc transact manag lookup call method mark cach transact public transact manag lookup transact manag lookup return transact manag lookup get deprec sinc transact manag look cach startup deprec public transact configur transact manag lookup transact manag lookup transact manag lookup transact manag lookup set transact manag lookup return configur transact synchron registri lookup directli use instanc transact manag lookup call method mark cach transact public transact synchron registri lookup transact synchron registri lookup return transact synchron registri lookup get public transact mode transact mode return transact mode get public boolean use synchron return use synchron get method allow configur transact recoveri cach method call automat enabl recoveri want disabl make sure call link recoveri configur builder enabl boolean fals paramet public recoveri configur recoveri return recoveri see transact configur builder reaper wake interv long public long reaper wake interv return reaper wake interv get see transact configur builder complet tx timeout long public long complet tx timeout return complet tx timeout get could access cach transact non transact natur non transact access fast offer less consist guarante onward mix access longer support wan to speed transact cach readi trade consist guarante enabl use pc auto commit transact p configur option forc induc transact start result enabl auto commit commit singl phase instead cs case full phase commit p b b option use modifi key multipl transact offer consist guarante concurr access public boolean use pc auto commit transact return use pc auto commit transact get return transact protocol use total order public transact protocol transact protocol return transact protocol get return transact notif link org notif cachelisten annot transact regist link org notif cachelisten annot transact complet trigger public boolean notif return notif get public attribut set attribut return attribut overrid public string string return transact configur attribut attribut recoveri recoveri overrid public boolean equal object obj obj return true obj null return fals get class obj get class return fals transact configur transact configur obj attribut null attribut null return fals els attribut equal attribut return fals recoveri null recoveri null return fals els recoveri equal recoveri return fals return true overrid public int hash code final int prime int result result prime result attribut null attribut hash code result prime result recoveri null recoveri hash code return result 
packag org configur cach import static org configur cach transact configur import static org configur cach transact configur import static org configur cach transact configur import static org configur cach transact configur import static org configur cach transact configur import static org configur cach transact configur import static org configur cach transact configur import static org configur cach transact configur import static org configur cach transact configur import static org configur cach transact configur import static org configur cach transact configur import static org configur cach transact configur import java lang invok method handl import java util concurr time unit import javax transact synchron import javax transact transact manag import javax transact xa resourc import org common configur builder import org common configur attribut attribut import org common configur attribut attribut set import org configur global global configur import org transact lock mode import org transact transact mode import org transact transact protocol import org transact lookup transact manag lookup import org transact lookup transact synchron registri lookup import org util log log import org util log log factori defin transact characterist cach author pmuir author pedro ruivo public class transact configur builder extend abstract configur child builder implement builder transact configur privat static final log log log factori get log method handl lookup lookup class privat final attribut set attribut privat final recoveri configur builder recoveri transact configur builder configur builder builder super builder attribut transact configur attribut definit set recoveri new recoveri configur builder cach transact e link transact mode org transact transact mode transact mode transact auto commit enabl singl oper transact user n need manual start transact transact inject system default true public transact configur builder auto commit boolean b attribut attribut set b return ongo transact cach stop wait ongo remot local transact finish amount time wait defin cach stop timeout recommend valu exceed transact timeout even new transact start cach stop could last long transact timeout allow p configur properti may adjust runtim public transact configur builder cach stop timeout long l attribut attribut set l return ongo transact cach stop wait ongo remot local transact finish amount time wait defin cach stop timeout recommend valu exceed transact timeout even new transact start cach stop could last long transact timeout allow p configur properti may adjust runtim public transact configur builder cach stop timeout long l time unit unit return cach stop timeout unit milli l configur whether cach use optimist pessimist lock cach transact lock mode ignor see org configur cach transact configur transact mode public transact configur builder lock mode lock mode lock mode attribut attribut set lock mode return lock mode lock mode return attribut attribut get true cluster wide commit phase two phase commit transact synchron wait respons node commit send otherwis commit phase asynchron keep fals improv perform transact lead inconsist backup owner commit transact primari owner releas lock deprec sinc long support deprec public transact configur builder sync commit phase boolean b return see link sync commit phase boolean return code true sync commit phase enabl deprec sinc longer support deprec boolean sync commit phase return true true cluster wide rollback phase two phase commit transact synchron wait respons node rollback send otherwis rollback phase asynchron keep fals lead inconsist transact roll back commit timeout backup owner could commit transact primari releas lock deprec sinc long support deprec public transact configur builder sync rollback phase boolean b return configur transact manag lookup directli use instanc transact manag lookup call method mark cach transact public transact configur builder transact manag lookup transact manag lookup tml attribut attribut set tml tml null transact mode transact mode return public transact manag lookup transact manag lookup return attribut attribut get configur transact synchron registri lookup directli use instanc transact manag lookup call method mark cach transact public transact configur builder transact synchron registri lookup transact synchron registri lookup lookup attribut attribut set lookup return public transact configur builder transact mode transact mode transact mode attribut attribut set transact mode return public transact mode transact mode attribut attribut modifi return attribut attribut get els return null configur whether cach regist synchron transact manag regist resourc often unnecessari regist full resourc unless intend make use recoveri well regist synchron significantli effici param b true link synchron use rather link resourc commun link transact manag public transact configur builder use synchron boolean b attribut attribut set b return see link use synchron boolean return code true synchron enlist enabl boolean use synchron return attribut attribut get method allow configur transact recoveri cach method call automat enabl recoveri want disabl make sure call link recoveri configur builder disabl public recoveri configur builder recoveri return recoveri could access cach transact non transact natur non transact access fast offer less consist guarante onward mix access longer support wan to speed transact cach readi trade consist guarante enabl use pc auto commit transact p configur option forc induc transact start result enabl auto commit commit singl phase instead cs case full phase commit public transact configur builder use pc auto commit transact boolean b attribut attribut set b return time interv milli thread clean transact complet inform kick default public transact configur builder reaper wake interv long interv attribut attribut set interv return durat milli keep inform complet transact default public transact configur builder complet tx timeout long timeout attribut attribut set timeout return public transact configur builder transact protocol transact protocol transact protocol attribut attribut set transact protocol return see link transact protocol transact protocol return current configur link transact protocol public transact protocol transact protocol return attribut attribut get return transact notif link org notif cachelisten annot transact regist link org notif cachelisten annot transact complet trigger public transact configur builder notif boolean enabl attribut attribut set enabl return overrid public void valid attribut long reaper wake interv attribut attribut attribut long complet tx timeout attribut attribut reaper wake interv get throw log invalid reaper wake interv reaper wake interv get complet tx timeout get throw log invalid complet tx timeout complet tx timeout get cach mode cach mode cluster cach mode attribut attribut get transact protocol total order support transact cach transact mode transact mode throw log invalid tx mode total order transact mode total order support replic distribut mode cach mode replic cach mode distribut throw log invalid cach mode total order cluster cach mode friendli cach mode string lock mode lock mode throw log invalid lock mode total order lock mode attribut attribut get get builder templat log transact notif disabl attribut attribut get transact mode cach mode synchron throw log unsupport async cach mode cach mode recoveri valid overrid public void valid global configur global config recoveri valid global config overrid public transact configur creat transact mode null get builder invoc batch enabl transact mode transact mode els transact mode null transact mode transact mode return new transact configur attribut protect recoveri creat overrid public transact configur builder read transact configur templat attribut read templat attribut recoveri read templat recoveri return overrid public string string return transact configur builder attribut attribut recoveri recoveri 
packag org transact impl import static javax transact xa resourc import static javax transact xa resourc import java util list import javax transact transact import javax transact xa except import org command command factori import org command tx commit command import org command tx prepar command import org command tx rollback command import org command write write command import org configur cach configur import org configur cach configur import org context invoc context factori import org context impl local tx invoc context import org factori annot inject import org factori annot start import org factori annot stop import org interceptor interceptor chain import org transact xa global transact import org transact xa recoveri recoveri manag import org util log log import org util log log factori coordin transact prepar commit receiv link javax transact transact manag integr either link org transact xa transact xa adapt link org transact synchron synchron adapt author mircea marku jboss com author pedro ruivo sinc public class transact coordin privat static final log log log factori get log transact coordin class privat static final boolean trace log trace enabl privat command factori command factori privat invoc context factori icf privat interceptor chain invok privat transact tabl tx tabl privat recoveri manag recoveri manag privat configur configur privat command creator command creator privat volatil boolean shut fals privat boolean total order privat boolean default one phase commit privat boolean use pc auto commit transact inject public void init command factori command factori invoc context factori icf interceptor chain invok transact tabl tx tabl recoveri manag recoveri manag configur configur command factori command factori icf icf invok invok tx tabl tx tabl recoveri manag recoveri manag configur configur use pc auto commit transact configur transact use pc auto commit transact total order configur transact transact protocol total order default one phase commit configur one phase commit configur configur one phase total order commit configur start prioriti privat void set start statu shut fals stop prioriti privat void set stop statu shut true start public void start configur tx version configur need creat version variant prepar command commit command command creator new command creator overrid public commit command creat commit command global transact gtx return command factori build version commit command gtx overrid public prepar command creat prepar command global transact gtx list write command modif boolean one phase commit return command factori build version prepar command gtx modif one phase commit els command creator new command creator overrid public commit command creat commit command global transact gtx return command factori build commit command gtx overrid public prepar command creat prepar command global transact gtx list write command modif boolean one phase commit return command factori build prepar command gtx modif one phase commit public final int prepar local transact local transact throw except return prepar local transact fals public final int prepar local transact local transact boolean replay entri wrap throw except valid mark rollback local transact one phase commit local transact trace log tracef receiv prepar tx skip call use local transact return prepar command prepar command command creator creat prepar command local transact get global transact local transact get modif fals trace log tracef send prepar command chain prepar command local tx invoc context ctx icf creat tx invoc context local transact prepar command set replay entri wrap replay entri wrap tri invok invok ctx prepar command local transact read trace log tracef readonli transact local transact get global transact forc cleanup releas object hold ms n call commit tx see commit intern ctx return els tx tabl local transact prepar local transact return catch throwabl e shut log trace except prepar back probabl shut els log error process prepar e rollback transact throw except guarante call resourc rollback prepar fail rollback local transact tell roll back alreadi n call rollback except xe new except except xe init caus e throw xe public boolean commit local transact local transact boolean one phase throw except trace log tracef commit transact local transact get global transact local tx invoc context ctx icf creat tx invoc context local transact one phase commit local transact one phase valid mark rollback local transact trace log trace prepar call interceptor chain list write command modif local transact get modif prepar command command command creator creat prepar command local transact get global transact modif true tri invok invok ctx command catch throwabl e handl commit failur e true ctx return true els local transact read commit intern ctx return fals public void rollback local transact local transact throw except tri rollback intern icf creat tx invoc context local transact catch throwabl e shut log trace except roll back probabl shut els log error roll back e final transact transact local transact get transact might possibl cach stop still hold refer resourc transact null tx tabl failur complet transact transact except xe new except except xe init caus e throw xe privat void handl commit failur throwabl e boolean one phase commit local tx invoc context ctx throw except trace log tracef could n commit transact tri rollback ctx get cach transact one phase commit log error process pc prepar command e els log error process pc commit command e tri boolean recoveri enabl recoveri manag null boolean total order one phase commit total order recoveri enabl total order send rollback total order creat new remot transact rollback need way one node abort transact node abort rollback intern ctx catch throwabl e log could rollback prepar pc transact ctx get cach transact e inform resourc manag error occur transact branch except xe new except except xe init caus e throw xe final tx tabl failur complet transact ctx get transact except xe new except except xe init caus e throw xe heurist rollback privat void commit intern local tx invoc context ctx throw except commit command commit command command creator creat commit command ctx get global transact tri invok invok ctx commit command tx tabl remov local transact ctx get cach transact catch throwabl e handl commit failur e fals ctx privat void rollback intern local tx invoc context ctx throw throwabl trace log tracef rollback transact ctx get global transact rollback command rollback command command factori build rollback command ctx get global transact invok invok ctx rollback command tx tabl remov local transact ctx get cach transact privat void valid mark rollback local transact local transact throw except local transact mark rollback trace log tracef transact alreadi mark rollback forc rollback local transact rollback local transact throw new except except public boolean pc auto commit transact local transact local transact return use pc auto commit transact local transact implicit transact privat interfac command creator commit command creat commit command global transact gtx prepar command creat prepar command global transact gtx list write command modif boolean one phase commit privat boolean one phase commit local transact local transact return default one phase commit pc auto commit transact local transact 
packag org transact xa import java util random import javax transact transact import org command write write command import org configur cach configur import org contain version numer version import org contain version version gener import org factori know compon name import org factori annot compon name import org factori annot inject import org factori annot start import org remot transport address import org transact impl local transact import org transact impl remot transact import org transact synchron sync local transact import org transact xa recoveri recoveri awar dld global transact import org transact xa recoveri recoveri awar global transact import org transact xa recoveri recoveri awar local transact import org transact xa recoveri recoveri awar remot transact import org util time servic import org util log log import org util log log factori factori transact relat sate author mircea marku jboss com public class transact factori privat static final log log log factori get log transact factori class privat tx factori enum tx factori enum privat configur configur privat version gener cluster id gener privat time servic time servic privat boolean cluster public enum tx factori enum deprec overrid public local transact new local transact transact tx global transact gtx boolean implicit transact int topolog id long tx creation time return new recoveri awar local transact tx gtx implicit transact topolog id tx creation time overrid public global transact new global transact address addr boolean remot version gener cluster id gener boolean cluster recoveri awar dld global transact dld global transact new recoveri awar dld global transact addr remot ideal caus issu far could intern id object instead long dld global transact set intern id numer version cluster id gener gener new get version return add coin toss dld global transact overrid public global transact new global transact return new recoveri awar dld global transact overrid public remot transact new remot transact write command modif global transact tx int topolog id long tx creation time return new recoveri awar remot transact modif tx topolog id tx creation time overrid public remot transact new remot transact global transact tx int topolog id long tx creation time return new recoveri awar remot transact tx topolog id tx creation time deprec overrid public local transact new local transact transact tx global transact gtx boolean implicit transact int topolog id long tx creation time return new local xa transact tx gtx implicit transact topolog id tx creation time overrid public global transact new global transact address addr boolean remot version gener cluster id gener boolean cluster return add coin toss new dld global transact addr remot overrid public global transact new global transact return new dld global transact overrid public remot transact new remot transact write command modif global transact tx int topolog id long tx creation time return new remot transact modif tx topolog id tx creation time overrid public remot transact new remot transact global transact tx int topolog id long tx creation time return new remot transact tx topolog id tx creation time deprec overrid public local transact new local transact transact tx global transact gtx boolean implicit transact int topolog id long tx creation time return new sync local transact tx gtx implicit transact topolog id tx creation time overrid public global transact new global transact address addr boolean remot version gener cluster id gener boolean cluster return add coin toss new dld global transact addr remot overrid public global transact new global transact return new dld global transact overrid public remot transact new remot transact write command modif global transact tx int topolog id long tx creation time return new remot transact modif tx topolog id tx creation time overrid public remot transact new remot transact global transact tx int topolog id long tx creation time return new remot transact tx topolog id tx creation time overrid public local transact new local transact transact tx global transact gtx boolean implicit transact int topolog id long tx creation time return new recoveri awar local transact tx gtx implicit transact topolog id tx creation time overrid public global transact new global transact address addr boolean remot version gener cluster id gener boolean cluster recoveri awar global transact recoveri awar global transact new recoveri awar global transact addr remot ideal caus issu far could intern id object instead long recoveri awar global transact set intern id numer version cluster id gener gener new get version return recoveri awar global transact overrid public global transact new global transact return new recoveri awar global transact overrid public remot transact new remot transact write command modif global transact tx int topolog id long tx creation time return new recoveri awar remot transact modif tx topolog id tx creation time overrid public remot transact new remot transact global transact tx int topolog id long tx creation time return new recoveri awar remot transact tx topolog id tx creation time overrid public local transact new local transact transact tx global transact gtx boolean implicit transact int topolog id long tx creation time return new local xa transact tx gtx implicit transact topolog id tx creation time overrid public global transact new global transact address addr boolean remot version gener cluster id gener boolean cluster return new global transact addr remot overrid public global transact new global transact return new global transact overrid public remot transact new remot transact write command modif global transact tx int topolog id long tx creation time return new remot transact modif tx topolog id tx creation time overrid public remot transact new remot transact global transact tx int topolog id long tx creation time return new remot transact tx topolog id tx creation time overrid public local transact new local transact transact tx global transact gtx boolean implicit transact int topolog id long tx creation time return new sync local transact tx gtx implicit transact topolog id tx creation time overrid public global transact new global transact address addr boolean remot version gener cluster id gener boolean cluster return new global transact addr remot overrid public global transact new global transact return new global transact overrid public remot transact new remot transact write command modif global transact tx int topolog id long tx creation time return new remot transact modif tx topolog id tx creation time overrid public remot transact new remot transact global transact tx int topolog id long tx creation time return new remot transact tx topolog id tx creation time public abstract local transact new local transact transact tx global transact gtx boolean implicit transact int topolog id long tx creation time public abstract global transact new global transact address addr boolean remot version gener cluster id gener boolean cluster public abstract global transact new global transact protect long gener random id return rnd next long protect global transact add coin toss dld global transact dld global transact dld global transact set coin toss gener random id return dld global transact class intern synchron share instanc privat final random rnd new random public abstract remot transact new remot transact write command modif global transact tx int topolog id long tx creation time public abstract remot transact new remot transact global transact tx int topolog id long tx creation time public global transact new global transact return tx factori enum new global transact public global transact new global transact address addr boolean remot return tx factori enum new global transact addr remot cluster id gener cluster public local transact new local transact transact tx global transact gtx boolean implicit transact int topolog id return tx factori enum new local transact tx gtx implicit transact topolog id time servic time public remot transact new remot transact write command modif global transact tx int topolog id return tx factori enum new remot transact modif tx topolog id time servic time public remot transact new remot transact global transact tx int topolog id return tx factori enum new remot transact tx topolog id time servic time inject public void init configur configur compon name valu know compon name version gener cluster id gener time servic time servic configur configur cluster id gener cluster id gener time servic time servic start public void start boolean xa configur transact use synchron boolean recoveri enabl configur transact recoveri enabl boolean batch enabl configur invoc batch enabl init fals recoveri enabl xa batch enabl cluster configur cluster cach mode cluster public void init boolean dld enabl boolean recoveri enabl boolean xa boolean batch enabl batch enabl tx factori enum tx factori enum els recoveri enabl xa tx factori enum tx factori enum els use synchronis enlist tx factori enum tx factori enum els xa tx factori enum tx factori enum els tx factori enum tx factori enum log tracef set factori enum tx factori enum 
packag org factori import javax transact transact manag import org common cach except import org factori annot default factori import org transact lookup transact manag lookup import org transact tm batch mode transact manag import org util log log import org util log log factori use number mechan retriev transact manag author manik surtani href mailto manik jboss org manik jboss org author galder zamarr sinc default factori class transact manag class public class transact manag factori extend abstract name cach compon factori implement auto instanti factori privat static final log log log factori get log transact manag factori class overrid public construct class compon type configur transact transact mode transact return null see transact manag inject config transact manag transact manag null transact manag lookup lookup configur transact transact manag lookup tri lookup null compon registri wire depend lookup transact manag lookup get transact manag catch except e log could instanti transact manag e transact manag null configur invoc batch enabl log use batch mode transact manag transact manag batch mode transact manag get instanc transact manag null throw new cach except transact cach transact manag could find configur transact manag lookup properli return compon type cast transact manag 
boss home profession open sourc copyright red hat inc individu contributor indic author tag see copyright txt file distribut full list individu contributor free softwar redistribut modifi term lesser gener public licens publish free softwar foundat either version licens option later version softwar distribut hope use without even impli warranti see less gener public licens detail receiv copi lesser gener public licens along softwar write free softwar foundat inc franklin st fifth floor boston see site http www fsf org packag org jboss cluster subsystem author paul ferraro public enum transact mode org transact transact mode fals fals org transact transact mode fals fals org transact transact mode true fals org transact transact mode true true privat final org transact transact mode mode privat final boolean xa enabl privat final boolean recoveri enabl privat transact mode org transact transact mode mode boolean xa enabl boolean recoveri enabl mode mode xa enabl xa enabl recoveri enabl recoveri enabl public org transact transact mode get mode return mode public boolean enabl return xa enabl public boolean recoveri enabl return recoveri enabl 
packag org transact import java util collect import javax transact transact import org transact xa global transact interfac allow fetch link org transact xa global transact associ local remot transact author pedro ruivo sinc public interfac transact tabl param transact local transact must non null return link org transact xa global transact associ transact code null n exist global transact get global transact transact transact return unmodifi collect link org transact xa global transact associ local run transact collect global transact get local global transact return unmodifi collect link org transact xa global transact associ remot transact collect global transact get remot global transact 
packag org contain entri import static org common util util str import java io except import java io object input import java io object output import java util set import java util concurr time unit import org common io unsign numer import org common marshal abstract extern import org common util util import org marshal core id import org metadata emb metadata import org metadata metadata cach entri transient e consid expir period use author manik surtani sinc public class transient cach entri extend abstract intern cach entri protect object valu protect long max idl protect long last use public transient cach entri object key object valu long max idl long last use super key valu valu max idl max idl last use last use overrid public object get valu return valu overrid public object set valu object valu return valu valu overrid public final void touch touch system current time milli overrid public final void touch long current time milli last use current time milli overrid public final void reincarn op overrid public void reincarn long op overrid public final boolean expir return true overrid public boolean expir long return expiri helper expir transient max idl last use overrid public boolean expir return expir system current time milli public void set max idl long max idl max idl max idl overrid public long get creat return overrid public final long get last use return last use overrid public long get lifespan return overrid public long get expiri time return max idl last use max idl overrid public final long get max idl return max idl overrid public intern cach valu intern cach valu return new transient cach valu valu max idl last use overrid public metadata get metadata return new emb metadata builder max idl max idl time unit build overrid public void set metadata metadata metadata throw new illeg state except metadata set mortal entri need recreat via entri factori overrid public transient cach entri clone return transient cach entri super clone public static class extern extend abstract extern transient cach entri overrid public void write object object output output transient cach entri tce throw except output write object tce key output write object tce valu unsign numer write unsign long output tce last use output write long tce max idl could neg use unsign long overrid public transient cach entri read object object input input throw except class find except object k input read object object v input read object long last use unsign numer read unsign long input long max idl input read long return new transient cach entri k v max idl last use overrid public integ get id return id overrid public set class extend transient cach entri get type class return util set transient cach entri class overrid public string string return transient cach entri key str key valu str valu 
packag org contain entri import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org marshal core id transient cach valu correspond link org contain entri transient cach entri author manik surtani sinc public class transient cach valu extend immort cach valu protect long max idl protect long last use public transient cach valu object valu long max idl long last use super valu max idl max idl last use last use overrid public long get max idl return max idl public void set max idl long max idl max idl max idl overrid public long get last use return last use public void set last use long last use last use last use overrid public final boolean expir long return expiri helper expir transient max idl last use overrid public final boolean expir return expir system current time milli overrid public boolean expir return true overrid public intern cach entri intern cach entri object key return new transient cach entri key valu max idl last use overrid public long get expiri time return max idl last use max idl overrid public boolean equal object return true instanceof transient cach valu return fals super equal return fals transient cach valu transient cach valu last use last use return fals max idl max idl return fals return true overrid public int hash code int result super hash code result result int max idl max idl result result int last use last use return result overrid public string string return transient cach valu max idl max idl last use last use super string overrid public transient cach valu clone return transient cach valu super clone public static class extern extend abstract extern transient cach valu overrid public void write object object output output transient cach valu tcv throw except output write object tcv valu unsign numer write unsign long output tcv last use output write long tcv max idl could neg use unsign long overrid public transient cach valu read object object input input throw except class find except object v input read object long last use unsign numer read unsign long input long max idl input read long return new transient cach valu v max idl last use overrid public integ get id return id overrid public set class extend transient cach valu get type class return util class extend transient cach valu set transient cach valu class 
packag org contain entri import static java lang math min import static org common util util str import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org marshal core id import org metadata emb metadata import org metadata metadata cach entri transient mortal author manik surtani sinc public class transient mortal cach entri extend abstract intern cach entri protect object valu protect long max idl protect long last use protect long lifespan protect long creat public transient mortal cach entri object key object valu long max idl long lifespan long current time milli key valu max idl lifespan current time milli current time milli public transient mortal cach entri object key object valu long max idl long lifespan long last use long creat super key valu valu max idl max idl lifespan lifespan creat creat last use last use public void set lifespan long lifespan lifespan lifespan public void set max idl long max idl max idl max idl overrid public object get valu return valu overrid public long get lifespan return lifespan overrid public final boolean expir return true overrid public long get creat return creat overrid public boolean expir long return expiri helper expir transient mortal max idl last use lifespan creat overrid public boolean expir return expir system current time milli overrid public final long get expiri time long lset lifespan creat lifespan long muet max idl last use max idl lset return muet muet return lset return min lset muet overrid public intern cach valu intern cach valu return new transient mortal cach valu valu creat lifespan max idl last use overrid public long get last use return last use overrid public final void touch touch system current time milli overrid public final void touch long current time milli last use current time milli overrid public final void reincarn reincarn system current time milli overrid public void reincarn long creat overrid public long get max idl return max idl overrid public object set valu object valu return valu valu overrid public metadata get metadata return new emb metadata builder lifespan lifespan max idl max idl build overrid public void set metadata metadata metadata throw new illeg state except metadata set mortal entri need recreat via entri factori overrid public transient mortal cach entri clone return transient mortal cach entri super clone overrid public string string return get class get simpl name key str key valu str valu public static class extern extend abstract extern transient mortal cach entri overrid public void write object object output output transient mortal cach entri entri throw except output write object entri key output write object entri valu unsign numer write unsign long output entri creat output write long entri lifespan could neg use unsign long unsign numer write unsign long output entri last use output write long entri max idl could neg use unsign long overrid public transient mortal cach entri read object object input input throw except class find except object k input read object object v input read object long creat unsign numer read unsign long input long lifespan input read long long last use unsign numer read unsign long input long max idl input read long return new transient mortal cach entri k v max idl lifespan last use creat overrid public integ get id return id overrid public set class extend transient mortal cach entri get type class return util set transient mortal cach entri class 
packag org contain entri import static java lang math min import java io except import java io object input import java io object output import java util set import org common io unsign numer import org common marshal abstract extern import org common util util import org marshal core id transient mortal cach valu correspond link org contain entri transient mortal cach entri author manik surtani sinc public class transient mortal cach valu extend mortal cach valu protect long max idl protect long last use public transient mortal cach valu object valu long creat long lifespan long max idl long last use valu creat lifespan max idl last use last use public transient mortal cach valu object valu long creat long lifespan long max idl super valu creat lifespan max idl max idl overrid public long get max idl return max idl public void set max idl long max idl max idl max idl overrid public long get last use return last use public void set last use long last use last use last use overrid public boolean expir long return expiri helper expir transient mortal max idl last use lifespan creat overrid public boolean expir return expir system current time milli overrid public intern cach entri intern cach entri object key return new transient mortal cach entri key valu max idl lifespan last use creat overrid public long get expiri time long lset lifespan creat lifespan long muet max idl last use max idl lset return muet muet return lset return min lset muet overrid public boolean equal object return true instanceof transient mortal cach valu return fals super equal return fals transient mortal cach valu transient mortal cach valu last use last use return fals max idl max idl return fals return true overrid public int hash code int result super hash code result result int max idl max idl result result int last use last use return result overrid public string string return transient mortal cach valu max idl max idl last use last use super string overrid public transient mortal cach valu clone return transient mortal cach valu super clone public static class extern extend abstract extern transient mortal cach valu overrid public void write object object output output transient mortal cach valu valu throw except output write object valu valu unsign numer write unsign long output valu creat output write long valu lifespan could neg use unsign long unsign numer write unsign long output valu last use output write long valu max idl could neg use unsign long overrid public transient mortal cach valu read object object input input throw except class find except object v input read object long creat unsign numer read unsign long input long lifespan input read long long last use unsign numer read unsign long input long max idl input read long return new transient mortal cach valu v creat lifespan max idl last use overrid public integ get id return id overrid public set class extend transient mortal cach valu get type class return util class extend transient mortal cach valu set transient mortal cach valu class 
boss home profession open sourc copyright red hat inc individu contributor indic author tag see copyright txt file distribut full list individu contributor free softwar redistribut modifi term lesser gener public licens publish free softwar foundat either version licens option later version softwar distribut hope use without even impli warranti see less gener public licens detail receiv copi lesser gener public licens along softwar write free softwar foundat inc franklin st fifth floor boston see site http www fsf org packag org server jgroup spi import org jboss network socket bind defin configur group transport protocol author paul ferraro public interfac transport configur extend protocol configur boolean share socket bind get diagnost socket bind topolog get topolog interfac topolog string get machin string get rack string get site 
packag org jboss cluster subsystem import java util concurr time unit import org server common servic builder import org server spi servic cach contain servic name import org server jgroup spi channel factori import org server jgroup spi servic channel servic name import org jboss cluster subsystem emb cach manag configur servic transport configur import org jboss msc servic servic builder import org jboss msc servic servic control import org jboss msc servic servic name import org jboss msc servic servic target import org jboss msc servic valu servic import org jboss msc valu inject valu import org jboss msc valu valu import org jgroup channel public class transport configur builder implement builder transport configur valu transport configur transport configur privat final inject valu channel channel new inject valu privat final inject valu channel factori factori new inject valu privat final string name privat long lock timeout privat boolean strict peer peer privat int initi cluster size privat long initi cluster timeout public transport configur builder string name name name transport configur builder set lock timeout long lock timeout time unit time unit lock timeout time unit milli lock timeout return transport configur builder set strict peer peer boolean strict peer peer strict peer peer strict peer peer return transport configur builder set initi cluster size int initi cluster size initi cluster size initi cluster size return transport configur builder set initi cluster timeout long initi cluster timeout initi cluster timeout initi cluster timeout return overrid public channel factori get channel factori return factori get valu overrid public channel get channel return channel get valu overrid public boolean strict peer peer return strict peer peer overrid public long get lock timeout return lock timeout overrid public int get initi cluster size return initi cluster size overrid public long get initi cluster timeout return initi cluster timeout overrid public transport configur get valu throw illeg state except illeg argument except return overrid public servic name get servic name return cach contain servic name get servic name name append transport overrid public servic builder transport configur build servic target target servic builder transport configur builder target add servic get servic name new valu servic add depend channel servic name get servic name name channel class channel add depend channel servic name get servic name name channel factori class factori return builder set initi mode servic control mode 
packag org client hotrod impl transport import java net socket address import java util collect import java util map import java util set import java util concurr atom atom integ import javax net ssl context import org client hotrod cach topolog info import org client hotrod configur configur import org client hotrod event client listen notifi import org client hotrod impl consistenthash consist hash import org client hotrod impl consistenthash consist hash factori import org client hotrod impl oper add client listen oper import org client hotrod impl protocol codec import org client hotrod impl transport tcp tcp transport factori cluster switch statu import org common marshal marshal transport factori build manag link org client hotrod impl transport transport object author mircea marku jboss com sinc public interfac transport factori transport get transport set socket address fail server byte cach name transport get address transport socket address server socket address get socket address object key byte cach name void releas transport transport transport void start codec codec configur configur atom integ topolog id client listen notifi listen notifi void updat server collect socket address new server byte cach name boolean quiet void destroy cach topolog info get cach topolog info byte cach name deprec call hot rod x protocol deprec void updat hash function map socket address set integ server hash int num key owner short hash function version int hash space byte cach name atom integ topolog id void updat hash function socket address segment owner int num segment short hash function version byte cach name atom integ topolog id consist hash get consist hash byte cach name consist hash factori get consist hash factori transport get transport object key set socket address fail server byte cach name boolean tcp delay boolean tcp keep aliv int get max retri int get timeout int get connect timeout void invalid transport socket address server address transport transport context get context void reset byte cach name atom integ creat topolog id byte cach name int get topolog id byte cach name cluster switch statu tri switch cluster string fail cluster name byte cach name marshal get marshal boolean switch cluster string cluster name string get current cluster name int get topolog age string get sni host name void add disconnect listen add client listen oper listen throw interrupt except 
packag org interceptor distribut import static org command visit command load type import static org command visit command load type import java util array list import java util collect import java util collect import java util hash map import java util hash set import java util list import java util map import java util set import java util concurr complet futur import org command command invoc id import org command command factori import org command flag affect command import org command topolog affect command import org command visit command import org command read get cach entri command import org command read get key valu command import org command write abstract data write command import org command write backup ack command import org command write backup multi key ack command import org command write backup put map rpc command import org command write backup write rpc command import org command write comput command import org command write comput absent command import org command write datum write command import org command write put key valu command import org command write put map command import org command write remov command import org command write replac command import org common util collect import org contain entri cach entri import org context invoc context import org context impl flag bit set import org distribut distribut info import org distribut local cach topolog import org distribut triangl order manag import org factori annot inject import org factori annot start import org remot inboundhandl deliv order import org remot respons respons import org remot respons success respons import org remot respons unsuccess respons import org remot respons valid respons import org remot transport address import org statetransf outdat topolog except import org statetransf state transfer interceptor import org util concurr command ack collector import org util concurr complet futur import org util log log import org util log log factori non transact interceptor use distribut cach support concurr write p implement base triangl algorithm p link get key valu command read valu local avail node owner valu store n avail remot request make link datum write command perform follow ul li command forward primari owner key li li primari owner lock key execut oper send link backup write rpc command backup owner releas lock send link success respons link unsuccess respons back origin li li backup owner appli updat send link backup ack command back origin li li origin collect ack owner return li ul link put map command perform similar way ul li subset map split primari owner li li primari owner lock key execut command split key backup owner send repli origin li li backup owner appli updat send back link backup multi key ack command origin li li origin collect acknowledg owner return li ul acknowledg manag do link command ack collector p topolog chang command execut link outdat topolog except throw link state transfer interceptor catch retri command p finish wiki page add link author pedro ruivo sinc public class triangl distribut interceptor extend non tx distribut interceptor privat static final log log log factori get log triangl distribut interceptor class privat static final boolean trace log trace enabl privat command ack collector command ack collector privat command factori command factori privat triangl order manag triangl order manag privat address local address privat static map object object merg map map address respons respons map object object result map noinspect uncheck map object object remot map map object object success respons respons valu iter next get respons valu return collect merg map result map remot map inject public void inject command ack collector command ack collector command factori command factori triangl order manag triangl order manag command ack collector command ack collector command factori command factori triangl order manag triangl order manag start public void start local address rpc manag get address overrid public object visit put key valu command invoc context ctx put key valu command command throw throwabl return handl datum write command ctx command overrid public object visit put map command invoc context ctx put map command command throw throwabl ctx origin local return handl local put map command ctx command els return handl remot put map command ctx command overrid public object visit remov command invoc context ctx remov command command throw throwabl return handl datum write command ctx command overrid public object visit replac command invoc context ctx replac command command throw throwabl return handl datum write command ctx command overrid public object visit comput command invoc context ctx comput command command throw throwabl return handl datum write command ctx command overrid public object visit comput absent command invoc context ctx comput absent command command throw throwabl return handl datum write command ctx command privat object handl remot put map command invoc context ctx put map command command local cach topolog cach topolog check topolog id command final visit command load type load type command load type command forward backup remot backup return async invok next ctx command check remot get need ctx command command get map key set cach topolog load type primari need send command backup order send backup command command get map cach topolog return async invok next ctx command check remot get need ctx command command get map key set cach topolog load type privat void send backup put map command command map object object entri local cach topolog cach topolog backup owner classifi filter new backup owner classifi cach topolog entri size entri entri set filter add int topolog id command get topolog id map entri integ map object object entri filter per segment key valu entri set int segment id entri get key collect address backup cach topolog get distribut segment segment id write backup backup empti primari owner segment may one owner e g rebal continu map object object map entri get valu long sequenc triangl order manag next segment id topolog id backup put map rpc command backup put map rpc command command factori build backup put map rpc command command backup put map rpc command set map map backup put map rpc command set sequenc sequenc trace log tracef command get sequenc segment command get command invoc id segment id sequenc rpc manag send mani backup backup put map rpc command deliv order privat object handl local put map command invoc context ctx put map command command local command need split primari owner send command final local cach topolog cach topolog check topolog id command final primari owner classifi filter new primari owner classifi cach topolog command get map size final boolean sync synchron command final visit command load type load type command load type command get map entri set filter add sync collector map object object collector command ack collector creat multi key collector command get command invoc id get id filter primari key set filter backup command get topolog id complet futur map object object local result new complet futur final map object object local entri filter primari remov local address forward primari owner command filter local result handl map throwabl throwabl null collector primari except throwabl els collector primari result map true return null local entri null send backup command local entri cach topolog complet futur remot get check remot get need ctx command local entri key set cach topolog load type load type return make stage async invok next ctx command remot get handl ctx command r ctx r command rv throwabl throwabl null local result complet except complet futur extract except throwabl els noinspect uncheck local result complet map object object rv return async valu collector get futur els local result complet command flag flag bit set null new hash map return async valu collector get futur final map object object local entri filter primari remov local address forward primari owner command filter local entri null send backup command local entri cach topolog return async invok next ctx command check remot get need ctx command local entri key set cach topolog load type load type return null privat extend flag affect command topolog affect command complet futur check remot get need invoc context ctx command set object key local cach topolog cach topolog boolean need previou valu need previou valu object key key cach entri cach entri ctx lookup entri key cach entri null cach topolog write owner key entri factori wrap extern entri ctx key null fals true return complet futur complet null final list complet futur futur list new array list key size object key key cach entri cach entri ctx lookup entri key cach entri null cach topolog write owner key wrap key extern ctx command key futur list final int size futur list size size return complet futur complet null complet futur array new complet futur size futur list array array return complet futur array privat extend flag affect command topolog affect command void wrap key extern invoc context ctx command object key list complet futur futur list command flag flag bit set flag bit set entri factori wrap extern entri ctx key null fals true els get cach entri command fake get command cf build get cach entri command key command get flag bit set fake get command set topolog id command get topolog id futur list add remot get ctx fake get command key true privat void forward primari owner put map command command primari owner classifi splitter map entri address map object object entri splitter primari entri set put map command copi new put map command command fals copi set map entri get valu rpc manag send entri get key copi deliv order privat complet futur map object object forward primari owner put map command command primari owner classifi splitter complet futur map object object local result complet futur map object object futur local result map entri address map object object entri splitter primari entri set put map command copi new put map command command fals copi set map entri get valu complet futur map address respons remot futur rpc manag invok remot async collect singleton entri get key copi default sync option futur remot futur combin futur triangl distribut interceptor merg map return futur overrid handl non tx write command function command triangel privat object handl datum write command invoc context context abstract data write command command assert context tx scope command flag flag bit set n go triangl return invok next context command local cach topolog topolog check topolog id command distribut info distribut info topolog get distribut command get key distribut info primari assert context lookup entri command get key null return context origin local local primari owner write context command distribut info remot primari owner write context command distribut info els distribut info write backup return context origin local local write invoc context command distribut info remot backup owner write context command els alway local assert context origin local return local write invoc context command distribut info privat object remot backup owner write invoc context context datum write command command cach entri entri context lookup entri command get key entri null command load type return async invok next context command remot get context command command get key true entri factori wrap extern entri context command get key null fals true return invok next context command privat object local primari owner write invoc context context datum write command command distribut info distribut info command flag flag bit set command set valu matcher command get valu matcher matcher retri return invok next appli context command r ctx r command rv final datum write command dw command data write command r command final command invoc id id dw command get command invoc id collect address backup owner distribut info write backup dw command success backup owner empti trace log tracef command success primari owner id return rv final int topolog id dw command get topolog id synchron dw command dw command return valu expect collector object collector command ack collector creat id get id backup owner topolog id check topolog regist collector n collector may wait forev timeout non exist acknowledg check topolog id topolog id collector collector primari result rv true send backup distribut info dw command backup owner return async valu collector get futur els send backup distribut info dw command backup owner return rv privat object remot primari owner write invoc context context datum write command command final distribut info distribut info primari owner need execut command check success send backup repli origin need command flag flag bit set command set valu matcher command get valu matcher matcher retri return invok next appli context command r ctx r command rv final datum write command dw command data write command r command final command invoc id id dw command get command invoc id collect address backup owner distribut info write backup dw command success backup owner empti trace log tracef command success primari owner id return rv send backup distribut info dw command backup owner return rv privat void send backup distribut info distribut info data write command command collect address backup owner command invoc id id command get command invoc id int segment id distribut info segment id trace log tracef command send backup owner id backup owner long sequenc number triangl order manag next segment id command get topolog id backup write rpc command backup write rpc command command factori build backup write rpc command command backup write rpc command set sequenc sequenc number trace log tracef command get sequenc segment id sequenc number segment id must send messag collector regist map rpc manag send mani backup owner backup write rpc command deliv order privat object local write invoc invoc context context datum write command command distribut info distribut info assert context origin local final command invoc id invoc id command get command invoc id synchron command command return valu expect command flag flag bit set final int topolog id command get topolog id collector object collector command ack collector creat invoc id get id distribut info write backup topolog id check topolog regist collector n collector may wait forev timeout non exist acknowledg check topolog id topolog id collector forward primari command distribut info collector return async valu collector get futur els rpc manag send distribut info primari command deliv order return null privat void forward primari datum write command command distribut info distribut info collector object collector complet futur map address respons remot invoc rpc manag invok remot async collect singleton list distribut info primari command default sync option remot invoc handl respons throwabl throwabl null collector primari except complet futur extract except throwabl els valid respons respons valid respons respons valu iter next respons success command fail collector primari result respons get respons valu respons success return null privat void check topolog id int topolog id collector collector int current topolog id state transfer manag get cach topolog get topolog id current topolog id topolog id topolog id collector primari except outdat topolog except throw outdat topolog except classifi key primari owner address key segment backup owner address segment p first map use forward command primari owner subset key p second map use initi link command ack collector wait backup acknowledg privat static class primari owner classifi privat final map address collect integ backup privat final map address map object object primari privat final local cach topolog cach topolog privat final int entri count privat primari owner classifi local cach topolog cach topolog int entri count cach topolog cach topolog int member size cach topolog get member size backup new hash map member size primari new hash map member size entri count entri count public void add map entri object object entri int segment cach topolog get segment entri get key distribut info distribut info cach topolog get distribut segment segment final address primari owner distribut info primari primari comput absent primari owner address new hash map entri count put entri get key entri get valu address backup distribut info write backup backup comput absent backup address new hash set entri count add segment classifi use primari owner handl remot link put map command p map backup owner address subset key privat static class backup owner classifi privat final map integ map object object per segment key valu privat final local cach topolog cach topolog privat final int entri count privat backup owner classifi local cach topolog cach topolog int entri count cach topolog cach topolog per segment key valu new hash map cach topolog get read consist hash get num segment entri count entri count public void add map entri object object entri per segment key valu comput absent cach topolog get segment entri get key address new hash map entri count put entri get key entri get valu 
packag org client hotrod impl import java util properti import org client hotrod log log import org client hotrod log log factori import org common util string properti replac type awar properti extend link properti class provid accessor convert valu certain type use default valu convers possibl config ref name properti add enclos compon author manik surtani sinc public class type properti extend properti serial version privat static final long serial version privat static final log log log factori get log type properti class copi constructor param p properti instanc null treat empti properti instanc public type properti properti p p null p empti put p default constructor return empti instanc public type properti factori method convert link properti instanc instanc type properti need param p properti convert return type properti object return empti type properti instanc p null public static type properti type properti properti p p instanceof type properti return type properti p return new type properti p public int get int properti string key int default valu return get int properti key default valu fals public int get int properti string key int default valu boolean string replac string valu get properti key valu null return default valu valu valu trim valu length return default valu string replac valu string properti replac replac properti valu tri return integ pars int valu catch number format except nfe log unabl convert string properti int valu default valu return default valu public long get long properti string key long default valu return get long properti key default valu fals public long get long properti string key long default valu boolean string replac string valu get properti key valu null return default valu valu valu trim valu length return default valu string replac valu string properti replac replac properti valu tri return long pars long valu catch number format except nfe log unabl convert string properti long valu default valu return default valu public boolean get boolean properti string key boolean default valu return get boolean properti key default valu fals public boolean get boolean properti string key boolean default valu boolean string replac string valu get properti key valu null return default valu valu valu trim valu length return default valu string replac valu string properti replac replac properti valu tri return boolean pars boolean valu catch except e log unabl convert string properti boolean valu default valu return default valu public extend enum get enum properti string key class enum class default valu return get enum properti key enum class default valu fals public extend enum get enum properti string key class enum class default valu boolean string replac string valu get properti key valu null return default valu valu valu trim valu length return default valu string replac valu string properti replac replac properti valu tri return enum valu enum class valu catch illeg argument except e log unabl convert string properti enum valu default valu name return default valu get properti associ key option appli string properti replac defin link string properti replac replac properti result param key hashtabl key param default valu default valu param string replac boolean indic whether appli string properti replac return valu properti list specifi key valu option inspect string properti replac public string get properti string key string default valu boolean string replac string replac return string properti replac replac properti get properti key default valu els return get properti key default valu overrid public synchron type properti set properti string key string valu super set properti key valu return 
packag org contain offheap import java util concurr atom atom long import java util function long unari oper import org factori annot inject import org util log log import org util log log factori import sun misc unsaf memori alloc alloc memori directli use link unsaf author wburn sinc public class unpool heap memori alloc implement heap memori alloc privat static final log log log factori get log unpool heap memori alloc class log class privat static final boolean trace log trace enabl privat final atom long amount alloc new atom long privat long unari oper size calcul inject public void inject heap entri factori heap entri factori size calcul heap entri factori get size overrid public long alloc long memori length long memori locat heap memori alloc memori length long current size amount alloc add get memori length trace log tracef alloc heap memori x x byte total size memori locat memori length current size return memori locat overrid public void dealloc long memori address dealloc memori address size calcul appli long memori address overrid public void dealloc long memori address long size long current size amount alloc add get size trace log tracef dealloc heap memori x x byte total size memori address size current size heap memori free memori address overrid public long get alloc amount return amount alloc get 
packag org configur cach import java util map import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set control certain tune paramet may break public contract exchang good perform case p use care thoroughli read understand document specif featur p see unsaf configur builder public class unsaf configur public static final attribut definit boolean attribut definit builder unreli return valu fals immut build static attribut set attribut definit set return new attribut set unsaf configur class privat final attribut boolean unreli return valu privat final attribut set attribut unsaf configur attribut set attribut attribut attribut check protect unreli return valu attribut attribut specifi whether allow disregard link map contract provid return valu link org cach put object object link org cach remov object method public boolean unreli return valu return unreli return valu get public attribut set attribut return attribut overrid public string string return attribut string overrid public boolean equal object unsaf configur unsaf configur return attribut equal attribut overrid public int hash code return attribut hash code 
packag org configur cach import static org configur cach unsaf configur import java util map import org common configur builder import org common configur attribut attribut set import org configur global global configur control certain tune paramet may break public contract exchang good perform case p use care thoroughli read understand document specif featur p public class unsaf configur builder extend abstract configur child builder implement builder unsaf configur privat final attribut set attribut protect unsaf configur builder configur builder builder super builder attribut unsaf configur attribut definit set specifi whether allow disregard link map contract provid return valu link org cach put object object link org cach remov object method p provid return valu expens may entail read disk across network usag method never make use return valu allow unreli return valu help optim away remot call disk read p param allow unreli return valu true return valu method describ reli public unsaf configur builder unreli return valu boolean allow unreli return valu attribut attribut set allow unreli return valu return overrid public void valid noth valid overrid public void valid global configur global config overrid public unsaf configur creat return new unsaf configur attribut protect overrid public unsaf configur builder read unsaf configur templat attribut read templat attribut return overrid public string string return get class get simpl name attribut 
packag org contain offheap import java lang reflect field import java secur access control import java secur privileg action import org common cach except import sun misc unsaf author wburn sinc class unsaf holder static unsaf unsaf holder get unsaf suppress warn restrict privat static unsaf get unsaf attempt access field unsaf unsaf final object mayb unsaf access control privileg privileg action object tri final field unsaf field unsaf class get declar field unsaf unsaf field set access true unsaf instanc return unsaf field get null catch field except secur except illeg access except e return e mayb unsaf instanceof except throw new cach except except mayb unsaf els return unsaf mayb unsaf 
packag org remot respons import java io except import java io object input import java io object output import java util set import org common marshal abstract extern import org common util util import org marshal core id unsuccess respons author manik surtani sinc public class unsuccess respons extend valid respons public static final unsuccess respons new unsuccess respons null privat final object respons valu privat unsuccess respons object valu respons valu valu public static unsuccess respons creat object valu return valu null new unsuccess respons valu overrid public boolean success return fals public object get respons valu return respons valu overrid public string string return unsuccess respons respons valu util str respons valu overrid public boolean equal object return true null get class get class return fals unsuccess respons unsuccess respons respons valu null respons valu equal respons valu respons valu null return fals return true overrid public int hash code return respons valu null respons valu hash code public static class extern extend abstract extern unsuccess respons overrid public void write object object output output unsuccess respons respons throw except output write object respons get respons valu overrid public unsuccess respons read object object input input throw except class find except return creat input read object overrid public integ get id return id overrid public set class extend unsuccess respons get type class return util class extend unsuccess respons set unsuccess respons class 
packag org remot respons import java io except import java io object input import java io object output import java util set import org common marshal abstract extern import org common util util import org marshal core id unsur respons use dist essenti ask caller check next respons next node sinc sender state flux probabl middl rebalanc author manik surtani sinc public class unsur respons extend valid respons public static final unsur respons new unsur respons overrid public boolean success return fals overrid public object get respons valu throw new unsupport oper except public static class extern extend abstract extern unsur respons overrid public void write object object output output unsur respons subject throw except overrid public unsur respons read object object input input throw except class find except return overrid public integ get id return id overrid public set class extend unsur respons get type class return util class extend unsur respons set unsur respons class 
packag org common tx import javax transact statu transact relat util class author pedro ruivo sinc public class util privat util public static string transact statu string int statu switch statu case statu return case statu return case statu return case statu return case statu return case statu return case statu return case statu return case statu return case statu return default return unknown statu statu 
packag org cli command server import org cli context import org cli command process command import org kohsuk meta inf servic meta inf servic org cli command command class public class version extend abstract server command overrid public string get name return version overrid public int nest return overrid public boolean avail context context return true overrid public void execut context context process command command line context println client version version class get packag get implement version context connect super execut context command line 
packag org configur cach import org common configur attribut attribut import org common configur attribut attribut definit import org common configur attribut attribut set configur element control whether entri version version necessari exampl use optimist transact cluster environ abl perform write skew check deprec sinc automat enabl version need deprec public class version configur public static final attribut definit boolean attribut definit builder enabl true immut auto persist fals build public static final attribut definit version scheme attribut definit builder scheme version scheme immut build static attribut set attribut definit set return new attribut set version configur class privat final attribut boolean enabl privat final attribut version scheme scheme privat final attribut set attribut version configur attribut set attribut attribut attribut check protect enabl attribut attribut scheme attribut attribut public boolean enabl return enabl get public version scheme scheme return scheme get overrid public boolean equal object version configur version configur return attribut equal attribut overrid public int hash code return attribut hash code overrid public string string return attribut string public attribut set attribut return attribut 
packag org common marshal import java io except import java io object input import java io object output import java util array import java util collect import java util set import org common util util simpl wrapper around byte provid equal hash code semant author wburn sinc public class wrap byte array implement wrap byte privat final byte byte privat transient int hash code public wrap byte array byte byte byte byte hash code array hash code byte public wrap byte array byte byte int hash code byte byte hash code hash code overrid public byte get byte return byte overrid public int back array offset return overrid public int get length return byte length overrid public byte get byte int offset return byte offset overrid public boolean equal object return true null return fals class class get class get class class return wrap byte class assign class equal wrap byte wrap byte wrap byte array wrap byte array return array equal byte byte public boolean equal wrap byte wrap byte int length get length get length length return fals hash code hash code return fals int length get byte get byte return fals return true overrid public int hash code return hash code overrid public string string return wrap byte array byte util print array byte hash code hash code public static class extern extend abstract extern wrap byte array overrid public set class extend wrap byte array get type class return collect singleton wrap byte array class overrid public integ get id return id overrid public void write object object output output wrap byte array object throw except marshal util marshal byte array object byte output overrid public wrap byte array read object object input input throw except class find except byte byte marshal util unmarshal byte array input return new wrap byte array byte 
packag org command write import java util collect import org command flag affect command import org command topolog affect command import org command visit command command modifi cach way author manik surtani sinc public interfac write command extend visit command flag affect command topolog affect command command may want provid inform whether command success differ failur usual would result except throw exampl put absent anyth key question present would result success call return fals return true command complet success fals otherwis boolean success certain command work base certain condit state cach exampl link org cach put absent object object anyth condit meet e entri question alreadi present method test whether command question condit return true command condit fals otherwis boolean condit return current valu match polici valu matcher get valu matcher param valu matcher new valu match polici void set valu matcher valu matcher valu matcher return collect key affect write command command clear command may return empti collect method collect get affect key use condit command updat statu command origin base result execut primari owner deprec sinc deprec default void updat statu remot respons object remot respons make subsequ invoc link success return code fals code void fail indic whether command write mean make attempt read previous associ valu key command direct return true command write fals otherwis default boolean write return fals 
packag org transact xa import java util concurr concurr map import javax transact transact import javax transact xa except import javax transact xa xid import org cach import org common cach except import org common tx xid impl import org common util collect factori import org configur cach configur import org factori annot inject import org factori annot start import org transact impl local transact import org transact impl transact tabl import org transact xa recoveri recoveri manag import org util log log import org util log log factori link transact tabl use link transact xa adapt author mircea marku jboss com sinc public class xa transact tabl extend transact tabl privat static final log log log factori get log xa transact tabl class privat static final boolean trace log trace enabl protect concurr map xid local xa transact xid local tx protect recoveri manag recoveri manag privat string cach name privat boolean one phase total order inject public void init recoveri manag recoveri manag cach cach recoveri manag recoveri manag cach name cach get name start prioriti start cach loader manag suppress warn unus public void start xid map distribut mode write skew check allow phase one phase total order configur one phase total order commit configur final int concurr level configur lock concurr level xid local tx collect factori make concurr map concurr level f concurr level overrid public boolean remov local transact local transact local tx boolean result fals local tx get transact null null forc invoc recoveri perhap remot node result super remov local transact local tx remov xid tx map local xa transact local tx return result privat void remov xid tx map local xa transact local tx final xid xid local tx get xid xid null xid local tx remov xid public local xa transact get local transact xid xid return xid local tx get xid privat void add local transact map local xa transact local transact local transact get xid null throw new illeg state except initi xid first xid local tx put local transact get xid local transact overrid public void enlist transact transact local transact ltx local xa transact local transact local xa transact ltx local transact enlist make sure enlist tri transact enlist resourc new transact xa adapt local transact catch except e xid xid local transact get xid xid null local transact get look entri empti log debug attempt rollback clear stale resourc tri tx coordin rollback local transact catch except xae log debug catch except attempt clean xid xa log fail enlist transact xa adapt e throw new cach except e overrid public int get local tx count return xid local tx size public int prepar xid extern xid throw except xid xid convert xid extern xid local xa transact local transact get local transact valid xid return tx coordin prepar local transact public void commit xid extern xid boolean one phase throw except xid xid convert xid extern xid local xa transact local transact get local transact valid xid boolean commit one phase one phase one phase total order commit one phase tx coordin commit local transact true els one phase one phase true mean particip distribut transact optim run though run high chanc leav cluster inconsist state tx coordin prepar local transact commit one phase tx coordin commit local transact fals els commit one phase tx coordin commit local transact fals forget success complet transact recoveri manag local transact get xid local transact commit one phase void rollback xid extern xid throw except xid xid convert xid extern xid local xa transact local transact get local transact valid xid local transact mark rollback true make sure lock long associ transact tx coordin rollback local transact convers recoveri enabl privat xid convert xid xid extern xid recoveri enabl return xid impl copi extern xid els return extern xid void start xid extern xid local xa transact local transact xid xid convert xid extern xid transform intern format order abl serial local transact set xid xid add local transact map local transact trace log tracef start call tx local transact get global transact void end local xa transact local transact trace log tracef end call tx local transact get global transact cach name void forget xid extern xid throw except xid xid convert xid extern xid trace log tracef forget call xid xid tri recoveri enabl recoveri manag remov recoveri inform null xid true null fals els trace log trace recoveri enabl catch except e log warn except remov recoveri e except xe new except except xe init caus e throw xe boolean recoveri enabl return recoveri manag null privat void forget success complet transact recoveri manag recoveri manag xid xid local xa transact local transact boolean commit one phase final global transact gtx local transact get global transact recoveri enabl recoveri manag remov recoveri inform local transact get remot lock acquir xid fals gtx partit handl manag transact partial commit gtx remov local transact local transact els releas lock complet transact local transact commit one phase privat local xa transact get local transact valid xid xid throw except local xa transact local transact get local transact xid local transact null trace log tracef tx find xid throw new except except return local transact 
packag org configur pars import java util array dequ import java util dequ import javax xml namespac namespac context import javax xml namespac name import javax xml stream locat import javax xml stream stream except import javax xml stream stream reader author href mailto david lloyd redhat com david lloyd author tristan tarrant sinc final class extend stream reader impl implement extend stream reader privat final namespac map parser parser privat final stream reader stream reader privat final dequ context stack new array dequ context privat schema schema extend stream reader impl final namespac map parser parser final stream reader stream reader parser parser stream reader stream reader stack push new context overrid public void handl final configur builder holder holder throw stream except requir null null boolean ok fals tri final dequ context stack stack stack push new context tri parser pars element holder final stack pop ok true final ok safe close overrid public object get properti final string name throw illeg argument except return stream reader get properti name overrid public int next throw stream except final context context stack get first context depth final int next stream reader next next context depth els next context depth return next els tri throw read past end get locat final safe close overrid public void requir final int type final string namespac final string local name throw stream except stream reader requir type namespac local name overrid public string get element text throw stream except return stream reader get element text trim overrid public int next tag throw stream except final context context stack get first context depth final int next stream reader next tag next context depth els next context depth return next els tri throw read past end get locat final safe close overrid public boolean next throw stream except return stack get first depth stream reader next overrid public void close throw stream except throw new unsupport oper except overrid public string get namespac final string prefix return stream reader get namespac prefix overrid public boolean start element return stream reader start element overrid public boolean end element return stream reader end element overrid public boolean charact return stream reader charact overrid public boolean white space return stream reader white space overrid public string get attribut valu final string namespac final string local name return stream reader get attribut valu namespac local name overrid public int get attribut count return stream reader get attribut count overrid public name get attribut name final int index return stream reader get attribut name index overrid public string get attribut namespac final int index return stream reader get attribut namespac index overrid public string get attribut local name final int index return stream reader get attribut local name index overrid public string get attribut prefix final int index return stream reader get attribut prefix index overrid public string get attribut type final int index return stream reader get attribut type index overrid public string get attribut valu final int index return stream reader get attribut valu index overrid public boolean attribut specifi final int index return stream reader attribut specifi index overrid public int get namespac count return stream reader get namespac count overrid public string get namespac prefix final int index return stream reader get namespac prefix index overrid public string get namespac final int index return stream reader get namespac index overrid public namespac context get namespac context return stream reader get namespac context overrid public int get event type return stream reader get event type overrid public string get text return stream reader get text overrid public char get text charact return stream reader get text charact overrid public int get text charact final int sourc start final char target final int target start final int length throw stream except return stream reader get text charact sourc start target target start length overrid public int get text start return stream reader get text start overrid public int get text length return stream reader get text length overrid public string get encod return stream reader get encod overrid public boolean text return stream reader text overrid public locat get locat return stream reader get locat overrid public name get name return stream reader get name overrid public string get local name return stream reader get local name overrid public boolean name return stream reader name overrid public string get namespac return stream reader get namespac overrid public string get prefix return stream reader get prefix overrid public string get version return stream reader get version overrid public boolean standalon return stream reader standalon overrid public boolean standalon set return stream reader standalon set overrid public string get charact encod scheme return stream reader get charact encod scheme overrid public string get target return stream reader get target overrid public string get datum return stream reader get datum overrid public string get list attribut valu int return get attribut valu split overrid public schema get schema return schema overrid public void set schema schema schema schema schema privat member privat static final class context int depth privat void safe close tri stream reader close catch except e ignor privat static stream except read past end final locat locat return new stream except attempt read past end element locat 
packag org xsite statetransf import static org context flag import static org context flag import static org context flag import static org context flag import java util concurr atom atom refer import javax transact transact manag import org command command factori import org command write put key valu command import org common cach except import org common util enum util import org context flag import org context invoc context import org context invoc context factori import org context singl key non tx invoc context import org context impl tx invoc context import org factori annot inject import org interceptor async interceptor chain import org statetransf commit manag import org util log log import org util log log factori contain logic need consum state send site author pedro ruivo sinc public class site state consum impl implement site state consum privat static final long enum util bit set privat static final log log log factori get log site state consum impl class privat static final boolean trace log trace enabl privat static final boolean debug log debug enabl privat transact manag transact manag privat invoc context factori invoc context factori privat command factori command factori privat async interceptor chain interceptor chain privat commit manag commit manag privat atom refer string send site new atom refer null inject public void inject transact manag transact manag invoc context factori invoc context factori command factori command factori async interceptor chain interceptor chain commit manag commit manag transact manag transact manag invoc context factori invoc context factori command factori command factori interceptor chain interceptor chain commit manag commit manag overrid public void start state transfer string send site debug log debugf start state transfer receiv send site send site compar set null send site commit manag start track flag els throw new cach except alreadi receiv state send site get overrid public void end state transfer string send site debug log debugf end state transfer send site string current send site send site get send site null send site equal current send site send site set null commit manag stop track els log debug enabl log debugf receiv end request non sender site expect get current send site send site overrid public void appli state site state chunk throw except debug log debugf receiv state key chunk length transact manag null appli state transact chunk els appli state non transact chunk overrid public string get send site name return send site get privat void appli state transact site state chunk throw except tri transact manag begin invoc context ctx invoc context factori creat invoc context transact manag get transact true tx invoc context ctx get cach transact set state transfer flag site state site state chunk interceptor chain invok ctx creat put site state trace log tracef success appli key site state transact manag commit debug log debugf success appli state key insert chunk length catch except e log unabl appli site state e safe rollback throw e privat void appli state non transact site state chunk singl key non tx invoc context ctx singl key non tx invoc context invoc context factori creat singl key non tx invoc context site state site state chunk put key valu command command creat put site state ctx set lock owner command get key lock owner interceptor chain invok ctx command ctx reset state use context old context long need trace log tracef success appli key site state debug log debugf success appli state key insert chunk length privat put key valu command creat put site state state return command factori build put key valu command state key state valu state metadata privat void safe rollback tri transact manag rollback catch except e ignor debug log debug error rollback transact e 
packag org xsite statetransf import static org factori know compon name import static org persist spi advanc cach loader cach loader task import static org persist spi advanc cach loader task context import static org remot transport retri failur site command max retri polici import static org remot transport retri failur site command retri polici import static org xsite statetransf site state transfer control command state transfer control import java util array list import java util array import java util collect import java util collect import java util list import java util map import java util concurr callabl import java util concurr concurr map import java util concurr executor servic import java util concurr time unit import org command command factori import org common cach except import org common util collect factori import org configur cach backup configur import org configur cach configur import org configur cach site state transfer configur import org contain data contain import org contain entri intern cach entri import org factori annot compon name import org factori annot inject import org interceptor lock cluster depend logic import org marshal core marshal entri import org persist manag persist manag import org persist spi advanc cach loader import org remot rpc rpc manag import org remot transport address import org remot transport retri failur site command import org statetransf state transfer lock import org util concurr complet futur import org util concurr within thread executor import org util log log import org util log log factori import org xsite site backup contain logic send state anoth site author pedro ruivo sinc public class site state provid impl implement site state provid privat static final int privat static final executor servic new within thread executor privat static final log log log factori get log site state provid impl class privat static final boolean trace log trace enabl privat static final boolean debug log debug enabl privat final concurr map string state push task run state transfer privat data contain datum contain privat persist manag persist manag privat cluster depend logic cluster depend logic privat command factori command factori privat rpc manag rpc manag privat executor servic executor servic privat configur configur privat site state transfer manag state transfer manag privat state transfer lock state transfer lock public site state provid impl run state transfer collect factori make concurr map inject public void inject data contain datum contain persist manag persist manag rpc manag rpc manag cluster depend logic cluster depend logic command factori command factori compon name valu executor servic executor servic configur configur site state transfer manag x site state transfer manag state transfer lock state transfer lock datum contain datum contain persist manag persist manag cluster depend logic cluster depend logic command factori command factori rpc manag rpc manag executor servic executor servic configur configur state transfer manag x site state transfer manag state transfer lock state transfer lock overrid public void start state transfer string site name address origin int min topolog id site state transfer configur state transfer configur null backup configur backup configur configur site backup backup configur site equal site name state transfer configur backup configur state transfer break state transfer configur null throw new cach except unabl start site state transfer backup configur find site name state push task task new state push task site name origin state transfer configur min topolog id run state transfer put absent site name task null debug log debugf start state transfer site site name executor servic execut task els debug log debugf start state transfer site alreadi start site name case coordin leav command process rpc manag get address equal rpc manag get member get rpc manag get member contain origin state transfer manag becom coordin site name overrid public void cancel state transfer string site name state push task task run state transfer remov site name task null task cancel true overrid public collect string get current state send collect string send new array list run state transfer size map entri string state push task entri run state transfer entri set entri get valu finish send add entri get key return send overrid public collect string get site miss coordin collect address current member final collect string state transfer need new coordin new array list run state transfer size map entri string state push task entri run state transfer entri set current member contain entri get valu origin state transfer need new coordin add entri get key return state transfer need new coordin privat void notifi state transfer end final string site name final address origin final boolean error rpc manag get address equal origin executor servic submit callabl void tri state transfer manag notifi state push finish site name origin error catch throwabl throwabl ignor return null els site state transfer control command command command factori build site state transfer control command site name command set statu ok error rpc manag invok remot collect singleton origin command rpc manag get default rpc option fals privat boolean send key object key return cluster depend logic get cach topolog get distribut key primari privat void send share buffer site backup x site backup list site state share buffer state push task task throw throwabl share buffer size return site state privat buffer share buffer array new site state share buffer size trace log debugf send chunk site chunk contain x site backup get site name array string privat buffer els debug log debugf send chunk site chunk key x site backup get site name privat buffer length site state push command command command factori build site state push command privat buffer x site backup get timeout retri failur site command remot site retri failur site command new instanc x site backup command task retri polici remot site execut rpc manag get transport task wait time time unit privat class state push task implement runnabl privat final site backup x site backup privat final int chunk size privat final address origin privat final retri polici retri polici privat final long wait time privat final int min topolog id privat volatil boolean finish privat volatil boolean cancel privat boolean error public state push task string site name address origin site state transfer configur configur int min topolog id min topolog id min topolog id chunk size configur chunk size wait time configur wait time retri polici new max retri polici configur max retri origin origin x site backup new site backup site name true configur timeout cancel fals finish fals error fals overrid public void run tri debug log debugf site state transfer wait min topolog x site backup get site name min topolog id complet futur await state transfer lock topolog futur min topolog id final list site state chunk new array list chunk size chunk size debug log debugf site state transfer start data contain iter x site backup get site name intern cach entri ice datum contain cancel log debugf site state transfer state transfer cancel x site backup get site name return chunk size chunk size chunk size tri send share buffer x site backup chunk catch throwabl error true log unabl send site state x site backup get site name return chunk clear send key ice get key trace log tracef add key current chunk ice get key chunk add site state data contain ice cancel return chunk size tri send share buffer x site backup chunk catch throwabl error true log unabl send site state x site backup get site name return debug log debugf site state transfer finish data contain iter x site backup get site name suppress warn uncheck advanc cach loader object object st provid persist manag get state transfer provid st provid null debug log debugf site state transfer start persist iter x site backup get site name state transfer cach loader task task new state transfer cach loader task x site backup chunk tri st provid process k send key k datum contain contain key k task true true cancel log debugf site state transfer state transfer cancel x site backup get site name return task send remain state catch cach except e error true log fail load key cach store e return catch throwabl error true log unabl send site state x site backup get site name return debug log debugf site state transfer finish persist iter x site backup get site name els debug log debugf site state transfer skip persist iter x site backup get site name catch throwabl e error true log unabl send site state x site backup get site name e final finish true log debugf site state transfer state transfer finish x site backup get site name cancel notifi state transfer end x site backup get site name origin error overrid public string string return state push task origin origin cancel cancel privat class state transfer cach loader task implement cach loader task object object privat final list site state chunk privat final site backup x site backup privat final state push task task privat state transfer cach loader task site backup x site backup list site state chunk state push task task x site backup x site backup chunk chunk task task overrid public void process entri marshal entri object object marshal entri task context task context throw interrupt except task cancel task context stop log debugf site state transfer state transfer cancel x site backup get site name return task chunk size chunk size task chunk size tri send share buffer x site backup chunk task catch throwabl log unabl send site state x site backup get site name task context stop chunk clear chunk add site state cach loader marshal entri public void send remain state throw throwabl chunk size send share buffer x site backup chunk task 
