package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import edu ncsu csc Util import edu ncsu csc dao Factory import edu ncsu csc exception Exception Access queries related authorization stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Access private Factory factory typical constructor param factory link Factory associated used obtaining connections etc public Access Factory factory factory factory Returns number minutes would take session time done effectively using database table hash table row Global Variables exist one inserted default value return int number minutes throws Exception public int get Session Timeout Mins throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Value Global Variables Name Timeout Result Set rs ps execute Query rs next return rs get Int Value else insert Default Timeout conn return catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Sets number minutes would take session timeout param mins int specifying number minutes throws Exception public void set Session Timeout Mins int mins throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Global Variables Value Name Timeout ps set Int mins int num Updated ps execute Update num Updated value table insert Default Timeout conn mins catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps private void insert Default Timeout Connection conn int mins throws Exception Prepared Statement ps null ps conn prepare Statement Global Variables Name Value Timeout ps set Int mins ps execute Update
package edu ncsu csc action import edu ncsu csc Random Password import edu ncsu csc beans Personnel Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc dao mysql Personnel import edu ncsu csc enums Role import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Add Personnel Validator Used Add Personnel page add Personnel jsp adds empty creates random password similar link Add Office Visit Action link Add Patient Action author Andy Meneely public class Add Action private Personnel personnel private Auth auth Sets defaults class param factory factory creating defaults param logged person currently logged author Andy Meneely public Add Action Factory factory long logged personnel factory get Personnel auth factory get Auth Adds new user Event logged param p bean containing information new user return new user throws Form Validation Exception throws Trust Exception public long add Personnel Bean p throws Form Validation Exception Trust Exception new Add Personnel Validator validate p long new personnel add Empty Personnel Role p set new personnel edit Personnel p String pwd auth add User new Role Random Password get Random Password p set Password pwd return new
package edu ncsu csc action import edu ncsu csc Random Password import edu ncsu csc beans Patient Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Auth import edu ncsu csc enums Role import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc validate Add Patient Validator Used Add Patient page add Patient jsp adds empty patient creates random password patient similar link Add Office Visit Action author Andy Meneely public class Add Patient Action private Patient patient private Auth auth private long logged factory logged param factory param logged public Add Patient Action Factory factory long logged patient factory get Patient logged logged auth factory get Auth Creates new patient returns new Adds new user table along random password return new patient throws Exception throws Form Validation Exception public long add Patient Patient Bean p throws Exception Form Validation Exception new Add Patient Validator validate p long new patient add Empty Patient p set new String pwd auth add User new Role Random Password get Random Password p set Password pwd patient edit Patient p logged return new
package edu ncsu csc validate import edu ncsu csc action Add Patient Action import edu ncsu csc beans Patient Bean import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception validator used link Add Patient Action checks first name last name email author Andy public class Add Patient Validator extends Bean Validator Patient Bean default constructor public Add Patient Validator Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Patient Bean p throws Form Validation Exception Error List error List new Error List error List add Null check Format First name p get First Name Validation Format false error List add Null check Format Last name p get Last Name Validation Format false error List add Null check Format Email p get Email Validation Format false error List Errors throw new Form Validation Exception error List
package edu ncsu csc validate import edu ncsu csc action Add Patient Action import edu ncsu csc beans Personnel Bean import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception validator used link Add Patient Action checks first name last name email author Andy public class Add Personnel Validator extends Bean Validator Personnel Bean default constructor public Add Personnel Validator Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Personnel Bean p throws Form Validation Exception Error List error List new Error List error List add Null check Format First name p get First Name Validation Format false error List add Null check Format Last name p get Last Name Validation Format false error List add Null check Format Email p get Email Validation Format false error List Errors throw new Form Validation Exception error List
package edu ncsu csc action import java util List import edu ncsu csc beans Remote Monitoring Data Bean import edu ncsu csc beans Telemedicine Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc dao mysql Remote Monitoring import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Remote Monitoring Data Bean Validator Handles adding remote monitoring patient data database public class Add Remote Monitoring Data Action private Remote Monitoring Data Bean Validator validator new Remote Monitoring Data Bean Validator private Remote Monitoring rm private Auth auth private long logged private long patient Constructor param factory Factory used create Os used action param logged person recording patient data param patient patient public Add Remote Monitoring Data Action Factory factory long logged long patient logged logged rm factory get Remote Monitoring auth factory get Auth patient patient public List Telemedicine Bean get Telemedicine Bean long patient throws Exception return rm get Telemedicine Bean patient Adds patient telemedicine data database param weight param pedometer Reading throws Exception public void add Remote Monitoring Data Remote Monitoring Data Bean rmd Bean throws Exception Form Validation Exception Trust Exception validator validate rmd Bean String role logged patient role self reported else auth get User Role logged get User Roles String equals uap role case manager else role patient representative Store rm store Patient Data patient rmd Bean role logged returns patient name return patient name throws Exception throws Trust Exception public String get Patient Name long pid throws Exception Trust Exception return auth get User Name pid
package edu ncsu csc action import edu ncsu csc Random Password import edu ncsu csc beans Personnel Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc dao mysql Personnel import edu ncsu csc enums Role import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Add Personnel Validator Used Add Personnel page add Personnel jsp adds empty creates random password similar link Add Office Visit Action link Add Patient Action author Andy Meneely public class Add Action private Personnel personnel private Auth auth Sets defaults class param factory factory creating defaults param logged person currently logged author Andy Meneely public Add Action Factory factory long logged personnel factory get Personnel auth factory get Auth Adds new user Event logged param p bean containing information new user return new user throws Form Validation Exception throws Trust Exception public long add Personnel Bean p throws Form Validation Exception Trust Exception new Add Personnel Validator validate p long new personnel add Empty Personnel Role p set new personnel edit Personnel p String pwd auth add User new Role Random Password get Random Password p set Password pwd return new
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java text Parse Exception import java text Simple Date Format import java util Date import java util List import edu ncsu csc Util import edu ncsu csc beans Adverse Event Bean import edu ncsu csc beans loaders Adverse Event Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception import java sql Timestamp Used logging mechanism stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Adverse Event private Factory factory private Adverse Event Bean Loader ae Loader typical constructor param factory link Factory associated used obtaining connections etc public Adverse Event Factory factory factory factory ae Loader new Adverse Event Bean Loader Gets adverse event reports certain user param mid user looked return java util List Adverse Event Beans throws Exception throws Exception public List Adverse Event Bean get Reports long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Adverse Events Patient ps set Long mid Result Set rs ps execute Query List Adverse Event Bean ae List ae Loader load List rs return ae List catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds message database param Bean bean representing message added throws Exception throws Exception public void add Report Adverse Event Bean ae Bean long hcpmid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Adverse Events Patient Pres Immu Code Comment Prescriber Status ps set String ae Bean get ps set String ae Bean get Drug ps set String ae Bean get Code ps set String ae Bean get Description ps set Long hcpmid ps set String Active ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public long get int id throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Adverse Events id ps set Int id Result Set rs ps execute Query long hcp rs next hcp rs get Long Prescriber return hcp catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public Adverse Event Bean get Report int id throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Adverse Events id ps set Int id Result Set rs ps execute Query List Adverse Event Bean ae List ae Loader load List rs return ae List get catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public long remove Report int id throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Adverse Events Status id String removed removed ps set String removed ps set Int id ps execute Update long Util get Last Insert conn return catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public List Adverse Event Bean get Unremoved Adverse Events Code String code throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement adverseevents code status ps set String code ps set String Active Result Set rs rs ps execute Query return ae Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public String get Name Code String code throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Pres Immu adverseevents code ps set String code Result Set rs rs ps execute Query rs next return rs get String Pres Immu return Name Found catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public List Adverse Event Bean get Perscriptions String start String end throws Parse Exception Exception Connection conn null Prepared Statement ps null try Simple Date Format fmt new Simple Date Format dd yyy Date beginning fmt parse start Date ending fmt parse end conn factory get Connection Codes Code Adverse Events Code ps conn prepare Statement Adverse Events Codes Adverse Events Time Logged Adverse Events Time Logged Codes Code Adverse Events Code Adverse Events Code Adverse Events Time Logged ps set Timestamp new Timestamp beginning get Time ps set Timestamp new Timestamp ending get Time Result Set rs ps execute Query List Adverse Event Bean ae List ae Loader load List rs return ae List catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public List Adverse Event Bean get Immunizations String start String end throws Parse Exception Exception Connection conn null Prepared Statement ps null try Simple Date Format fmt new Simple Date Format dd yyy Date beginning fmt parse start Date ending fmt parse end conn factory get Connection Codes Code Adverse Events Code ps conn prepare Statement Adverse Events Codes Adverse Events Time Logged Adverse Events Time Logged Codes Code Adverse Events Code Adverse Events Code Adverse Events Time Logged ps set Timestamp new Timestamp beginning get Time ps set Timestamp new Timestamp ending get Time Result Set rs ps execute Query List Adverse Event Bean ae List ae Loader load List rs return ae List catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Allergy Bean import edu ncsu csc beans loaders Allergy Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Allergy private Factory factory private Allergy Bean Loader allergy Bean Loader new Allergy Bean Loader typical constructor param factory link Factory associated used obtaining connections etc public Allergy Factory factory factory factory Returns list patient allergies param pid long patient looking return java util List Allergy Beans associated patient throws Exception public List Allergy Bean get Allergies long pid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Allergies Patient First Found ps set Long pid Result Set rs ps execute Query return allergy Bean Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds allergy patient list param pid patient whose allergy adding param description name allergen throws Exception public void add Allergy long pid String description throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Allergies Patient Description ps set Long pid ps set String description ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
taglib prefix uri tags tld page error Page auth exception Handler jsp page import edu ncsu csc beans Personnel Bean page import edu ncsu csc Bean Builder page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc action Add Action page import edu ncsu csc enums Role include file global jsp page Title Trust Add include file header jsp boolean form Filled request get Parameter form Filled null request get Parameter form Filled equals true form Filled page actually page adds user forwards Personnel Bean p new Bean Builder Personnel Bean build request get Parameter Map new Personnel Bean p set Role Role try long new new Add Action prod logged long Value add p session set Attribute mid Long String new String fullname String password password p get Password fullname p get Full Name logging Action log Event Transaction Type logged long Value new div align center span class Trust Message New String Escape Utils escape Html fullname successfully added span br br table class f Table tr th colspan New Information th tr tr td class sub Header Vertical td td String Escape Utils escape Html new td tr tr td class sub Header Vertical Temporary Password td td String Escape Utils escape Html password td tr table br Please get information b String Escape Utils escape Html fullname b p href Trust auth staff edit Personnel jsp Continue personnel information p div catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div div align center p style width text align left Please enter name new valid email address user email address use hospital email address insert pre defined email recover password p form action add jsp method post input type hidden name form Filled value true br table class f Table tr th colspan Information th tr tr td class sub Header Vertical First name td td input type text name first Name td tr tr td class sub Header Vertical Last Name td td input type text name last Name tr tr td class sub Header Vertical Email td td input type text name email td tr td class sub Header Vertical Specialty td td select name specialty option value general physician General Physician option option value heart surgeon Heart Surgeon option option value ob gyn option option value pediatrician Pediatrician option option value surgeon Surgeon option tr table br input type submit style font size pt font weight bold value Add personnel br form div include file footer jsp
page error Page auth exception Handler jsp page import edu ncsu csc dao Factory page import edu ncsu csc beans Procedure Bean page import edu ncsu csc action Update Code List Action page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc Html Encoder page import java net Encoder page import java util List include file global jsp page Title Trust Maintain Codes include file header jsp String header Message Viewing Current Procedure Codes Update Code List Action cpt Updater new Update Code List Action prod logged long Value String attribute null request get Parameter add null request get Parameter update null try null request get Parameter attribute attribute new String immunization Procedure Bean proc new Procedure Bean request get Parameter code request get Parameter description attribute header Message request get Parameter add null cpt Updater add Code proc cpt Updater update Information proc header Message contains Error null request get Parameter attribute request get Parameter add null logging Action log Event Transaction Type logged request get Parameter code else logging Action log Event Transaction Type logged request get Parameter code else request get Parameter add null logging Action log Event Transaction Type logged request get Parameter code else request get Parameter update null logging Action log Event Transaction Type logged request get Parameter code catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div header Message Validation Errors else logging Action log Event Transaction Type logged logging Action log Event Transaction Type logged String header Color header Message index Error ffcccc script type text javascript function fill Update code document get Element Id code value code document get Element Id description value unescape document get Element Id code value document get Element Id old Descrip value unescape document get Element Id code value immunization document get Element Id code value document get Element Id attribute checked checked else document get Element Id attribute checked script div align center br span class Trust Message String Escape Utils escape Html header Message span br br form name main Form action edit Procedure Codes jsp method post input type hidden id update name update value input type hidden id old Descrip name old Descrip value table class f Table align center tr td colspan Update Procedure Code List td tr tr class sub Header td Code td td Description td td Immunization td tr tr td input type text name code id code size maxlength td td input type text name description id description size maxlength td td input type checkbox name attribute id attribute value yes td tr table input type submit name add value Add Code input type submit name update value Update Code br br table class f Table align center tr th colspan Current Procedure Codes th tr tr class sub Header td Code td td Description td td Immunization td tr List Procedure Bean code List prod get Codes get Codes String temp Code String temp Descrip String escaped Descrip String temp Class Procedure Bean code Entry code List temp Code code Entry get Code temp Descrip code Entry get Description temp Class code Entry get Attribute escaped Descrip Encoder encode temp Descrip replace tr td String Escape Utils escape Html temp Code td td href javascript void onclick fill Update temp Code Html Encoder encode temp Descrip input type hidden id String Escape Utils escape Html temp Code name String Escape Utils escape Html temp Code value escaped Descrip input type hidden id String Escape Utils escape Html temp Code name String Escape Utils escape Html temp Code value temp Class td td String Escape Utils escape Html immunization equals code Entry get Attribute Yes td tr table form div br include file footer jsp
page import java net Encoder page import java util List page import edu ncsu csc dao Factory page import edu ncsu csc beans Diagnosis Bean page import edu ncsu csc action Update Code List Action page import edu ncsu csc exception Form Validation Exception page error Page auth exception Handler jsp include file global jsp page Title Trust Maintain Codes include file header jsp String header Message Viewing Current Codes Update Code List Action icd Updater new Update Code List Action prod logged long Value request get Parameter add null request get Parameter update null try Diagnosis Bean diag new Diagnosis Bean request get Parameter code request get Parameter description request get Parameter classification header Message request get Parameter add null icd Updater add Code diag icd Updater update Information diag header Message contains Error request get Parameter add null logging Action log Event Transaction Type logged request get Parameter code else request get Parameter update null logging Action log Event Transaction Type logged request get Parameter code catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div header Message Validation Errors else logging Action log Event Transaction Type logged String header Color header Message index Error ffcccc div align center form name main Form method post input type hidden id update name update value input type hidden id old Descrip name old Descrip value script type text javascript function fill Update code document get Element Id code value code document get Element Id description value unescape document get Element Id code value yes document get Element Id code value document get Element Id classification checked checked else document get Element Id classification checked script br span class Trust Message String Escape Utils escape Html header Message span br br table class f Table align center tr th colspan Update Code List th tr tr class sub Header th Code th th Chronic th th Description th tr tr td input type text name code id code size maxlength td td input type checkbox name classification id classification value yes td td input type text name description id description size maxlength td tr table br input type submit name add value Add Code input type submit name update value Update Code br br table class f Table align center tr th colspan Current Codes th tr tr class sub Header th Code th th Chronic th th Description th tr List Diagnosis Bean code List prod get Codes get Codes String temp Code String temp Descrip String temp Class String escaped Descrip Diagnosis Bean code Entry code List temp Code code Entry get Code temp Descrip code Entry get Description temp Class code Entry get Classification escaped Descrip Encoder encode temp Descrip replace tr td align center String Escape Utils escape Html temp Code td td align center String Escape Utils escape Html temp Class td td align center href javascript void onclick fill Update String Escape Utils escape Html temp Code String Escape Utils escape Html temp Descrip input type hidden id String Escape Utils escape Html temp Code name String Escape Utils escape Html temp Code value escaped Descrip input type hidden id String Escape Utils escape Html temp Code name String Escape Utils escape Html temp Code value temp Class td tr table form div br include file footer jsp
page error Page auth exception Handler jsp page import java util List page import edu ncsu csc dao Factory page import edu ncsu csc beans Cbean page import edu ncsu csc action Update Lab Proc List Action page import edu ncsu csc action Update List Action page import edu ncsu csc exception Form Validation Exception include file global jsp page Title Trust Maintain Codes include file header jsp String header Message Viewing Current Codes Update Lab Proc List Action icd Updater new Update Lab Proc List Action prod logged long Value Update List Action icd Updater new Update List Action prod logged long Value request get Parameter add null request get Parameter update null try Cbean diag new Cbean diag set Lab Procedure Code request get Parameter code diag set Component request get Parameter comp diag set Kind Property request get Parameter kop diag set Time Aspect request get Parameter time diag set System request get Parameter system diag set Scale Type request get Parameter scale diag set Method Type request get Parameter method header Message request get Parameter add null icd Updater add diag icd Updater update Information diag header Message contains Error request get Parameter add null logging Action log Event Transaction Type logged request get Parameter code else request get Parameter update null logging Action log Event Transaction Type logged request get Parameter code catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div header Message Validation Errors else logging Action log Event Transaction Type logged String header Color header Message index Error ffcccc div align center form name main Form method post input type hidden id update name update value input type hidden id old Descrip name old Descrip value script type text javascript function fill Update comp document get Element Id code value comp function fill Update comp document get Element Id comp value comp function fill Update comp document get Element Id kop value comp function fill Update comp document get Element Id time value comp function fill Update comp document get Element Id system value comp function fill Update comp document get Element Id scale value comp function fill Update comp document get Element Id method value comp script br span class Trust Message String Escape Utils escape Html header Message span br br table class f Table align center tr th colspan Update Code List th tr tr class sub Header th colspan Code th tr tr td align center colspan input type text name code id code size maxlength td tr tr class sub Header th Component th th Kind Property th th Time Aspect th tr tr td input type text name comp id comp size maxlength td td input type text name kop id kop size maxlength td td input type text name time id time size maxlength td tr tr class sub Header th System th th Scale Type th th Method Type th tr tr td input type text name system id system size maxlength td td input type text name scale id scale size maxlength td td input type text name method id method size maxlength td tr table span style font size px updating please enter original information fields want change span br br input type submit name add value Add Code input type submit name update value Update Code br br table class f Table align center tr th colspan Current Codes th tr tr class sub Header td Code td td Component td td Kind Property td td Time Aspect td td System td td Scale Type td td Method Type td tr List Cbean code List prod get get String temp Code String tempcomp String tempkop String temptime String tempsystem String tempscale String tempmethod Cbean code Entry code List temp Code code Entry get Lab Procedure Code tempcomp code Entry get Component tempkop code Entry get Kind Property temptime code Entry get Time Aspect tempsystem code Entry get System tempscale code Entry get Scale Type tempmethod code Entry get Method Type tr td href javascript void onclick fill Update String Escape Utils escape Html temp Code String Escape Utils escape Html temp Code td href javascript void onclick fill Update String Escape Utils escape Html tempcomp String Escape Utils escape Html tempcomp td href javascript void onclick fill Update String Escape Utils escape Html tempkop String Escape Utils escape Html tempkop td href javascript void onclick fill Update String Escape Utils escape Html temptime String Escape Utils escape Html temptime td href javascript void onclick fill Update String Escape Utils escape Html tempsystem String Escape Utils escape Html tempsystem td nowrap href javascript void onclick fill Update String Escape Utils escape Html tempscale String Escape Utils escape Html tempscale td nowrap href javascript void onclick fill Update String Escape Utils escape Html tempmethod String Escape Utils escape Html tempmethod tr table form div br include file footer jsp
page import java net Encoder page import java net Decoder page import java util List page import edu ncsu csc action Drug Interaction Action page import edu ncsu csc exception Trust Exception page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc beans Medication Bean include file global jsp page Title Trust Edit Code Interactions include file header jsp String header Message Select Codes Interaction String drug String drug request get Parameter drug null request get Parameter drug null drug request get Parameter drug split drug drug replace drug request get Parameter drug split drug drug replace request get Parameter add null try Drug Interaction Action interaction new Drug Interaction Action prod logged long Value header Message interaction report Interaction drug drug request get Parameter description header Message equals Interaction recorded successfully logging Action log Event Transaction Type logged n Drug drug n Drug drug catch Trust Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div String header Color header Message index Error ffcccc br div align center form name main Form method post span class Trust Message String Escape Utils escape Html header Message span br br table cellpadding tr td select name drug List Medication Bean med List prod get Codes get Codes String temp Code String temp Descrip String escaped Descrip Medication Bean med Entry med List temp Code med Entry get Code temp Descrip med Entry get Description escaped Descrip Encoder encode temp Descrip replace option temp Code length temp Code temp Code substring temp Code length temp Code substring String Escape Utils escape Html temp Descrip option select td td select name drug Medication Bean med Entry med List temp Code med Entry get Code temp Descrip med Entry get Description escaped Descrip Encoder encode temp Descrip replace option temp Code length temp Code temp Code substring temp Code length temp Code substring String Escape Utils escape Html temp Descrip option select td tr table b Description b input type text id description name description size maxlength br br input type submit name add value Add Interaction input type button onclick location href Trust auth admin edit Codes jsp value Back name back id back form div br include file footer jsp
page import java net Encoder page import java net Decoder page import java util List page import edu ncsu csc beans Medication Bean page import edu ncsu csc beans Drug Interaction Bean page import edu ncsu csc action Update Code List Action page import edu ncsu csc action Drug Interaction Action page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc exception Trust Exception include file global jsp page Title Trust Maintain Codes include file header jsp Update Code List Action nd Updater new Update Code List Action prod logged long Value Drug Interaction Action interaction Action new Drug Interaction Action prod logged long Value String header Message Viewing Current Codes String code request get Parameter code null request get Parameter code trim String code request get Parameter code null request get Parameter code trim String code code code request get Parameter add null request get Parameter update null request get Parameter delete null request get Parameter delete null request get Parameter import null try request get Parameter add null request get Parameter update null Medication Bean med new Medication Bean code request get Parameter description header Message request get Parameter add null nd Updater add Code med nd Updater update Information med header Message contains Error request get Parameter add null logging Action log Event Transaction Type logged code else request get Parameter update null logging Action log Event Transaction Type logged code else request get Parameter delete null code Delete interaction Action delete Interaction code request get Parameter code Delete trim header Message Interaction deleted successfully logging Action log Event Transaction Type logged n Drug code n Drug request get Parameter code Delete else request get Parameter delete null Medication Bean med new Medication Bean code request get Parameter description header Message request get Parameter delete null nd Updater remove Code med nd Updater update Information med header Message contains Error request get Parameter delete null logging Action log Event Transaction Type logged code else request get Parameter import null response send Redirect import Codes jsp forward edit Codes jsp else header Message Interaction exist catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div header Message Validation Errors catch Trust Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div header Message Validation Errors else logging Action log Event Transaction Type logged String header Color header Message index Error ffcccc br div align center form name main Form method post input type hidden id code Delete name code Delete value input type hidden id update name update value input type hidden id old Descrip name old Descrip value script type text javascript function fill Update code document get Element Id code value code substring document get Element Id code value code substring document get Element Id description value unescape document get Element Id code value document get Element Id old Descrip value unescape document get Element Id code value document get Element Id interactions inner document get Element Id int Desc inner drugs document get Element Id code value split n descs document get Element Id code value split n drugs drugs length break int Link document create Element int Link href javascript void int Link id drug Interaction add Int Desc drugs descs document int Link attach Event onclick add Int Desc Strip newline end drug code drugs drugs substring drugs length else int Link set Attribute onclick add Int Desc drugs descs var int Text drugs document get Element Id int Text value document get Element Id int Text value undefined int Text int Text unescape document get Element Id drugs value int Text int Text substring int Text substring int Link Text document create Text Node int Text int Link append Child int Link Text document get Element Id interactions append Child int Link document get Element Id interactions append Child document create Element br document get Element Id interactions append Child document create Element br document get Element Id interactions append Child document create Element br drugs length document get Element Id interactions inner Interactions document get Element Id delete style null document get Element Id delete style visibility hidden document get Element Id int Desc style visibility hidden function add Int Desc link event src Element id link link substring Get number drug Interaction link Number eval link add Int Desc drugs link Number descs link Number function add Int Desc code desc document get Element Id int Desc inner desc document get Element Id delete style visibility document get Element Id int Desc style visibility document get Element Id code Delete value code script span class Trust Message String Escape Utils escape Html header Message span br br table class f Table align left tr th colspan Current Drug Codes th tr tr class sub Header th Code th th Description th tr List Medication Bean med List prod get Codes get Codes List Drug Interaction Bean interaction List String temp Code String temp Descrip String escaped Descrip String int Drugs String String int Descs String Medication Bean med Entry med List temp Code med Entry get Code temp Descrip med Entry get Description escaped Descrip Encoder encode temp Descrip replace interaction List interaction Action get Interactions temp Code int Drugs String int Descs String Drug Interaction Bean b interaction List temp Code equals b get First Drug int Drugs String b get Second Drug n temp Code equals b get Second Drug int Drugs String b get First Drug n int Descs String b get Description n int Drugs String Encoder encode int Drugs String replace int Descs String Encoder encode int Descs String replace tr td temp Code length temp Code temp Code substring temp Code length temp Code substring td td href javascript void onclick fill Update String Escape Utils escape Html temp Code String Escape Utils escape Html temp Descrip input type hidden id String Escape Utils escape Html temp Code name String Escape Utils escape Html temp Code value String Escape Utils escape Html escaped Descrip input type hidden id String Escape Utils escape Html temp Code name String Escape Utils escape Html temp Code value String Escape Utils escape Html int Drugs String input type hidden id String Escape Utils escape Html temp Code name String Escape Utils escape Html temp Code value String Escape Utils escape Html int Descs String td tr table table class f Table align center width tr th colspan Update Add Code th tr tr class sub Header th Code th th Description th tr tr td style padding right px input type text id code name code size maxlength input type text id code name code size maxlength td td input type text id description name description size maxlength td tr tr class sub Header th Interaction th th Description th tr tr td style padding right px vertical align top id interactions Interactions td td div id int Desc style height px width px overflow scroll visibility hidden div td tr tr td input type button id edit Int name edit Int value Add Interaction onclick location href edit Interactions jsp td td input type submit value Delete Interaction name delete id delete style visibility hidden td tr table br div style padding left px input type submit name add value Add Drug input type submit name update value Update Drug input type submit name delete value Delete Drug input type submit name import id import value Import Drugs div form br br div br include file footer jsp
page error Page auth exception Handler jsp page import java net Encoder page import java util List page import edu ncsu csc page import edu ncsu csc dao Factory page import edu ncsu csc beans Hospital Bean page import edu ncsu csc action Update Hospital List Action page import edu ncsu csc exception Form Validation Exception include file global jsp page Title Trust Maintain Hospital Listing Assignments include file header jsp String header Message Current Hospital Listing Update Hospital List Action hosp Updater new Update Hospital List Action Factory get Production Instance logged request get Parameter add null request get Parameter update null Hospital Bean hosp new Bean Builder Hospital Bean build request get Parameter Map new Hospital Bean try header Message request get Parameter add null hosp Updater add Hospital hosp hosp Updater update Information hosp header Message contains Error request get Parameter add null logging Action log Event Transaction Type logged hosp get Hospital request get Parameter update null logging Action log Event Transaction Type logged hosp get Hospital catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div header Message Validation Errors else logging Action log Event Transaction Type logged String header Color header Message index Error ffcccc div align center form name main Form method post input type hidden id update name update value input type hidden id old Name name old Name value script type text javascript function fill Update id document get Element Id hospital value id document get Element Id hospital Name value unescape document get Element Id id value document get Element Id old Descrip value unescape document get Element Id id value script h Hospital Listing h span class Trust Message String Escape Utils escape Html header Message span br br table class f Table align center tr th colspan Update Hospital List th tr tr class sub Header th Hospital th th Hospital Name th tr tr td input type text name hospital id hospital size maxlength td td input type text name hospital Name id hospital Name size maxlength td tr table br input type submit name add value Add Hospital input type submit name update value Update Hospital Information br br table class f Table align center tr th colspan Current Hospitals th tr tr class sub Header th Hospital th th Hospital Name th tr List Hospital Bean hosp List Factory get Production Instance get Hospitals get Hospitals String temp String temp Name String escaped Name Hospital Bean hosp Entry hosp List temp hosp Entry get Hospital temp Name hosp Entry get Hospital Name escaped Name Encoder encode temp Name replace tr td String Escape Utils escape Html temp td td href javascript void onclick fill Update String Escape Utils escape Html temp String Escape Utils escape Html temp Name input type hidden id String Escape Utils escape Html temp name String Escape Utils escape Html temp value String Escape Utils escape Html escaped Name td tr table form div br include file footer jsp
page import edu ncsu csc action Change Session Timeout Action page error Page auth exception Handler jsp page import edu ncsu csc exception Form Validation Exception include file global jsp page Title Trust Change Session Timeout include file header jsp Change Session Timeout Action action new Change Session Timeout Action prod true equals request get Parameter form Filled try action change Session Timeout request get Parameter minutes span Session Timeout Changed Changes take place authentication span catch Form Validation Exception e e print page Context get br br form action session Timeout jsp method post input type hidden name form Filled value true Change timeout input name minutes value String Escape Utils escape Html action get Session Timeout size minutes minimum br br input type submit value Change form br br global session timeout interval time account remain inactive without authenticate br br include file footer jsp
include file global jsp page import java util List page import edu ncsu csc action Search Users Action page import edu ncsu csc beans Patient Bean page Title Trust Please Select Patient include file header jsp String uid pid request get Parameter session set Attribute pid uid pid null uid pid equals uid pid response send Redirect request get Parameter forward String first Name request get Parameter String last Name request get Parameter first Name null first Name last Name null last Name include file util get User Frame jsp form id main Form action get Patient jsp method post table tr td b Patient b td td style width px border px solid Gray input name forward type hidden value String Escape Utils escape Html request get Parameter forward input name type hidden value input name type text readonly value Select Patient td td input type button onclick get User value Find User td tr tr td align center colspan input type submit id select Patient Button value Select Patient td tr table form br table tr tr form id user Search Form action get Patient jsp forward String Escape Utils escape Html request get Parameter forward method post tr td b First Name b td td style width px border px solid Gray input name type text value String Escape Utils escape Html first Name td td b Last Name b td td style width px border px solid Gray input name type text value String Escape Utils escape Html last Name td td align center colspan input type submit value User Search td tr form table div id User Search equals first Name equals last Name Search Users Action search Action new Search Users Action prod logged long Value println Searching users named String Escape Utils escape Html first Name String Escape Utils escape Html last Name br List Patient Bean patients search Action search Patients Name first Name last Name span class search Results Found String Escape Utils escape Html patients size Records span table class fancy Table style width tr th width td th width First Name td th width Last Name td tr int index Patient Bean p patients form id select Patient String Escape Utils escape Html String value patients size action get Patient jsp forward String Escape Utils escape Html request get Parameter forward method post input type hidden name value String Escape Utils escape Html p get tr index class alt td input type submit width value String Escape Utils escape Html p get td td String Escape Utils escape Html p get First Name td td String Escape Utils escape Html p get Last Name td tr form index table div include file footer jsp
page import edu ncsu csc beans Medication Bean taglib prefix uri tags tld page error Page auth exception Handler jsp page import edu ncsu csc dao Factory page import edu ncsu csc beans Diagnosis Bean page import edu ncsu csc action Emergency Report Action page import org apache commons lang String Escape Utils page import edu ncsu csc beans Prescription Bean page import edu ncsu csc beans Allergy Bean page import edu ncsu csc beans Procedure Bean page import edu ncsu csc dao mysql Report Request page import edu ncsu csc beans Patient Bean page import edu ncsu csc dao mysql Patient page import edu ncsu csc dao mysql Personnel page import edu ncsu csc beans Personnel Bean page import edu ncsu csc beans Email page import edu ncsu csc Email Util page import java util List page import java util Array List page import java util Date page import java lang Number Format Exception page import java lang Integer page import edu ncsu csc beans Medication Bean include file global jsp page Title Trust Report String pid String null boolean print null request get Parameter print request get Parameter print equals true print Require Patient first pid String String session get Attribute pid null pid String pid String length response send Redirect Trust auth get Patient jsp forward hcp er emergency Report jsp return else session set Attribute print Pid pid String else pid String String session get Attribute print Pid null pid String pid String length response send Redirect Trust auth get Patient jsp forward hcp er emergency Report jsp return session remove Attribute print Pid patient id n check kick em exception handler Emergency Report Action action new Emergency Report Action prod logged long Value pid String take care updating information print include file print header jsp else include file header jsp print Generate report hcp patient possibly change use messages different display format hcp home screen Report Request make Report new Report Request prod Patient patients new Patient prod Patient Bean patient patients get Patient action get Pid Personnel hcps new Personnel prod List Personnel Bean peeps hcps get Personnel List String emails new Array List String Personnel Bean p peeps patients check Declared patient get p get make Report add Report Request p get patient get new Date emails add p get Email Email Email new Email Email set Body Patient patient get Full Name medical record viewed Email set Subject Patient records viewed Email set List emails Email set noreply com Email Util emailer new Email Util prod emailer send Email Email logging Action log Event Transaction Type logged Long parse Long pid String form action emergency Report jsp method post input type hidden name print id print value true input type submit value Print form ul li Name String Escape Utils escape Html action get Patient Name li li Age String Escape Utils escape Html action get Patient Age li li Gender String Escape Utils escape Html action get Patient Gender li li Emergency Contact String Escape Utils escape Html action get Patient Emergency Contact li li Allergies action get Allergies size strong allergies record strong else ul Allergy Bean bean action get Allergies String bean Desc Medication Bean Cbean prod get Codes get Code bean get Description Cbean null bean Desc bean get Description else bean Desc Cbean get Description print li String Escape Utils escape Html bean Desc String Escape Utils escape Html bean get First Found Str li ul li li Blood Type String Escape Utils escape Html action get Blood Type li li Diagnoses action get Warning Diagnoses size strong critical diagnoses record strong else ul Diagnosis Bean bean action get Warning Diagnoses print li String Escape Utils escape Html bean get Code String Escape Utils escape Html bean get Description li ul li li Prescriptions action get Current Prescriptions size strong current prescriptions record strong else ul Prescription Bean bean action get Current Prescriptions print li String Escape Utils escape Html bean get Medication get Code String Escape Utils escape Html bean get Medication get Description li ul li li Immunizations action get Immunizations size strong immunizations record strong else ul Procedure Bean bean action get Immunizations null bean get Attribute bean get Attribute equals immunization print li String Escape Utils escape Html bean get Description String Escape Utils escape Html bean get Code li ul li include file footer jsp
taglib prefix uri tags tld page error Page auth exception Handler jsp page import edu ncsu csc action Add Patient Action page import edu ncsu csc Bean Builder page import edu ncsu csc beans Patient Bean page import edu ncsu csc exception Form Validation Exception page import jsp Stub Stub auth hcp Uap add Patient include file global jsp page Title Trust Add Patient include file header jsp Stub auth hcp Uap add Patient saha new Stub auth hcp Uap add Patient saha enteradd Patient boolean form Filled request get Parameter form Filled null request get Parameter form Filled equals true form Filled page actually page adds user forwards Patient Bean p new Bean Builder Patient Bean build request get Parameter Map new Patient Bean try long new new Add Patient Action prod logged long Value add Patient p session set Attribute pid Long String new String fullname String password password p get Password fullname p get Full Name logging Action log Event Transaction Type logged long Value new saha exitadd Patient div align center span class Trust Message New patient String Escape Utils escape Html fullname successfully added span br table class f Table tr th colspan New Patient Information th tr tr td class sub Header Vertical td td String Escape Utils escape Html new td tr tr td class sub Header Vertical Temporary Password td td String Escape Utils escape Html password td tr table br Please get information b String Escape Utils escape Html fullname b p href Trust auth hcp uap edit Patient jsp Continue patient information p div catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div saha exitadd Patient div align center form action add Patient jsp method post input type hidden name form Filled value true br br div style width text align left Please enter name new patient valid email address user email address use hospital email address insert pre defined email recover password div br br table class f Table tr th colspan Patient Information th tr tr td class sub Header Vertical First name td td input type text name first Name td tr tr td class sub Header Vertical Last Name td td input type text name last Name tr tr td class sub Header Vertical Email td td input type text name email td tr table br input type submit style font size pt font weight bold value Add patient form br div include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import edu ncsu csc action Chronic Disease Risk Action page import edu ncsu csc risk Risk Checker page import edu ncsu csc risk factors Patient Risk Factor include file global jsp page Title Trust Risk Factors Chronic Diseases include file header jsp patient Nav Title Risk Factors try Require Patient first String pid String String session get Attribute pid pid String null pid String length response send Redirect Trust auth get Patient jsp forward hcp uap chronic Disease Risks jsp return else session remove Attribute pid Chronic Disease Risk Action action new Chronic Disease Risk Action prod logged long Value pid String long pid action get Patient br table class f Table align center tr th colspan Disease Risk Factors th tr List Risk Checker diseases action get Diseases Risk logging Action log Event Transaction Type logged pid diseases size Risk Checker disease diseases tr td colspan class sub Header Vertical String Escape Utils escape Html disease get Name td tr tr td style padding left px List Patient Risk Factor factors disease get Patient Risk Factors Patient Risk Factor factor factors String Escape Utils escape Html factor get Description br td tr catch Exception e tr td colspan align center Data td tr table br br br patient Nav Title Risk Factors include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import java text Decimal Format page import edu ncsu csc dao Factory page import edu ncsu csc action Edit Health History Action page import edu ncsu csc beans Health Record page import edu ncsu csc Bean Builder page import edu ncsu csc beans forms Health Record Form page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc beans Personnel Bean page import edu ncsu csc dao mysql Personnel include file global jsp page Title Trust Edit Basic Health Record include file header jsp patient Nav Title Basic Health History Require Patient first String pid String String session get Attribute pid pid String null pid String length response send Redirect Trust auth get Patient jsp forward hcp uap edit Basic Health jsp return else session remove Attribute pid Edit Health History Action action new Edit Health History Action prod logged long Value pid String long pid action get Pid String patient Name action get Patient Name String confirm true equals request get Parameter form Filled try confirm action add Health Record pid new Bean Builder Health Record Form build request get Parameter Map new Health Record Form logging Action log Event Transaction Type logged long Value pid catch Form Validation Exception e div align center span class Trust Error e print page Context get span div br List Health Record records action get Health Records pid Health Record Recent records size records get new Health Record default values script type text javascript function show Add Row document get Element Id add Row style display inline document get Element Id add Row Button style display none document forms height focus script equals confirm div align center span class Trust Message String Escape Utils escape Html confirm span div else logging Action log Event Transaction Type logged long Value pid br div align center table align center class f Table tr th colspan Basic Health History th tr tr class sub Header td Height br href Trust auth hcp uap health Data Chart jsp data Type Height id view Height Chart View Chart td td Weight br href Trust auth hcp uap health Data Chart jsp data Type Weight id view Weight Chart View Chart td td br href Trust auth hcp uap health Data Chart jsp data Type id view Bmi Chart View Chart td td Smokes td td Blood Pressure td td td td td td Triglycerides td td Total Cholesterol td td Last Recorded td td Personnel td tr weight pounds height inches height inches Health Record hr records Decimal Format df new Decimal Format String bmi String Invalid height value hr get Height bmi String df format hr get Weight hr get Height hr get Height tr td align center String Escape Utils escape Html hr get Height td td align center String Escape Utils escape Html hr get Weight lbs td td align center String Escape Utils escape Html bmi String td td align center String Escape Utils escape Html hr Smoker td td align center String Escape Utils escape Html hr get Blood Pressure mm Hg td td align center String Escape Utils escape Html hr get Cholesterol mg td td align center String Escape Utils escape Html hr get Cholesterol mg td td align center String Escape Utils escape Html hr get Cholesterol Tri mg td td align center String Escape Utils escape Html hr get Total Cholesterol mg td td align center String Escape Utils escape Html hr get Date Recorded td Personnel Bean p prod get Personnel get Personnel hr get Personnel td align center String Escape Utils escape Html p get Full Name td tr table br href javascript show Add Row id add Row Button style text decoration none input id add Row Button type button value Add Record Click show Add Row div br div id add Row style display none align center form action edit Basic Health jsp id edit Health name edit Health method post input type hidden name form Filled value true table class f Table align center tr th colspan style background color silver Record Information th tr tr td class sub Header Height td td input name height value String Escape Utils escape Html Recent get Height style width px type text maxlength td tr tr td class sub Header Weight lbs td td input name weight value String Escape Utils escape Html Recent get Weight style width px type text maxlength td tr tr td class sub Header Smoker td td select name Smoker id Smoker style font size px option value Please Select Smoking Status option option value Current every day smoker option option value Current day smoker option option value Former smoker option option value Never smoker option option value Smoker current status unknown option option value Unknown ever smoked option select td tr tr td class sub Header Blood Pressure mm Hg td td input name blood Pressure value String Escape Utils escape Html Recent get Blood Pressure style width px maxlength type text input name blood Pressure value String Escape Utils escape Html Recent get Blood Pressure style width px maxlength type text td tr tr td class sub Header Cholesterol mg td td table tr td style text align right td td input name cholesterol value String Escape Utils escape Html Recent get Cholesterol style width px maxlength type text td tr tr td style text align right td td input name cholesterol value String Escape Utils escape Html Recent get Cholesterol style width px maxlength type text td tr tr td style text align right Tri td td input name cholesterol Tri value String Escape Utils escape Html Recent get Cholesterol Tri style width px maxlength type text td tr table td tr table br input type submit value Add Record form div br br br patient Nav Title Basic Health History include file footer jsp
taglib prefix uri tags tld page error Page auth exception Handler jsp page import java util List page import java util Map page import java text Simple Date Format page import java util Date page import edu ncsu csc Email Util page import edu ncsu csc beans Office Visit Bean page import edu ncsu csc beans Lab Procedure Bean page import edu ncsu csc beans Cbean page import edu ncsu csc dao Factory page import edu ncsu csc beans Diagnosis Bean page import edu ncsu csc beans Medication Bean page import edu ncsu csc beans Override Reason Bean page import edu ncsu csc beans Procedure Bean page import edu ncsu csc action Edit Office Visit Action page import edu ncsu csc action Add Office Visit Action page import edu ncsu csc beans forms Edit Office Visit Form page import edu ncsu csc exception Trust Exception page import edu ncsu csc beans Hospital Bean page import edu ncsu csc Bean Builder page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc beans Personnel Bean page import edu ncsu csc dao mysql Personnel page import edu ncsu csc beans Prescription Bean include file global jsp page Title Trust Document Office Visit include file header jsp boolean create Visit false String submitted Form Name request get Parameter form Name String ov String request get Parameter ov String pid String String session get Attribute pid pid String null pid String length response send Redirect Trust auth get Patient jsp forward hcp uap edit Office Visit jsp ov ov String return Edit Office Visit Action ovaction null ov String null ov String length ov String equals submitted Form Name must main Form null ovaction new Edit Office Visit Action prod logged pid String create Visit true else ovaction new Edit Office Visit Action prod logged pid String ov String String confirm String warning main Form equals submitted Form Name Office Visit Bean visit ovaction get Office Visit Edit Office Visit Form form new Bean Builder Edit Office Visit Form build request get Parameter Map new Edit Office Visit Form form set Hcp visit get Hcp form set Patient visit get Patient try confirm ovaction update Information form ov String ovaction get Ov create Visit ovaction log Office Visit Event Transaction Type create Visit false else ovaction log Office Visit Event Transaction Type catch Form Validation Exception e e print page Context get confirm Input valid else create Visit ovaction log Office Visit Event Transaction Type String disable Subforms String create Visit disabled true Office Visit Bean ovbean ovaction get Office Visit List Hospital Bean hcp Hospitals ovaction get Hospitals equals confirm false equals request get Parameter check Presc span class Trust Message Operation Canceled span else success equals confirm span class Trust Message Information Successfully Updated span else span class Trust Error String Escape Utils escape Html confirm span script type text javascript function remove type value document get Element Id type value value document forms submit function set Var var med document get Element Id add Med var med Dindex med options selected Index var med Dtxt med options med Dindex value var med Dostxt document get Element Id dosage value var med Starttxt document get Element Id start Date value var med Endtxt document get Element Id end Date value var med Insttxt document get Element Id instructions value document get Element Id test Med value med Dtxt document get Element Id med Dos value med Dostxt document get Element Id med Start value med Starttxt document get Element Id med End value med Endtxt document get Element Id med Inst value med Insttxt document forms submit function pres Cont document get Element Id check Presc value true document forms submit function pres Canc var med document get Element Id add Med var med Dindex med options selected Index var med Dtxt med options med Dindex value var med Dostxt document get Element Id dosage value var med Starttxt document get Element Id start Date value var med Endtxt document get Element Id end Date value var med Insttxt document get Element Id instructions value document get Element Id test Med value document get Element Id med Dos value document get Element Id med Start value document get Element Id med End value document get Element Id med Inst value document get Element Id check Presc value false document forms submit script form action edit Office Visit jsp method post id main Form old input type hidden name form Filled value true input type hidden name ov value String Escape Utils escape Html ovaction get Ov input type hidden id check Presc name check Presc value input type hidden id test Med name test Med value String Escape Utils escape Html request get Parameter test Med input type hidden id med Dos name med Dos value String Escape Utils escape Html request get Parameter med Dos input type hidden id med Start name med Start value String Escape Utils escape Html request get Parameter med Start input type hidden id med End name med End value String Escape Utils escape Html request get Parameter med End input type hidden id med Inst name med Inst value String Escape Utils escape Html request get Parameter med Inst form String local Html Menu div align center style margin bottom em href general General href prescriptions Prescriptions href labprocedures Lab Procedures href patient specific instructions Patient Specific Instructions href diagnoses Diagnoses href procedures Procedures href immunizations Immunizations href referrals Referrals div local Html Menu br div align center id general form action edit Office Visit jsp method post id main Form input type hidden name form Filled value true input type hidden name form Name value main Form input type hidden name ov value String Escape Utils escape Html ovaction get Ov table class f Table align center tr th colspan href class top Link Top Office Visit th tr tr td class sub Header Vertical Patient td td String Escape Utils escape Html prod get Auth get User Name ovbean get Patient td tr tr td class sub Header Vertical Date Visit td td input name visit Date value String Escape Utils escape Html ovbean get Visit Date Str input type button value Select Date onclick display Date Picker visit Date td tr tr td class sub Header Vertical Hospital td td select name hospital option value option Hospital Bean hos hcp Hospitals option value String Escape Utils escape Html hos get Hospital String Escape Utils escape Html hos get Hospital equals ovbean get Hospital selected selected String Escape Utils escape Html hos get Hospital Name option select td tr tr td class sub Header Vertical Notes td td textarea rows style width em height em font family sans serif name notes String Escape Utils escape Html ovbean get Notes textarea td tr tr td colspan align center create Visit input type submit name update id update value Create else input type submit name update id update value Update td tr table form div br br name prescriptions include file edit Prescription jsp br br name labprocedures include file edit Lab Procedure jsp br br name patient specific instructions include file edit Patient Instructions jsp br br name diagnoses include file edit Diagnosis jsp br br name procedures include file edit Procedure jsp br br name immunizations include file edit Immunization jsp br br name referrals include file edit Referral jsp br local Html Menu br br br div align center patient Nav div br include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import edu ncsu csc action View Prescription Records Action page import edu ncsu csc beans Prescription Bean page import edu ncsu csc beans Patient Bean include file global jsp page Title Trust Get Prescription Report include file header jsp patient Nav Title Prescriptions div align center h Prescription Report h String pid String String session get Attribute pid pid String null pid String length response send Redirect Trust auth get Patient jsp forward hcp uap get Prescription Report jsp return long pid Long parse Long pid String View Prescription Records Action action new View Prescription Records Action Factory get Production Instance logged Patient Bean patient action get Patient pid List Prescription Bean prescriptions action get Prescriptions Patient pid logging Action log Event Transaction Type logged pid prescriptions size prescriptions found br br br else table class f Table tr th Code th th Description th th Duration th th Prescribing th tr Prescription Bean prescription prescriptions tr td String Escape Utils escape Html prescription get Medication get Code Formatted td td String Escape Utils escape Html prescription get Medication get Description td td String Escape Utils escape Html prescription get Start Date Str String Escape Utils escape Html prescription get End Date Str td td String Escape Utils escape Html action get Prescribing Doctor prescription get Full Name td tr table div br br patient Nav Title Prescriptions include file footer jsp
taglib prefix uri tags tld page error Page auth exception Handler jsp page import edu ncsu csc action Lab Proc Action page import edu ncsu csc beans Lab Procedure Bean page import edu ncsu csc exception Form Validation Exception include file global jsp page Title Trust Update Lab Procedure include file header jsp String header Message Lab Procedure Bean lbean null long request String lpid request get Parameter lpid null lpid equals try request Long parse Long lpid lbean prod get Lab Procedure get Lab Procedure request catch Exception e e print Stack Trace Lab Proc Action action new Lab Proc Action prod logged long Value boolean form Filled request get Parameter form Filled null request get Parameter form Filled equals true form Filled page actually page adds user forwards lbean set Status request get Parameter Status lbean set Results request get Parameter Results lbean set Commentary request get Parameter Commentary try action update Procedure lbean Lab Procedure Bean bean prod get Lab Procedure get Lab Procedure request logging Action log Event Transaction Type logged long Value bean get Pid Procedure lpid br div align center span class Trust Message Information Updated Successfully span div br catch Form Validation Exception e br div align center span class Trust Error String Escape Utils escape Html e get Message span div br request get Parameter message null span class Trust Message style font size px String Escape Utils escape Html request get Parameter message span br div align center table class f Table tr th colspan Laboratory Procedures th tr tr class sub Header th Patient th th Lab Code th th Rights th th Status th th Commentary th th Results th th Office Visit th th Updated Date th tr Lab Procedure Bean bean prod get Lab Procedure get Lab Procedure request logging Action log Event Transaction Type logged long Value bean get Pid Procedure lpid tr td String Escape Utils escape Html bean get Pid td td String Escape Utils escape Html bean get Loinc td td String Escape Utils escape Html bean get Rights td td String Escape Utils escape Html bean get Status td td String Escape Utils escape Html bean get Commentary td td String Escape Utils escape Html bean get Results td td String Escape Utils escape Html bean get Ov td td String Escape Utils escape Html bean get Timestamp td tr table form action update Lab Proc jsp String Escape Utils escape Html lpid message Updated Laboratory Procedure method post input type hidden name form Filled value true br br String Escape Utils escape Html header Message br table class f Table tr th colspan Update Information th tr tr td class sub Header Vertical Status td td select name Status option value Lab Procedure Bean Transit String Escape Utils escape Html lbean Transit option option value Lab Procedure Bean Received String Escape Utils escape Html lbean Received option option value Lab Procedure Bean Testing String Escape Utils escape Html lbean Testing option option value Lab Procedure Bean Pending String Escape Utils escape Html lbean Pending option option value Lab Procedure Bean Completed String Escape Utils escape Html lbean Completed option select td tr tr td class sub Header Vertical Commentary td td textarea name Commentary textarea tr tr td class sub Header Vertical Results td td textarea name Results textarea td tr table br input type submit style font size pt font weight bold value Update div form br include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util Array List page import java util List page import edu ncsu csc beans Report Request Bean page import edu ncsu csc action View Report Requests Action page import edu ncsu csc beans Personnel Bean page import edu ncsu csc beans Patient Bean page import edu ncsu csc dao mysql Patient page import edu ncsu csc dao mysql Personnel include file global jsp page Title Trust View Report Requests include file header jsp Patient patient new Patient prod Personnel personnel new Personnel prod View Report Requests Action action new View Report Requests Action prod logged long Value String pid String String session get Attribute pid request get Parameter add null try long patient Long parse Long pid String long id action add Report Request patient logging Action log Event Transaction Type logged long Value patient Report id span Report Request Accepted span catch Exception e span String Escape Utils escape Html e get Message span else session remove Attribute pid List Report Request Bean list action get Report Requests Requester br br input type hidden name add id add table class f Table align center tr th colspan Report Requests th tr tr class sub Header td td td Patient td td Requested Date td td Viewed Date td td Status td td Action td tr List Patient Bean patients new Array List Patient Bean Patient Bean patient Personnel Bean personnel int index Report Request Bean bean list patient patient get Patient bean get Patient patients add patient tr td String Escape Utils escape Html bean get td td String Escape Utils escape Html patient get Full Name td td String Escape Utils escape Html bean get Requested Date String td td String Escape Utils escape Html bean get Viewed Date String td td String Escape Utils escape Html bean get Status td td href view Report jsp patient String Escape Utils escape Html index request String Escape Utils escape Html bean get View td tr index session set Attribute patients patients table br href Trust auth get Patient jsp forward hcp uap view Report Requests jsp add Add new Report Request include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import edu ncsu csc beans Report Request Bean page import edu ncsu csc dao mysql Personnel page import edu ncsu csc action View Report Requests Action page import edu ncsu csc action View Records Action page import edu ncsu csc action View Report Action page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Personnel Bean page import edu ncsu csc beans Office Visit Bean page import edu ncsu csc beans Health Record page import edu ncsu csc beans Allergy Bean page import edu ncsu csc beans Family Member Bean page import edu ncsu csc beans Diagnosis Bean page import edu ncsu csc beans Procedure Bean page import edu ncsu csc beans Prescription Bean page import edu ncsu csc beans Medication Bean page import java text Number Format page import java text Decimal Format page import edu ncsu csc Localization include file global jsp page Title Trust Comprehensive Patient Report include file header jsp long logged request get User Principal null Long value request get User Principal get Name Personnel personnel new Personnel prod View Report Requests Action r Action new View Report Requests Action prod logged long Value int patient Index Integer parse Int request get Parameter patient List Patient Bean patients List Patient Bean session get Attribute patients session remove Attribute patients String pid String patients get patient Index get String rr String request get Parameter request long patient int request Report Request Bean report Request try pid String null pid String equals throw new Exception Error patient null rr String null rr String equals throw new Exception Error request null patient Long parse Long pid String request Integer parse Int rr String report Request r Action get Report Request request r Action set Viewed request report Request r Action get Report Request request View Records Action action new View Records Action prod patient View Report Action view Action new View Report Action prod logged long Value Patient Bean patient action get Patient List Office Visit Bean office Visits action get Office Visits List Health Record records action get Health Records List Allergy Bean allergies action get Allergies List Patient Bean represented action get Represented List Patient Bean representing action get Representing List Family Member Bean family action get Family List Diagnosis Bean diagnoses view Action get Diagnoses patient List Procedure Bean procedures view Action get Procedures patient List Prescription Bean prescriptions view Action get Prescriptions patient List Personnel Bean hcps view Action get Declared Ps patient logging Action log Event Transaction Type logged long Value patient h Comprehensive Patient Report String Escape Utils escape Html patient get Full Name h div align center table tr td valign top table class f Table tr th colspan Patient Information th tr tr td class sub Header Vertical Name td td String Escape Utils escape Html patient get Full Name td tr tr td class sub Header Vertical Address td td String Escape Utils escape Html patient get Street Address br equals patient get Street Address patient get Street Address br String Escape Utils escape Html patient get Street Address br td tr tr td class sub Header Vertical Phone td td String Escape Utils escape Html patient get Phone td tr tr td class sub Header Vertical Email td td String Escape Utils escape Html patient get Email td tr table td td width px nbsp td td table class f Table tr th colspan Insurance Information th tr tr td class sub Header Vertical Name td td String Escape Utils escape Html patient get Ic Name String Escape Utils escape Html patient get Ic td tr tr td class sub Header Vertical Address td td String Escape Utils escape Html patient get Ic Address br equals patient get Ic Address patient get Ic Address br String Escape Utils escape Html patient get Ic Address br td tr tr td class sub Header Vertical Phone td td String Escape Utils escape Html patient get Ic Phone td tr table td tr table br table class f Table tr th colspan Health Records th tr tr class sub Header td Height td td Weight td td Smokes td td Blood Pressure td td td td td td Triglycerides td td Total Cholesterol td td Last Recorded td td Personnel td tr Personnel Bean personnel Health Record hr records personnel personnel get Personnel hr get Personnel tr td align center String Escape Utils escape Html hr get Height td td align center String Escape Utils escape Html hr get Weight lbs td td align center String Escape Utils escape Html hr Smoker td td align center String Escape Utils escape Html hr get Blood Pressure mm Hg td td align center String Escape Utils escape Html hr get Cholesterol mg td td align center String Escape Utils escape Html hr get Cholesterol mg td td align center String Escape Utils escape Html hr get Cholesterol Tri mg td td align center String Escape Utils escape Html hr get Total Cholesterol mg td td align center String Escape Utils escape Html hr get Date Recorded td td align center String Escape Utils escape Html personnel get Full Name td tr table br table class f Table tr th colspan Diagnoses th tr tr class sub Header td Visit td td Code td td Description td tr diagnoses size tr td colspan style text align center diagnoses record td tr else Number Format number Formatter Number Format get Instance Localization instance get Current Locale Decimal Format number Formatter set Maximum Fraction Digits Decimal Format number Formatter set Minimum Fraction Digits Diagnosis Bean diagnosis diagnoses tr td style text align center String Escape Utils escape Html diagnosis get Ov Diagnosis td td style text align center String Escape Utils escape Html number Formatter format Float parse Float diagnosis get Code td td style text align center String Escape Utils escape Html diagnosis get Description td tr table br table class f Table tr th colspan Designated Ps th tr tr class sub Header td Name td tr hcps size tr td colspan style text align center designated Ps record td tr else Personnel Bean hcp hcps tr td style text align center String Escape Utils escape Html hcp get Full Name td tr table br table class f Table tr th colspan Allergies th tr tr class sub Header td Allergy Description td td First Found td tr allergies size tr td colspan style text align center Allergies record td tr else Allergy Bean allergy allergies tr td style text align center String Escape Utils escape Html allergy get Description td td style text align center String Escape Utils escape Html allergy get First Found Str td tr table br table class f Table tr th colspan Procedures th tr tr class sub Header td Visit td td Code td td Description td tr procedures size tr td colspan style text align center procedures record td tr else Procedure Bean procedure procedures tr td style text align center String Escape Utils escape Html procedure get Ov Procedure td td style text align center String Escape Utils escape Html procedure get Code td td style text align center String Escape Utils escape Html procedure get Description td tr table br table class f Table tr th colspan Prescriptions th tr tr class sub Header th Visit th th Code th th Start Date th th End Date th th Dosage th th Instructions th tr prescriptions size tr td colspan style text align center prescriptions record td tr else Prescription Bean prescription prescriptions tr td style text align center String Escape Utils escape Html prescription get Visit td td style text align center String Escape Utils escape Html prescription get Medication get Code td td style text align center String Escape Utils escape Html prescription get Start Date Str td td style text align center String Escape Utils escape Html prescription get End Date Str td td style text align center String Escape Utils escape Html prescription get Dosage td td style text align center String Escape Utils escape Html prescription get Instructions td tr table br table class f Table tr th colspan Office Visits th tr tr class sub Header th Visit Date th th th th Hospital th th Notes th tr office Visits size tr td colspan style text align center office visits record td tr else Office Visit Bean ov office Visits personnel personnel get Personnel ov get Hcp tr td style text align center String Escape Utils escape Html ov get Visit Date Str td td style text align center String Escape Utils escape Html personnel get Full Name td td style text align center String Escape Utils escape Html ov get Hospital td td style text align center String Escape Utils escape Html ov get Notes td tr table br table class f Table tr th colspan Known Relatives th tr tr class sub Header th Name th th Relation th tr family size tr td colspan style text align center Relations record td tr else Family Member Bean member family tr td String Escape Utils escape Html member get Full Name td td String Escape Utils escape Html member get Relation td tr table br table class f Table tr th Patients String Escape Utils escape Html patient get First Name representing th tr tr class sub Header th Patient th tr represented size tr td String Escape Utils escape Html patient get First Name representing patients td tr else Patient Bean p represented tr td align center String Escape Utils escape Html p get Full Name td tr table br table class f Table tr th Patients Representing String Escape Utils escape Html patient get First Name th tr tr class sub Header th Patient th tr representing size tr td String Escape Utils escape Html patient get First Name represented patients td tr else Patient Bean p representing tr td align center String Escape Utils escape Html p get Full Name td tr table br br catch Exception ex ex get Class ex get Cause String Escape Utils escape Html ex get Message include file footer jsp
taglib prefix uri tags tld page error Page auth exception Handler jsp page import edu ncsu csc enums Role page import edu ncsu csc beans Personnel Bean page import edu ncsu csc Bean Builder page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc action Add Action include file global jsp page Title Trust Add include file header jsp boolean form Filled request get Parameter form Filled null request get Parameter form Filled equals true form Filled page actually page adds user forwards Personnel Bean p new Bean Builder Personnel Bean build request get Parameter Map new Personnel Bean p set Role Role try long new new Add Action Factory get Production Instance logged add p session set Attribute mid Long String new String fullname String password password p get Password fullname p get Full Name logging Action log Event Transaction Type logged long Value new div align center span class Trust Message New String Escape Utils escape Html fullname succesfully added span br br table class f Table tr th colspan New Information th tr tr td class sub Header Vertical td td String Escape Utils escape Html new td tr tr td class sub Header Vertical Temporary Password td td String Escape Utils escape Html password td tr table br Please get information b String Escape Utils escape Html fullname b p href Trust auth staff edit Personnel jsp Continue personnel information p div catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div div align center form action add jsp method post input type hidden name form Filled value true br br div style width text align left Please enter name new valid email address user email address use hospital email address insert pre defined email recover password div br br table class f Table tr th colspan Information th tr tr td class sub Header Vertical First name td td input type text name first Name td tr tr td class sub Header Vertical Last Name td td input type text name last Name tr tr td class sub Header Vertical Email td td input type text name email td tr table br input type submit style font size pt font weight bold value Add personnel form br div include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import edu ncsu csc action Edit Monitoring List Action page import edu ncsu csc beans Telemedicine Bean include file global jsp page Title Trust Edit Patient List include file header jsp Require Patient first String pid String String session get Attribute pid String add Remove Add pid String null pid String length false equals request get Parameter confirm Action response send Redirect Trust auth get Patient jsp forward hcp edit Patient List jsp return Edit Monitoring List Action action new Edit Monitoring List Action prod logged long Value long pid Long parse Long pid String String patient Name action get Patient Name pid action Patient List pid add Remove Remove String confirm boolean conf bool false true equals request get Parameter confirm Action request get Parameter f Submit equals Update Permissions String check Boxes new String request get Parameter blood Pressure request get Parameter glucose request get Parameter height request get Parameter weight request get Parameter pedometer boolean permissions new boolean int permissions check Boxes null check Boxes equals Telemedicine Bean Bean new Telemedicine Bean Bean set Systolic Blood Pressure Allowed permissions Bean set Diastolic Blood Pressure Allowed permissions Bean set Glucose Level Allowed permissions Bean set Height Allowed permissions Bean set Weight Allowed permissions Bean set Pedometer Reading Allowed permissions conf bool action remove List pid boolean conf bool action add List pid Bean conf bool conf bool confirm patient Name Permissions Changed logging Action log Event Transaction Type logged pid session remove Attribute pid else request get Parameter f Submit contains Telemedicine Permissions form action edit Patient List jsp method post input type hidden name confirm Action value true input h Please indicate data String Escape Utils escape Html patient Name allowed enter h input type checkbox name blood Pressure Blood Pressure br input type checkbox name glucose Glucose Level br input type checkbox name height Height br input type checkbox name weight Weight br input type checkbox name pedometer Pedometer br input type submit name f Submit value Update Permissions form else add Remove equals Add String check Boxes new String request get Parameter blood Pressure request get Parameter glucose request get Parameter height request get Parameter weight request get Parameter pedometer boolean permissions new boolean int permissions check Boxes null check Boxes equals Telemedicine Bean Bean new Telemedicine Bean Bean set Systolic Blood Pressure Allowed permissions Bean set Diastolic Blood Pressure Allowed permissions Bean set Glucose Level Allowed permissions Bean set Height Allowed permissions Bean set Weight Allowed permissions Bean set Pedometer Reading Allowed permissions conf bool action add List pid Bean conf bool confirm Patient patient Name Added logging Action log Event Transaction Type logged pid else conf bool action remove List pid conf bool confirm Patient patient Name Removed logging Action log Event Transaction Type logged pid session remove Attribute pid equals confirm div align center span class Trust Message String Escape Utils escape Html confirm span div else request get Parameter f Submit null request get Parameter f Submit contains Change br form action edit Patient List jsp method post input type hidden name confirm Action value true input add Remove equals Add h Please indicate data String Escape Utils escape Html patient Name allowed enter h input type checkbox name blood Pressure Blood Pressure br input type checkbox name glucose Glucose Level br input type checkbox name height Height br input type checkbox name weight Weight br input type checkbox name pedometer Pedometer br input type submit name f Submit value add Remove String Escape Utils escape Html patient Name add Remove equals Add input type submit name f Submit value Change String Escape Utils escape Html patient Name Telemedicine Permissions input type submit name f Submit value Choose Different Patient Click javascript different Patient form script type text javascript function different Patient document get Elements Name confirm Action value false document forms submit script br br br include file footer jsp
page error Page auth exception Handler jsp page import edu ncsu csc dao mysql Patient page import edu ncsu csc beans Lab Procedure Bean page import edu ncsu csc action View Report Requests Action page import edu ncsu csc beans Patient Bean page import edu ncsu csc action Lab Proc Action page import edu ncsu csc beans Report Request Bean page import java util List include file global jsp page Title Trust Home include file header jsp View Report Requests Action report Action new View Report Requests Action Factory get Production Instance logged List Report Request Bean reports report Action get Report Requests Requester Lab Proc Action lp Action new Lab Proc Action Factory get Production Instance logged List Lab Procedure Bean lab Procedures lp Action get Lab Proc Next Month logging Action log Event Transaction Type logged long Value include file auth hcp notification Area jsp table cellpadding cellspacing tr td h Announcements h New features Trust td tr tr td ul li typing date calendar popup makes entering dates incredibly easy li ul td tr tr td h Comprehensive Report History h td tr tr td ul reports size Report Request Bean report reports li String Escape Utils escape Html report Action get Long Status report get li else Report Requests ul td tr tr td h Lab Procedures Completed Last Month h td tr tr td href Lab Proc jsp View Lab Procedures br td tr tr td ul lab Procedures size Lab Procedure Bean bean lab Procedures Patient Bean patient new Patient Factory get Production Instance get Patient bean get Pid li Lab Procedure String Escape Utils escape Html bean get Loinc patient String Escape Utils escape Html patient get Full Name br Results bean get Results equals none else String Escape Utils escape Html bean get Results else Recent Lab Procedures li ul td tr table include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import edu ncsu csc beans Remote Monitoring Data Bean page import edu ncsu csc action View Remote Monitoring List Action page import edu ncsu csc dao mysql Patient page import edu ncsu csc dao mysql Personnel include file global jsp page Title Trust Monitor Patients include file header jsp logging Action log Event Transaction Type logged long Value Viewed monitored patients session remove Attribute patient List View Remote Monitoring List Action action new View Remote Monitoring List Action prod logged long Value List Remote Monitoring Data Bean data action get Patients Data session set Attribute patient List data Patient pat prod get Patient Personnel pers prod get Personnel page import java sql Time br br table class f Table align center tr th colspan Patient Physiologic Statistics th tr tr class sub Header th Patient th th width Date th th Systolic Blood Pressure th th Diastolic Blood Pressure th th Glucose Level th th Reporter th tr String highlight String reporter Name int index Remote Monitoring Data Bean bean data bean get Reporter highlight ff tr bgcolor String Escape Utils escape Html highlight td href Trust auth hcp view Additional Info jsp patient String Escape Utils escape Html index String Escape Utils escape Html action get Patient Name bean get Patient bean get Patient td td b Information Provided b td td b b td td b b td td b b td td b b td tr else highlight int sys bean get Systolic Blood Pressure int dias bean get Diastolic Blood Pressure int glu Lvl bean get Glucose Level glu Lvl dias sys Keep track table empty bean get Time null highlight ff else bean get Systolic Blood Pressure bean get Systolic Blood Pressure bean get Systolic Blood Pressure bean get Diastolic Blood Pressure bean get Diastolic Blood Pressure bean get Diastolic Blood Pressure bean get Glucose Level bean get Glucose Level bean get Glucose Level highlight ffff reporter Name auth get User Name bean get Reporter else reporter Name auth get User Name bean get Reporter reporter Name auth get User Name bean get Reporter tr bgcolor String Escape Utils escape Html highlight td href Trust auth hcp view Additional Info jsp patient String Escape Utils escape Html index String Escape Utils escape Html action get Patient Name bean get Patient bean get Patient td td String Escape Utils escape Html bean get Time td td String Escape Utils escape Html sys sys td td String Escape Utils escape Html dias dias td td String Escape Utils escape Html glu Lvl glu Lvl td td String Escape Utils escape Html reporter Name td tr index index tr bgcolor ff td b Information Provided b td td b b td td b b td td b b td td b b td td b b td tr table br br table class f Table align center tr th colspan Patient External Statistics th tr tr class sub Header th Patient th th width Date th th Height th th Weight th th Pedometer Reading th th Reporter th tr index Remote Monitoring Data Bean bean data bean get Reporter highlight ff tr bgcolor String Escape Utils escape Html highlight td href Trust auth hcp view Additional Info jsp patient String Escape Utils escape Html index String Escape Utils escape Html action get Patient Name bean get Patient bean get Patient td td b Information Provided b td td b b td td b b td td b b td td b b td tr else highlight reporter Name float height bean get Height float weight bean get Weight int pedo Reading bean get Pedometer Reading Check highlighting due change immediately previous weight record bean get Weight Remote Monitoring Data Bean prev Temp null List Remote Monitoring Data Bean weight Bean List action get Patient Data Type bean get Patient weight Remote Monitoring Data Bean cur Temp weight Bean List prev Temp null prev Temp cur Temp continue bean equals prev Temp break prev Temp get Time bean get Time bean get Time cur Temp get Time bean get Time equals cur Temp get Time break else prev Temp cur Temp prev Temp null Math abs prev Temp get Weight bean get Weight bean get Weight highlight ffff else bean get Pedometer Reading bean get Height Reading else pedo Reading height highlight ff weight pedo Reading height reporter Name auth get User Name bean get Reporter tr bgcolor String Escape Utils escape Html highlight td href Trust auth hcp view Additional Info jsp patient String Escape Utils escape Html index String Escape Utils escape Html action get Patient Name bean get Patient bean get Patient td td String Escape Utils escape Html bean get Time td td String Escape Utils escape Html height height td td String Escape Utils escape Html weight weight td td String Escape Utils escape Html pedo Reading pedo Reading td td String Escape Utils escape Html reporter Name td tr index index tr bgcolor ff td b Information Provided b td td b b td td b b td td b b td td b b td td b b td tr table br include file footer jsp
page error Page auth exception Handler jsp page import edu ncsu csc action Send Message Action page import edu ncsu csc beans Message Bean page import java util List include file global jsp page Title Trust Reply include file header jsp Send Message Action action new Send Message Action prod logged Message Bean original null session get Attribute message null original Message Bean session get Attribute message session set Attribute original original session remove Attribute message else request get Parameter message Body null session get Attribute original null original Message Bean session get Attribute original Message Bean message New new Message Bean message New set Body request get Parameter message Body message New set logged message New set original get message New set Subject request get Parameter subject message New set Read message New set Parent Message Id original get Message Id action send Message message New logging Action log Event Transaction Type message New get message New get response send Redirect message Inbox jsp else response send Redirect message Inbox jsp h Reply h h message String Escape Utils escape Html action get Patient Name original get h form id main Form method post action reply jsp span Subject span input type text name subject size value String Escape Utils escape Html original get Subject br br span Message span br textarea name message Body cols rows textarea br br input type submit value Send name send Message form br br include file footer jsp
page error Page auth exception Handler jsp page import edu ncsu csc action Send Message Action page import edu ncsu csc beans Message Bean page import edu ncsu csc dao mysql Patient page import edu ncsu csc exception Trust Exception page import edu ncsu csc exception Form Validation Exception include file global jsp page Title Trust Send Message include file header jsp Send Message Action action new Send Message Action prod logged long Value Patient patient prod get Patient long patient session get Attribute pid null String pid String String session get Attribute pid patient Long parse Long pid String try action get Patient Name patient catch Trust Exception ite patient session remove Attribute pid else patient response send Redirect Trust auth get Patient jsp forward hcp send Message jsp else request get Parameter message Body null String body request get Parameter message Body Message Bean message new Message Bean message set Body request get Parameter message Body message set Subject request get Parameter subject message set Read message set logged message set patient try action send Message message session remove Attribute pid logging Action log Event Transaction Type message get message get response send Redirect message Outbox jsp catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div div align left h Send Message h h String Escape Utils escape Html action get Patient Name patient href Trust auth get Patient jsp forward hcp send Message jsp someone else h form id main Form method post action send Message jsp span Subject span input type text name subject size br br span Message span br textarea name message Body cols rows textarea br br input type submit value Send name send Message form br br div include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import java util Date page import java text Simple Date Format page import edu ncsu csc beans Remote Monitoring Data Bean page import edu ncsu csc beans Patient Bean page import edu ncsu csc action View Remote Monitoring List Action page import edu ncsu csc dao mysql Patient include file global jsp page Title Trust View Additional Info include file header jsp int patient Index request get Parameter patient null String patient request get Parameter patient session set Attribute patient patient patient Index Integer parse Int patient else String patient String session get Attribute patient patient Index Integer parse Int patient List Remote Monitoring Data Bean patient List List Remote Monitoring Data Bean session get Attribute patient List Remote Monitoring Data Bean rmdb patient List get patient Index Patient pat prod get Patient long patient rmdb get Patient Patient Bean p pat get Patient patient logging Action log Event Transaction Type logged long Value patient View Remote Monitoring List Action list Action new View Remote Monitoring List Action prod logged long Value String start Date new Simple Date Format dd yyyy format new Date String end Date new Simple Date Format dd yyyy format new Date date equals request get Parameter sort start Date request get Parameter start Date end Date request get Parameter end Date br table class f Table align center tr th colspan Patient Details th tr tr td class sub Header Vertical Name td td String Escape Utils escape Html p get Full Name td tr tr td class sub Header Vertical Phone td td String Escape Utils escape Html p get Phone td tr table br List Patient Bean patient Representatives pat get Representing patient br table class f Table align center tr th colspan Patient Representatives th tr patient Representatives Empty tr td patient representatives td tr Patient Bean pat patient Representatives tr td class sub Header Vertical Name td td String Escape Utils escape Html pat get Full Name td td class sub Header Vertical Phone td td String Escape Utils escape Html pat get Phone td tr table br br table class f Table align center tr th colspan Patient Glucose Statistics th tr tr class sub Header th width Date th th Systolic Blood Pressure th th Diastolic Blood Pressure th th Glucose Level th th Reporter th tr List Remote Monitoring Data Bean patient Physiologic Stats list Action get Patient Data Date patient start Date end Date patient Physiologic Stats Empty tr bgcolor ff td b Information Provided b td td b b td td b b td td b b td td b b td tr String highlight String reporter Name Remote Monitoring Data Bean stats patient Physiologic Stats highlight int sys stats get Systolic Blood Pressure int dias stats get Diastolic Blood Pressure int glu Lvl stats get Glucose Level glu Lvl dias sys Highlighting partially implemented commented sys sys sys dias dias dias glu Lvl glu Lvl glu Lvl highlight ffff reporter Name auth get User Name stats get Reporter tr bgcolor String Escape Utils escape Html highlight td String Escape Utils escape Html stats get Time td td String Escape Utils escape Html sys sys td td String Escape Utils escape Html dias dias td td String Escape Utils escape Html glu Lvl glu Lvl td td String Escape Utils escape Html reporter Name td tr table br br table class f Table align center tr th colspan Patient Weight Pedometer Statistics th tr tr class sub Header th width Date th th Height th th Weight th th Pedometer Reading th th Reporter th tr List Remote Monitoring Data Bean patient External Stats list Action get Patient Data Date patient start Date end Date patient External Stats Empty tr bgcolor ff td b Information Provided b td td b b td td b b td td b b td td b b td tr highlight reporter Name Remote Monitoring Data Bean stats patient External Stats highlight float height stats get Height float weight stats get Weight int pedo Reading stats get Pedometer Reading stats get Weight Remote Monitoring Data Bean prev Temp null List Remote Monitoring Data Bean weight Bean List list Action get Patient Data Type stats get Patient weight Remote Monitoring Data Bean cur Temp weight Bean List prev Temp null prev Temp cur Temp continue stats equals prev Temp break prev Temp get Time stats get Time stats get Time cur Temp get Time stats get Time equals cur Temp get Time break else prev Temp cur Temp Highlighting partially implemented commented prev Temp null Math abs prev Temp get Weight stats get Weight stats get Weight highlight ffff height weight pedo Reading reporter Name auth get User Name stats get Reporter tr bgcolor String Escape Utils escape Html highlight td String Escape Utils escape Html stats get Time td td String Escape Utils escape Html height height td td String Escape Utils escape Html weight weight td td String Escape Utils escape Html pedo Reading pedo Reading td td String Escape Utils escape Html reporter Name td tr table br else form action view Additional Info jsp id datebuttons style display inline method post input type hidden name sort value date input div align center table class f Table align center tr class sub Header td Start Date td td input name start Date value String Escape Utils escape Html start Date size input type button value Select Date onclick display Date Picker start Date td td End Date td td input name end Date value String Escape Utils escape Html end Date input type button value Select Date onclick display Date Picker end Date td tr table br input type submit name submit value Get Records onclick javascript sort div form script type text javascript function sort document get Elements Name sort value date document forms submit click script include file footer jsp
page error Page auth exception Handler jsp page import java util List page import edu ncsu csc action View Messages Action page import edu ncsu csc beans Message Bean page import edu ncsu csc dao Factory include file global jsp page Title Trust View Messages include file header jsp div align center h Messages h logging Action log Event Transaction Type logged long Value View Messages Action action new View Messages Action prod logged long Value List Message Bean messages action get Messages session set Attribute messages messages messages size table class f Table tr th Sender th th Message th th Received th th th tr int index Message Bean message messages tr td String Escape Utils escape Html action get Name message get td td String Escape Utils escape Html message get Body td td String Escape Utils escape Html message get Sent Date td td href reply jsp msg String Escape Utils escape Html index Reply td tr index table else div messages div br div include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import edu ncsu csc action View Prescription Renewal Needs Action page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Prescription Bean page import edu ncsu csc beans Personnel Bean page import edu ncsu csc dao mysql Patient page import edu ncsu csc dao mysql Personnel include file global jsp page Title Trust Patients Potential Prescription Renewal Needs include file header jsp Personnel Bean self new Personnel prod get Personnel logged View Prescription Renewal Needs Action exp Action new View Prescription Renewal Needs Action prod logged long Value List Personnel Bean personnel List prod get Personnel get Personnel session set Attribute personnel List personnel List div align center br table class f Table List Patient Bean patients exp Action get Renewal Needs Patients patients new Patient prod get Patients Temporary test patients size tr td colspan patients renewal needs td tr else tr th colspan String Escape Utils escape Html self get Full Name th tr tr class sub Header td Patient Name td td Phone Number td td Email Address td tr Patient Bean patient patients logging Action log Event Transaction Type logged patient get Personnel Bean doctor exp Action get Prescribing Doctor prescription tr td href send Email Notification jsp mid String Escape Utils escape Html patient get String Escape Utils escape Html patient get Full Name td td String Escape Utils escape Html patient get Phone td td String Escape Utils escape Html patient get Email td tr table br div include file footer jsp
page error Page auth exception Handler jsp page import java util List page import edu ncsu csc action Get Visit Reminders Action page import edu ncsu csc action Get Visit Reminders Action Reminder Type page import edu ncsu csc beans Visit Flag page import edu ncsu csc beans forms Visit Reminder Return Form page import edu ncsu csc beans Personnel Bean page import edu ncsu csc dao mysql Personnel include file global jsp page Title Trust Visit Reminders include file header jsp logging Action log Event Transaction Type logged long Value Get Visit Reminders Action action new Get Visit Reminders Action prod logged long Value div align center h Patients Needing Visits h form action visit Reminders jsp method post id reminder Form input type hidden id form Filled value true select id Reminder Type name Reminder Type Reminder Type rt Reminder Type values option String Escape Utils escape Html rt get Type Name equals request get Parameter Reminder Type selected value rt get Type Name String Escape Utils escape Html rt get Type Name option select br br input type submit id get Reminders name get Reminders value Get Reminders form br Get Reminders equals request get Parameter get Reminders List Visit Reminder Return Form reminders action get Visit Reminders Reminder Type get Reminder Type request get Parameter Reminder Type Visit Reminder Return Form reminder reminders table class f Table tr th colspan Patient Information th tr tr td class sub Header Vertical Name td td href send Email Notification jsp mid String Escape Utils escape Html reminder get Patient String Escape Utils escape Html reminder get First Name reminder get Last Name td tr tr td class sub Header Vertical Phone Number td td String Escape Utils escape Html reminder get Phone Number td tr tr td class sub Header Vertical Reasons td td Visit Flag vf reminder get Visit Flags String Escape Utils escape Html vf get Type nbsp nbsp String Escape Utils escape Html vf get Value br td tr table original Table format first last name separate lines favor making link send email patient friendly changed table puts names together table class f Table tr th colspan Patient Information th tr tr td class sub Header Vertical Last Name td td href send Email Notification jsp mid String Escape Utils escape Html reminder get Patient String Escape Utils escape Html reminder get Last Name td tr tr td class sub Header Vertical First Name td td String Escape Utils escape Html reminder get First Name td tr tr td class sub Header Vertical Phone Number td td String Escape Utils escape Html reminder get Phone Number td tr tr td class sub Header Vertical Reasons td td Visit Flag vf reminder get Visit Flags String Escape Utils escape Html vf get Type nbsp nbsp String Escape Utils escape Html vf get Value br td tr table br div include file footer jsp
page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc action Add Remote Monitoring Data Action page import edu ncsu csc action Edit Representatives Action page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Telemedicine Bean page import edu ncsu csc beans Remote Monitoring Data Bean page import edu ncsu csc exception Trust Exception page import java util List taglib prefix uri tags tld page error Page auth exception Handler jsp include file global jsp page Title Trust Report Status include file header jsp Require Patient first long patient boolean representative Reporting false String reporting String request get Parameter reporting reporting null reporting length reporting equals null patient logged long Value self reporting else patient Long parse Long reporting representative Reporting true Add Remote Monitoring Data Action action new Add Remote Monitoring Data Action prod logged long Value patient List Telemedicine Bean Beans action get Telemedicine Bean patient Default allow none Beans size Telemedicine Bean b new Telemedicine Bean b set Systolic Blood Pressure Allowed false b set Diastolic Blood Pressure Allowed false b set Glucose Level Allowed false b set Height Allowed false b set Weight Allowed false b set Pedometer Reading Allowed false Beans add b Update information boolean form Filled request get Parameter form Filled null request get Parameter form Filled equals true form Filled try boolean glucose Submitted request get Parameter glucose Level null equals request get Parameter glucose Level boolean systolic Submitted request get Parameter systolic Blood Pressure null equals request get Parameter systolic Blood Pressure boolean diastolic Submitted request get Parameter diastolic Blood Pressure null equals request get Parameter diastolic Blood Pressure boolean height Submitted request get Parameter height null equals request get Parameter height boolean weight Submitted request get Parameter weight null equals request get Parameter weight boolean pedometer Submitted request get Parameter pedometer Reading null equals request get Parameter pedometer Reading diastolic Submitted systolic Submitted div align center span class Trust Error Systolic Diastolic Blood Pressure must submitted together span div else int glucose Level glucose Submitted Integer parse Int request get Parameter glucose Level int systolic systolic Submitted Integer parse Int request get Parameter systolic Blood Pressure int diastolic diastolic Submitted Integer parse Int request get Parameter diastolic Blood Pressure float height height Submitted Float parse Float request get Parameter height float weight weight Submitted Float parse Float request get Parameter weight int pedometer pedometer Submitted Integer parse Int request get Parameter pedometer Reading Remote Monitoring Data Bean rmd Bean new Remote Monitoring Data Bean rmd Bean set Glucose Level glucose Level rmd Bean set Systolic Blood Pressure systolic rmd Bean set Diastolic Blood Pressure diastolic rmd Bean set Height height rmd Bean set Weight weight rmd Bean set Pedometer Reading pedometer action add Remote Monitoring Data rmd Bean logging Action log Event Transaction Type logged patient div align center span class Trust Message Information Successfully Added span div catch Form Validation Exception e form Filled false div align center span class Trust Error String Escape Utils escape Html e get Message span div catch Number Format Exception e form Filled false div align center span class Trust Error Invalid entry String Escape Utils escape Html e get Message Please enter whole number span div catch Trust Exception e form Filled false div align center span class Trust Error Invalid entry String Escape Utils escape Html e get Message span div form Filled conflict exists multiple Ps allow input boolean report Blood Pressure false boolean report Glucose false boolean report Height false boolean report Weight false boolean report Pedometer false Telemedicine Bean tb Beans tb Systolic Blood Pressure Allowed tb Diastolic Blood Pressure Allowed report Blood Pressure true tb Glucose Level Allowed report Glucose true tb Height Allowed report Height true tb Weight Allowed report Weight true tb Pedometer Reading Allowed report Pedometer true form action add Telemedicine Data jsp method post input type hidden name form Filled value true input type hidden name reporting value String Escape Utils escape Html String request get Parameter reporting br table cellspacing align center cellpadding tr th String Escape Utils escape Html patient logged long Value Self Reporting Report action get Patient Name patient th tr report Blood Pressure report Glucose report Height report Weight report Pedometer tr td valign top table class f Table align center style width px report Blood Pressure tr td class sub Header Vertical Systolic Blood Pressure td td input name systolic Blood Pressure value type text td tr tr td class sub Header Vertical Diastolic Blood Pressure td td input name diastolic Blood Pressure value type text td tr report Glucose tr td class sub Header Vertical Glucose Level td td input name glucose Level value type text td tr report Height tr td class sub Header Vertical Height td td input name height value type text td tr report Weight tr td class sub Header Vertical Weight td td input name weight value type text td tr report Pedometer tr td class sub Header Vertical Pedometer Reading td td input name pedometer Reading value type text td tr table td td width px nbsp td td valign top td tr table br div align center report Blood Pressure report Glucose report Height report Weight report Pedometer br input type submit name action style font weight bold value Report else authorized report telemedicine data br input type submit name action style font weight bold value Report disabled br br br representative Reporting table class f Table align center th Patient Representative Reporting th Edit Representatives Action reps Action new Edit Representatives Action prod Long String patient List Patient Bean patients reps Action get Represented patient patients size tr class sub Header th Patients Represented th tr else tr class sub Header th Patient th tr Patient Bean p patients tr td href onclick javascript document get Elements Name form Filled value false document get Elements Name reporting value String Escape Utils escape Html p get document forms submit String Escape Utils escape Html p get Full Name td tr table div form br br include file footer jsp
page import edu ncsu csc dao Factory page import edu ncsu csc beans Patient Bean page import edu ncsu csc action Edit Patient Action page import edu ncsu csc Bean Builder page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc action Set Security Question Action page import edu ncsu csc beans Security page import org apache commons validator Credit Card Validator taglib prefix uri tags tld page error Page auth exception Handler jsp include file global jsp page Title Trust Edit Patient include file header jsp patient id n check kick em exception handler Edit Patient Action action new Edit Patient Action prod logged long Value logged long Value Set Security Question Action saction new Set Security Question Action prod logged long Value long pid action get Pid take care updating information boolean form Filled request get Parameter form Filled null request get Parameter form Filled equals true Patient Bean p Security form Filled p new Bean Builder Patient Bean build request get Parameter Map new Patient Bean new Bean Builder Security build request get Parameter Map new Security try action update Information p saction update Information logging Action log Event Transaction Type logged logged div align center span class Trust Message Information Successfully Updated span div catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div p action get Patient else p action get Patient saction retrieve Information logging Action log Event Transaction Type logged pid form action edit Demographics jsp method post input type hidden name form Filled value true input type hidden name pid value String Escape Utils escape Html pid br table cellspacing align center cellpadding tr td valign top table class f Table align center style width px tr th colspan Patient Information th tr tr td class sub Header Vertical First Name td td input name first Name value String Escape Utils escape Html p get First Name type text td tr tr td class sub Header Vertical Last Name td td input name last Name value String Escape Utils escape Html p get Last Name type text td tr tr td class sub Header Vertical Email td td input name email value String Escape Utils escape Html p get Email type text td tr tr td class sub Header Vertical Address td td input name street Address value String Escape Utils escape Html p get Street Address type text br input name street Address value String Escape Utils escape Html p get Street Address type text td tr tr td class sub Header Vertical City td td input name city value String Escape Utils escape Html p get City type text td tr tr td class sub Header Vertical State td td state name state value String Escape Utils escape Html p get State td tr tr td class sub Header Vertical Zip td td input name zip value String Escape Utils escape Html p get Zip maxlength type text size input name zip value String Escape Utils escape Html p get Zip maxlength type text size td tr tr td class sub Header Vertical Phone td td input name phone value String Escape Utils escape Html p get Phone type text size maxlength input name phone value String Escape Utils escape Html p get Phone type text size maxlength input name phone value String Escape Utils escape Html p get Phone type text size maxlength td tr tr td class sub Header Vertical Mother td td input name Mother value String Escape Utils escape Html p get Mother maxlength type text td tr tr td class sub Header Vertical Father td td input name Father value String Escape Utils escape Html p get Father maxlength type text td tr tr td class sub Header Vertical Credit Card Type td td select name credit Card Type option value Select option option value String Escape Utils escape Html p get Credit Card Type equals selected Mastercard option option value String Escape Utils escape Html p get Credit Card Type equals selected Visa option option value String Escape Utils escape Html p get Credit Card Type equals selected Discover option option value String Escape Utils escape Html p get Credit Card Type equals selected American Express option select td tr tr td class sub Header Vertical Credit Card Number td td input name credit Card Number value String Escape Utils escape Html p get Credit Card Number maxlength type text td tr table td td width px nbsp td td valign top table class f Table align center style width px tr th colspan Insurance Information th tr tr td class sub Header Vertical Name td td input name ic Name value String Escape Utils escape Html p get Ic Name type text td tr tr td class sub Header Vertical Address td td input name ic Address value String Escape Utils escape Html p get Ic Address type text br input name ic Address value String Escape Utils escape Html p get Ic Address type text td tr tr td class sub Header Vertical City td td input name ic City value String Escape Utils escape Html p get Ic City type text td tr tr td class sub Header Vertical State td td state name ic State value String Escape Utils escape Html p get Ic State td tr tr td class sub Header Vertical Zip td td input name ic Zip value String Escape Utils escape Html p get Ic Zip maxlength type text size input name ic Zip value String Escape Utils escape Html p get Ic Zip maxlength type text size td tr tr td class sub Header Vertical Phone td td input name ic Phone value String Escape Utils escape Html p get Ic Phone type text size maxlength input name ic Phone value String Escape Utils escape Html p get Ic Phone type text size maxlength input name ic Phone value String Escape Utils escape Html p get Ic Phone type text size maxlength td tr tr td class sub Header Vertical Insurance td td input name ic value String Escape Utils escape Html p get Ic type text td tr table td tr tr height px td colspan nbsp td tr tr td valign top table class f Table align center style width px tr th colspan Authentication Information th tr tr td class sub Header Vertical Security Question td td input name question value String Escape Utils escape Html get Question type text td tr tr td class sub Header Vertical Security Answer td td input name answer value String Escape Utils escape Html get Answer type password td tr tr td class sub Header Vertical Confirm Security Answer td td input name confirm Answer value String Escape Utils escape Html get Answer type password td tr table td td width px nbsp td td valign top table class f Table align center style width px tr th colspan Emergency Contact th tr tr td class sub Header Vertical Name td td input name emergency Name value String Escape Utils escape Html p get Emergency Name type text td tr tr td class sub Header Vertical Phone td td input name emergency Phone value String Escape Utils escape Html p get Emergency Phone type text size maxlength input name emergency Phone value String Escape Utils escape Html p get Emergency Phone type text size maxlength input name emergency Phone value String Escape Utils escape Html p get Emergency Phone type text size maxlength td tr table td tr table br div align center input type submit name action style font size pt font weight bold value Edit Patient Record br br Note order set password use Reset Password link login page div form include file footer jsp
page import edu ncsu csc beans Office Visit Bean page import edu ncsu csc beans Lab Procedure Bean page import edu ncsu csc beans Transaction Bean page import edu ncsu csc dao mysql Lab Procedure page import edu ncsu csc dao mysql Patient page import edu ncsu csc dao mysql Transaction page import edu ncsu csc dao mysql Personnel page import edu ncsu csc action View Records Action page import edu ncsu csc action View Report Requests Action page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Personnel Bean page import edu ncsu csc beans Report Request Bean page import java util Hashtable page import java sql Timestamp page import java util Date page import java util List page import java util Array List page import java util Linked List include file global jsp page Title Trust Patient Home include file header jsp session remove Attribute personnel List View Records Action survey Action new View Records Action prod logged long Value List Office Visit Bean sur List prod get Office Visit get Office Visits Survey logged long Value Patient Bean patient new Patient prod get Patient logged long Value List Report Request Bean reports survey Action get Report Requests View Report Requests Action report Action new View Report Requests Action prod logged long Value Lab Procedure lp new Lab Procedure prod List Lab Procedure Bean lab Procedures lp get Lab Procedures Patient Next Month logged long Value List Patient Bean represented new Patient prod get Represented logged long Value Transaction trans new Transaction prod Personnel personnel new Personnel prod Create Array List index hide Ds user List Personnel Bean personnel List new Array List Personnel Bean int personnel counter logging Action log Event Transaction Type logged long Value request get Parameter rep null request get Parameter rep equals div align center span class Trust Message String Escape Utils escape Html Adverse Event Successfully Reported span div div id Content align left include file auth patient notification Area jsp include file auth patient activity Feed jsp div include file footer jsp
page import edu ncsu csc dao Factory page import edu ncsu csc beans Diagnosis Bean page import edu ncsu csc beans Medication Bean page import edu ncsu csc beans Lab Procedure Bean page import edu ncsu csc action Diagnosis Action page import edu ncsu csc beans Diagnosis Bean page import edu ncsu csc dao mysql page import edu ncsu csc beans Personnel Bean page import edu ncsu csc beans Prescription Bean page import edu ncsu csc dao mysql Personnel page import java util List page import java util Array List include file global jsp page Title Trust Diagnoses include file header jsp logging Action log Event Transaction Type logged long Value logged long Value session remove Attribute personnel List String icdcode request get Parameter icd loinc Factory get Production Instance get Diagnosis Action action new Diagnosis Action prod logged long Value List Diagnosis Bean diagnoses action get Diagnoses input type hidden name form Filled value true div align center h Diagnoses h table class f Table tr th Diagnosis th tr Diagnosis Bean diagnoses tr td href Diagnoses jsp icd String Escape Utils escape Html get Code String Escape Utils escape Html get Formatted Description td tr table div br icdcode null icdcode equals List Diagnosis Bean hcps action get Diagnosis icdcode logging Action log Event Transaction Type logged long Value Find Ps experience diagnosis div align center h Ps experience diagnosis String Escape Utils escape Html icdcode h table class f Table tr th th th Number Patients th th List Prescriptions th th List Lab Procedures th th Average Office Visit Satisfaction th th Average Treatment Satisfaction th tr hcps size List Personnel Bean personnel List new Array List Personnel Bean int index Diagnosis Bean bean hcps tr td href Trust auth view Personnel jsp personnel String Escape Utils escape Html index String Escape Utils escape Html bean get Name td td String Escape Utils escape Html bean get Num Patients td td bean get Med List Empty print prescriptions else Prescription Bean p action get Prescriptions bean get icdcode href view Prescription Information jsp visit String Escape Utils escape Html p get Visit pres String Escape Utils escape Html p get Id String Escape Utils escape Html p get Medication get Code p get Medication get Description prescribed br td td bean get Lab List Empty print lab procedures ordered else Lab Procedure Bean p bean get Lab List String Escape Utils escape Html p get Loinc loinc get Procedures p get Loinc get get Component procedure ordered br td td String Escape Utils escape Html bean get Visit Satisfaction td td String Escape Utils escape Html bean get Treatment Satisfaction td tr Personnel Bean personnel new Personnel prod get Personnel bean get personnel List add personnel index session set Attribute personnel List personnel List else tr td colspan align center Data td tr table div include file footer jsp
page import edu ncsu csc action Report Adverse Event Action page import edu ncsu csc beans Adverse Event Bean page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Link Bean page import edu ncsu csc Bean Builder page import edu ncsu csc beans Personnel Bean page import java util List page import java util Array List taglib uri tags tld prefix page error Page auth exception Handler jsp include file global jsp page Title Trust Report Adverse Event include file header jsp Report Adverse Event Action action request get Parameter Comment null session get Attribute null List Link Bean link List new Array List Link Bean link List List Link Bean session get Attribute beanlist List Adverse Event Bean adverse List new Array List Adverse Event Bean boolean bad false Link Bean l Bean link List l Bean Checked action new Report Adverse Event Action l Bean get Prescriber prod logged long Value Adverse Event Bean ae Bean new Adverse Event Bean ae Bean set logged ae Bean set Description request get Parameter Comment ae Bean set Drug l Bean get Drug ae Bean set Code l Bean get Code ae Bean set Prescriber l Bean get Prescriber adverse List add ae Bean String msg try action add Report ae Bean logging Action log Event Transaction Type logged long Value catch Exception e msg e get Message msg equals bad true div align center span class Trust Error String Escape Utils escape Html msg span div action new Report Adverse Event Action prod logged long Value action send Mails adverse List bad response send Redirect home jsp rep request get Parameter Comment null session get Attribute null action new Report Adverse Event Action session get Attribute prod logged long Value Adverse Event Bean ae Bean new Adverse Event Bean ae Bean set logged ae Bean set Description request get Parameter Comment ae Bean set Drug session get Attribute pres ae Bean set Code session get Attribute code ae Bean new Bean Builder Adverse Event Bean build request get Parameter Map new Adverse Event Bean action add Report ae Bean action send Mail ae Bean logging Action log Event Transaction Type logged long Value response send Redirect home jsp rep request get Parameter Comment null request get Parameter null action new Report Adverse Event Action request get Parameter prod logged long Value session set Attribute request get Parameter session set Attribute pres request get Parameter pres session set Attribute code request get Parameter code div align center form id main Form method get action report Adverse Event jsp h Report Adverse Event h textarea name Comment cols rows textarea br br input type submit value Save name add Report form div include file footer jsp
page import edu ncsu csc action Send Message Action page import edu ncsu csc beans Message Bean page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Personnel Bean page import edu ncsu csc exception Form Validation Exception page import java util List taglib uri tags tld prefix page error Page auth exception Handler jsp include file global jsp page Title Trust Send Message include file header jsp Send Message Action action new Send Message Action prod logged long Value int index int dlhcp Index int representee Index int rep Index request get Parameter send Message null request get Parameter send Message equals Send try Message Bean message new Message Bean message set logged long Value message set Personnel Bean session get Attribute dlhcp get message set Body request get Parameter message Body message set Subject request get Parameter subject message set Read action send Message message session remove Attribute dlhcp logging Action log Event Transaction Type message get message get response send Redirect message Outbox jsp catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div request get Parameter select null request get Parameter select equals Select request get Parameter dlhcp null request get Parameter dlhcp equals dlhcp Index Integer parse Int request get Parameter dlhcp else request get Parameter select Rep null request get Parameter select Rep equals Select request get Parameter representee null request get Parameter representee equals representee Index Integer parse Int request get Parameter representee request get Parameter rep null request get Parameter rep equals rep Index Integer parse Int request get Parameter rep else request get Parameter select Rep null request get Parameter select Rep equals Select request get Parameter representee null request get Parameter representee equals representee Index Integer parse Int request get Parameter representee div align left form id main Form method get action send Message jsp h Send Message h dlhcp Index representee Index List Personnel Bean dlhcps action get Ps List Patient Bean representees action get Representees session set Attribute dlhcps dlhcps session set Attribute representees representees h One Ps h dlhcps size select name dlhcp option value option index Personnel Bean dlhcp dlhcps option value index String Escape Utils escape Html dlhcp get Full Name option index select input type submit value Select name select else n declared Ps h Behalf One Representees h representees size select name representee option value option index Patient Bean representee representees option value index String Escape Utils escape Html representee get Full Name option index select input type submit value Select name select Rep else patients declared representative else dlhcp Index List Personnel Bean dlhcps List Personnel Bean session get Attribute dlhcps Personnel Bean dlhcp dlhcps get dlhcp Index session set Attribute dlhcp dlhcp h String Escape Utils escape Html dlhcp get Full Name h span Subject span input type text name subject size br br span Message span br textarea name message Body cols rows textarea br br input type submit value Send name send Message else rep Index List Personnel Bean rep Ps List Personnel Bean session get Attribute rep Ps Personnel Bean dlhcp rep Ps get rep Index session set Attribute dlhcp dlhcp List Patient Bean representees List Patient Bean session get Attribute representees Patient Bean representee representees get representee Index h String Escape Utils escape Html dlhcp get Full Name Behalf String Escape Utils escape Html representee get Full Name h span Subject span input type text name subject size br br span Message span br textarea name message Body cols rows textarea br br input type submit value Send name send Message else representee Index List Patient Bean representees List Patient Bean session get Attribute representees Patient Bean representee representees get representee Index List Personnel Bean rep Ps action get Ps representee get session set Attribute rep Ps rep Ps h One String Escape Utils escape Html representee get Full Name Ps h input type hidden name representee value String Escape Utils escape Html representee Index rep Ps size select name rep option value option index Personnel Bean rep rep Ps option value index String Escape Utils escape Html rep get Full Name option index select input type submit value Select name select Rep else String Escape Utils escape Html representee get Full Name declared Ps form div include file footer jsp
page language java content Type text html charset page Encoding page import edu ncsu csc beans Survey Bean page import edu ncsu csc action Survey Action page import edu ncsu csc Bean Builder page import edu ncsu csc exception Trust Exception page error Page auth exception Handler jsp taglib uri tags tld prefix include file global jsp page Title Trust Patient Survey include file header jsp Survey Action action new Survey Action prod logged long Value Survey Bean survey Bean null long visit get office visit previous String visit Str request get Parameter ov String visit Date Str request get Parameter ov Date visit Str null visit Str equals try visit Long parse Long visit Str catch Exception e e print Stack Trace boolean form Filled request get Parameter form Filled null request get Parameter form Filled equals true form Filled survey Bean new Bean Builder Survey Bean build request get Parameter Map new Survey Bean survey Bean set Visit visit String waiting Minutes request get Parameter waiting Minutes String waiting Minutes null waiting Minutes equals survey Bean set Waiting Room Minutes Integer parse Int waiting Minutes String exam Minutes request get Parameter exam Minutes String exam Minutes null exam Minutes equals survey Bean set Exam Room Minutes Integer parse Int exam Minutes update satisfaction number bean request get Parameter Satradios null request get Parameter Satradios equals sat Radio survey Bean set Visit Satisfaction request get Parameter Satradios equals sat Radio survey Bean set Visit Satisfaction request get Parameter Satradios equals sat Radio survey Bean set Visit Satisfaction request get Parameter Satradios equals sat Radio survey Bean set Visit Satisfaction request get Parameter Satradios equals sat Radio survey Bean set Visit Satisfaction update treatment number bean request get Parameter Treradios null request get Parameter Treradios equals tre Radio survey Bean set Treatment Satisfaction request get Parameter Treradios equals tre Radio survey Bean set Treatment Satisfaction request get Parameter Treradios equals tre Radio survey Bean set Treatment Satisfaction request get Parameter Treradios equals tre Radio survey Bean set Treatment Satisfaction request get Parameter Treradios equals tre Radio survey Bean set Treatment Satisfaction try add survey data action add Survey survey Bean visit logging Action log Event Transaction Type logged long Value action get Patient visit Office visit completed survey visit Str response send Redirect view Records jsp message Survey Successfully Submitted catch Exception e span String Escape Utils escape Html e get Message span else visit Date Str contains throw new Trust Exception Illegal parameter ov Date div id Header h Trust Patient Survey Office Visit String Escape Utils escape Html visit Date Str h div div id Content form action survey jsp method post name main Form input type hidden name form Filled value true input type hidden name ov value String Escape Utils escape Html visit Str h long wait visit h table tr td waiting room td td input type text name waiting Minutes String maxlength size td td minutes td tr tr td examination room br seeing physician td td input type text name exam Minutes String maxlength size td td minutes td tr table h satisfied office visit h table tr td tr td input align left type radio name Satradios value sat Radio Satisfied br td tr tr td input align left type radio name Satradios value sat Radio Satisfied br td tr tr td input align left type radio name Satradios value sat Radio Moderately Satisfied br td tr tr td input align left type radio name Satradios value sat Radio Somewhat Unhappy br td tr tr td input align left type radio name Satradios value sat Radio Unhappy br td tr table h satisfied treatment information received h table tr td tr td input align left type radio name Treradios value tre Radio Satisfied br td tr tr td input align left type radio name Treradios value tre Radio Satisfied br td tr tr td input align left type radio name Treradios value tre Radio Moderately Satisfied br td tr tr td input align left type radio name Treradios value tre Radio Somewhat Unhappy br td tr tr td input align left type radio name Treradios value tre Radio Unhappy br td tr table br br input type submit style font size pt font weight bold value Submit Survey form div include file footer jsp
page import edu ncsu csc action View Access Log Action page import java util List page import edu ncsu csc beans Transaction Bean page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc beans Personnel Bean page import edu ncsu csc dao mysql Personnel page import edu ncsu csc beans Patient Bean page import edu ncsu csc dao mysql Patient page error Page auth exception Handler jsp page import java util Array List page import edu ncsu csc action Get User Name Action include file global jsp page Title Trust View Access Log include file header jsp session remove Attribute personnel List View Access Log Action action new View Access Log Action Factory get Production Instance logged List Transaction Bean accesses stores entries access log String mid stores mid user whose log fetched mid request get Parameter log try get id request mid null mid logged mid set request default logged user session set Attribute current Log mid used check user changed log views String log Sess String session get Attribute current Log log Sess null log Sess equals mid requested user different last log reset date filter accesses action get Accesses null null mid false else otherwise run action requested dates try accesses action get Accesses request get Parameter start Date request get Parameter end Date mid role equals request get Parameter sort catch Form Validation Exception e e print page Context get accesses action get Accesses null null mid false session set Attribute current Log mid set currently viewed seen later session List Patient Bean patient Relatives action get Represented logged get list medical dependents user String log User new Get User Name Action Factory get Production Instance get User Name mid get name user whose logs viewing h Viewing Log log User h br table class f Table align center tr th href Click javascript sort date Date th th Accessor th th href Click javascript sort role Role th th Description th tr boolean Data false List Personnel Bean personnel List new Array List Personnel Bean int index logging Action log Event Transaction Type logged Transaction Bean accesses Personnel Bean hcp new Personnel Factory get Production Instance get Personnel get Logged hcp null Data true tr td String Escape Utils escape Html get Time Logged td td href Trust auth view Personnel jsp personnel String Escape Utils escape Html index String Escape Utils escape Html hcp get Full Name td td String Escape Utils escape Html get Role td td String Escape Utils escape Html get Transaction Type get Description td tr Personnel Bean personnel new Personnel prod get Personnel get Logged personnel List add personnel index else Personal Health Representative equals get Role Patient Bean p new Patient Factory get Production Instance get Patient get Logged tr td String Escape Utils escape Html get Time Logged td td String Escape Utils escape Html p get Full Name td td String Escape Utils escape Html get Role td td String Escape Utils escape Html get Added Info String Escape Utils escape Html get Transaction Type get Code td tr session set Attribute personnel List personnel List Data tr td colspan align center Data td tr String start Date action get Default Start accesses String end Date action get Default End accesses role equals request get Parameter sort start Date request get Parameter start Date end Date request get Parameter end Date table br br form action view Access Log jsp id log Selection Form method post input type hidden name sort value input div align center table class f Table align center tr class sub Header td View log td td select name log id log Select Menu option value logged String Escape Utils escape Html user Name option Patient Bean represented patient Relatives mid equals represented get option selected selected value String Escape Utils escape Html represented get String Escape Utils escape Html represented get Full Name option else option value String Escape Utils escape Html represented get String Escape Utils escape Html represented get Full Name option select td tr tr class sub Header td Start Date td td input name start Date value String Escape Utils escape Html start Date size input type button value Select Date onclick display Date Picker start Date td td End Date td td input name end Date value String Escape Utils escape Html end Date input type button value Select Date onclick display Date Picker end Date td tr table br input type submit name submit value Filter Records div form script type text javascript function sort date Role document get Elements Name sort value date Role document forms submit click script include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import edu ncsu csc action View Expired Prescriptions Action page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Prescription Bean page import edu ncsu csc beans Personnel Bean page import edu ncsu csc dao mysql Patient include file global jsp page Title Trust Get Expired Prescription Reports include file header jsp logging Action log Event Transaction Type logged long Value logged long Value Patient Bean patient new Patient prod get Patient logged long Value View Expired Prescriptions Action exp Action new View Expired Prescriptions Action prod logged long Value List Personnel Bean personnel List prod get Personnel get Personnel session set Attribute personnel List personnel List div align center br table class f Table List Prescription Bean prescriptions exp Action get Prescriptions Patient logged long Value prescriptions size tr td colspan prescriptions found td tr else tr th colspan String Escape Utils escape Html patient get Full Name th tr tr class sub Header td Code td td Description td td Duration td td Prescribing td tr Prescription Bean prescription prescriptions Personnel Bean doctor exp Action get Prescribing Doctor prescription tr td href view Prescription Information jsp visit String Escape Utils escape Html prescription get Visit pres String Escape Utils escape Html prescription get Id String Escape Utils escape Html prescription get Medication get Code Formatted td td String Escape Utils escape Html prescription get Medication get Description td td String Escape Utils escape Html prescription get Start Date Str String Escape Utils escape Html prescription get End Date Str td td href view jsp index String Escape Utils escape Html doctor get Index personnel List String Escape Utils escape Html doctor get Full Name td tr table br div include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import java util Array List page import edu ncsu csc dao Factory page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Visit Bean page import edu ncsu csc beans Office Visit Bean page import edu ncsu csc action View Visited Ps Action page import edu ncsu csc beans Personnel Bean page import edu ncsu csc dao mysql Patient page import edu ncsu csc exception Trust Exception include file global jsp page Title Information include file header jsp script type text javascript function remove form document get Element Id remove value document get Element Id form submit script int index Integer parse Int request get Parameter index Personnel Bean List Personnel Bean session get Attribute personnel List get index logging Action log Event Transaction Type logged long Value div align center table class f Table tr th colspan String Escape Utils escape Html get Full Name th tr tr td Specialty td td String Escape Utils escape Html get Specialty null get Specialty td tr tr td Address td td String Escape Utils escape Html get Street Address br String Escape Utils escape Html get Street Address br String Escape Utils escape Html get City equals get City String Escape Utils escape Html get State get Zip td tr tr td Phone td td String Escape Utils escape Html get Phone equals get Phone td tr tr td Email td td String Escape Utils escape Html get Email td tr table div include file footer jsp
page import edu ncsu csc action View Messages Action page import edu ncsu csc beans Message Bean page import edu ncsu csc dao Factory page import java util List taglib uri tags tld prefix page error Page auth exception Handler jsp include file global jsp page Title Trust View Messages include file header jsp div align center h Messages h logging Action log Event Transaction Type logged View Messages Action action new View Messages Action prod logged long Value List Message Bean messages action get Messages session set Attribute messages messages messages size table class f Table tr th Sender th th Message th th Received th th nbsp th tr int index Message Bean message messages tr td String Escape Utils escape Html action get Personnel Name message get td td String Escape Utils escape Html message get Body td td String Escape Utils escape Html message get Sent Date td td href reply jsp msg String Escape Utils escape Html index Reply td tr index table else div messages div br br div include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util Array List page import java util List page import java text Date Format page import java util Date page import edu ncsu csc action Edit Action page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Personnel Bean page import edu ncsu csc beans Allergy Bean page import edu ncsu csc beans Family Member Bean page import edu ncsu csc beans Health Record page import edu ncsu csc beans Office Visit Bean page import edu ncsu csc beans Procedure Bean page import edu ncsu csc action View Records Action page import edu ncsu csc dao mysql Patient page import edu ncsu csc dao mysql Personnel include file global jsp page Title Trust View Records include file header jsp session remove Attribute personnel List Long original Logged logged String representee request get Parameter rep boolean Representing false representee null equals representee int representee Index Integer parse Int representee List Patient Bean representees List Patient Bean session get Attribute representees representees null logged new Long representees get representee Index get session remove Attribute representees Representing true logged new Long action represent Patient representee span currently viewing representee records span br Patient Bean patient new Patient prod get Patient logged long Value Date Format df Date Format get Date Instance View Records Action action new View Records Action prod logged long Value patient action get Patient List Health Record records action get Health Records List Office Visit Bean office Visits action get Office Visits List Family Member Bean family action get Family History List Allergy Bean allergies action get Allergies List Patient Bean represented action get Represented logging Action log Event Transaction Type original Logged patient get request get Parameter message null div class Trust Message style font size px align center String Escape Utils escape Html request get Parameter message div br table align center tr td div style float left margin right px table class f Table border align center tr th colspan Patient Information th tr tr td class sub Header Vertical Name td td String Escape Utils escape Html patient get Full Name td tr tr td class sub Header Vertical Address td td String Escape Utils escape Html patient get Street Address br equals patient get Street Address patient get Street Address br String Escape Utils escape Html patient get Street Address br td tr tr td class sub Header Vertical Phone td td String Escape Utils escape Html patient get Phone td tr tr td class sub Header Vertical Email td td String Escape Utils escape Html patient get Email td tr tr th colspan Insurance Information th tr tr td class sub Header Vertical Provider Name td td String Escape Utils escape Html patient get Ic Name td tr tr td class sub Header Vertical Address td td String Escape Utils escape Html patient get Ic Address br equals patient get Ic Address patient get Ic Address br String Escape Utils escape Html patient get Ic Address br td tr tr td class sub Header Vertical Phone td td String Escape Utils escape Html patient get Ic Phone td tr table div div style float left margin left px table class f Table border align center tr th Office Visits th th Survey th tr Office Visit Bean ov office Visits tr td href view Office Visit jsp ov String Escape Utils escape Html ov get Visit Representing rep logged long Value String Escape Utils escape Html df format ov get Visit Date td action Survey Completed ov get Visit td nbsp td else td href survey jsp ov String Escape Utils escape Html ov get Visit ov Date String Escape Utils escape Html df format ov get Visit Date Complete Visit Survey td tr tr td colspan align center href view Prescription Records jsp String Escape Utils escape Html Representing rep logged long Value Get Prescriptions td tr table div td tr table br br table class f Table align center tr th colspan Family Medical History th tr tr class sub Header td Name td td Relation td td High Blood Pressure td td High Cholesterol td td Diabetes td td Cancer td td Heart Disease td td Smoker td td Cause Death td tr family size tr td colspan style text align center Relations record td tr else Family Member Bean member family tr td String Escape Utils escape Html member get Full Name td td String Escape Utils escape Html member get Relation td td align center action Family Member High member x td td align center action Family Member High Cholesterol member x td td align center action Family Member Diabetes member x td td align center action Family Member Cancer member x td td align center action Family Member Heart Disease member x td td align center action Family Member Smoker member x td td String Escape Utils escape Html action get Family Member member td tr table br br table align center tr td div style float left margin right px table class f Table align center tr th colspan Allergies th tr tr class sub Header td Allergy Description td td First Found td tr allergies size tr td colspan Allergies record td tr else Allergy Bean allergy allergies tr td String Escape Utils escape Html allergy get Description td td String Escape Utils escape Html df format allergy get First Found td tr table div div style float left margin left px table class f Table tr th Patients String Escape Utils escape Html patient get First Name Represents th tr tr class sub Header td Patient td tr represented size tr td String Escape Utils escape Html patient get First Name representing patients td tr else int index Patient Bean p represented tr td Representing String Escape Utils escape Html p get Full Name else href view Records jsp rep String Escape Utils escape Html index String Escape Utils escape Html p get Full Name td tr index Representing session set Attribute representees represented table div td tr table br br table class f Table align center tr th colspan Basic Health History th tr tr class sub Header td Height td td Weight td td Smokes td td Blood Pressure td td td td td td Triglycerides td td Total Cholesterol td td Last Recorded td td Personnel td tr records size List Personnel Bean personnel List new Array List Personnel Bean int index Health Record hr records tr td String Escape Utils escape Html hr get Height td td String Escape Utils escape Html hr get Weight lbs td td String Escape Utils escape Html hr Smoker td td String Escape Utils escape Html hr get Blood Pressure mm Hg td td String Escape Utils escape Html hr get Cholesterol mg td td String Escape Utils escape Html hr get Cholesterol mg td td String Escape Utils escape Html hr get Cholesterol Tri mg td td String Escape Utils escape Html hr get Total Cholesterol mg td td String Escape Utils escape Html df format hr get Date Recorded td Personnel Bean personnel new Personnel prod get Personnel hr get Personnel personnel null personnel List add personnel td personnel null href Trust auth view Personnel jsp personnel String Escape Utils escape Html index String Escape Utils escape Html personnel get Full Name td tr index session set Attribute personnel List personnel List else tr td colspan align center Data td tr table br br table class f Table align center tr th colspan Immunizations th tr tr class sub Header td Code th td Description th td Date Received th td Adverse Event th tr boolean Data true Office Visit Bean ov office Visits List Procedure Bean ov Procs action get Procedures ov get Visit Procedure Bean proc ov Procs null proc get Attribute proc get Attribute equals immunization Data false tr td String Escape Utils escape Html proc get Code td td String Escape Utils escape Html proc get Description td td String Escape Utils escape Html proc get Date td td Date date new Date date set Year date get Year proc get Date date href report Adverse Event jsp pres String Escape Utils escape Html proc get Description String Escape Utils escape Html ov get Hcp code String Escape Utils escape Html proc get Code Report td tr Data tr td colspan align center Data td tr table br include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import edu ncsu csc action View Prescription Records Action page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Link Bean page import edu ncsu csc beans Prescription Bean page import edu ncsu csc exception Form Validation Exception page import java util Array List page import java util Date page import edu ncsu csc dao mysql Patient include file global jsp page Title Trust Get Prescription Report include file header jsp List Link Bean Link List new Array List Link Bean Patient Bean patient new Patient prod get Patient logged long Value View Prescription Records Action action new View Prescription Records Action prod logged long Value List Patient Bean representees action get Representees boolean show Mine false boolean show false boolean ad Event false boolean show Adverse Button false request get Parameter mine null request get Parameter mine equals View Current show Mine true request get Parameter null request get Parameter equals View show true request get Parameter representee null request get Parameter representee equals show false request get Parameter adevent null request get Parameter adevent equals Report Adverse Events ad Event true int check new int boolean one Checked false int null request get Parameter checking request get Parameter checking Lower Case equals check one Checked true List Link Bean l List Link Bean session get Attribute beanlist int Link Bean b l check b set Checked true else b set Checked false session set Attribute beanlist l one Checked response send Redirect report Adverse Event jsp prescriptions yes else div align center span class Trust Error String Escape Utils escape Html Must report least one prescription span div div align center form action view Prescription Records jsp method post table tr td span style font size px font weight bold View Prescriptions span td td input type submit name mine value View Current input td tr tr td span style font size px font weight bold View Prescriptions span td representees size td select name representee option value option int index Patient Bean representee representees option value index String Escape Utils escape Html representee get Full Name option index select input type submit name value View input td else td anyone representative td tr table form br table class f Table show Mine List Prescription Bean prescriptions action get Prescriptions Patient logged long Value logging Action log Event Transaction Type logged logged prescriptions size tr td colspan prescriptions found td tr else tr th colspan String Escape Utils escape Html patient get Full Name th tr tr class sub Header td Code td td Description td td Duration td td Prescribing td td Report Adverse Event td tr int show Adverse Button true Prescription Bean prescription prescriptions Date date new Date date set Year date get Year prescription get End Date date tr td href view Prescription Information jsp visit String Escape Utils escape Html prescription get Visit pres String Escape Utils escape Html prescription get Id String Escape Utils escape Html prescription get Medication get Code Formatted td td String Escape Utils escape Html prescription get Medication get Description td td String Escape Utils escape Html prescription get Start Date Str String Escape Utils escape Html prescription get End Date Str td td String Escape Utils escape Html action get Prescribing Doctor prescription get Full Name td Link Bean Lbean new Link Bean Lbean set Prescriber action get Prescribing Doctor prescription get Lbean set Drug prescription get Medication get Description Lbean set Code prescription get Medication get Code Link List add Lbean td form action view Prescription Records jsp method post input name checking String Escape Utils escape Html type text value size maxlength input td tr else show Patient Bean representee representees get Integer parse Int request get Parameter representee logging Action log Event Transaction Type logged representee get tr th colspan String Escape Utils escape Html representee get Full Name th tr List Prescription Bean prescriptions action get Prescriptions Patient representee get prescriptions size tr td colspan prescriptions found td tr else tr class sub Header td Code td td Description td td Duration td td Prescribing td tr Prescription Bean prescription prescriptions tr td String Escape Utils escape Html prescription get Medication get Code Formatted td td String Escape Utils escape Html prescription get Medication get Description td td String Escape Utils escape Html prescription get Start Date Str String Escape Utils escape Html prescription get End Date Str td td String Escape Utils escape Html action get Prescribing Doctor prescription get Full Name td tr table br show Mine show Adverse Button session set Attribute beanlist Link List input type submit name adevent value Report Adverse Events input form div include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util List page import java util Array List page import edu ncsu csc dao Factory page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Visit Bean page import edu ncsu csc beans Office Visit Bean page import edu ncsu csc action View Visited Ps Action page import edu ncsu csc beans Personnel Bean page import edu ncsu csc dao mysql Patient page import edu ncsu csc exception Trust Exception include file global jsp page Title Trust Providers include file header jsp script type text javascript function remove form document get Element Id remove value document get Element Id form submit function hcp checkbox index form document get Elements Name doctor index checked else document get Element Id remove value document get Element Id form submit script Patient Bean patient new Patient prod get Patient logged long Value String designate Ps request get Parameter Values doctor String filter Name request get Parameter filter name String filter Specialty request get Parameter filter specialty String filter Zip request get Parameter filter zip String remove request get Parameter remove boolean filtered false View Visited Ps Action action new View Visited Ps Action Factory get Production Instance logged long Value String confirm try Remove designated one selected remove null remove equals confirm action undeclare remove long hcpid action get Named remove get logging Action log Event Transaction Type logged hcpid Undeclared remove Set designated Ps one selected else designate Ps null designate Ps equals String designate designate Ps confirm action declare designate logging Action log Event Transaction Type logged Declared designate modified log added logs name however moment Otherwise view designated Ps else logging Action log Event Transaction Type logged catch Trust Exception ie span String Escape Utils escape Html ie get Message span equals confirm span String Escape Utils escape Html confirm span List Visit Bean hcplist action filter List filter Name filter Specialty filter Zip br div align center h Provider list String Escape Utils escape Html patient get Full Name h br form name main Form id main Form action view Visited Ps jsp method post Submit return false target top input type hidden id remove name remove value table id hcp table class f Table style text align center tr th Name th th Specialty th th Address th th Date Office Visit th th Designated th tr int Visit Bean vb hcplist tr td String Escape Utils escape Html vb get Name td td String Escape Utils escape Html vb get Specialty td td String Escape Utils escape Html vb get Addr td td String Escape Utils escape Html vb get Date td td input name doctor value String Escape Utils escape Html vb get Name type checkbox String Escape Utils escape Html vb Designated checked checked Click hcp checkbox String Escape Utils escape Html String Escape Utils escape Html vb get Name main Form td tr tr td colspan style color text align right font weight bold font size px Select checkbox update designated td tr table form div br br form id search Form action view Visited Ps jsp method post div align center table class f Table style border none border tr th colspan Search Ps th tr tr style text align left td class sub Header Vertical Last Name td td input type text name filter name size maxlength td tr tr style text align left td class sub Header Vertical Specialty td td input type text name filter specialty size maxlength td tr tr style text align left td class sub Header Vertical Zip Code td td input type text name filter zip size maxlength td tr table br input type submit name update filter value Search div form include file footer jsp
page error Page auth exception Handler jsp page import java util List page import java util Date page import java text Simple Date Format page import edu ncsu csc action Monitor Adverse Event Action page import edu ncsu csc beans Adverse Event Bean page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc exception Exception page import edu ncsu csc exception Trust Exception include file global jsp page Title Trust Adverse Event Details include file header jsp Monitor Adverse Event Action action new Monitor Adverse Event Action prod logged long Value request get Parameter remove null try action remove Integer parse Int request get Parameter id div align center span class Trust Message Report successfully removed span div logging Action log Event Transaction Type logged long Value Removed event Integer parse Int request get Parameter id catch Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div catch Trust Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div catch Number Format Exception e div align center span class Trust Error Invalid Adverse Event String Escape Utils escape Html e get Message span div else request get Parameter Info null try action send Email Long parse Long request get Parameter patient would like know experience medication logging Action log Event Transaction Type logged long Value Requested information Adverse Event Integer parse Int request get Parameter id div align center span class Trust Message Request sent span div catch Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div catch Number Format Exception e div align center span class Trust Error Invalid Adverse Event String Escape Utils escape Html e get Message span div else List Adverse Event Bean events List Adverse Event Bean session get Attribute events int num String reporter try num Integer parse Int request get Parameter event Number reporter action get Name Long parse Long events get num get logging Action log Event Transaction Type logged long Value Viewed event num catch Number Format Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div String drug events get num get Drug events get num get Code String date events get num get Date String description events get num get Description form action adverse Event Details jsp input type hidden name id value String Escape Utils escape Html events get num get Id input type hidden name patient value String Escape Utils escape Html Long parse Long events get num get b Reporter b div String Escape Utils escape Html reporter div br b String Escape Utils escape Html session get Attribute prescription Immunization b div String Escape Utils escape Html drug div br b Date b div String Escape Utils escape Html date div br b Description b div style width String Escape Utils escape Html description div br br input type submit value Remove Event name remove input type submit value Request Information name Info form session remove Attribute events session remove Attribute prescription Immunization include file footer jsp
page error Page auth exception Handler jsp page import java util List page import java util Date page import java text Simple Date Format page import edu ncsu csc action Monitor Adverse Event Action page import edu ncsu csc beans Adverse Event Bean page import edu ncsu csc exception Form Validation Exception include file global jsp page Title Trust Monitor Adverse Events include file header jsp script function show Bar Chart id id id substring id index button window open barchart jsp id id barchart width height resizable yes script Monitor Adverse Event Action action new Monitor Adverse Event Action prod logged long Value List Adverse Event Bean events null String prescription Immunization request get Parameter prescriptions null try events action get Reports true request get Parameter start Date request get Parameter end Date prescription Immunization Prescription logging Action log Event Transaction Type logged Prescription catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div else request get Parameter immunizations null try events action get Reports false request get Parameter start Date request get Parameter end Date prescription Immunization Immunization logging Action log Event Transaction Type logged Immunization catch Form Validation Exception e div align center span class Trust Error String Escape Utils escape Html e get Message span div prescription Immunization session set Attribute events events session set Attribute prescription Immunization prescription Immunization form action adverse Event Details jsp method post input type hidden name event Number value table class f Table align center tr class header th String Escape Utils escape Html prescription Immunization th th Reporter th th Date th th Details th th String Escape Utils escape Html prescription Immunization Reports Month th tr int int code Count String current Code events size current Code events get get Code else tr td colspan align center adverse events reported td tr Adverse Event Bean event events removed equals event get Status tr td current Code equals event get Code code Count else script document get Element Id chart String Escape Utils escape Html current Code row Span String Escape Utils escape Html code Count script code Count current Code event get Code String Escape Utils escape Html event get Drug String Escape Utils escape Html event get Code td try td String Escape Utils escape Html action get Name Long parse Long event get td catch Number Format Exception e td Invalid Patient td td String Escape Utils escape Html event get Date td td href adverse Event Details jsp event Number String Escape Utils escape Html Get Details td code Count td id chart String Escape Utils escape Html current Code rowspan href adverse Event Chart jsp code String Escape Utils escape Html current Code View Chart td tr table script document get Element Id chart String Escape Utils escape Html current Code row Span code Count script form else String start Date new Simple Date Format dd yyyy format new Date String end Date new Simple Date Format dd yyyy format new Date form action monitor Adverse Events jsp method post table class f Table align center tr class sub Header td Start Date td td input name start Date value String Escape Utils escape Html start Date size input type button value Select Date td td End Date td td input name end Date value String Escape Utils escape Html end Date size input type button value Select Date td tr table br br div align center input type submit value Prescriptions name prescriptions input type submit value Immunizations name immunizations div br form include file footer jsp
page language java content Type text html charset page Encoding page import edu ncsu csc beans Survey Result Bean page import edu ncsu csc beans Hospital Bean page import edu ncsu csc action View Survey Result Action page import edu ncsu csc Bean Builder page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc dao mysql Hospitals page import edu ncsu csc beans Personnel Bean page import edu ncsu csc dao mysql Personnel page import java util Array List page import java util List taglib prefix uri tags tld page error Page auth exception Handler jsp include file global jsp page Title Trust Survey Results login Message session remove Attribute personnel List include file header jsp div align center h Search Survey Results h View Survey Result Action action new View Survey Result Action prod logged long Value Hospitals hospital new Hospitals prod List Hospital Bean hcp Hospitals hospital get Hospitals Survey Result Bean bean null String zip Code String hospital String specialty List Survey Result Bean result List null boolean form Filled request get Parameter form Filled null request get Parameter form Filled equals true form Filled bean new Bean Builder Survey Result Bean build request get Parameter Map new Survey Result Bean try set data sent input text box drop box zip Code request get Parameter hcp Zip hospital request get Parameter hcp Hospital specialty request get Parameter hcp Specialty submit zip filled zip Code equals zip Code null hospital equals hospital null span Data Zip Code Hospital allowed Please choose either Zip Hospital span else zip Code equals zip Code null bean set Pzip zip Code bean set Pspecialty specialty result List action get Survey Results Zip bean logging Action log Event Transaction Type logged long Value searched results zip code else hospital equals hospital null bean set Phospital hospital bean set Pspecialty specialty result List action get Survey Results Hospital bean logging Action log Event Transaction Type logged long Value searched results Hospital else span must enter either zip code hospital span catch Form Validation Exception e e print page Context get form action survey Results jsp method post input type hidden name form Filled value true br div style width text align left search allows search based zip code hospital search must enter either zip code hospital br Note Search zip code returns Ps zip codes match first digits br br div table tr td Zip Code td td input type text name hcp Zip maxlength size value String Escape Utils escape Html zip Code td td td td Hospital td td select name hcp Hospital option value option Hospital Bean hos hcp Hospitals option value hos get Hospital hos get Hospital equals hospital selected selected String Escape Utils escape Html hos get Hospital option select td tr tr td colspan align center Specialty optional td tr tr td colspan align center select name hcp Specialty option value String Escape Utils escape Html Survey Result Bean specialty equals Survey Result Bean selected selected Specialty option option value Survey Result Bean specialty equals Survey Result Bean selected selected String Escape Utils escape Html Survey Result Bean option option value Survey Result Bean specialty equals Survey Result Bean selected selected String Escape Utils escape Html Survey Result Bean option option value Survey Result Bean specialty equals Survey Result Bean selected selected String Escape Utils escape Html Survey Result Bean option option value Survey Result Bean specialty equals Survey Result Bean selected selected String Escape Utils escape Html Survey Result Bean option option value Survey Result Bean specialty equals Survey Result Bean selected selected String Escape Utils escape Html Survey Result Bean option select td tr tr tr td colspan align center input type submit style font size pt font weight bold value Search td tr table form result List null br h Survey Results h result List size span class Trust Error Ps found meet search criteria Please change search criteria search span else table class f Table tr th colspan Search Results th tr tr class sub Header th Doctor Name th th Address th th Address th th City th th State th th Zip th th Specialty th th Hospital th th Waiting Room br Minutes th th Exam Room br Minutes th th Visit br Satisfaction th th Treatment br Satisfaction th th Percent br Results th tr List Personnel Bean personnel List new Array List Personnel Bean int index Survey Result Bean survey Result result List tr td align center href Trust auth view Personnel jsp personnel String Escape Utils escape Html index String Escape Utils escape Html survey Result get First Name String Escape Utils escape Html survey Result get Last Name td td align center String Escape Utils escape Html survey Result get Paddress td td align center String Escape Utils escape Html survey Result get Paddress td td align center String Escape Utils escape Html survey Result get Pcity td td align center String Escape Utils escape Html survey Result get Pstate td td align center String Escape Utils escape Html survey Result get Pzip td td align center String Escape Utils escape Html survey Result get Pspecialty td td align center String Escape Utils escape Html survey Result get Phospital td td align center String format f survey Result get Avg Waiting Room Minutes td td align center String format f survey Result get Avg Exam Room Minutes td td align center String format f survey Result get Avg Visit Satisfaction td td align center String format f survey Result get Avg Treatment Satisfaction td td align center String format f survey Result get Percent Satisfaction Results td tr Personnel Bean personnel new Personnel prod get Personnel survey Result get personnel List add personnel index session set Attribute personnel List personnel List table table tr td search results show averages include ol li Number minutes patients typically wait waiting room li Average number minutes patients wait examination room prior seeing physician li Average office visit satisfaction li Average satisfaction treatment information li Percent office visits satisfaction information available ol td tr table br div include file footer jsp
page import edu ncsu csc enums Transaction Type page import edu ncsu csc beans Operational Profile page import java text Number Format include file global jsp page Title Trust Tester Home include file header jsp div style text align center h Operational Profile h try Operational Profile op prod get Transaction get Operational Profile logging Action log Event Transaction Type logged Number Format formatter Number Format get Percent Instance table class fancy Table align center border cellpadding cellspacing tr th Operation th th colspan Total th th colspan Patients th th colspan Personnel th tr int Transaction Type type Transaction Type values tr class alt td align left String Escape Utils escape Html type get Description td td align center String Escape Utils escape Html op get Total Count get type td td align center String Escape Utils escape Html formatter format double op get Total Count get type op get Num Total Transactions td td align center String Escape Utils escape Html op get Patient Count get type td td align center String Escape Utils escape Html formatter format double op get Patient Count get type op get Num Patient Transactions td td align center String Escape Utils escape Html op get Personnel Count get type td double personnel Percent op get Num Personnel Transactions personnel Percent double op get Personnel Count get type op get Num Personnel Transactions td align center String Escape Utils escape Html formatter format personnel Percent td tr tr td b Totals b td td colspan align center String Escape Utils escape Html op get Num Total Transactions td td colspan align center String Escape Utils escape Html op get Num Patient Transactions td td colspan align center String Escape Utils escape Html op get Num Personnel Transactions td tr table div catch Exception e span Exception Occurred span br String Escape Utils escape Html e get Message e print Stack Trace include file footer jsp
page import java util List page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Remote Monitoring Data Bean page import edu ncsu csc beans Telemedicine Bean page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc action Add Remote Monitoring Data Action page import edu ncsu csc exception Trust Exception taglib prefix uri tags tld page error Page auth exception Handler jsp include file global jsp page Title Trust Report Status include file header jsp String switch String request get Parameter switch null switch String request get Parameter switch String patient String request get Parameter patient null patient String request get Parameter patient String pid String switch String equals true pid String else patient String equals int patient Index Integer parse Int patient String List Long patients List Long session get Attribute patients pid String patients get patient Index session remove Attribute patients session remove Attribute patient session set Attribute pid pid String else pid String String session get Attribute pid pid String null pid String length response send Redirect uap get Patient Monitor List jsp forward add Telemedicine Data jsp return Add Remote Monitoring Data Action action new Add Remote Monitoring Data Action prod logged long Value Long parse Long pid String List Telemedicine Bean Beans action get Telemedicine Bean Long parse Long pid String Default allow none Beans size Telemedicine Bean b new Telemedicine Bean b set Systolic Blood Pressure Allowed false b set Diastolic Blood Pressure Allowed false b set Glucose Level Allowed false b set Height Allowed false b set Weight Allowed false b set Pedometer Reading Allowed false Beans add b Update information boolean form Filled request get Parameter form Filled null request get Parameter form Filled equals true form Filled try boolean glucose Submitted request get Parameter glucose Level null equals request get Parameter glucose Level boolean systolic Submitted request get Parameter systolic Blood Pressure null equals request get Parameter systolic Blood Pressure boolean diastolic Submitted request get Parameter diastolic Blood Pressure null equals request get Parameter diastolic Blood Pressure boolean height Submitted request get Parameter height null equals request get Parameter height boolean weight Submitted request get Parameter weight null equals request get Parameter weight boolean pedometer Submitted request get Parameter pedometer Reading null equals request get Parameter pedometer Reading diastolic Submitted systolic Submitted div align center span class Trust Error Systolic Diastolic Blood Pressure must submitted together span div else int glucose Level glucose Submitted Integer parse Int request get Parameter glucose Level int systolic systolic Submitted Integer parse Int request get Parameter systolic Blood Pressure int diastolic diastolic Submitted Integer parse Int request get Parameter diastolic Blood Pressure float height height Submitted Float parse Float request get Parameter height f float weight weight Submitted Float parse Float request get Parameter weight f int pedometer pedometer Submitted Integer parse Int request get Parameter pedometer Reading Remote Monitoring Data Bean rmd Bean new Remote Monitoring Data Bean rmd Bean set Glucose Level glucose Level rmd Bean set Systolic Blood Pressure systolic rmd Bean set Diastolic Blood Pressure diastolic rmd Bean set Height height rmd Bean set Weight weight rmd Bean set Pedometer Reading pedometer action add Remote Monitoring Data rmd Bean logging Action log Event Transaction Type logged Long parse Long pid String div align center span class Trust Message Information Successfully Added span div session remove Attribute pid catch Form Validation Exception e form Filled false div align center span class Trust Error String Escape Utils escape Html e get Message span div catch Number Format Exception e form Filled false div align center span class Trust Error Invalid entry String Escape Utils escape Html e get Message Please enter whole number span div catch Trust Exception e form Filled false div align center span class Trust Error Invalid entry String Escape Utils escape Html e get Message span div form Filled conflict exists multiple Ps allow input boolean report Blood Pressure false boolean report Glucose false boolean report Height false boolean report Weight false boolean report Pedometer false Telemedicine Bean tb Beans tb Systolic Blood Pressure Allowed tb Diastolic Blood Pressure Allowed report Blood Pressure true tb Glucose Level Allowed report Glucose true tb Height Allowed report Height true tb Weight Allowed report Weight true tb Pedometer Reading Allowed report Pedometer true form action add Telemedicine Data jsp method post input type hidden name form Filled value true br table cellspacing align center cellpadding tr report Blood Pressure report Glucose report Height report Weight report Pedometer td valign top table class f Table align center style width px report Blood Pressure tr td class sub Header Vertical Systolic Blood Pressure td td input name systolic Blood Pressure value type text td tr tr td class sub Header Vertical Diastolic Blood Pressure td td input name diastolic Blood Pressure value type text td tr report Glucose tr td class sub Header Vertical Glucose Level td td input name glucose Level value type text td tr report Height tr td class sub Header Vertical Height td td input name height value type text td tr report Weight tr td class sub Header Vertical Weight td td input name weight value type text td tr report Pedometer tr td class sub Header Vertical Pedometer Reading td td input name pedometer Reading value type text td tr table td td width px nbsp td td valign top td tr table br div align center report Blood Pressure report Glucose report Height report Weight report Pedometer input type submit name action style font weight bold value Report else authorized report telemedicine data patient br input type submit name action style font weight bold value Report disabled br br div form include file footer jsp
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util Array List page import java util List page import edu ncsu csc beans Remote Monitoring Data Bean page import edu ncsu csc beans Telemedicine Bean page import edu ncsu csc action View Remote Monitoring List Action page import edu ncsu csc action Add Remote Monitoring Data Action include file global jsp page Title Trust View Monitored Patients logging Action log Event Transaction Type logged long Value Viewed monitored patients include file header jsp View Remote Monitoring List Action action new View Remote Monitoring List Action prod logged long Value List Remote Monitoring Data Bean data action get Patient Data Without Logging br form action get Patient Monitor List jsp method post name myform table class f Table align center tr th colspan Patients th tr tr class sub Header th Patient th tr List Long patients new Array List Long int index List Telemedicine Bean Beans boolean Monitored false Add Remote Monitoring Data Action rmd Action new Add Remote Monitoring Data Action prod logged long Value Remote Monitoring Data Bean bean data patients contains bean get Patient Beans rmd Action get Telemedicine Bean bean get Patient Monitored false Telemedicine Bean tb Beans tb Diastolic Blood Pressure Allowed tb Glucose Level Allowed tb Height Allowed tb Pedometer Reading Allowed tb Systolic Blood Pressure Allowed tb Weight Allowed Monitored true break Monitored patients add bean get Patient tr td href request get Parameter forward patient String Escape Utils escape Html index String Escape Utils escape Html action get Patient Name bean get Patient td tr index session set Attribute patients patients table form br br include file footer jsp
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import edu ncsu csc Util import edu ncsu csc Random Password import edu ncsu csc dao Factory import edu ncsu csc enums Role import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Auth anything authentication methods access users table stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Auth public static final long min private Factory factory typical constructor param factory link Factory associated used obtaining connections etc public Auth Factory factory factory factory Add particular user system add user specific information e g Patient Initially sets security question random set characters nobody able guess value param mid user Long param role role user Role enum link Role param password password new user return string representing newly added randomly generated password throws Exception public String add User Long mid Role role String password throws Exception Connection conn null Prepared Statement pstmt null try conn factory get Connection pstmt conn prepare Statement Users Question Answer pstmt set Long mid pstmt set String password pstmt set String role String pstmt set String Enter random password given account email String pwd Random Password get Random Password pstmt set String pwd pstmt execute Update return pwd catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn pstmt Reset security question answer particular user param question security question string param answer security answer string param mid user long throws Exception public void set Security Question Answer String question String answer long mid throws Exception Connection conn null Prepared Statement pstmt null try conn factory get Connection pstmt conn prepare Statement Users Question Answer pstmt set String question pstmt set String answer pstmt set Long mid pstmt execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn pstmt Returns user name user param mid user get name return user name String throws Exception throws Trust Exception public String get User Name long mid throws Exception Trust Exception Role role get User Role mid switch role case case case case case case return factory get Personnel get Name mid case return factory get Patient get Name mid case return String value mid default throw new Trust Exception Role role supported Returns role particular param mid user look return link Role user enum throws Exception throws Trust Exception public Role get User Role long mid throws Exception Trust Exception Connection conn null Prepared Statement pstmt null try conn factory get Connection pstmt conn prepare Statement role Users pstmt set Long mid Result Set rs rs pstmt execute Query rs next return Role parse rs get String role else throw new Trust Exception User exist catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn pstmt Change password particular user param mid user whose password changing param password new password throws Exception public void reset Password long mid String password throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Users password ps set String password ps set Long mid ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return security question particular user param mid user looking return security question user looking throws Trust Exception public String get Security Question long mid throws Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Question Users ps set Long mid Result Set r ps execute Query r next return r get String Question else throw new Trust Exception security question set mid catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return security answer particular user param mid user looking return security answer String throws Trust Exception public String get Security Answer long mid throws Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Answer Users ps set Long mid Result Set r ps execute Query r next return r get String Answer else throw new Trust Exception security answer set mid catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Record login failure blacklists ip Address Uses database table like hash table key user address user address table row added param ip Addr address user String throws Exception public void record Login Failure String ip Addr throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Login Failures Failure Count Failure Count last Failure Address prepare Statement Login Failures ps set String ip Addr ps set Int failures ps set Date Calendar get Instance get Time int num Updated ps execute Update num Updated n empty row begin insert Login Failure Row ip Addr conn row strike em catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Record reset password failure blacklists ip Address Uses database table like hash table key user address user address table row added param ip Addr address user String throws Exception public void record Reset Password Failure String ip Addr throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Reset Password Failures failurecount failurecount ipaddress ps set String ip Addr int num Updated ps execute Update num Updated n empty row begin insert Reset Password Row ip Addr conn row strike catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return number failures resetting password given address param ip Addr address associated attempt String return int representing number failures throws Exception public int get Reset Password Failures String ip Addr throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Reset Password Failures ps set String ip Addr Result Set rs ps execute Query rs next minutes clear failure count System current Time Millis rs get Timestamp last Failure get Time update Reset Failures Zero ip Addr conn return else return rs get Int failure Count else insert Reset Password Row ip Addr conn return catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return number failures login failures password given address param ip Addr address attempt String return int representing number failures occured throws Exception public int get Login Failures String ip Addr throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Login Failures ps set String ip Addr Result Set rs ps execute Query rs next minutes clear failure count System current Time Millis rs get Timestamp last Failure get Time update Failures Zero ip Addr conn return else return rs get Int failure Count else insert Login Failure Row ip Addr conn return catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps private void insert Login Failure Row String ip Addr int failure Count Connection conn throws Exception Exception Prepared Statement ps conn prepare Statement Login Failures Address failure Count ps set String ip Addr ps set Int failure Count ps execute Update private void insert Reset Password Row String ip Addr int failure Count Connection conn throws Exception Exception Prepared Statement ps conn prepare Statement Reset Password Failures Address failure Count ps set String ip Addr ps set Int failure Count ps execute Update private void update Failures Zero String ip Addr Connection conn throws Exception Exception Prepared Statement ps conn prepare Statement Login Failures failure Count Address ps set String ip Addr ps execute Update public void reset Login Failures Zero String ip Addr throws Exception Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Login Failures failure Count Address ps set String ip Addr ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps private void update Reset Failures Zero String ip Addr Connection conn throws Exception Exception Prepared Statement ps conn prepare Statement Reset Password Failures failure Count Address ps set String ip Addr ps execute Update Check user actually exists param mid return throws Exception public boolean check User Exists long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Users ps set Long mid Result Set rs ps execute Query return rs next catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc action import edu ncsu csc dao Factory import edu ncsu csc dao mysql Access import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception Used change session timeout session Timeout jsp Note change timeout gets reflected new sessions author Andy Meneely public class Change Session Timeout Action private Access access Sets defualts param factory author Andy Meneely public Change Session Timeout Action Factory factory access factory get Access Changes session timeout complicated logic somewhat regrettably link Access param minute String Pass number minutes form string greater throws Form Validation Exception throws Exception author Andy Meneely public void change Session Timeout String minute String throws Form Validation Exception Exception try Integer minutes Integer value minute String minutes throw new Form Validation Exception Must number greater access set Session Timeout Mins minutes catch Number Format Exception e throw new Form Validation Exception number Returns current session timeout minutes reflected database return number minutes would take inactive session timeout throws Exception author Andy Meneely public int get Session Timeout throws Exception return access get Session Timeout Mins
package edu ncsu csc action import java util List import edu ncsu csc action base Patient Base Action import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc exception Exception import edu ncsu csc exception Health Records Exception import edu ncsu csc exception Trust Exception import edu ncsu csc risk Chronic Disease Mediator import edu ncsu csc risk Risk Checker Used chronic Disease Risks jsp Passes logic link Chronic Disease Mediator various subclasses link Risk Checker author Andy Meneely public class Chronic Disease Risk Action extends Patient Base Action private Auth auth private Chronic Disease Mediator disease Mediator param factory param logged param pid String patient validated used throws Trust Exception throws Exception throws Health Records Exception thrown patient added without health records checked Try avoid exception thrown normal flow events author Andy Meneely public Chronic Disease Risk Action Factory factory long logged String pid String throws Trust Exception Exception Health Records Exception super factory pid String auth factory get Auth disease Mediator new Chronic Disease Mediator factory pid Returns patient checked return patient whose risk checking author Andy Meneely public long get Patient return pid Gives full name patient return Full name patient checking throws Exception throws Trust Exception author Andy Meneely public String get User Name throws Exception Trust Exception return auth get User Name pid Returns risks patient risk logic passed link Chronic Disease Mediator subclasses link Risk Checker return List risks throws Trust Exception throws Exception author Andy Meneely public List Risk Checker get Diseases Risk throws Trust Exception Exception return disease Mediator get Disease Risk
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Procedure Bean import edu ncsu csc beans loaders Procedure Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Used managing codes stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os code set accurately describes medical surgical diagnostic services designed communicate uniform information medical services procedures among physicians coders patients accreditation organizations payers administrative financial analytical purposes see http www ama assn org ama pub physician resources solutions managing practice coding billing insurance cpt cpt shtml author Andy public class Codes private Factory factory private Procedure Bean Loader procedure Bean Loader new Procedure Bean Loader typical constructor param factory link Factory associated used obtaining connections etc public Codes Factory factory factory factory Returns list codes return java util List Procedure Beans codes throws Exception public List Procedure Bean get Codes throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Result Set rs ps execute Query return procedure Bean Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns list immunization codes return java util List Immunization related codes throws Exception public List Procedure Bean get Immunization Codes throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement select cptcodes attribute immunization order code Result Set rs ps execute Query return procedure Bean Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns list non immunization codes return java util List Immunization related codes throws Exception public List Procedure Bean get Procedure Codes throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement select cptcodes attribute order code Result Set rs ps execute Query return procedure Bean Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns particular procedure description code param code string representation code return textual description code throws Exception public Procedure Bean get Code String code throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Code ps set String code Result Set rs ps execute Query rs next return procedure Bean Loader load Single rs return null catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds new code returns added successfully param proc Procedure Bean representing new code information return boolean whether operation successful throws Exception throws Trust Exception public boolean add Code Procedure Bean proc throws Exception Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Code Description Attribute ps set String proc get Code ps set String proc get Description ps set String proc get Attribute return ps execute Update catch Exception e e print Stack Trace e get Error Code throw new Trust Exception Error Code already exists throw new Exception e finally Util close Connection conn ps Change procedure description particular code param proc Procedure Bean representing new code information return boolean whether operation successful throws Exception public int update Code Procedure Bean proc throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Description Attribute Code ps set String proc get Description ps set String proc get Attribute ps set String proc get Code return ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc action import java util List import edu ncsu csc beans Personnel Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc dao mysql Patient import edu ncsu csc enums Role import edu ncsu csc exception Trust Exception Used patient declare Ps designated edit Ps jsp author Andy Meneely public class Declare Action private Patient patient private Auth auth private long logged Sets defaults param factory factory used generating Os action param logged patient author Andy Meneely public Declare Action Factory factory long logged logged logged patient factory get Patient auth factory get Auth Lists declared Ps current patient return Returns list declared Ps throws Trust Exception author Andy Meneely public List Personnel Bean get Declared throws Trust Exception return patient get Declared Ps logged Validate declare possible param hcp Str declare return status message throws Trust Exception author Andy Meneely public String declare String hcp Str throws Trust Exception try long hcp Long value hcp Str auth get User Role hcp Role throw new Trust Exception user licensed healthcare professional boolean confirm patient declare logged hcp confirm return successfully declared else return declared catch Number Format Exception e throw new Trust Exception number Validate undeclare possible param input undeclare return throws Trust Exception author Andy Meneely public String undeclare String input throws Trust Exception try long hcp Long value input boolean confirm patient undeclare logged hcp confirm return successfully undeclared else return undeclared catch Number Format Exception e throw new Trust Exception number
package edu ncsu csc validate import edu ncsu csc beans Diagnosis Bean import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception Validates code author Andy public class Diagnosis Bean Validator extends Bean Validator Diagnosis Bean default constructor public Diagnosis Bean Validator Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Diagnosis Bean throws Form Validation Exception Error List error List new Error List error List add Null check Format Code get Code Validation Format false error List add Null check Format Description get Description Validation Format false error List Errors throw new Form Validation Exception error List
package edu ncsu csc action import java util List import edu ncsu csc beans Drug Interaction Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Drug Interaction import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Drug Interaction Validator Used Edit Drug Interaction jsp edit get information drug interactions public class Drug Interaction Action private Drug Interaction drug private Drug Interaction Validator validator long logged Sets defaults param factory factory used generating Os action public Drug Interaction Action Factory factory long logged drug factory get Drug Interaction validator new Drug Interaction Validator logged logged Method report interaction param first Drug param second Drug param description return public String report Interaction String first Drug String second Drug String description throws Trust Exception Form Validation Exception first Drug equals second Drug return Interactions recorded two different drugs Drug Interaction Bean drug Int new Drug Interaction Bean drug Int set First Drug first Drug drug Int set Second Drug second Drug drug Int set Description description try validator validate drug Int drug report Interaction first Drug second Drug description return Interaction recorded successfully else return Interaction could added catch Exception e e print Stack Trace return e get Message Method delete interaction param first Drug param second Drug return public String delete Interaction String first Drug String second Drug throws Trust Exception Form Validation Exception Drug Interaction Bean drug Int new Drug Interaction Bean drug Int set First Drug first Drug drug Int set Second Drug second Drug drug Int set Description blank try validator validate drug Int drug delete Interaction first Drug second Drug return Interaction deleted successfully else return Interaction could deleted catch Exception e e print Stack Trace throw new Trust Exception e get Message Method return list drug interactions given drug param drug Code Code drug return public List Drug Interaction Bean get Interactions String drug Code throws Trust Exception try return drug get Interactions drug Code catch Exception e throw new Trust Exception e get Message
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Drug Interaction Bean import edu ncsu csc beans loaders Drug Interaction Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Used managing drug interactions stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os see http www fda gov Drugs Information Drugs ucm htm author Andy public class Drug Interaction private Factory factory private Drug Interaction Bean Loader interaction Loader typical constructor param factory link Factory associated used obtaining connections etc public Drug Interaction Factory factory factory factory interaction Loader new Drug Interaction Bean Loader Returns list drug interactions input drug name return java util List Drug Interaction Beans throws Exception public List Drug Interaction Bean get Interactions String drug Code throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement druginteractions First Drug Second Drug ps set String drug Code ps set String drug Code Result Set rs ps execute Query return interaction Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds new drug interaction returns whether addition successful code already exists Trust Exception thrown param first Drug name first drug interaction param second Drug name second drug interaction param description Explanation drug interaction return boolean indicating success failure throws Exception throws Trust Exception public boolean report Interaction String first Drug String second Drug String description throws Exception Trust Exception first Drug equals second Drug throw new Trust Exception Drug interact List Drug Interaction Bean current Ints Drug get Interactions second Drug Drug Interaction Bean dib current Ints Drug dib get Second Drug equals first Drug throw new Trust Exception Error Interaction drugs already exists Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement druginteractions First Drug Second Drug Description ps set String first Drug ps set String second Drug ps set String description return ps execute Update catch Exception e e print Stack Trace e get Error Code throw new Trust Exception Error Interaction drugs already exists throw new Exception e finally Util close Connection conn ps Remove interaction database param first Drug name first patient param second Drug name second patient return true removed successfully false list public boolean delete Interaction String first Drug String second Drug throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement druginteractions First Drug Second Drug First Drug Second Drug ps set String first Drug ps set String first Drug ps set String second Drug ps set String second Drug ps execute Update return false return true catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc action import java util List import edu ncsu csc action base Patient Base Action import edu ncsu csc beans Health Record import edu ncsu csc beans forms Health Record Form import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc dao mysql Health Records import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Health Record Form Validator Edits health history patient used edit Basic Health jsp author laurenhayward public class Edit Health History Action extends Patient Base Action private Health Records hr private Auth auth private long logged private Health Record Form Validator validator new Health Record Form Validator patient validated superclass param factory Factory used generate Os used action param logged user authorizing action param pid String patient user edited throws Trust Exception public Edit Health History Action Factory factory long logged String pid String throws Trust Exception super factory pid String hr factory get Health Records auth factory get Auth logged logged returns patient name return patient name throws Exception throws Trust Exception public String get Patient Name throws Exception Trust Exception return auth get User Name pid Adds health record given patient param pid patient record edited param hr filled health record form added return message Information Recorded exception message throws Form Validation Exception public String add Health Record long pid Health Record Form hr throws Form Validation Exception Trust Exception validator validate hr Health Record record transfer Form pid hr hr add record return Information Recorded Moves information form Health Record param pid Patient interest param form Form translated return Health Record containing information form throws Form Validation Exception private Health Record transfer Form long pid Health Record Form form throws Form Validation Exception Health Record record new Health Record record set Patient pid record set Personnel logged record set Blood Pressure Integer value form get Blood Pressure record set Blood Pressure Integer value form get Blood Pressure record set Cholesterol Integer value form get Cholesterol record set Cholesterol Integer value form get Cholesterol record set Cholesterol Tri Integer value form get Cholesterol Tri record get Total Cholesterol record get Total Cholesterol throw new Form Validation Exception Total cholesterol must record set Height Double value form get Height record set Weight Double value form get Weight record set Smoker Integer value form get Smoker return record Returns list Health Records given patient param pid patient look return list Health Records throws Trust Exception public List Health Record get Health Records long pid throws Trust Exception return hr get Health Records pid
package edu ncsu csc action import java util List import edu ncsu csc beans Remote Monitoring Data Bean import edu ncsu csc beans Telemedicine Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc dao mysql Remote Monitoring import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Handles changes adds removes monitoring list certain public class Edit Monitoring List Action private Remote Monitoring rm private Auth auth private long logged Constructor param factory Factory used create Os used action param logged editing monitoring list public Edit Monitoring List Action Factory factory long logged logged logged rm factory get Remote Monitoring auth factory get Auth Adds patient current remote monitoring list param patient patient param permissions Array indicating data patient allowed enter Ordered Systolic Blood Pressure Diastolic Blood Pressure Glucose Level Weight Pedometer Reading return true added successfully False already list throws Exception public boolean add List long patient Telemedicine Bean Bean throws Exception return rm add Patient List patient logged Bean Removes patient current remote monitoring list param patient patient return true removed successfully False list throws Exception public boolean remove List long patient throws Exception return rm remove Patient List patient logged Returns whether patient list already param patient patient return true false otherwise throws Exception public boolean Patient List long patient throws Exception List Remote Monitoring Data Bean dataset rm get Patients Data logged Remote Monitoring Data Bean dataset get Patient patient return true return false returns patient name return patient name throws Exception throws Trust Exception public String get Patient Name long pid throws Exception Trust Exception return auth get User Name pid
package edu ncsu csc action import java util Arrays import java util List import edu ncsu csc action base Edit Office Visit Base Action import edu ncsu csc beans Email import edu ncsu csc beans Hospital Bean import edu ncsu csc beans Office Visit Bean import edu ncsu csc beans Patient Bean import edu ncsu csc beans forms Edit Office Visit Form import edu ncsu csc dao Factory import edu ncsu csc dao mysql Hospitals import edu ncsu csc dao mysql Office Visit import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc enums Transaction Type import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Edit Office Visit Validator Edits office visits patient Used edit Office Visit jsp exists two states saved unsaved unsaved data saved sub actions attempted exceptions raised saved however sub actions saved author laurenhayward author student public class Edit Office Visit Action extends Edit Office Visit Base Action private Edit Office Visit Validator validator new Edit Office Visit Validator private Personnel personnel private Hospitals hospital private Office Visit ov private Patient pat private Edit Prescriptions Action prescriptions Action private Edit Procedures Action procedures Action private Edit Immunizations Action immunizations Action private Edit Diagnoses Action diagnoses Action private Edit Lab Procedures Action lab Procedures Action private Edit Patient Instructions Action patient Instructions Action private Edit Referrals Action referrals Action private Event Logging Action logging Action private long logged Patient id office visit id validated super class param factory Factory used creating Os action param logged user authorizing action param pid String patient action performed param ov String office visit play throws Trust Exception public Edit Office Visit Action Factory factory long logged String pid String String ov String throws Trust Exception super factory logged pid String ov String pid Long parse Long pid String ov factory get Office Visit personnel factory get Personnel hospital factory get Hospitals pat factory get Patient prescriptions Action new Edit Prescriptions Action factory logged pid String ov String procedures Action new Edit Procedures Action factory logged pid String ov String immunizations Action new Edit Immunizations Action factory logged pid String ov String diagnoses Action new Edit Diagnoses Action factory logged pid String ov String lab Procedures Action new Edit Lab Procedures Action factory logged pid String ov String patient Instructions Action new Edit Patient Instructions Action factory logged pid String ov String referrals Action new Edit Referrals Action factory logged pid String ov String logging Action new Event Logging Action factory logged logged Create Office Visit Action yet associated actual office visit update called saved attempt save prescriptions procedures lab procedures immunizations diagnoses raise exception param factory param logged param pid String throws Trust Exception public Edit Office Visit Action Factory factory long logged String pid String throws Trust Exception super factory logged pid String pid Long parse Long pid String ov factory get Office Visit personnel factory get Personnel hospital factory get Hospitals pat factory get Patient prescriptions Action new Edit Prescriptions Action factory logged pid String procedures Action new Edit Procedures Action factory logged pid String immunizations Action new Edit Immunizations Action factory logged pid String diagnoses Action new Edit Diagnoses Action factory logged pid String lab Procedures Action new Edit Lab Procedures Action factory logged pid String patient Instructions Action new Edit Patient Instructions Action factory logged pid String referrals Action new Edit Referrals Action factory logged pid String logging Action new Event Logging Action factory logged logged Used update sub actions office visit saved called attempting save sub actions raise exception throws Trust Exception private void reinitialize Sub Actions throws Trust Exception Unsaved throw new Trust Exception initalize Edit Office Visit sub actions ov present Factory factory get Factory String pid String get Pid String ov String get Ov prescriptions Action new Edit Prescriptions Action factory logged pid String ov String procedures Action new Edit Procedures Action factory logged pid String ov String immunizations Action new Edit Immunizations Action factory logged pid String ov String diagnoses Action new Edit Diagnoses Action factory logged pid String ov String lab Procedures Action new Edit Lab Procedures Action factory logged pid String ov String patient Instructions Action new Edit Patient Instructions Action factory logged pid String ov String referrals Action new Edit Referrals Action factory logged pid String ov String Returns office visit bean office visit return Office Visit Bean office visit throws Trust Exception public Office Visit Bean get Office Visit throws Trust Exception return get Bean return Edit Prescriptions Action sub action associated office visit throws Trust Exception public Edit Prescriptions Action prescriptions throws Trust Exception return prescriptions Action return Edit Procedures Action sub action associated office visit throws Trust Exception public Edit Procedures Action procedures throws Trust Exception return procedures Action return Edit Immunizations Action sub action associated office visit throws Trust Exception public Edit Immunizations Action immunizations throws Trust Exception return immunizations Action return Edit Diagnoses Action sub action associated office visit throws Trust Exception public Edit Diagnoses Action diagnoses throws Trust Exception return diagnoses Action return Edit Lab Procedures Action sub action associated office visit throws Trust Exception public Edit Lab Procedures Action lab Procedures throws Trust Exception return lab Procedures Action public Edit Patient Instructions Action patient Instructions throws Trust Exception return patient Instructions Action public Edit Referrals Action referrals throws Trust Exception return referrals Action list hospitals ordered office visit hcp param hcp return throws Trust Exception public List Hospital Bean get Hospitals throws Trust Exception List Hospital Bean hcps Hospitals personnel get Hospitals get Hcpid List Hospital Bean Hospitals hospital get Hospitals return combine Lists hcps Hospitals Hospitals Combines two lists hospitals param hcps Hospitals hospitals assigned param Hospitals hospitals return combined list private List Hospital Bean combine Lists List Hospital Bean hcps Hospitals List Hospital Bean Hospitals Hospital Bean hos Hospitals hcps Hospitals contains hos hcps Hospitals add hos return hcps Hospitals Updates office visit information form passed office visit yet saved calling method save well make sub actions able saved param form information update return success exception message throws Form Validation Exception public String update Information Edit Office Visit Form form throws Form Validation Exception String confirm try update Ov form confirm success return confirm catch Trust Exception e e print Stack Trace return e get Message Helper logs office visit event associated patient id id office visit id automatically included param trans Transaction type log throws Exception public void log Office Visit Event Transaction Type trans throws Exception logging Action log Event trans logged get Pid Office visit get Ov Sends e mail regarding prescribed dangerous drug param hcp prescription made param pat patient prescription param problem allergy interaction problem return sent e mail throws Exception public Email make Email App long hcp String pat String problem throws Exception Trust Exception Patient Bean p pat get Patient Long parse Long pat String hcp Name personnel get Name hcp Email email new Email email set reply com email set List Arrays List p get Email email set Subject prescribed potentially dangerous medication email set Body String format prescribed medication allergic known interaction drug currently taking hcp Name problem return email Updates office visit param form form information throws Exception throws Form Validation Exception private void update Ov Edit Office Visit Form form throws Exception Form Validation Exception Trust Exception validator validate form Office Visit Bean ov get Bean ov set Notes form get Notes ov set Visit Date Str form get Visit Date ov set Hcp Long value form get Hcp ov set Patient Long value form get Patient ov set Hospital form get Hospital update Bean ov return Office Visit Bean associated office visit saved default Office Visit Bean id patient id filled throws Exception private Office Visit Bean get Bean throws Exception Unsaved Office Visit Bean b new Office Visit Bean b set Hcp get Hcpid b set Patient get Pid return b else return ov get Office Visit ov Update office visit given data office visit yet saved save reinitialize sub actions param bean data update office visit throws Exception throws Trust Exception private void update Bean Office Visit Bean bean throws Exception Trust Exception Unsaved bean get ov ov add bean reinitialize Sub Actions else ov update bean
package edu ncsu csc action import java util Array List import java util List import edu ncsu csc action base Patient Base Action import edu ncsu csc beans Email import edu ncsu csc beans Patient Bean import edu ncsu csc beans Patient History Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Patient Validator import edu ncsu csc Email Util Edits patient Used edit Patient jsp author laurenhayward public class Edit Patient Action extends Patient Base Action private Patient Validator validator new Patient Validator private Patient patient private Personnel personnel private long logged private Email Util emailutil super class validates patient id param factory Factory used create Os action param logged user authorizing action param pid String patient edited throws Trust Exception public Edit Patient Action Factory factory long logged String pid String throws Trust Exception super factory pid String patient factory get Patient personnel factory get Personnel logged logged emailutil new Email Util factory Takes information Patient Bean param updates patient information param p new patient information throws Trust Exception throws Form Validation Exception public void update Information Patient Bean p throws Trust Exception Form Validation Exception p set pid security reasons validator validate p patient edit Patient p logged emailutil send Email make Email Returns Patient Bean patient return Patient Bean throws Exception public Patient Bean get Patient throws Exception return patient get Patient get Pid Creates e mail inform patient information updated return email notice throws Exception private Email make Email throws Exception Email email new Email List Patient Bean reps patient get Representing pid Patient Bean pb patient get Patient pid List String Addrs new Array List String Addrs add pb get Email Patient Bean r reps Addrs add r get Email email set reply com email set List Addrs patient personal representative email set Subject String format Patient Information Updated email set Body Dear pb get Full Name n patient record information updated Please login Trust see viewed records return email public void edit Message Filter String filter throws Trust Exception Form Validation Exception Patient Bean b get Patient b set Message Filter filter update Information b public boolean History throws Exception return patient History get Pid public List Patient History Bean get History throws Exception return patient get Patient History get Pid public String get Employee Name long mid throws Exception Trust Exception return personnel get Name mid
package edu ncsu csc action import edu ncsu csc action base Personnel Base Action import edu ncsu csc beans Personnel Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc dao mysql Personnel import edu ncsu csc enums Role import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Personnel Validator Edits designated personnel Used admin edit Personnel jsp staff edit Demographics jsp edit Personnel jsp author laurenhayward public class Edit Personnel Action extends Personnel Base Action private Personnel personnel private Auth auth private Personnel Validator validator new Personnel Validator Super class validates patient id param factory Factory used create Os action param logged user editing personnel param pid String user edited throws Trust Exception public Edit Personnel Action Factory factory long logged String pid String throws Trust Exception super factory pid String auth factory get Auth long pidlong Long parse Long pid String Role editor auth get User Role logged Role editing auth get User Role pidlong editor editing pidlong logged throw new Trust Exception edit demographics else editor Role editing Role editor Role editing Role editor Role editing Role throw new Trust Exception authorized edit record personnel factory get Personnel Takes information personnel Form param updates patient param personnel Form Personnel Bean new information throws Trust Exception throws Form Validation Exception public void update Information Personnel Bean personnel Form throws Trust Exception Form Validation Exception personnel Form set pid validator validate personnel Form personnel edit Personnel personnel Form public void edit Message Filter String filter throws Trust Exception Form Validation Exception Personnel Bean b personnel get Personnel get Pid b set Message Filter filter update Information b
package edu ncsu csc action import java util Array List import java util List import edu ncsu csc Email Util import edu ncsu csc action base Patient Base Action import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Allergy Bean import edu ncsu csc beans Diagnosis Bean import edu ncsu csc beans Email import edu ncsu csc beans Family Member Bean import edu ncsu csc beans Health Record import edu ncsu csc beans Office Visit Bean import edu ncsu csc beans Patient Bean import edu ncsu csc beans Procedure Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Allergy import edu ncsu csc dao mysql Family import edu ncsu csc dao mysql Health Records import edu ncsu csc dao mysql Codes import edu ncsu csc dao mysql Office Visit import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Procedures import edu ncsu csc dao mysql Personnel import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Health Records Exception import edu ncsu csc exception Trust Exception import edu ncsu csc risk Chronic Disease Mediator import edu ncsu csc risk Risk Checker Edits patient health record given patient Used edit jsp author laurenhayward public class Edit Action extends Patient Base Action private Factory factory private Patient patient private Allergy allergy private Family family private Health Records hr private Office Visit ov private Codes icd private Procedures proc private Chronic Disease Mediator disease Mediator private Personnel personnel private Personnel Bean private Patient Bean patient private Email Util emailutil Super class validates patient id param factory Factory used creating Os action param logged currently logged user authorizing action param pid String patient whose personal health records added throws Trust Exception throws Exception throws Health Records Exception public Edit Action Factory factory long logged String pid String throws Trust Exception Exception super factory pid String patient factory get Patient allergy factory get Allergy family factory get Family hr factory get Health Records ov factory get Office Visit icd factory get Codes personnel factory get Personnel personnel get Personnel logged patient patient get Patient pid proc factory get Procedures emailutil new Email Util factory factory factory Adds allergy patient records param pid param description return Allergy Added exception message list invalid fields description null throws Exception throws Trust Exception public String update Allergies long pid String description throws Form Validation Exception Exception Allergy Bean bean new Allergy Bean bean set Description description Allergy Bean Validator abv new Allergy Bean Validator abv validate bean Removed new option medication selector allergy add Allergy pid description emailutil send Email make Email return Allergy Added Returns Patient Bean patient return Patient Bean throws Trust Exception public Patient Bean get Patient throws Trust Exception return patient get Patient pid Returns list Allergy Beans patient return list Allergy Beans throws Trust Exception public List Allergy Bean get Allergies throws Trust Exception return allergy get Allergies pid Returns list Family Member Beans patient return list Family Member Beans throws Trust Exception public List Family Member Bean get Family throws Trust Exception List Family Member Bean fam new Array List Family Member Bean List Family Member Bean parents null parents family get Parents pid fam add parents fam add family get Siblings pid fam add family get Children pid parents null List Family Member Bean grandparents new Array List Family Member Bean Family Member Bean parent parents grandparents add family get Parents parent get Mid fam add grandparents Family Member Bean gp grandparents gp set Relation Grandparent return fam Returns list Health Records patient return throws Trust Exception public List Health Record get Health Records throws Trust Exception List Health Record Health Records hr get Health Records pid return Health Records Returns list Office Visit Beans return throws Trust Exception public List Office Visit Bean get Office Visits throws Trust Exception return ov get Office Visits pid Returns complete Office Visit Bean given visit return throws Trust Exception public Office Visit Bean get Complete Office Visit long visit throws Trust Exception return ov get Office Visit visit public List Procedure Bean get Procedures long visit throws Exception return proc get List visit Returns list diseases patient risk return list Risk Checkers throws Trust Exception throws Exception public List Risk Checker get Diseases Risk throws Health Records Exception Trust Exception Exception disease Mediator new Chronic Disease Mediator factory pid return disease Mediator get Disease Risk Checks see particular family member high blood pressure param member family member check return true family member high blood pressure False records family member high blood pressure throws Trust Exception public boolean Family Member High Family Member Bean member throws Trust Exception List Health Record records hr get Health Records member get Mid records size return false Health Record record records record get Blood Pressure Systolic record get Blood Pressure Diastolic return true return false Checks see particular family member high cholesterol param member family member check return true family member high cholesterol False records family member throws Trust Exception public boolean Family Member High Cholesterol Family Member Bean member throws Trust Exception List Health Record records hr get Health Records member get Mid records size return false Health Record record records record get Cholesterol record get Cholesterol return true return false Checks see particular family member diabetes param member family member check return true family member diabetes False records family member throws Trust Exception public boolean Family Member Diabetes Family Member Bean member throws Trust Exception List Diagnosis Bean diagnoses patient get Diagnoses member get Mid diagnoses size return false Diagnosis Bean diag diagnoses diag get Code starts return true return false Checks see particular family member cancer param member family member check return true family member cancer False records family member throws Trust Exception public boolean Family Member Cancer Family Member Bean member throws Trust Exception List Diagnosis Bean diagnoses patient get Diagnoses member get Mid diagnoses size return false Diagnosis Bean diag diagnoses diag get Code starts return true return false Checks see particular family member heart disease param member family member check return true family member heart disease False records family member throws Trust Exception public boolean Family Member Heart Disease Family Member Bean member throws Trust Exception List Diagnosis Bean diagnoses patient get Diagnoses member get Mid diagnoses size return false Diagnosis Bean diag diagnoses diag get Code starts return true return false Checks see particular family member smokes param member family member check return true family member smokes False records family member throws Trust Exception public boolean Family Member Smoker Family Member Bean member throws Trust Exception List Health Record records hr get Health Records member get Mid records size return false Health Record record records record Smoker return true return false Checks see family member dead returns cause death param member family member check return cause death one otherwise null throws Trust Exception public String get Family Member Family Member Bean member throws Trust Exception Patient Bean patient patient get Patient member get Mid patient get Cause Death null return Diagnosis Bean diag icd get Code patient get Cause Death diag null return return diag get Description Creates fake e mail notify user records altered return e mail sent throws Exception private Email make Email throws Exception Email email new Email List Patient Bean reps patient get Representing patient get List String Addrs new Array List String Addrs add patient get Email Patient Bean r reps Addrs add r get Email email set reply com email set List Addrs patient personal representative email set Subject String format medical records altered email set Body Health care professional get Full Name altered medical records list designated health care professionals return email
package edu ncsu csc action import java util List import edu ncsu csc action base Patient Base Action import edu ncsu csc beans Patient Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc dao mysql Patient import edu ncsu csc enums Role import edu ncsu csc exception Trust Exception Edits patient personal representatives Used hcp edit Representatives jsp author laurenhayward public class Edit Representatives Action extends Patient Base Action private Patient patient private Auth auth Super class validates patient mid param factory Factory used creating Os action param logged patient editing representatives param pid String representative question throws Trust Exception public Edit Representatives Action Factory factory long logged String pid String throws Trust Exception super factory pid String patient factory get Patient auth factory get Auth Return list patients pid represents param pid id personnel looking representees return list Patient Beans throws Trust Exception public List Patient Bean get Represented long pid throws Trust Exception return patient get Represented pid Makes patient pid represent input mid parameter param pid String mid person represented representee return message throws Trust Exception public String add Representative String pid String throws Trust Exception try long representee Long value pid String auth get User Role representee Role throw new Trust Exception user patient else super pid representee throw new Trust Exception user represent boolean confirm patient add Representative pid representee confirm return Patient represented else return change made catch Number Format Exception e return number Makes patient pid longer represent input mid param param input mid person represented representee return message throws Trust Exception public String remove Representative String input throws Trust Exception try long representee Long value input boolean confirm patient remove Representative pid representee confirm return Patient represented else return change made catch Number Format Exception e return number
package edu ncsu csc import edu ncsu csc beans Email import edu ncsu csc dao Factory import edu ncsu csc exception Exception Sends email users Since n want train spammers inserts database put actual system would replace class stuff javax mail author Andy public class Email Util private Factory factory public Email Util Factory factory factory factory Sending emails even throwaway account waste bandwidth looks suspicious want know send emails Java Google time public void send Email Email email throws Exception factory get Fake Email send Email Record email
package edu ncsu csc action import java util Array List import java util List import java util Calendar import edu ncsu csc action base Patient Base Action import edu ncsu csc beans Allergy Bean import edu ncsu csc beans Diagnosis Bean import edu ncsu csc beans Email import edu ncsu csc beans Patient Bean import edu ncsu csc beans Prescription Bean import edu ncsu csc beans Office Visit Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Allergy import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Office Visit import edu ncsu csc enums Prescription Alerts import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception import edu ncsu csc Email Util import edu ncsu csc beans Procedure Bean Creates new Emergency Report Used emergency Report jsp author laurenhayward public class Emergency Report Action extends Patient Base Action private Patient patient private Allergy allergy private Office Visit ov private Patient Bean pb private Email Util emailutil super class handles validating pid Logs viewing report param factory Factory used creating Os action param logged user looking emergency report param pid String patient whose report generated throws Trust Exception public Emergency Report Action Factory factory long logged String pid String throws Trust Exception super factory pid String patient factory get Patient allergy factory get Allergy ov factory get Office Visit emailutil new Email Util factory pb patient get Patient pid emailutil send Email make Email Returns patient name return patient full name public String get Patient Name return pb get First Name pb get Last Name Returns patient age return patient age public String get Patient Age return Integer String pb get Age Returns patient gender return patient gender public String get Patient Gender return pb get Gender String Returns patient emergency contact return patient emergency contact public String get Patient Emergency Contact return pb get Emergency Name pb get Emergency Phone Returns patient blood type return patient blood type public String get Blood Type return pb get Blood Type Returns list allergies given patient return list Allergy Beans throws Trust Exception public List Allergy Bean get Allergies throws Trust Exception return allergy get Allergies pid Returns list prescriptions patient currently taking return list Prescription Beans patient currently taking throws Trust Exception public List Prescription Bean get Current Prescriptions throws Trust Exception List Prescription Bean Prescriptions patient get Current Prescriptions pid Array List Prescription Bean warning List new Array List Prescription Bean int Prescriptions size Prescription Alerts Alert Prescriptions get get Medication get Code warning List add Prescriptions get return warning List Returns list diagnoses range indicated Diagnosis Range enum return list Diagnosis Beans throws Trust Exception public List Diagnosis Bean get Warning Diagnoses throws Trust Exception try boolean dup false List Diagnosis Bean Diagnoses patient get Diagnoses pid Array List Diagnosis Bean warning List new Array List Diagnosis Bean Diagnosis Bean bean Diagnoses Office Visit Bean ovb ov get Office Visit bean get Visit ovb null continue yes equals bean get Classification ovb get Visit Date get Time Calendar get Instance get Time Millis Diagnosis Bean wbean warning List bean get Description equals wbean get Description dup true dup warning List add bean return warning List catch Exception dbe throw new Trust Exception dbe get Message Returns list prescriptions patient currently taking return list Prescription Beans patient currently taking throws Trust Exception public List Procedure Bean get Immunizations throws Trust Exception List Procedure Bean Immunizations patient get Immunization Procedures pid return Immunizations Creates fake e mail notify user emergency report created viewed return e mail sent throws Exception private Email make Email throws Exception Email email new Email List Patient Bean reps patient get Representing pb get List String Addrs new Array List String Addrs add pb get Email Patient Bean r reps Addrs add r get Email email set reply com email set List Addrs patient personal representative email set Subject String format Emergency Report Viewed Notification email set Body Dear pb get Full Name n emergency report generated Please login Trust see viewed records return email
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Family Member Bean import edu ncsu csc beans loaders Family Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception Used queries related families stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Family private Factory factory private Family Bean Loader family Bean Loader typical constructor param factory link Factory associated used obtaining connections etc public Family Factory factory factory factory Return information mother father patient param pid patient return throws Exception public List Family Member Bean get Parents long pid throws Exception return get Family Members pid Parent p First Name First Name p Last Name Last Name p Patients p Patients p p p Mother p p Father p false Return list patients share least one parent parent patient param pid patient return java util list Family Member Beans throws Exception public List Family Member Bean get Siblings long pid throws Exception return get Family Members pid Sibling p First Name First Name p Last Name Last Name p Patients p Patients p p p p p Mother p Mother p Mother p Father p Father p Father false Return list patients whose mother father patient param pid patient return java util List Family Member Beans throws Exception public List Family Member Bean get Children long pid throws Exception return get Family Members pid Child First Name Last Name Patients Mother Father true Private helper method since three alike param pid param relation param query param second Param add pid second parameter rd query little different return java util List Family Member Beans throws Exception private List Family Member Bean get Family Members long pid String relation String query boolean second Param throws Exception Connection conn null Prepared Statement ps null family Bean Loader new Family Bean Loader relation try conn factory get Connection ps conn prepare Statement query ps set Long pid second Param ps set Long pid Result Set rs ps execute Query return family Bean Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc action import edu ncsu csc dao Factory import edu ncsu csc exception Trust Exception Handles Getting person name associated certain mid Used get User jsp author laurenhayward public class Get User Name Action private Factory factory Set defaults param factory Factory used creating Os action public Get User Name Action Factory factory factory factory Returns person name matches input param param input look return person name throws Exception throws Trust Exception public String get User Name String input throws Trust Exception try long mid Long value input return factory get Auth get User Name mid catch Number Format Exception e throw new Trust Exception correct form
package edu ncsu csc action import java util Array List import java util Date import java util Hash Map import java util List import java util Calendar import edu ncsu csc beans forms Visit Reminder Return Form import edu ncsu csc dao Factory import edu ncsu csc dao mysql Visit Reminders import edu ncsu csc dao mysql Patient import edu ncsu csc beans Procedure Bean import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc beans Visit Flag import edu ncsu csc beans Patient Bean import edu ncsu csc enums Gender Gets Visit Reminders given patient Used visit Reminders jsp author laurenhayward public class Get Visit Reminders Action Reminder Type enumeration public static enum Reminder Type Diagnosed Care Needers Flu Shot Needers Immunization Needers private String type Name private Reminder Type String type Name type Name type Name private static final Hash Map String Reminder Type map new Hash Map String Reminder Type static Reminder Type rt Reminder Type values map put rt get Type Name rt Gets Reminder Type name passed param param name return Reminder Type associated name public static Reminder Type get Reminder Type String name return map get name Returns type name string return public String get Type Name return type Name Begin Get Visit Reminders Action code private Visit Reminders visit Reminder private Patient patient private long logged Set defaults param factory Factory used create Os used action param logged person logged throws Trust Exception public Get Visit Reminders Action Factory factory long logged throws Trust Exception logged logged visit Reminder factory get Visit Reminders patient factory get Patient Returns list Visit Reminder Return Forms type passed param param type Reminder Type return list Visit Reminder Return Forms throws Trust Exception throws Form Validation Exception public List Visit Reminder Return Form get Visit Reminders Reminder Type type throws Trust Exception Form Validation Exception null type throw new Trust Exception Reminder Type switch type case return visit Reminder get Diagnosed Visit Needers logged return strip Dupes visit Reminder get Diagnosed Visit Needers logged case return visit Reminder get Flu Shot Delinquents logged case return get Immunization Needers logged default throw new Trust Exception Reminder Type Gets list anyone need immunizations param mid whose patients checked return list people need immunizations done visit reminder throws Trust Exception private List Visit Reminder Return Form get Immunization Needers long mid throws Trust Exception List Visit Reminder Return Form form List List Visit Reminder Return Form need List new Array List Visit Reminder Return Form String reason Get list patients designate form List visit Reminder get Patients mid Visit Reminder Return Form r form List reason check Immunizations r get Patient reason length need List add r r add Visit Flag new Visit Flag Visit Flag reason return need List Checks patient see immunizations need param pid patient checked return patient list lacking immunizations according schedule private String check Immunizations long pid throws Trust Exception String reason List Procedure Bean procs patient get Procedures pid Patient Bean patient patient get Patient pid long patient Age patient get Age Weeks Date patient patient get Date Birth Gender gen patient get Gender int hep long hep Time int rota long rota Time int diptet long deptet Time int haemoflu long haemoflu Time long haemoflu Time First int pneumo long pneumo Time long pneumoflu Time First int polio long polio Time int measles long measles Time int varicella long varicella Time int hep long hep Time int hpv long hpv Time Procedure Bean proc procs String cpt proc get Code Hep cpt equals hep hep Time proc get Date get Time Rotavirus else cpt equals rota rota Time proc get Date get Time Diptheria Tetanus Pertussis else cpt equals diptet deptet Time proc get Date get Time Haemophilus influenza else cpt equals haemoflu haemoflu Time First proc get Date get Time haemoflu haemoflu Time proc get Date get Time Pneumococcal else cpt equals pneumo pneumoflu Time First proc get Date get Time pneumo pneumo Time proc get Date get Time Poliovirus else cpt equals polio polio Time proc get Date get Time Measles Mumps Rubella else cpt equals measles measles Time proc get Date get Time Varicella else cpt equals varicella varicella Time proc get Date get Time Hep else cpt equals hep hep Time proc get Date get Time Human Papillomaavirus else cpt equals hpv hpv Time proc get Date get Time hep reason test Hep hep patient hep Time rota reason test Rota Virus rota patient rota Time diptet reason test Dip Tet diptet patient deptet Time haemoflu reason test Haemo Flu haemoflu patient haemoflu Time haemoflu Time First pneumo reason test Pneumo pneumo patient pneumo Time pneumoflu Time First polio reason test Polio polio patient polio Time measles reason test Measles measles patient measles Time varicella reason test Varicella varicella patient varicella Time hep reason test Hep hep patient hep Time hpv gen get Name equals Female reason test hpv patient hpv Time reason length return reason substring reason length return reason Checks see patient needs immunization param count many immunizations already param patient Age old patient weeks param time date last procedure return reason immunization given including required immunization age public static String test int count Date patient long time String reason long weeks Calendar get Instance get Time Millis time new Date count older patient reason Human Papillomavirus years else count older patient weeks reason Human Papillomavirus years months else count older patient weeks reason Human Papillomavirus years months return reason Checks see patient needs Hepatits immunization param count immunization param patient Age old patient param time current date return immunization given public static String test Hep int count Date patient long time String reason long weeks Calendar get Instance get Time Millis time count older patient reason Hepatits months else count older patient weeks reason Hepatits months return reason Checks see patient needs Varicella immunization param count immunization param patient Age old patient param time current date return immunization given public static String test Varicella int count Date patient long time String reason long weeks Calendar get Instance get Time Millis time count older patient reason Varicella months else count older patient weeks reason Varicella years return reason Checks see patient needs Measles Mumps Rubekka immunization param count immunization param patient Age old patient param time current date return immunization given public static String test Measles int count Date patient long time String reason long weeks Calendar get Instance get Time Millis time count older patient reason Measles Mumps Rubekka months else count older patient weeks reason Measles Mumps Rubekka years return reason Checks see patient needs Polio immunization param count immunization param patient Age old patient param time current date return immunization given public static String test Polio int count Date patient long time String reason long weeks Calendar get Instance get Time Millis time count older patient reason Poliovirus weeks else count older patient weeks reason Poliovirus months else count older patient reason Poliovirus months return reason Checks see patient needs Pneumococcal immunization param count immunization param patient Age old patient param time current date return immunization given public static String test Pneumo int count Date patient long time long first Dose Time String reason Date first Dose new Date first Dose Time long weeks Calendar get Instance get Time Millis time long age First patient Age first Dose Time count older patient reason Pneumococcal weeks else count older patient first Dose patient first Dose weeks reason Pneumococcal months else older patient first Dose patient first Dose first Dose patient first Dose weeks reason Pneumococcal months else count older patient weeks first Dose patient first Dose reason Pneumococcal months else count older patient weeks first Dose patient first Dose reason Pneumococcal months return reason Checks see patient needs Haemophilus Infulenzae immunization param count immunization param patient Age old patient param time current date return immunization given public static String test Haemo Flu int count Date patient long time long first Dose Time String reason long weeks Calendar get Instance get Time Millis time Date first Dose new Date first Dose Time long age First patient Age first Dose Time count older patient reason Haemophilus influenzae weeks else count older patient first Dose patient first Dose weeks reason Haemophilus influenzae months else older patient first Dose patient first Dose first Dose patient first Dose weeks reason Haemophilus influenzae months else count older patient weeks first Dose patient first Dose reason Haemophilus influenzae months return reason Checks see patient needs Diphtheria Tetanus Pertussis immunization param count immunization param patient Age old patient param time current date return immunization given public static String test Dip Tet int count Date patient long time String reason long weeks Calendar get Instance get Time Millis time count older patient reason Diphtheria Tetanus Pertussis weeks else count older patient weeks reason Diphtheria Tetanus Pertussis months else count older patient weeks reason Diphtheria Tetanus Pertussis months else count older patient weeks reason Diphtheria Tetanus Pertussis weeks else count older patient weeks reason Diphtheria Tetanus Pertussis years else count older patient weeks reason Diphtheria Tetanus Pertussis years return reason Checks see patient needs Rotavirus immunization param count immunization param patient Age old patient param time current date return immunization given public static String test Rota Virus int count Date patient long time String reason long weeks Calendar get Instance get Time Millis time count older patient reason Rotavirus weeks else count older patient weeks reason Rotavirus months else count older patient weeks reason Rotavirus months return reason Checks see patient needs Hepatitis immunization param count immunization param patient Age old patient param time current date return immunization given public static String test Hep int count Date patient long time String reason long weeks Calendar get Instance get Time Millis time count older patient reason Hepatitis birth else count older patient weeks reason Hepatitis month else count older patient weeks reason Hepatitis months return reason private static boolean older Date patient int years int months int weeks return end patient new Date years months weeks private static boolean first Dose Date patient Date age First int years int months int weeks return end patient age First years months weeks private static boolean end Date start Time Date end Time int years int months int weeks Calendar cal Calendar get Instance cal set Time start Time cal add Calendar years cal add Calendar months cal add Calendar weeks start Time cal get Time return start Time compare end Time start Time end Time
taglib uri tags tld prefix page error Page auth exception Handler jsp page import java util Array List page import java util List page import edu ncsu csc beans Patient Bean page import edu ncsu csc beans Patient Visit Bean page import edu ncsu csc action View Patient Office Visit History Action include file global jsp page Title Trust View Patients include file header jsp View Patient Office Visit History Action action new View Patient Office Visit History Action prod logged long Value List Patient Visit Bean patient Visits action get Patients logging Action log Event Transaction Type logged br form action view Report jsp method post name myform table class f Table align center thead tr th colspan Past Patients th tr tr class sub Header th Patient th th Address th th Last Visit th tr thead tbody List Patient Bean patients new Array List Patient Bean int index Patient Visit Bean bean patient Visits patients add bean get Patient tr td href edit jsp patient String Escape Utils escape Html index String Escape Utils escape Html bean get Patient Name td td String Escape Utils escape Html bean get Address bean get Address td td String Escape Utils escape Html bean get Last Date bean get Last Date bean get Last Date td tr index session set Attribute patients patients tbody table form br br include file footer jsp
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Health Record import edu ncsu csc beans loaders Health Records Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception Used health records whole history kept stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Health Records private Health Records Bean Loader loader new Health Records Bean Loader private Factory factory typical constructor param factory link Factory associated used obtaining connections etc public Health Records Factory factory factory factory Returns list health records particular patient param mid patient look return java util List Health Records throws Exception public List Health Record get Health Records long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Personal Health Information Patient ps set Long mid Result Set rs rs ps execute Query return loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds health record particular patient param record Health Record object insert return boolean indicating whether insert successful throws Exception public boolean add Health Record record throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Personal Health Information Patient Height Weight Smoker Smoking Status Blood Pressure Blood Pressure Cholesterol Cholesterol Cholesterol Tri loader load Parameters ps record int num Inserted ps execute Update return num Inserted catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc risk import static edu ncsu csc enums Ethnicity African American import static edu ncsu csc enums Ethnicity American Indian import static edu ncsu csc enums Ethnicity Hispanic import java util Array List import java util List import edu ncsu csc dao Factory import edu ncsu csc enums Gender import edu ncsu csc exception Exception import edu ncsu csc exception Health Records Exception import edu ncsu csc risk factors Age Factor import edu ncsu csc risk factors Cholesterol Factor import edu ncsu csc risk factors Ethnicity Factor import edu ncsu csc risk factors Family History Factor import edu ncsu csc risk factors Gender Factor import edu ncsu csc risk factors Hypertension Factor import edu ncsu csc risk factors Patient Risk Factor import edu ncsu csc risk factors Prior Diagnosis Factor import edu ncsu csc risk factors Smoking Factor import edu ncsu csc risk factors Weight Factor Checks see given patient risk Heart Disease details method see link Risk Checker author Andy public class Heart Disease Risks extends Risk Checker public Heart Disease Risks Factory factory long patient throws Exception Health Records Exception super factory patient Override public boolean qualifies Disease return true Override protected List Patient Risk Factor get Disease Risk Factors List Patient Risk Factor factors new Array List Patient Risk Factor factors add new Gender Factor patient Gender Male factors add new Age Factor patient factors add new Ethnicity Factor patient Hispanic African American American Indian factors add new Weight Factor current Health Record factors add new Hypertension Factor current Health Record factors add new Cholesterol Factor current Health Record factors add new Smoking Factor factory patient get factors add new Prior Diagnosis Factor factory patient get factors add new Family History Factor factory patient get return factors Override public String get Name return Heart Disease
package edu ncsu csc validate import edu ncsu csc action Update Hospital List Action import edu ncsu csc beans Hospital Bean import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception Validates input hospital beans link Update Hospital List Action author Andy public class Hospital Bean Validator extends Bean Validator Hospital Bean default constructor public Hospital Bean Validator Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Hospital Bean h throws Form Validation Exception Error List error List new Error List error List add Null check Format Hospital h get Hospital Validation Format false error List add Null check Format Hospital Name h get Hospital Name Validation Format false error List Errors throw new Form Validation Exception error List
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Hospital Bean import edu ncsu csc beans loaders Hospital Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Used managing hospitals stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Hospitals private Factory factory private Hospital Bean Loader hospital Loader new Hospital Bean Loader typical constructor param factory link Factory associated used obtaining connections etc public Hospitals Factory factory factory factory Returns list hospitals sorted alphabetically return java util List Hospital Beans throws Exception public List Hospital Bean get Hospitals throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Hospitals Hospital Name Result Set rs ps execute Query return hospital Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns particular hospital given param id String hospital return Hospital Bean representing hospital throws Exception public Hospital Bean get Hospital String id throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Hospitals Hospital ps set String id Result Set rs ps execute Query rs next return hospital Loader load Single rs return null catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds hospital param hosp Hospital Bean object insert return boolean indicating whether insertion successful throws Exception throws Trust Exception public boolean add Hospital Hospital Bean hosp throws Exception Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Hospitals Hospital Hospital Name ps set String hosp get Hospital ps set String hosp get Hospital Name return ps execute Update catch Exception e e print Stack Trace e get Error Code throw new Trust Exception Error Hospital already exists throw new Exception e finally Util close Connection conn ps Updates particular hospital description Returns number rows affected param hosp Hospital Bean update return int indicating number affected rows throws Exception public int update Hospital Hospital Bean hosp throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Hospitals Hospital Name Hospital ps set String hosp get Hospital Name ps set String hosp get Hospital return ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Assign hospital already assigned hospital Trust Exception thrown param hcp assign hospital param hospital hospital assign return boolean indicating whether assignment success throws Exception throws Trust Exception public boolean assign Hospital long hcp String hospital throws Exception Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Assigned Hos Hos ps set Long hcp ps set String hospital return ps execute Update catch Exception e e get Error Code throw new Trust Exception hcp already assigned hospital hospital e print Stack Trace throw new Exception e finally Util close Connection conn ps Unassigns hospital Returns whether changes made param hcp remove param hospital hospital removed return boolean indicating success throws Exception public boolean remove Hospital Assignment long hcp String hospital throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Assigned Hos Hos ps set Long hcp ps set String hospital return ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Removes hospital assignments particular Returns number rows affected param hcp return int representing number hospital assignments removed throws Exception public int remove Hospital Assignments long hcp throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Assigned Hos ps set Long hcp return ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Checks see assigned hospital param hcp return true assigned hospital return false assigned hospital throws Exception public boolean check Hospital long hcp throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Assigned Hos ps set Long hcp Result Set rs ps execute Query rs next return true return false catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Diagnosis Bean import edu ncsu csc beans loaders Diagnosis Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Used managing codes stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os International Statistical Classification Diseases Related Health Problems commonly known abbreviation provides codes classify diseases wide variety signs symptoms abnormal findings complaints social circumstances external causes injury disease see http www cdc gov nchs icd htm author Andy public class Codes private Factory factory private Diagnosis Bean Loader diagnosis Loader new Diagnosis Bean Loader typical constructor param factory link Factory associated used obtaining connections etc public Codes Factory factory factory factory Returns codes sorted code return java util List Diagnosis Beans throws Exception public List Diagnosis Bean get Codes throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Result Set rs ps execute Query return diagnosis Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns particular description given code param code String representation code return Diagnosis Bean code throws Exception public Diagnosis Bean get Code String code throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Code ps set String code Result Set rs ps execute Query rs next return diagnosis Loader load Single rs return null catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds code Returns whether change made param diag Diagnosis Bean representing changes return boolean indicating success throws Exception throws Trust Exception public boolean add Code Diagnosis Bean diag throws Exception Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Code Description Chronic ps set String diag get Code ps set String diag get Description ps set String diag get Classification return ps execute Update catch Exception e e print Stack Trace e get Error Code throw new Trust Exception Error Code already exists throw new Exception e finally Util close Connection conn ps Changes description particular code param diag Diagnosis Bean representing changes return boolean indicating number updated rows throws Exception public int update Code Diagnosis Bean diag throws Exception int rows Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Description Chronic Code ps set String diag get Description ps set String diag get Classification ps set String diag get Code rows ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps return rows
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Lab Procedure Bean import edu ncsu csc beans loaders Lab Procedure Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception managing lab procedure codes Database Access Object info coming already validated worry stuff Note Os need Factory access Os get connections Also every must constructor Factory parameter public class Lab Procedure private Factory factory private Lab Procedure Bean Loader lab Procedure Loader typical constructor param factory link Factory associated used obtaining connections etc public Lab Procedure Factory factory factory factory lab Procedure Loader new Lab Procedure Bean Loader Get list lab procedures associated given patient param id patient long return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures Patient long id throws Exception Connection conn null Prepared Statement ps null try id throw new Exception Patient null conn factory get Connection ps conn prepare Statement Lab Procedure Patient Rights Updated Date ps set Long id ps set String Lab Procedure Bean Allow Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get lab procedures specific office visit excluding lab procedures patient access param ovid Office visit id return throws Exception public List Lab Procedure Bean get Lab Procedures Patient long ovid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Lab Procedure Office Visit Rights Updated Date ps set Long ovid ps set String Lab Procedure Bean Allow Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets lab procedures given patient occur within next month param id patient long return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures Patient Next Month long id throws Exception Connection conn null Prepared Statement ps null try id throw new Exception Patient null conn factory get Connection ps conn prepare Statement Lab Procedure Patient Rights Status Date Diff Updated Date Updated Date ps set Long id ps set String Lab Procedure Bean Allow ps set String Lab Procedure Bean Completed Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets individual lab procedure param id lab procedure return Lab Procedure Bean representing procedure throws Exception public Lab Procedure Bean get Lab Procedure long id throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Lab Procedure Laboratory Procedure ps set Long id Result Set rs ps execute Query rs next return lab Procedure Loader load Single rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets procedures Patient param mid patient id return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures Date long mid throws Exception Connection conn null Prepared Statement ps null try mid throw new Exception Patient null conn factory get Connection ps conn prepare Statement Lab Procedure Patient Updated Date ps set Long mid Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps gets procedures particular patient particular office visit param mid patient param ovid Office Visit return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures Doc long mid long ovid throws Exception Connection conn null Prepared Statement ps null try mid throw new Exception Patient null conn factory get Connection ps conn prepare Statement Lab Procedure Patient Office Visit Updated Date ps set Long mid ps set Long ovid Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps gets procedures particular patient particular office visit param ovid Office Visit return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures Doc long ovid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Lab Procedure Office Visit ps set Long ovid Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets lab procedures period return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Lab Procedure Updated Date Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get lab procedures associated particular param mid id return throws Exception public List Lab Procedure Bean get Lab Procedures long mid throws Exception Connection conn null Prepared Statement ps null try mid throw new Exception id null conn factory get Connection ps conn prepare Statement Lab Procedure Lab Procedure Office Visit Office Visits Office Visits Office Visits ps set Long mid Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get lab procedures associated particular Patient param mid id return throws Exception public List Lab Procedure Bean get Lab Procedures long mid long pid throws Exception Connection conn null Prepared Statement ps null try mid throw new Exception id null pid throw new Exception id null conn factory get Connection ps conn prepare Statement Lab Procedure Lab Procedure Office Visit Office Visits Office Visits Office Visits Office Visits Patient ps set Long mid ps set Long pid Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get count pending lab procedures particular param mid return throws Exception public int get Pending Count long mid throws Exception Connection conn null Prepared Statement ps null try int count conn factory get Connection ps conn prepare Statement Lab Procedure Status Lab Procedure Office Visit Office Visits Office Visits Office Visits ps set String Lab Procedure Bean Pending ps set Long mid Result Set rs ps execute Query rs next count rs get Int return count catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets lab procedures given occur within next month param ovid Office Visit conducted question return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures Next Month long ovid throws Exception Connection conn null Prepared Statement ps null try ovid throw new Exception Office Visit null conn factory get Connection ps conn prepare Statement Lab Procedure Office Visit Status Date Diff Updated Date Updated Date ps set Long ovid ps set String Lab Procedure Bean Completed Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Inserts lab procedure database param b Lab Procedure Bean inserted return long containing newly inserted lab procedure bean throws Exception public long add Lab Procedure Lab Procedure Bean b throws Exception Connection conn null Prepared Statement ps null try b get Pid throw new Exception Patient null conn factory get Connection ps conn prepare Statement Lab Procedure Patient Laboratory Procedure Code Status Commentary Results Office Visit Rights Lab Tech Priority Code Numerical Results Lower Bound Upper Bound ps set Long b get Pid ps set String b get Loinc ps set String b get Status ps set String b get Commentary ps set String b get Results ps set Long b get Ov ps set String b get Rights ps set Long b get ps set Int b get Priority Code ps set String b get Numerical Result ps set String b get Lower Bound ps set String b get Upper Bound ps execute Update return Util get Last Insert conn catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Updates existing lab procedure param b Lab Procedure Bean representing procedure updated throws Exception public void update Lab Procedure Lab Procedure Bean b throws Exception Connection conn null Prepared Statement ps null try b get Pid throw new Exception Patient null conn factory get Connection ps conn prepare Statement Lab Procedure Status Commentary Results Updated Date Lab Tech Priority Code Numerical Results Lower Bound Upper Bound Laboratory Procedure ps set String b get Status ps set String b get Commentary ps set String b get Results ps set Timestamp new java sql Timestamp System current Time Millis ps set Long b get ps set Int b get Priority Code ps set String b get Numerical Result ps set String b get Lower Bound ps set String b get Upper Bound ps set Long b get Procedure ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Marks lab procedure viewed patient param b Lab Procedure Bean representing procedure marked viewed throws Exception public void mark Viewed Lab Procedure Bean b throws Exception Connection conn null Prepared Statement ps null try b get Pid throw new Exception Patient null conn factory get Connection ps conn prepare Statement Lab Procedure Viewed Patient Laboratory Procedure ps set Boolean b Viewed Patient ps set Long b get Procedure ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get count unviewed lab procedures particular patient param pid return throws Exception public int get Patient Unviewed Count long pid throws Exception Connection conn null Prepared Statement ps null try pid throw new Exception Patient null int count conn factory get Connection ps conn prepare Statement Lab Procedure Patient Rights Status Viewed Patient ps set Long pid ps set String Lab Procedure Bean Allow ps set String Lab Procedure Bean Completed Result Set rs ps execute Query rs next count rs get Int return count catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets lab procedures correspond particular param id question return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures long id String loinc throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Lab Procedure Patient Laboratory Procedure Code Status ps set Long id ps set String loinc ps set String Completed Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Updates rights user given lab procedure param b Lab Procedure Bean question throws Exception public void update Rights Lab Procedure Bean b throws Exception Connection conn null Prepared Statement ps null try b get Pid throw new Exception Patient null conn factory get Connection ps conn prepare Statement Lab Procedure Rights Updated Date Laboratory Procedure ps set String b get Rights ps set Timestamp new java sql Timestamp System current Time Millis ps set Long b get Procedure ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Delete given lab procedure form database param procedure throws Exception public void remove Lab Procedure long procedure throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement labprocedure Laboratory Procedure ps set Long procedure ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get list lab procedures transit associated given Lab Tech param id long return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures Transit Lab Tech long id throws Exception Connection conn null Prepared Statement ps null try id throw new Exception Lab Tech null conn factory get Connection ps conn prepare Statement Lab Procedure Lab Tech Status Updated Date ps set Long id ps set String Lab Procedure Bean Transit Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get list lab procedures received given Lab Tech param id long return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures Received Lab Tech long id throws Exception Connection conn null Prepared Statement ps null try id throw new Exception Lab Tech null conn factory get Connection ps conn prepare Statement Lab Procedure Lab Tech Status Priority Code Updated Date ps set Long id ps set String Lab Procedure Bean Received Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get list lab procedures testing given Lab Tech param id long return java util List Lab Procedure Beans throws Exception public List Lab Procedure Bean get Lab Procedures Testing Lab Tech long id throws Exception Connection conn null Prepared Statement ps null try id throw new Exception Lab Tech null conn factory get Connection ps conn prepare Statement Lab Procedure Lab Tech Status Updated Date ps set Long id ps set String Lab Procedure Bean Testing Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get count Transit Received lab procedures assigned specific lab tech param mid return throws Exception public int get Lab Tech Queue Size long mid throws Exception Connection conn null Prepared Statement ps null try mid throw new Exception Lab Tech null conn factory get Connection int count ps conn prepare Statement Lab Procedure Lab Tech Status Status ps set Long mid ps set String Lab Procedure Bean Transit ps set String Lab Procedure Bean Received Result Set rs ps execute Query rs next count rs get Int return count catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get count Transit Received lab procedures assigned specific lab tech grouped priority param mid return throws Exception public int get Lab Tech Queue Size Priority long mid throws Exception Connection conn null Prepared Statement ps null int sizes new int try mid throw new Exception Lab Tech null conn factory get Connection int int count ps conn prepare Statement Lab Procedure Lab Tech Status Status Priority Code ps set Long mid ps set String Lab Procedure Bean Transit ps set String Lab Procedure Bean Received ps set Int Result Set rs ps execute Query rs next count rs get Int sizes count return sizes catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps param id param parse Long param parse Long param parse Long throws Exception public void submit Test Results long id String numerical Result String numerical Result Unit String upper String lower throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Lab Procedure Numerical Results Numerical Results Unit Upper Bound Lower Bound Status Updated Date Laboratory Procedure ps set String numerical Result ps set String numerical Result Unit ps set String upper ps set String lower ps set String Pending ps set Timestamp new java sql Timestamp System current Time Millis ps set Long id ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps param parse Long throws Exception public void submit Received long id throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Lab Procedure Status Updated Date Laboratory Procedure ps set String Received ps set Timestamp new java sql Timestamp System current Time Millis ps set Long id ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps param parse Long throws Exception public void set Testing long id throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Lab Procedure Status Updated Date Laboratory Procedure ps set String Testing ps set Timestamp new java sql Timestamp System current Time Millis ps set Long id ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public List Lab Procedure Bean get Lab Procedures long id throws Exception Connection conn null Prepared Statement ps null try id throw new Exception Patient null conn factory get Connection ps conn prepare Statement Lab Procedure Patient Laboratory Procedure Code ps set Long id Result Set rs ps execute Query return lab Procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc action import java util List import java util Array List import edu ncsu csc beans Lab Procedure Bean import edu ncsu csc beans Office Visit Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Lab Procedure import edu ncsu csc dao mysql Office Visit import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc validate Lab Procedure Validator Action class Lab Proc jsp extends Lab Proc Action public class Lab Proc Action extends Lab Proc Action private Lab Procedure lp private Office Visit ov long logged private Lab Procedure Validator validator Sets defaults param factory Factory used create Os used action param logged logged public Lab Proc Action Factory factory long logged super factory logged lp factory get Lab Procedure ov factory get Office Visit logged logged validator new Lab Procedure Validator method sorts returns list param id sort list return List sorted public List Lab Procedure Bean sort long id throws Exception return lp get Lab Procedures id Returns list lab procedures next month return lab procedures next month public List Lab Procedure Bean get Lab Proc Next Month throws Exception List Lab Procedure Bean list Lab Proc new Array List Lab Procedure Bean List Office Visit Bean list ov get Office Visits logged Office Visit Bean ov list list Lab Proc Empty true list Lab Proc lp get Lab Procedures Next Month ov get else Lab Procedure Bean lb lp get Lab Procedures Next Month ov get list Lab Proc add lb return list Lab Proc Changes privacy settings param x procedure change public void change Privacy long x throws Exception Form Validation Exception Lab Procedure Bean pb lp get Lab Procedure x check Access x pb get Rights equals Lab Procedure Bean Restrict pb allow else pb restrict validator validate pb lp update Rights pb Checks see logged one made procedure Used generate links page edit Office Visit param x check public boolean check Access long x throws Exception Form Validation Exception Lab Procedure Bean pb lp get Lab Procedure x Office Visit Bean ovbean ov get Office Visit pb get Ov return logged ovbean get Hcp public int get Pending Count throws Exception return lp get Pending Count logged public List Lab Procedure Bean view Procedures throws Exception return lp get Lab Procedures logged
package edu ncsu csc action import java util Arrays import java util List import edu ncsu csc Email Util import edu ncsu csc beans Email import edu ncsu csc beans Lab Procedure Bean import edu ncsu csc beans Patient Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Lab Procedure import edu ncsu csc dao mysql Patient import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc validate Lab Procedure Validator Class Lab Proc jsp Handles lab procedures Ps public class Lab Proc Action private Lab Procedure lp long logged private Lab Procedure Validator validator private Factory factory Setup param factory Factory used create Os used action param logged logged public Lab Proc Action Factory factory long logged factory get Transaction lp factory get Lab Procedure logged logged validator new Lab Procedure Validator factory factory Updates lab procedure param b procedure update throws Exception throws Form Validation Exception public void update Procedure Lab Procedure Bean b throws Exception Form Validation Exception validator validate b need check status changed new status old status send email b get Status equals lp get Lab Procedure b get Procedure get Status new Email Util factory send Email make Email b lp update Lab Procedure b Sends e mail informing patient procedure updated param b procedure updated return e mail patient notice throws Exception private Email make Email Lab Procedure Bean b throws Exception Patient Bean p new Patient factory get Patient b get Pid Email email new Email email set reply com email set List Arrays List p get Email email set Subject Lab Procedure Updated email set Body String format Dear n Lab Procedure new updated status Log Trust view p get Full Name b get Loinc b get Status return email Returns list lab procedures particular patient param id viewing procedures return list lab procedures throws Exception public List Lab Procedure Bean view Procedures long id throws Exception return lp get Lab Procedures Date id Returns list lab procedures associated given patient param pid id patient return list lab procedures throws Exception public List Lab Procedure Bean view Patient Procedures long pid throws Exception return lp get Lab Procedures logged pid
package edu ncsu csc validate import edu ncsu csc beans Cbean import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception Validator used validate Cbean public class Bean Validator extends Bean Validator Cbean default constructor public Bean Validator Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Cbean throws Form Validation Exception Error List error List new Error List get Lab Procedure Code null get Component null get Kind Property null throw new Form Validation Exception must Lab Procedure Code Component Kind Property error List add Null check Format Laboratory Procedure Code get Lab Procedure Code Validation Format false error List add Null check Format Component get Component Validation Format false error List add Null check Format Kind Property get Kind Property Validation Format false error List add Null check Format Time Aspect get Time Aspect Validation Format true error List add Null check Format System get System Validation Format true error List add Null check Format Scale Type get Scale Type Validation Format true error List add Null check Format Method Type get Method Type Validation Format true error List Errors throw new Form Validation Exception error List
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Cbean import edu ncsu csc beans loaders Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os Logical Observation Identifiers Names Codes database universal standard identifying medical laboratory observations see http loinc org author Ben Smith public class private Factory factory private Bean Loader Loader typical constructor param factory link Factory associated used obtaining connections etc public Factory factory factory factory Loader new Bean Loader Adds param hosp Cbean representing new code added throws Exception throws Trust Exception public void add Cbean hosp throws Exception Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Laboratory Procedure Code Component Kind Property Time Aspect System Scale Type Method Type ps set String hosp get Lab Procedure Code ps set String hosp get Component ps set String hosp get Kind Property ps set String hosp get Time Aspect ps set String hosp get System ps set String hosp get Scale Type ps set String hosp get Method Type ps execute Update catch Exception e e print Stack Trace e get Error Code throw new Trust Exception Error already exists throw new Exception e finally Util close Connection conn ps Returns Cs associated Laboratory Procedure Code param visit code Laboratory Procedure Code String return java util List Beans matching Laboratory Procedure Code throws Exception public List Cbean get Procedures String visit throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Select Laboratory Procedure Code ps set String visit Result Set rs ps execute Query return Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Updates information param ov throws Exception public int update Cbean ov throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Component Kind Property Time Aspect System Scale Type Method Type Laboratory Procedure Code ps set String ov get Component ps set String ov get Kind Property ps set String ov get Time Aspect ps set String ov get System ps set String ov get Scale Type ps set String ov get Method Type ps set String ov get Lab Procedure Code return ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns Cs list return java util List Cbeans throws Exception public List Cbean get throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Result Set rs ps execute Query return Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc validate import edu ncsu csc action Update Code List Action import edu ncsu csc beans Medication Bean import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception Validates code beans link Update Code List Action author Andy public class Medication Bean Validator extends Bean Validator Medication Bean default constructor public Medication Bean Validator Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Medication Bean throws Form Validation Exception Error List error List new Error List error List add Null check Format Code get Code Validation Format false error List add Null check Format Description get Description Validation Format false error List Errors throw new Form Validation Exception error List
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Message Bean import edu ncsu csc beans loaders Message Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception Used logging mechanism stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Message private Factory factory private Message Bean Loader mb Loader typical constructor param factory link Factory associated used obtaining connections etc public Message Factory factory factory factory mb Loader new Message Bean Loader Gets messages certain user param mid user looked return java util List Message Beans throws Exception public List Message Bean get Messages long mid throws Exception Connection conn null Prepared Statement ps null conn factory get Connection ps conn prepare Statement message id sent date ps set Long mid Result Set rs ps execute Query List Message Bean mb List mb Loader load List rs Util close Connection conn ps return mb List Gets messages certain user sorted ascending time param mid user looked return java util List Message Beans throws Exception public List Message Bean get Messages Time Ascending long mid throws Exception Connection conn null Prepared Statement ps null conn factory get Connection ps conn prepare Statement message id sent date ps set Long mid Result Set rs ps execute Query List Message Bean mb List mb Loader load List rs Util close Connection conn ps return mb List Gets messages certain user sorted name ascending param mid user looked return java util List Message Beans throws Exception public List Message Bean get Messages Name Ascending long mid throws Exception Connection conn null Prepared Statement ps null Result Set rs conn factory get Connection mid ps conn prepare Statement message message patients message id patients mid message id patients last Name patients first Name message sent date ps set Long mid rs ps execute Query else ps conn prepare Statement message message personnel message id personnel mid message id personnel last Name personnel first Name message sent date ps set Long mid rs ps execute Query List Message Bean mb List mb Loader load List rs Util close Connection conn ps return mb List Gets messages certain user sorted name descending param mid user looked return java util List Message Beans throws Exception public List Message Bean get Messages Name Descending long mid throws Exception Connection conn null Prepared Statement ps null Result Set rs conn factory get Connection mid ps conn prepare Statement message message patients message id patients mid message id patients last Name patients first Name message sent date ps set Long mid rs ps execute Query else ps conn prepare Statement message message personnel message id personnel mid message id personnel last Name personnel first Name message sent date ps set Long mid rs ps execute Query List Message Bean mb List mb Loader load List rs Util close Connection conn ps return mb List Gets messages certain user param mid user looked return java util List Message Beans throws Exception public List Message Bean get Messages long mid throws Exception Connection conn null Prepared Statement ps null conn factory get Connection ps conn prepare Statement message id sent date ps set Long mid Result Set rs ps execute Query List Message Bean mb List mb Loader load List rs Util close Connection conn ps return mb List Gets messages certain user sorted ascending time param mid user looked return java util List Message Beans throws Exception public List Message Bean get Messages Time Ascending long mid throws Exception Connection conn null Prepared Statement ps null conn factory get Connection ps conn prepare Statement message id sent date ps set Long mid Result Set rs ps execute Query List Message Bean mb List mb Loader load List rs Util close Connection conn ps return mb List Gets messages certain user sorted name ascending param mid user looked return java util List Message Beans throws Exception public List Message Bean get Messages Name Ascending long mid throws Exception Connection conn null Prepared Statement ps null Result Set rs conn factory get Connection mid ps conn prepare Statement message message patients message id patients mid message id patients last Name patients first Name message sent date ps set Long mid rs ps execute Query else ps conn prepare Statement message message personnel message id personnel mid message id personnel last Name personnel first Name message sent date ps set Long mid rs ps execute Query List Message Bean mb List mb Loader load List rs Util close Connection conn ps return mb List Gets messages certain user sorted name descending param mid user looked return java util List Message Beans throws Exception public List Message Bean get Messages Name Descending long mid throws Exception Connection conn null Prepared Statement ps null Result Set rs conn factory get Connection mid ps conn prepare Statement message message patients message id patients mid message id patients last Name patients first Name message sent date ps set Long mid rs ps execute Query else ps conn prepare Statement message message personnel message id personnel mid message id personnel last Name personnel first Name message sent date ps set Long mid rs ps execute Query List Message Bean mb List mb Loader load List rs Util close Connection conn ps return mb List Adds message database param Bean bean representing message added throws Exception public void add Message Message Bean Bean throws Exception Connection conn null Prepared Statement ps null conn factory get Connection Bean get Parent Message Id ps conn prepare Statement message id id sent date message subject read mb Loader load Parameters ps Bean else ps conn prepare Statement message id id sent date message subject read parent msg id mb Loader load Parameters ps Bean ps execute Update Util close Connection conn ps public void update Read Message Bean Bean throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement message read message id ps set Long Bean get Message Id ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc action Used view reported adverse events import java sql Exception import java text Parse Exception import java util Array List import java util List import edu ncsu csc Email Util import edu ncsu csc beans Adverse Event Bean import edu ncsu csc beans Email import edu ncsu csc beans Message Bean import edu ncsu csc beans Patient Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Adverse Event import edu ncsu csc dao mysql Patient import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception public class Monitor Adverse Event Action private long logged private Email Util emailer private Patient patient private Adverse Event adverse Event private Send Message Action messenger Constructor param factory param logged public Monitor Adverse Event Action Factory factory long logged logged logged patient factory get Patient emailer new Email Util factory adverse Event factory get Adverse Event messenger new Send Message Action factory logged Returns list reports specified dates param Prescription Boolean return prescriptions immunizations param start starting date param end ending date return list events throws Trust Exception throws Form Validation Exception throws Exception throws Parse Exception public List Adverse Event Bean get Reports boolean Prescription String start String end throws Trust Exception Form Validation Exception Exception Parse Exception Prescription return adverse Event get Perscriptions start end else Immunization return adverse Event get Immunizations start end Returns patient name param patient return name return public String get Name long try return patient get Name catch Exception e return catch Trust Exception e return Patient longer exists Sends e mail patient requesting information param patient patient receive message param message message return string testing purposes throws Exception public String send Email long patient String message throws Exception String r Value List String List new Array List String Patient Bean receiver patient get Patient patient List add receiver get Email Email mail new Email mail set Body message mail set logged mail set List List emailer send Email mail r Value mail get mail get Body return r Value Method used remove adverse event report param id id report removed throws Exception throws Trust Exception public void remove int id throws Exception Trust Exception Form Validation Exception long try Adverse Event Bean ae Bean adverse Event get Report id adverse Event remove Report id adverse Event get id Message Bean Bean Two new Message Bean Message Bean Bean One new Message Bean String body adverse event ae Bean get Drug perscribed patient get Name Long parse Long ae Bean get description ae Bean get Description removed Bean One set Long parse Long ae Bean get Bean Two set Bean One set Subject Subject Bean Two set Subject Subject Bean One set Body body Bean Two set Body body Bean One set logged Bean Two set logged messenger send Message Bean One messenger send Message Bean Two catch Exception e throw new Exception e
package edu ncsu csc action import java io Serializable import java util import edu ncsu csc beans Diagnosis Bean import edu ncsu csc beans Diagnosis Bean import edu ncsu csc beans Office Visit Bean import edu ncsu csc beans Prescription Bean import edu ncsu csc beans Medication Bean import edu ncsu csc beans Survey Bean import edu ncsu csc beans Lab Procedure Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Prescriptions import edu ncsu csc dao mysql Office Visit import edu ncsu csc dao mysql Survey import edu ncsu csc dao mysql Personnel import edu ncsu csc dao mysql Lab Procedure import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Edits privacy levels diagnoses used Diagnoses jsp author laurenhayward public class Diagnosis Action private Office Visit office Visit private Patient patient private Personnel personnel private Survey survey private Lab Procedure labproc private Prescriptions prescriptions private long logged Set defaults param factory Factory used create Os used action param logged user looking diagnoses throws Trust Exception public Diagnosis Action Factory factory long logged throws Trust Exception logged logged patient factory get Patient office Visit factory get Office Visit personnel factory get Personnel survey factory get Survey labproc factory get Lab Procedure prescriptions factory get Prescriptions Returns list Diagnosis Beans patient return list Diagnosis Beans throws Exception public List Diagnosis Bean get Diagnoses throws Exception return patient get Diagnoses logged Returns list Ps particular diagnosis param icdcode diagnosis interest return list Ps throws Exception public List Diagnosis Bean get Diagnosis String icdcode throws Exception int med Match Hash Map Long Diagnosis Bean hcp Hash new Hash Map Long Diagnosis Bean Hash Map Long Long patient Hash new Hash Map Long Long Diagnosis Bean diag null List Office Visit Bean beans office Visit get Office Visits Diagnosis icdcode Office Visit Bean bean beans check Patient locality based first digits patient get Patient logged get Zip substring equals personnel get Personnel bean get Hcp get Zip substring continue Check see already bean associated visit hcp Hash contains Key bean get Hcp diag hcp Hash get bean get Hcp get prescriptions associated office visit List Prescription Bean prescriptions prescriptions get List bean get Prescription Bean p prescriptions List Medication Bean mlist diag get Med List Medication Bean b mlist p get Medication get Description equals b get Description med Match med Match mlist add p get Medication diag set Med List mlist else med Match Get Lab Procedures List Lab Procedure Bean labprocs diag get Lab List List Lab Procedure Bean lpbeans labproc get Lab Procedures Doc bean get Visit Lab Procedure Bean p lpbeans labprocs add p diag set Lab List labprocs survey Survey Completed bean get Visit Survey Bean survey survey get Survey Data bean get Visit diag set Visit Sat survey get Visit Satisfaction diag set Treatment Sat survey get Treatment Satisfaction Check patient seen multiple times diagnosis patient Hash contains Key bean get Patient patient Hash put bean get Patient bean get Hcp diag inc Num Patients else diag new Diagnosis Bean List Medication Bean mlist new Array List Medication Bean diag set bean get Hcp try diag set Name personnel get Name bean get Hcp catch Trust Exception e diag set Name null diag inc Num Patients List Prescription Bean prescriptions prescriptions get List bean get Prescription Bean p prescriptions mlist add p get Medication diag set Med List mlist diag set Lab List labproc get Lab Procedures Doc bean get Visit survey Survey Completed bean get Visit Survey Bean survey survey get Survey Data bean get Visit diag set Visit Sat survey get Visit Satisfaction diag set Treatment Sat survey get Treatment Satisfaction patient Hash put bean get Patient bean get Hcp hcp Hash put bean get Hcp diag List Diagnosis Bean list new Array List Diagnosis Bean hcp Hash values Collections sort list new Diagnosis Bean Comparator return list Looks prescriptions given certain code param hcpid param icdcode code prescription looking return java util List Prescription Beans made code throws Exception public List Prescription Bean get Prescriptions long hcpid String icdcode throws Exception List Prescription Bean list new Array List Prescription Bean List Office Visit Bean ovs office Visit get Office Visits Diagnosis icdcode int ovs size ovs get get Hcp hcpid long ovid ovs get get List Prescription Bean prescriptions prescriptions get List ovid list add prescriptions return list Checks see experience diagnosis static class Diagnosis Bean Comparator implements Comparator Diagnosis Bean Serializable private static final long serial Version Compares one another param first param b second return patients b patients otherwise public int compare Diagnosis Bean Diagnosis Bean b int ret get Num Patients b get Num Patients ret else get Num Patients b get Num Patients ret return ret
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Medication Bean import edu ncsu csc beans loaders Medication Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Used managing Codes stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os National Drug Code universal product identifier used United States drugs intended human use see http www fda gov Drugs Information Drugs ucm htm author Andy public class Codes private Factory factory private Medication Bean Loader medication Loader new Medication Bean Loader typical constructor param factory link Factory associated used obtaining connections etc public Codes Factory factory factory factory Returns list codes return java util List Medication Beans throws Exception public List Medication Bean get Codes throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Result Set rs ps execute Query return medication Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns particular description given code param code code looked return bean representing Medication looked throws Exception public Medication Bean get Code String code throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Code ps set String code Result Set rs ps execute Query rs next return medication Loader load Single rs return null catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds new code returns whether change made code already exists Trust Exception thrown param med medication bean added return boolean indicating success failure throws Exception throws Trust Exception public boolean add Code Medication Bean med throws Exception Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Code Description ps set String med get Code ps set String med get Description return ps execute Update catch Exception e e print Stack Trace e get Error Code throw new Trust Exception Error Code already exists throw new Exception e finally Util close Connection conn ps Updates particular code description param med bean representing particular medication updated return int representing number updated rows throws Exception public int update Code Medication Bean med throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Description Code ps set String med get Description ps set String med get Code return ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Removes code returns whether change made param med medication bean removed return boolean indicating success failure throws Exception throws Trust Exception public boolean remove Code Medication Bean med throws Exception Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Codes Code ps set String med get Code return ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java text Simple Date Format import java util Date import java util List import java util Array List import edu ncsu csc Util import edu ncsu csc beans Diagnosis Bean import edu ncsu csc beans Office Visit Bean import edu ncsu csc beans loaders Diagnosis Bean Loader import edu ncsu csc beans loaders Office Visit Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception Used tasks related office visits Use linking diagnoses office visits similar tasks stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Office Visit private Factory factory private Office Visit Loader office Visit Loader new Office Visit Loader private Diagnosis Bean Loader diagnosis Loader new Diagnosis Bean Loader true private Prescription Bean Loader prescription Loader new Prescription Bean Loader private Prescription Report Bean Loader prescription Report Bean Loader new Prescription Report Bean Loader private Procedure Bean Loader procedure Bean Loader new Procedure Bean Loader true typical constructor param factory link Factory associated used obtaining connections etc public Office Visit Factory factory factory factory Adds visit return param ov Office Visit Bean added return long indicating unique office visit throws Exception public long add Office Visit Bean ov throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Office Visits Visit Date Notes Patient Hospital set Values ps ov ps execute Update return Util get Last Insert conn catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps private void set Values Prepared Statement ps Office Visit Bean ov throws Exception ps set Date new java sql Date ov get Visit Date get Time ps set String ov get Notes ps set Long ov get Hcp ps set Long ov get Patient ps set String ov get Hospital Updates information particular office visit param ov Office Visit bean representing changes throws Exception public void update Office Visit Bean ov throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Office Visits Visit Date Notes Patient Hospital set Values ps ov ps set Long ov get ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns particular office visit given param visit unique office visit return Office Visit Bean specifics office visit throws Exception public Office Visit Bean get Office Visit long visit throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Select Office Visits ps set Long visit Result Set rs ps execute Query rs next return load Full Office Vist rs visit else return null catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps private Office Visit Bean load Full Office Vist Result Set rs long visit throws Exception Exception Office Visit Bean ov new Office Visit Bean visit ov set Visit Date Str new Simple Date Format dd yyyy format new Date rs get Date Visit Date get Time ov set Hcp rs get Long ov set Notes rs get String notes ov set Patient rs get Long Patient ov set Hospital rs get String Hospital return ov Returns whether office visit actually exists param ov office visit checked param pid patient associated transaction return boolean indicating existence throws Exception public boolean check Office Visit Exists long ov long pid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Office Visits Patient ps set Long ov ps set Long pid Result Set rs ps execute Query return rs next catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns list office visits given patient param pid patient question return java util List Office Visit Beans throws Exception public List Office Visit Bean get Office Visits long pid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Office Visits Patient Visit Date ps set Long pid Result Set rs ps execute Query return office Visit Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns list office visits given patient param mid looking return java util List Office Visits throws Exception public List Office Visit Bean get Office Visits long mid throws Exception Connection conn null Prepared Statement ps null try mid throw new Exception null conn factory get Connection ps conn prepare Statement Office Visits Visit Date ps set Long mid Result Set rs ps execute Query return office Visit Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns list office visits given patient param pid patient return java util List Office Visits throws Exception public List Office Visit Bean get Office Visits Survey long pid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Office Visits id select visitid Survey Patient Visit Date ps set Long pid Result Set rs ps execute Query return office Visit Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns list office visits given hospital param hospital id hospital return list Office Visit Beans hold office visits throws Exception event database error public List Office Visit Bean get Office Visits Hospital String hospital throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement officevisits hospital ps set String hospital Result Set rs ps execute Query return office Visit Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets office visits corresponding particular diagnosis param icdcode string represnting diagnosis look return java util List Office visits throws Exception public List Office Visit Bean get Office Visits Diagnosis String icdcode throws Exception List Diagnosis Bean diags null List Office Visit Bean ovs new Array List Office Visit Bean Connection conn null Prepared Statement ps null Result Set rs null try icdcode null throw new Exception icdcode null conn factory get Connection ps conn prepare Statement ovdiagnosis ovd icdcodes icd ovd Code icd Code ps set String icdcode ps set String icdcode rs ps execute Query diags diagnosis Loader load List rs rs close ps close ps null rs null Diagnosis Bean bean diags ps conn prepare Statement officevisits ov ov ps set Int int bean get Visit rs ps execute Query rs next ovs add load Full Office Vist rs bean get Visit rs close ps close return ovs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds override reason bean database param orc override reason bean added return unique newly added bean throws Exception public long add Reason Override Reason Bean orb throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Reaction Override Medication Override Code Override Comment ps set Long orb get Pres ps set String orb get Code ps set String orb get Description ps execute Update return Util get Last Insert conn catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util Array List import java util List import java util Vector import edu ncsu csc Util import edu ncsu csc beans Diagnosis Bean import edu ncsu csc beans Patient Bean import edu ncsu csc beans Patient History Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Prescription Bean import edu ncsu csc beans Procedure Bean import edu ncsu csc beans loaders Diagnosis Bean Loader import edu ncsu csc beans loaders Patient Loader import edu ncsu csc beans loaders Personnel Loader import edu ncsu csc beans loaders Prescription Bean Loader import edu ncsu csc beans loaders Procedure Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception import edu ncsu csc Date Util Used managing static information related patient information related aspects patient care see Os stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Patient private Factory factory private Patient Loader patient Loader private Personnel Loader personnel Loader private Diagnosis Bean Loader diagnosis Loader private Prescription Bean Loader prescription Loader private Procedure Bean Loader procedure Loader typical constructor param factory link Factory associated used obtaining connections etc public Patient Factory factory factory factory patient Loader new Patient Loader personnel Loader new Personnel Loader diagnosis Loader new Diagnosis Bean Loader true prescription Loader new Prescription Bean Loader procedure Loader new Procedure Bean Loader true Returns name given param mid patient question return String representing patient first name last name throws Trust Exception throws Exception public String get Name long mid throws Trust Exception Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement first Name last Name Patients ps set Long mid Result Set rs rs ps execute Query rs next return rs get String first Name rs get String last Name else throw new Trust Exception User exist catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns role particular patient Patient Auth param mid patient question param role String representing role patient return String representing patient role throws Trust Exception throws Exception public String get Role long mid String role throws Trust Exception Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement role Users Role ps set Long mid ps set String role Result Set rs rs ps execute Query rs next return rs get String role else throw new Trust Exception User exist designated role catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds empty patient table returns new return patient long throws Exception public long add Empty Patient throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Patients ps execute Update return Util get Last Insert conn catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns patient information given param mid patient retrieve return Patient Bean representing patient throws Exception public Patient Bean get Patient long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Patients ps set Long mid Result Set rs ps execute Query rs next return patient Loader load Single rs else return null catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Updates patient information given param p patient bean representing new information patient throws Exception public void edit Patient Patient Bean p long hcpid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Patients first Name last Name email address address city state zip zip phone phone phone e Name e Phone e Phone e Phone Name Address Address City State Zip Zip Phone Phone Phone Date Birth Date Death Cause Death Mother Father Blood Type Ethnicity Gender Topical Notes Credit Card Type Credit Card Number Message Filter Directions Home Religion Language Spiritual Practices Alternate Name patient Loader load Parameters ps p ps set Long p get ps execute Update add History p get hcpid catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public void add History long pid long hcpid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement historypatients null p patients p p mid ps set Long hcpid ps set Long pid ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public boolean History long pid throws Exception Connection conn null Prepared Statement ps null boolean History false try conn factory get Connection ps conn prepare Statement historypatients mid ps set Long pid Result Set rs rs ps execute Query History rs next catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps return History public List Patient History Bean get Patient History long mid throws Exception Connection conn null Prepared Statement ps null Array List Patient History Bean p List try conn factory get Connection ps conn prepare Statement History Patients ps set Long mid Result Set rs ps execute Query p List new Array List Patient History Bean rs next p List add patient Loader load Single History rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps return p List Returns whether patient exists param pid patient question return boolean indicating whether patient exists throws Exception public boolean check Patient Exists long pid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Patients ps set Long pid Result Set rs ps execute Query return rs next catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns list Ps declared given patient param pid patient question return java util List Personnel Beans throws Exception public List Personnel Bean get Declared Ps long pid throws Exception Connection conn null Prepared Statement ps null try pid throw new Exception pid conn factory get Connection ps conn prepare Statement Declared Personnel Patient Personnel Declared ps set Long pid Result Set rs ps execute Query return personnel Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Declares particular patient param pid patient question param hcp return boolean whether insertion successful throws Exception throws Trust Exception public boolean declare long pid long hcp throws Exception Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Declared Patient ps set Long pid ps set Long hcp return ps execute Update catch Exception e e get Error Code throw new Trust Exception hcp already declared patient pid e print Stack Trace throw new Exception e finally Util close Connection conn ps Undeclare given patient param pid patient question param hcp question return boolean indicating whether action successful throws Exception public boolean undeclare long pid long hcp throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Declared Patient ps set Long pid ps set Long hcp return ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Check patient declared given param pid patient question long param hcpid question long return throws Exception public boolean check Declared long pid long hcpid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Declared Patient ps set Long pid ps set Long hcpid return ps execute Query next catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list patients given patient represents param pid patient question return java util List Patient Beans throws Exception public List Patient Bean get Represented long pid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Patients Representatives Patients Representer Representee Patients ps set Long pid Result Set rs ps execute Query return patient Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list patients given patient represented param pid patient question return java util List Patient Beans throws Exception public List Patient Bean get Representing long pid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Patients Representatives Patients Representee Representer Patients ps set Long pid Result Set rs ps execute Query return patient Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Check given representer represents representee param representer representer question param representee representee question return boolean indicating whether represenation place throws Exception public boolean represents long representer long representee throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Representatives Representer Representee ps set Long representer ps set Long representee Result Set rs ps execute Query return rs next catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Assign representer representee param representer representer long param representee representee long return boolean whether insertion correct throws Exception throws Trust Exception public boolean add Representative long representer long representee throws Exception Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Representatives Representer Representee ps set Long representer ps set Long representee return ps execute Update catch Exception e e get Error Code throw new Trust Exception Patient representer already represents patient representee e print Stack Trace throw new Exception e finally Util close Connection conn ps Unassign representation param representer representer question param representee representee question return boolean indicating whether unassignment sucessful throws Exception public boolean remove Representative long representer long representee throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Representatives Representer Representee ps set Long representer ps set Long representee return ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list diagnoses given patient param pid patient question return java util List Diagnoses throws Exception public List Diagnosis Bean get Diagnoses long pid throws Exception Connection conn null Prepared Statement ps null try pid throw new Exception pid conn factory get Connection ps conn prepare Statement Diagnosis ovd Office Visits ov Codes icd ovd Visit ov icd Code ovd Code ov Patient ov visit Date ps set Long pid Result Set rs ps execute Query return diagnosis Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list procedures given patient param pid patient question return java util List procedures throws Exception public List Procedure Bean get Procedures long pid throws Exception Connection conn null Prepared Statement ps null try pid throw new Exception pid conn factory get Connection ps conn prepare Statement Select Procedure ovp Office Visits ov Codes cpt ovp Visit ov cpt code ovp cptcode ov patient ov visit Date desc ps set Long pid Result Set rs ps execute Query return procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list immunization procedures given patient param pid patient question return java util List procedures throws Exception public List Procedure Bean get Immunization Procedures long pid throws Exception Connection conn null Prepared Statement ps null try pid throw new Exception pid conn factory get Connection ps conn prepare Statement Select Procedure ovp Office Visits ov Codes cpt ovp Visit ov cpt code ovp cptcode ov patient cpt attribute immunization ov visit Date desc ps set Long pid Result Set rs ps execute Query return procedure Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list prescriptions patient param patient patient question return java util List prescriptions throws Exception public List Prescription Bean get Prescriptions long patient throws Exception Connection conn null Prepared Statement ps null try patient throw new Exception pid conn factory get Connection ps conn prepare Statement Select Medication Codes Office Visits Office Visits Patient Medication Visit Office Visits Codes Code Medication Code Office Visits visit Date Medication Code ps set Long patient Result Set rs ps execute Query return prescription Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list prescriptions currently prescribed patient param patient patient question return java util List prescription beans throws Exception public List Prescription Bean get Current Prescriptions long patient throws Exception Connection conn null Prepared Statement ps null try patient throw new Exception pid conn factory get Connection ps conn prepare Statement Select Medication Codes Office Visits Office Visits Patient Medication Visit Office Visits Codes Code Medication Code Medication End Date Medication ps set Long patient ps set Date Date Util get Ldate Days Ago Result Set rs ps execute Query return prescription Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list prescriptions expired prescription patient param patient patient question return java util List prescriptions throws Exception public List Prescription Bean get Expired Prescriptions long patient throws Exception Connection conn null Prepared Statement ps null try patient throw new Exception pid conn factory get Connection ps conn prepare Statement Select Medication Codes Office Visits Office Visits Patient Medication Visit Office Visits Codes Code Medication Code Medication End Date Medication ps set Long patient ps set Date Date Util get Ldate Days Ago Result Set rs ps execute Query return prescription Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Lists every patient database return java util List Patient Beans representing patients throws Exception public List Patient Bean get Patients throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement patients Result Set rs ps execute Query return patient Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list patients special diagnosis history logged whose medications going expire within seven days param hcp logged return list patients satisfying conditions throws Exception public List Patient Bean get Renewal Needs Patients long hcp throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement patients patients declaredhcp ovdiagnosis officevisits ovmedication declared patients declaredhcp Patient ovdiagnosis Visit officevisits officevisits Patient declaredhcp Patient ovdiagnosis Code ovdiagnosis Code ovdiagnosis Code ovdiagnosis Code ovdiagnosis Code ovdiagnosis Code patients patients declaredhcp ovdiagnosis officevisits ovmedication declared patients declaredhcp Patient declaredhcp Patient officevisits Patient officevisits ovmedication Visit ovmedication End Date final final final lastname final firstname ps set Long hcp ps set Float f ps set Float f ps set Float f ps set Float f ps set Float f ps set Float f ps set Long hcp Result Set rs ps execute Query return patient Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns patients names passed parameters param first patient first name param last patient last name return java util List Patient Beans throws Exception public List Patient Bean search Patients Name String first String last throws Exception Connection conn null Prepared Statement ps null first equals last equals return new Vector Patient Bean try conn factory get Connection ps conn prepare Statement patients first Name last Name ps set String first ps set String last Result Set rs ps execute Query return patient Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc validate import edu ncsu csc action Edit Patient Action import edu ncsu csc beans Patient Bean import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception import org apache commons validator Credit Card Validator import java util Date Validates patient bean link Edit Patient Action author Andy public class Patient Validator extends Bean Validator Patient Bean default constructor public Patient Validator Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Patient Bean p throws Form Validation Exception Error List error List new Error List error List add Null check Format First name p get First Name Validation Format false error List add Null check Format Last name p get Last Name Validation Format false error List add Null check Format Date Birth p get Date Birth Str Validation Format false error List add Null check Format Date Death p get Date Death Str Validation Format true try equals p get Date Death Str p get Date Death null p get Cause Death equals error List add Null Cause Death specified without Date Death else p get Date Death p get Date Birth error List add Null Death date birth date p get Date Death new Date error List add Null Death date future p get Date Birth new Date error List add Null Birth date future catch Null Pointer Exception e ignore boolean death Cause Null null p get Date Death Str p get Date Death Str equals error List add Null check Format Cause Death p get Cause Death Validation Format death Cause Null error List add Null check Format Email p get Email Validation Format false error List add Null check Format Street Address p get Street Address Validation Format false error List add Null check Format Street Address p get Street Address Validation Format true error List add Null check Format City p get City Validation Format false error List add Null check Format State p get State Validation Format false error List add Null check Format Zip Code p get Zip Validation Format false error List add Null check Format Phone Number p get Phone Validation Format false error List add Null check Format Emergency Contact Name p get Emergency Name Validation Format false error List add Null check Format Emergency Contact Phone p get Emergency Phone Validation Format false error List add Null check Format Insurance Company Name p get Ic Name Validation Format false error List add Null check Format Insurance Company Address p get Ic Address Validation Format false error List add Null check Format Insurance Company Address p get Ic Address Validation Format true error List add Null check Format Insurance Company City p get Ic City Validation Format false error List add Null check Format Insurance Company State p get Ic State Validation Format false error List add Null check Format Insurance Company Zip p get Ic Zip Validation Format false error List add Null check Format Insurance Company Phone p get Ic Phone Validation Format false error List add Null check Format Insurance Company p get Ic Validation Format false error List add Null check Format Mother p get Mother Validation Format true error List add Null check Format Father p get Father Validation Format true error List add Null check Format Topical Notes p get Topical Notes Validation Format true block added Theme Tyler Arehart p get Credit Card Number equals p get Credit Card Type equals String null Credit Card Validator c int type p get Credit Card Type equals type Credit Card Validator p get Credit Card Type equals type Credit Card Validator p get Credit Card Type equals type Credit Card Validator p get Credit Card Type equals type Credit Card Validator type c new Credit Card Validator type c Valid p get Credit Card Number Credit Card Number else Credit Card Type error List add Null error List add Null check Format Directions Home p get Directions Home Validation Format true error List add Null check Format Religion p get Religion Validation Format true error List add Null check Format Language p get Language Validation Format true error List add Null check Format Spiritual Practices p get Spiritual Practices Validation Format true error List add Null check Format Alternate Name p get Alternate Name Validation Format true error List Errors throw new Form Validation Exception error List
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util Vector import java util List import edu ncsu csc Util import edu ncsu csc beans Hospital Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Prescription Bean import edu ncsu csc beans loaders Hospital Bean Loader import edu ncsu csc beans loaders Personnel Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception import edu ncsu csc enums Role Used managing information related personnel Ps Ps Admins stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Personnel private Factory factory private Personnel Loader personnel Loader private Hospital Bean Loader hospital Bean Loader typical constructor param factory link Factory associated used obtaining connections etc public Personnel Factory factory factory factory personnel Loader new Personnel Loader hospital Bean Loader new Hospital Bean Loader Returns name given param mid personnel question return String representing name personnel throws Trust Exception throws Exception public String get Name long mid throws Trust Exception Exception Connection conn null Prepared Statement pstmt null try conn factory get Connection pstmt conn prepare Statement first Name last Name Personnel pstmt set Long mid Result Set rs rs pstmt execute Query rs next return rs get String first Name rs get String last Name else throw new Trust Exception User exist catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn pstmt public long get Next Role role throws Exception Trust Exception Connection conn null Prepared Statement ps null long new long min role get Mid First Digit min min min use long max min long next min try conn factory get Connection ps conn prepare Statement users mid Users mid mid ps set Long min ps set Long max Result Set rs ps execute Query rs next next rs get Long next min next min return next catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds empty personnel returns return long indicating new param role link Role enum indicating personnel specific role throws Exception throws Trust Exception public long add Empty Personnel Role role throws Exception Trust Exception Connection conn null Prepared Statement ps null long next get Next role try conn factory get Connection ps conn prepare Statement Personnel Role ps set String next ps set String role name ps execute Update return next catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Retrieves Personnel Bean specific information given employee param mid personnel question return Personnel Bean representing employee throws Exception public Personnel Bean get Personnel long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Personnel ps set Long mid Result Set rs ps execute Query rs next return personnel Loader load Single rs else return null catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Updates demographics personnel param p personnel bean updated information throws Exception public void edit Personnel Personnel Bean p throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Personnel first Name last Name phone phone phone address address city state zip zip zip specialty email Message Filter personnel Loader load Parameters ps p ps set Long p get ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Indicates whether certain personnel database param pid personnel question return boolean indicating whether personnel exists throws Exception public boolean check Personnel Exists long pid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Personnel ps set Long pid Result Set rs ps execute Query return rs next catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns hospitals associated param mid personnel question return java util List Hospital Beans throws Exception public List Hospital Bean get Hospitals long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Assigned Hos hah Hospitals h hah hah Hos h Hospital Hospital Name ps set Long mid Result Set rs ps execute Query return hospital Bean Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns personnel database return java util List personnel throws Exception public List Personnel Bean get Personnel throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement personnel role hcp uap er Result Set rs ps execute Query return personnel Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns list Ps work param hcpid personnel question return java util List Ps throws Exception public List Personnel Bean get Ps long hcpid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Personnel Relations ps set Long hcpid Result Set rs ps execute Query return personnel Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Given prescription given method returns information doctor authorized prescription param prescription Prescription Bean describing prescription question return Personnel Bean describing doctor authorized throws Exception public Personnel Bean get Prescribing Doctor Prescription Bean prescription throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Personnel Office Visits ps set Long prescription get Visit Result Set rs ps execute Query return personnel Loader load List rs get catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Matches personnel names first last names passed param first first name searched param last last name searched return java util List personnel match names throws Exception public List Personnel Bean search Personnel Name String first String last throws Exception Connection conn null Prepared Statement ps null first equals last equals return new Vector Personnel Bean try conn factory get Connection ps conn prepare Statement personnel first Name last Name ps set String first ps set String last Result Set rs ps execute Query return personnel Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns list personnel Lab Techs return List personnel beans throws Exception public List Personnel Bean get Lab Techs throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement personnel role lt Result Set rs ps execute Query return personnel Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc validate import edu ncsu csc action Edit Personnel Action import edu ncsu csc beans Personnel Bean import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception Validates personnel bean link Edit Personnel Action author Andy public class Personnel Validator extends Bean Validator Personnel Bean default constructor public Personnel Validator Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Personnel Bean p throws Form Validation Exception Error List error List new Error List error List add Null check Format First name p get First Name Validation Format false error List add Null check Format Last name p get Last Name Validation Format false error List add Null check Format Street Address p get Street Address Validation Format false error List add Null check Format Street Address p get Street Address Validation Format true error List add Null check Format City p get City Validation Format false error List add Null check Format State p get State Validation Format false error List add Null check Format Zip Code p get Zip Validation Format false error List add Null check Format Phone Number p get Phone Validation Format false error List add Null check Format Email p get Email Validation Format true error List Errors throw new Form Validation Exception error List
package edu ncsu csc validate import edu ncsu csc action Update Code List Action import edu ncsu csc beans Procedure Bean import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception Validates code link Update Code List Action author Andy public class Procedure Bean Validator extends Bean Validator Procedure Bean default constructor public Procedure Bean Validator Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Procedure Bean p throws Form Validation Exception Error List error List new Error List error List add Null check Format Code p get Code Validation Format false error List add Null check Format Description p get Description Validation Format false error List Errors throw new Form Validation Exception error List
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util Hash Map import java util List import edu ncsu csc Util import edu ncsu csc beans Referral Bean import edu ncsu csc beans Verbose Referral Bean import edu ncsu csc beans loaders Referral Bean Loader import edu ncsu csc beans loaders Verbose Referral Bean Loader import edu ncsu csc dao Factory import edu ncsu csc enums Sort Direction import edu ncsu csc exception Exception Used update referrals fetch lists referrals sent Ps stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os public class Referral private Factory factory private Referral Bean Loader referral Loader private Verbose Referral Bean Loader verbose Loader typical constructor param factory link Factory associated used obtaining connections etc public Referral Factory factory factory factory referral Loader new Referral Bean Loader verbose Loader new Verbose Referral Bean Loader Get referrals associated particular office visit param ovid office visit id return list Referral Beans throws Exception public List Referral Bean get Referrals long ovid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals ov ps set Long ovid Result Set rs ps execute Query return referral Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets list referrals sent param mid mid return list referrals sent throws Exception public List Referral Bean get Referrals Sent long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals Sender ps set Long mid Result Set rs ps execute Query return referral Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get specific referral param id id referral retrieve return Referral Bean throws Exception public Referral Bean get Referral long id throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals id ps set Long id Result Set rs ps execute Query rs next return referral Loader load Single rs else return null catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Set referral message param id id referral retrieve return Referral Bean throws Exception public boolean set Referral Message long message long referral throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Referral Message message referral ps set Long message ps set Long referral ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps return true Set referral message param id id referral retrieve return Referral Bean throws Exception public long Referral Message long message throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Referral Message message ps set Long message Result Set rs ps execute Query rs next return rs get Long else return catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets list referrals sent param mid mid return list referrals sent throws Exception public List Referral Bean get Referrals Sent long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals Receiver ps set Long mid Result Set rs ps execute Query return referral Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets list referrals received param mid patients mid return list referrals received throws Exception public List Referral Bean get Referrals Receiving long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals Receiver Priority Code ps set Long mid Result Set rs ps execute Query return referral Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets list referrals sent patient param mid patients mid return list referrals received throws Exception public List Referral Bean get Referrals Patient long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals Patient viewed patient Priority Code ps set Long mid Result Set rs ps execute Query return referral Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets list referrals sent patient param mid patients mid return list referrals received unread throws Exception public List Referral Bean get Referrals Receiving Unread long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals Receiver viewed false ps set Long mid Result Set rs ps execute Query return referral Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets list referrals sent patient param mid patients mid return list referrals received unread throws Exception public List Referral Bean get Referrals Patient Unread long mid throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals Patient viewed patient false ps set Long mid Result Set rs ps execute Query return referral Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Updates given referral database param r referral update throws Exception public void edit Referral Referral Bean r throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals Patient Sender Receiver Referral Details viewed patient viewed Priority Code referral Loader load Parameters ps r ps set Long r get Id ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds given referral database param r referral add throws Exception public long add Referral Referral Bean r throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals Patient Sender Receiver Referral Details viewed patient viewed Priority Code Time Stamp ps referral Loader load Parameters ps r ps execute Update return Util get Last Insert conn catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Removes given referral param id unique referral removed throws Exception public void remove Referral long id throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement referrals ps set Long id ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps abstract class encapsulates sorted query referrals Derived classes provide user id retrieved referrals contain public abstract class Referral List Query private Factory factory private long userid private Hash Map String String sort Columns Create new Referral List Query object param factory param userid public Referral List Query Factory factory long userid factory factory userid userid initialize lookup map sort Columns new Hash Map String String sort Columns put patient Name patients last Name patients first Name sort Columns put receiver Name preceiver last Name preceiver first Name sort Columns put sender Name psender last Name psender first Name sort Columns put timestamp referrals timestamp sort Columns put priority referrals Priority Code Perform query param sort Field pseudo field name sort param dir direction desired sort ascending descending return list Verbose Referral Beans throws Exception protected List Verbose Referral Bean doquery String sort Field Sort Direction dir throws Exception String stmt psender first Name psender last Name sender Name preceiver first Name preceiver last Name receiver Name referrals officevisits visit Date patients first Name patients last Name patient Name referrals personnel psender personnel preceiver patients officevisits referrals Sender psender mid referrals Receiver preceiver mid referrals Patient patients mid referrals ovid officevisits id stmt String format get User Field stmt build Sort sort Field dir Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement stmt ps set Long get User Id Result Set rs ps execute Query return verbose Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Perform query param sort Field pseudo field name sort param dir direction desired sort ascending descending return list Verbose Referral Beans throws Exception public List Verbose Referral Bean query String sort Field Sort Direction dir throws Exception List Verbose Referral Bean beans doquery sort Field dir return beans Get name user pseudo field used limit query referrals field equals specific user id returned must overridden derived classes return user field string protected abstract String get User Field protected long get User Id return userid Builds sort portion query e portion param sort Field pseudo field sort param dir sort direction return string part query protected String build Sort String sort Field Sort Direction dir String sortexp sort Columns get sort Field return String format sortexp dir Concrete Referral List Query accessing Ps sent referrals public class Sender Referral List Query extends Referral List Query public Sender Referral List Query Factory factory long userid super factory userid Override protected String get User Field return referrals Sender Concrete Referral List Query accessing Ps received referrals public class Receiver Referral List Query extends Referral List Query public Receiver Referral List Query Factory factory long userid super factory userid Override protected String get User Field return referrals Receiver Concrete Referral List Query accessing patients referrals public class Patient Referral List Query extends Referral List Query public Patient Referral List Query Factory factory long userid super factory userid Override protected String get User Field return referrals Patient Get referral query sending param mid id return Referral List Query object public Referral List Query get Sender Query long mid return new Sender Referral List Query factory mid Get referral query receiving param mid id return Referral List Query object public Referral List Query get Receiver Query long mid return new Receiver Referral List Query factory mid Get referral query patient param mid patient id return Referral List Query object public Referral List Query get Patient Query long pid return new Patient Referral List Query factory pid
package edu ncsu csc dao mysql import java sql Connection import java util Date import java sql Prepared Statement import java sql Result Set import java sql Exception import java sql Timestamp import java util Array List import java util List import edu ncsu csc Util import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Remote Monitoring Data Bean import edu ncsu csc beans Telemedicine Bean import edu ncsu csc beans loaders Remote Monitoring Data Bean Loader import edu ncsu csc beans loaders Personnel Loader import edu ncsu csc beans loaders Remote Monitoring Lists Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Used keeping track remote monitoring data stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os public class Remote Monitoring private Factory factory private Remote Monitoring Data Bean Loader loader new Remote Monitoring Data Bean Loader private Remote Monitoring Lists Bean Loader rm List Loader new Remote Monitoring Lists Bean Loader private Personnel Loader personnel Loader new Personnel Loader typical constructor param factory link Factory associated used obtaining connections etc public Remote Monitoring Factory factory factory factory Return remote monitoring list data given patient param patient Patient retrieve data return List Telemedicine Beans throws Exception public List Telemedicine Bean get Telemedicine Bean long patient throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Remote Monitoring Lists Patient ps set Long patient Result Set rs ps execute Query return rm List Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns patient data given return throws Exception public List Remote Monitoring Data Bean get Patients Data long logged throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Remote Monitoring Lists Patient ps set Long logged Result Set patient ps execute Query ps conn prepare Statement Remote Monitoring Data timelogged Patient time Logged Result Set data ps execute Query List String patient List new Array List String patient next patient List add patient get Long Patient List Remote Monitoring Data Bean data List loader load List data int j Go patients remove n monitored data List size patient List contains data List get get Patient data List remove Add values patient list data today list boolean patient List size false j j data List size j data List get j get Patient equals patient List get true break data List add new Remote Monitoring Data Bean Long parse Long patient List get return data List catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public List Remote Monitoring Data Bean get Patient Data Date long patient Date lower Date upper throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement remotemonitoringdata Patient time Logged time Logged time Logged ps set Long patient ps set Timestamp new Timestamp lower get Time add day worth include upper ps set Timestamp new Timestamp upper get Time Result Set rs ps execute Query List Remote Monitoring Data Bean data List loader load List rs return data List catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Get requested type data specified patient param patient patient param data Type type telemedicine data return return list beans contain information requested type throws Exception public List Remote Monitoring Data Bean get Patient Data Type long patient String data Type throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement remotemonitoringdata Patient data Type time Logged ps set Long patient Result Set rs ps execute Query List Remote Monitoring Data Bean data List loader load List rs return data List catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Store pedometer reading height weight data given patient Remote Monitoring Data table param patient patient param height height patient param weight weight patient param pedometer Reading pedometer reading patient param reporter Role role person reported monitoring stats param reporter person reported monitoring stats throws Exception public void store Patient Data long patient Remote Monitoring Data Bean bean String reporter Role long reporter throws Exception Trust Exception float height bean get Height float weight bean get Weight int pedometer bean get Pedometer Reading int sbp bean get Systolic Blood Pressure int dbp bean get Diastolic Blood Pressure int glucose bean get Glucose Level height height weight weight pedometer pedometer sbp sbp dbp dbp glucose glucose get Number Daily Entries patient height height throw new Trust Exception Patient height entries today exceed get Number Daily Entries patient weight weight throw new Trust Exception Patient weight entries today exceed get Number Daily Entries patient pedometer Reading pedometer throw new Trust Exception Patient pedometer reading entries today exceed get Number Daily Entries patient glucose Level glucose throw new Trust Exception Patient glucose level entries today exceed get Number Daily Entries patient systolic Blood Pressure sbp throw new Trust Exception Patient systolic blood pressure entries today exceed get Number Daily Entries patient diastolic Blood Pressure dbp throw new Trust Exception Patient diastolic blood pressure entries today exceed reporter Role equals patient representative validate reporter patient Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Remote Monitoring Data Patient height weight pedometer Reading systolic Blood Pressure diastolic Blood Pressure glucose Level Reporter Role Reporter ps set Long patient ps set Float height ps set Float weight ps set Int pedometer ps set Int sbp ps set Int dbp ps set Int glucose ps set String reporter Role ps set Long reporter ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Private method get number entries certain patient today param patient return number entries throws Exception private int get Number Daily Entries long patient throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Remote Monitoring Data Patient time Logged ps set Long patient Result Set rs ps execute Query List Remote Monitoring Data Bean patients loader load List rs return patients size catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Private method get number entries certain patient certain data type today param patient param data Type return number entries throws Exception private int get Number Daily Entries long patient String data Type throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Remote Monitoring Data Patient data Type time Logged ps set Long patient ps set Int Result Set rs ps execute Query List Remote Monitoring Data Bean patients loader load List rs return patients size catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps public void validate long representative long patient throws Trust Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Representatives Representer Representee ps set Long representative ps set Long patient Result Set rs ps execute Query rs next rows throw new Trust Exception Representer valid patient patient catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Show list Ps monitoring patient param patient patient return list Ps monitoring provided patient public List Personnel Bean get Monitoring Ps long patient throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Personnel Remote Monitoring Lists Remote Monitoring Lists Patient Remote Monitoring Lists Personnel ps set Long patient Result Set rs ps execute Query return personnel Loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Add patient list Ps monitoring lists Patients param patient patient param param Bean Telemedicine Bean indicating telemedicine data patient allowed enter return true added successfully false already list public boolean add Patient List long patient long Telemedicine Bean Bean throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Remote Monitoring Lists Patient ps set Long patient ps set Long Result Set rs ps execute Query rs next return false String permission Systolic Blood Pressure Diastolic Blood Pressure Glucose Level Height Weight Pedometer Reading ps conn prepare Statement Remote Monitoring Lists Patient permission ps set Long patient ps set Long ps set Boolean Bean Systolic Blood Pressure Allowed ps set Boolean Bean Diastolic Blood Pressure Allowed ps set Boolean Bean Glucose Level Allowed ps set Boolean Bean Height Allowed ps set Boolean Bean Weight Allowed ps set Boolean Bean Pedometer Reading Allowed ps execute Update return true catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Remove patient list Ps monitoring lists Patients param patient patient param return true removed successfully false list public boolean remove Patient List long patient long throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Remote Monitoring Lists Patient ps set Long patient ps set Long ps execute Update return false return true catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc validate import edu ncsu csc action Add Remote Monitoring Data Action import edu ncsu csc beans Remote Monitoring Data Bean import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception Validator used validate adding new remote monitoring data link Add Remote Monitoring Data Action public class Remote Monitoring Data Bean Validator extends Bean Validator Remote Monitoring Data Bean default constructor public Remote Monitoring Data Bean Validator Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Remote Monitoring Data Bean throws Form Validation Exception Error List error List new Error List Skip validation values submitted get Systolic Blood Pressure get Systolic Blood Pressure error List add Null check Format Systolic Blood Pressure get Systolic Blood Pressure Validation Format true get Diastolic Blood Pressure get Diastolic Blood Pressure error List add Null check Format Diastolic Blood Pressure get Diastolic Blood Pressure Validation Format true get Glucose Level get Glucose Level error List add Null check Format Glucose Level get Glucose Level Validation Format true get Pedometer Reading get Pedometer Reading error List add Null check Format Pedometer Reading get Pedometer Reading Validation Format true get Height get Height error List add Null check Format Height get Height Validation Format true get Weight get Weight error List add Null check Format Weight get Weight Validation Format true error List Errors throw new Form Validation Exception error List
package edu ncsu csc action import java util Array List import java util List import edu ncsu csc Email Util import edu ncsu csc beans Email import edu ncsu csc beans Adverse Event Bean import edu ncsu csc beans Patient Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Adverse Event import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Adverse Event Validator import edu ncsu csc exception Form Validation Exception public class Report Adverse Event Action private long logged private Email Util emailer private Patient patient private Personnel personnel private Adverse Event adverse Event private long hcp private Adverse Event Validator validator public Report Adverse Event Action String hcp Factory factory long logged logged logged patient factory get Patient personnel factory get Personnel emailer new Email Util factory adverse Event factory get Adverse Event hcp Long parse Long hcp validator new Adverse Event Validator Constructor used send e mails public Report Adverse Event Action Factory factory long logged logged logged patient factory get Patient personnel factory get Personnel emailer new Email Util factory adverse Event factory get Adverse Event validator new Adverse Event Validator Method sends exactly one e mail list Adverse Events param ae List list adverse Event Beans need acted upon return List list e mails sent testing purposes public Email send Mails List Adverse Event Bean ae List throws Trust Exception Form Validation Exception Exception List String Dlist new Array List String String patient Adverse Event Bean beaner ae List patient beaner get String new Desc Drug beaner get Drug beaner get Code Description beaner get Description beaner set Description new Desc Adverse Event Bean beano ae List Dlist contains beano get Prescriber Dlist add beano get Prescriber Email email new Email String num Dlist String message Patient patient get Name Long parse Long patient patient Reported following adverse event Adverse Event Bean beano ae List beano get Prescriber equals num message message beano get Description String Email email set noreply com Patient Bean sender patient get Patient logged Personnel Bean receiver personnel get Personnel Long parse Long num List String List new Array List String List add receiver get Email Email sender get Email email set List List email set Email email set Subject String format Adverse Event Report Prescription email set Body message emailer send Email email return email method used send single e mail Used immunizations param ae Bean return Email returns Email testing purposes public Email send Mail Adverse Event Bean ae Bean throws Trust Exception Form Validation Exception Exception Email email new Email String Email email set noreply com List String List new Array List String Patient Bean sender patient get Patient logged Personnel Bean receiver personnel get Personnel hcp List add receiver get Email Email sender get Email email set List List email set Email email set Subject String format Adverse Event Report Immunization email set Body String format Patient patient get Name Long parse Long ae Bean get ae Bean get Reported following adverse event Drug ae Bean get Drug ae Bean get Code Description ae Bean get Description emailer send Email email return email Method used add report data base param ae Bean adverse event add return string testing purposes throws Trust Exception throws Form Validation Exception throws Exception public String add Report Adverse Event Bean ae Bean throws Trust Exception Form Validation Exception Exception try validator validate ae Bean catch Form Validation Exception e e print Stack Trace return e get Message try adverse Event add Report ae Bean hcp catch Exception e throw new Trust Exception e get Message Old code used send single e mail Keep reference Email email new Email String sender Name String Email email set noreply com List String List new Array List String Patient Bean sender patient get Patient logged Personnel Bean receiver personnel get Personnel hcp List add receiver get Email sender Name sender get Full Name Email sender get Email email set List List email set Email email set Subject String format Adverse Event Report email set Body String format Patient patient get Name Long parse Long ae Bean get ae Bean get Reported following adverse event Drug ae Bean get Drug ae Bean get Code Description ae Bean get Description emailer send Email email return
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util Date import java util List import edu ncsu csc Util import edu ncsu csc beans Report Request Bean import edu ncsu csc beans loaders Report Request Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception Used handling data related report requests stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os public class Report Request private Factory factory private Report Request Bean Loader loader typical constructor param factory link Factory associated used obtaining connections etc public Report Request Factory factory factory factory loader new Report Request Bean Loader Returns full bean describing given report request param id unique bean database return bean describing report request throws Exception public Report Request Bean get Report Request long id throws Exception Connection conn null Prepared Statement ps null try id throw new Exception null conn factory get Connection ps conn prepare Statement Report Requests ps set Long id Result Set rs ps execute Query rs next return loader load Single rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns report requests associated given requester param mid personnel question return java util List report requests throws Exception public List Report Request Bean get Report Requests Requester long mid throws Exception Connection conn null Prepared Statement ps null try mid throw new Exception Requester null conn factory get Connection ps conn prepare Statement Report Requests Requester ps set Long mid Result Set rs ps execute Query return loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns report requests associated specific patient param pid patient question return java util List report requests throws Exception public List Report Request Bean get Report Requests Patient long pid throws Exception Connection conn null Prepared Statement ps null try pid throw new Exception Patient null conn factory get Connection ps conn prepare Statement Report Requests Patient ps set Long pid Result Set rs ps execute Query return loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns every report request database return java util List report requests throws Exception public List Report Request Bean get Report Requests throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Report Requests Result Set rs ps execute Query return loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Adds request report param requester requester param patient patient question param date date request made return long unique report request throws Exception public long add Report Request long requester long patient Date date throws Exception Connection conn null Prepared Statement ps null try requester throw new Exception Requester null conn factory get Connection ps conn prepare Statement Report Requests Requester Patient Requested Date Status null Requested ps set Long requester ps set Long patient ps set Timestamp new java sql Timestamp date get Time ps execute Update return Util get Last Insert conn catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Sets status request Approved param unique report param approver person approving request param date date approval made throws Exception public void approve Report Request long long approver Date date throws Exception Connection conn null Prepared Statement ps null try throw new Exception null conn factory get Connection ps conn prepare Statement Report Requests set Approver Approved Date Status Approved ps set Long approver ps set Timestamp new java sql Timestamp date get Time ps set Long ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Sets status report request Rejected param unique request question param approver rejecter question param date date rejection made param comment comment describing request rejected throws Exception public void reject Report Request long long approver Date date String comment throws Exception Connection conn null Prepared Statement ps null try throw new Exception null conn factory get Connection ps conn prepare Statement Report Requests set Approver Approved Date Status Rejected comment ps set Long approver ps set Timestamp new java sql Timestamp date get Time ps set String comment ps set Long ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Sets status report request Viewed param unique request question param date date request viewed throws Exception public void set Viewed long Date date throws Exception Connection conn null Prepared Statement ps null try throw new Exception null conn factory get Connection ps conn prepare Statement Report Requests set Viewed Date Status Viewed ps set Timestamp new java sql Timestamp date get Time ps set Long ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc action import java util Arrays import edu ncsu csc Email Util import edu ncsu csc beans Email import edu ncsu csc beans Patient Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc enums Role import edu ncsu csc exception Exception import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Validation Format Manages resetting password Used reset Password jsp author laurenhayward public class Reset Password Action public static final int private Auth auth private Patient patient private Factory factory Set defaults param factory Factory used create Os used action public Reset Password Action Factory factory auth factory get Auth patient factory get Patient factory factory Checks see user exists given mid param mid String user check return user exist else mid user long public long check String mid String try long mid Long value mid String auth check User Exists mid return return mid catch Number Format Exception e return catch Exception e return Checks see number reset password attempts exceeded given ip Address param ip Address Pv Pv address String return true number reset attempts greater equal throws Exception public boolean Maxed String ip Address throws Exception return auth get Reset Password Failures ip Address Checks given mid matches given role param mid mid checked param role role checked return true mid role match throws Trust Exception public String check Role long mid String role throws Trust Exception try patient equals role patient get Role mid role equals patient hcp equals role patient get Role mid role equals hcp uap equals role patient get Role mid role equals uap pha equals role patient get Role mid role equals pha er equals role patient get Role mid role equals er lt equals role patient get Role mid role equals lt return role else return null catch Exception e e print Stack Trace catch Trust Exception e e print Stack Trace throw e return null Checks answer param null param answer user security answer return answer null else return null public String check Answer Null String answer answer null equals answer return null else return answer Returns security question mid param param mid user return security question Exception thrown throws Trust Exception public String get Security Question long mid throws Trust Exception try null auth get Security Question mid auth get Security Question mid equals throw new Trust Exception security question answer user set else return auth get Security Question mid catch Exception e e print Stack Trace return Resets password given mid param mid user password reset param role role user Trust param answer answers security question param password password param confirm Password password param ip Addr ip address request coming return status message throws Form Validation Exception throws Exception throws Trust Exception public String reset Password long mid String role String answer String password String confirm Password String ip Addr throws Form Validation Exception Exception Trust Exception Role r auth get User Role mid try Role parse role catch Illegal Argument Exception e return Invalid role r equals Role return role changed r equals Role parse role return Role mismatch auth get Reset Password Failures ip Addr return many retries try validate Password password confirm Password answer equals auth get Security Answer mid auth reset Password mid password new Email Util factory send Email make Email App mid role return Password changed else auth record Reset Password Failure ip Addr return Answer match catch Exception e return Error validation security answer Creates sends e mail change param mid user password changed param role role Trust return e mial sent throws Exception private Email make Email App long mid String role throws Exception Role parse role Role Patient Bean p new Patient factory get Patient mid Email email new Email email set reply com email set List Arrays List p get Email email set Subject password changed Trust email set Body String format Dear n chosen change Trust password user p get Full Name mid return email else admin taken reset Password Personnel Bean p new Personnel factory get Personnel mid Email email new Email email set reply com email set List Arrays List p get Email email set Subject password changed Trust email set Body String format Dear n chosen change Trust password user p get Full Name mid return email Checks make sure password correctly entered twice param password password param confirm Password password confirmation throws Form Validation Exception private void validate Password String password String confirm Password throws Form Validation Exception Error List error List new Error List password null equals password error List add Null Password empty else password equals confirm Password error List add Null Passwords n match Validation Format get Regex matcher password matches error List add Null Password must following format Validation Format get Description error List Errors throw new Form Validation Exception error List
package edu ncsu csc risk import java util Array List import java util List import edu ncsu csc beans Health Record import edu ncsu csc beans Patient Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Health Records import edu ncsu csc exception Exception import edu ncsu csc exception Health Records Exception import edu ncsu csc risk factors Patient Risk Factor abstract class number utlity methods checking risks extending class use methods fill necessary information use Risk get Patient Risk Factors get actual risks See known subclasses example author Andy abstract public class Risk Checker private static final int protected Patient Bean patient protected Health Record current Health Record protected Factory factory public Risk Checker Factory factory long patient throws Exception Health Records Exception factory factory Health Records hr factory get Health Records List Health Record records hr get Health Records patient records size current Health Record records get else throw new Health Records Exception patient factory get Patient get Patient patient return name disease checked abstract public String get Name return java util List risk factors increasing patients disease risk abstract protected List Patient Risk Factor get Disease Risk Factors return boolean indicating whether patient increased risk abstract public boolean qualifies Disease method exists purely performance stop hit threshold br br Also risk factors cached Risk Factor implementors get Patient Risk Factors double querying return Risk public boolean Risk qualifies Disease int num Risks List Patient Risk Factor disease Risk Factors get Disease Risk Factors Patient Risk Factor factor disease Risk Factors factor Risk Factor num Risks num Risks return true return false else qualifies threshold return java util List patient risk factors associated disease public List Patient Risk Factor get Patient Risk Factors List Patient Risk Factor patient Risk Factors new Array List Patient Risk Factor List Patient Risk Factor disease Risk Factors get Disease Risk Factors Patient Risk Factor factor disease Risk Factors factor Risk Factor patient Risk Factors add factor return patient Risk Factors
package edu ncsu csc action import java util List import edu ncsu csc beans Patient Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc exception Exception public class Search Users Action private Patient patient private Personnel personnel Set defaults param factory Factory used create Os used action param logged user performing search public Search Users Action Factory factory long logged patient factory get Patient personnel factory get Personnel Searches personnel first name last name specified parameter list param first Name first name searched param last Name last name searched return java util List Personnel Beans users matched public List Personnel Bean search Personnel Name String first Name String last Name try equals first Name first Name equals last Name last Name return personnel search Personnel Name first Name last Name catch Exception e e print Stack Trace return null Search patients first name last name given parameters param first Name first name patient searched param last Name last name patient searched return java util List Patient Beans public List Patient Bean search Patients Name String first Name String last Name try equals first Name first Name equals last Name last Name return patient search Patients Name first Name last Name catch Exception e e print Stack Trace return null
package edu ncsu csc validate import edu ncsu csc action Set Security Question Action import edu ncsu csc beans Security import edu ncsu csc exception Error List import edu ncsu csc exception Form Validation Exception Validates security question answer n follow format others validator used various states reset password link Set Security Question Action author Andy public class Security Validator extends Bean Validator Security Performs act validating bean question varies depending type validator validation succeed link Form Validation Exception thrown param p bean type validated Override public void validate Security bean throws Form Validation Exception Error List error List new Error List null bean throw new Form Validation Exception Null form null bean get Confirm Answer throw new Form Validation Exception Confirm answer empty bean get Answer equals bean get Confirm Answer throw new Form Validation Exception Security answers match error List add Null check Format Security Question bean get Question Validation Format false error List add Null check Format Security Answer bean get Answer Validation Format false error List Errors throw new Form Validation Exception error List
package edu ncsu csc action import java sql Exception import java util Array List import java util List import edu ncsu csc Email Util import edu ncsu csc beans Email import edu ncsu csc beans Message Bean import edu ncsu csc beans Patient Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Message import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Mail Validator import edu ncsu csc validate Message Validator Class Send Message jsp public class Send Message Action private long logged private Email Util emailer private Patient patient private Personnel personnel private Message message private Mail Validator email Val private Message Validator mess Val Sets defaults param factory Factory used create Os used action param logged user sending message public Send Message Action Factory factory long logged logged logged patient factory get Patient personnel factory get Personnel emailer new Email Util factory message factory get Message email Val new Mail Validator mess Val new Message Validator Sends message param Bean message sent throws Trust Exception throws Exception public void send Message Message Bean Bean throws Trust Exception Exception Form Validation Exception mess Val validate Bean email Val validate Bean message add Message Bean Email email new Email String sender Name String Email email set noreply com List String List new Array List String Bean get Bean get Personnel Bean sender personnel get Personnel logged Personnel Bean receiver personnel get Personnel Bean get List add receiver get Email sender Name sender get Full Name Email sender get Email else Bean get Personnel Bean sender personnel get Personnel logged Bean get Personnel Bean receiver personnel get Personnel Bean get List add receiver get Email else Patient Bean receiver patient get Patient Bean get List add receiver get Email sender Name sender get Full Name Email sender get Email else Patient Bean sender patient get Patient logged Bean get Personnel Bean receiver personnel get Personnel Bean get List add receiver get Email else Patient Bean receiver patient get Patient Bean get List add receiver get Email sender Name sender get Full Name Email sender get Email email set List List email set Email email set Subject String format new message sender Name email set Body String format received new message Trust view log Trust go View Messages sender Name emailer send Email email Returns patient name param mid Id patient return name patient throws Trust Exception public String get Patient Name long mid throws Trust Exception return patient get Name mid Returns personnel name param mid Id personnel return name personnel throws Trust Exception public String get Personnel Name long mid throws Trust Exception return personnel get Name mid Returns list patients logged represents return list patients logged represents throws Trust Exception public List Patient Bean get Representees throws Trust Exception List Patient Bean representees new Array List Patient Bean try representees patient get Represented logged catch Exception e e print Stack Trace return representees Returns designated Ps logged patient return designated Ps logged patient throws Trust Exception public List Personnel Bean get Ps throws Trust Exception return get Ps logged Returns designated Ps given patient return designated Ps given patient throws Trust Exception public List Personnel Bean get Ps long pid throws Trust Exception List Personnel Bean dlhcps new Array List Personnel Bean try dlhcps patient get Declared Ps pid catch Exception e e print Stack Trace return dlhcps
package edu ncsu csc server import javax servlet http Http Session import javax servlet http Http Session Event import javax servlet http Http Session Listener import edu ncsu csc dao Factory import edu ncsu csc exception Exception listener time user pre specified time limit public class Session Timeout Listener implements Http Session Listener private Factory factory default constructor public Session Timeout Listener factory Factory get Production Instance specialized constructor takes particular Factory used checking pre specified timeout limit param factory Factory used public Session Timeout Listener Factory factory factory factory Called Http Session created method pulls pre specified limit database sets property Http Session param arg Http Session Even occurred public void session Created Http Session Event arg Http Session session arg get Session int mins try mins factory get Access get Session Timeout Mins catch Exception e System err println Unable set session timeout defaulting minutes e print Stack Trace mins mins session set Max Inactive Interval mins Must declared compliance interface implemented public void session Destroyed Http Session Event arg nothing
package edu ncsu csc action import edu ncsu csc beans Security import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc exception Trust Exception import edu ncsu csc validate Security Validator Handles setting retrieving security questions answers users Used patient edit Demographics jsp staff edit Demographics jsp staff edit Personnell jsp author laurenhayward public class Set Security Question Action private Auth auth private long logged Sets defaults param factory Factory used create Os used action param r Logged user setting security question throws Trust Exception public Set Security Question Action Factory factory long r Logged throws Trust Exception auth factory get Auth logged check r Logged Updates information database information held Security bean passed param param Security Question Bean holds new information throws Exception public void update Information Security throws Exception Security Validator sqav new Security Validator sqav validate auth set Security Question Answer get Question get Answer logged Returns Security bean holding security info currently logged user return Security logged Mid throws Trust Exception public Security retrieve Information throws Trust Exception Security Ret new Security Ret set Answer auth get Security Answer logged Ret set Question auth get Security Question logged return Ret Checks make sure exists Trust param mid check return returns user valid otherwise throws exception throws Trust Exception private long check long mid throws Trust Exception auth check User Exists mid throw new Trust Exception mid user return mid
package edu ncsu csc action import java util Calendar import edu ncsu csc beans Survey Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Office Visit import edu ncsu csc dao mysql Survey import edu ncsu csc exception Exception class used add patient survey data database office visit linked survey survey added transaction logged public class Survey Action private Survey survey private Office Visit ov long logged Sets defaults param factory Factory used create Os used action param logged user taking survey public Survey Action Factory factory long logged survey factory get Survey ov factory get Office Visit logged logged Pass Office Vist Bean along Survey Bean param survey Bean contains data added database param visit Office Visit corresponding Survey throws Exception public void add Survey Survey Bean survey Bean long visit throws Exception survey Bean set Visit visit set visit survey bean survey add Completed Survey survey Bean Calendar get Instance get Time public long get Patient long ov throws Number Format Exception Exception return ov get Office Visit ov get Patient
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util Date import edu ncsu csc Util import edu ncsu csc beans Survey Bean import edu ncsu csc beans loaders Survey Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception handling Survey data stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os public class Survey private Factory factory private Survey Loader survey Loader typical constructor param factory link Factory associated used obtaining connections etc public Survey Factory factory factory factory survey Loader new Survey Loader Insert survey data database param survey Bean Bean representing user responses inserted param date date survey completed public void add Completed Survey Survey Bean survey Bean Date date throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Survey Visit Survey Date ps set Long survey Bean get Visit ps set Timestamp new java sql Timestamp date get Time ps execute Update survey Bean get Waiting Room Minutes ps conn prepare Statement update Survey set Waiting Room Minutes Visit ps set Float survey Bean get Waiting Room Minutes ps set Long survey Bean get Visit ps execute Update survey Bean get Exam Room Minutes ps conn prepare Statement update Survey set Exam Room Minutes Visit ps set Float survey Bean get Exam Room Minutes ps set Long survey Bean get Visit ps execute Update survey Bean get Visit Satisfaction ps conn prepare Statement update Survey set Visit Satisfaction Visit ps set Float survey Bean get Visit Satisfaction ps set Long survey Bean get Visit ps execute Update survey Bean get Treatment Satisfaction ps conn prepare Statement update Survey set Treatment Satisfaction Visit ps set Float survey Bean get Treatment Satisfaction ps set Long survey Bean get Visit ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Gets survey data database office visit id Creates instance Survey Bean data returns param id unique survey question return bean containing Survey Bean throws Exception public Survey Bean get Survey Data long id throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Survey Visit ps set Long id Result Set rs ps execute Query rs next return survey Loader load Single rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps survey completed param visit unique office visit wondering return boolean indicating whether survey completed throws Exception public boolean Survey Completed long visit throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement count Survey Visit ps set Long visit Result Set rs ps execute Query rs next return rs get Int false true catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Exception import java util List import edu ncsu csc Util import edu ncsu csc beans Survey Result Bean import edu ncsu csc beans loaders Survey Result Bean Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception handling Survey results stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os public class Survey Result private Factory factory private Survey Result Bean Loader loader typical constructor param factory link Factory associated used obtaining connections etc public Survey Result Factory factory factory factory loader new Survey Result Bean Loader Returns survey results database correspond particular zip code param zip zipcode interested String param specialty specialty interested String return java util List Survey Result Beans throws Exception public List Survey Result Bean get Survey Results Zip String zip String specialty throws Exception Connection conn null Prepared Statement ps null String Buffer sql new String Buffer sql append select p mid p firstname p lastname p address p address p city p state p zip p specialty sql append na hospital sql append avg Waiting Room Minutes Avg Waiting Room Minutes sql append avg Exam Room Minutes Avg Exam Room Minutes sql append avg Visit Satisfaction Avg Visit Satisfaction sql append avg Treatment Satisfaction Avg Treatment Satisfation sql append count sql append select count personnel p officevisits v sql append v hcpid p mid sql append substr p zip sql append p mid p mid Percent Satisfaction Results sql append ovsurvey personnel p officevisits v sql append visitid v id sql append v hcpid p mid sql append substr p zip specialty equals Survey Result Bean sql append specialty sql append group p mid p firstname p lastname p address p address p city p state p zip hospital specialty equals Survey Result Bean sql append p specialty sql append order p mid try conn factory get Connection ps conn prepare Statement sql String ps set String zip substring ps set String zip substring specialty equals Survey Result Bean ps set String specialty return loader load List ps execute Query catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns survey data associated given hospital certain specialty param hospital unique Trust hospital querying param specialty string representing specialty interested return java util List Survey Result Beans throws Exception public List Survey Result Bean get Survey Results Hospital String hospital String specialty throws Exception Connection conn null Prepared Statement ps null String Buffer sql new String Buffer sql append select p mid p firstname p lastname p address p address p city p state p zip p specialty sql append h hosid hospital sql append avg Waiting Room Minutes Avg Waiting Room Minutes sql append avg Exam Room Minutes Avg Exam Room Minutes sql append avg Visit Satisfaction Avg Visit Satisfaction sql append avg Treatment Satisfaction Avg Treatment Satisfation sql append count sql append select count personnel p officevisits v Assigned Hos h sql append v hcpid p mid sql append v hcpid h hcpid sql append h hosid sql append p mid p mid Percent Satisfaction Results sql append ovsurvey personnel p officevisits v Assigned Hos h sql append visitid v id sql append v hcpid p mid sql append v hcpid h hcpid sql append h hosid specialty equals Survey Result Bean sql append p specialty sql append group p mid p firstname p lastname p address p address p city p state p zip hospital specialty equals Survey Result Bean sql append p specialty sql append order p mid try conn factory get Connection ps conn prepare Statement sql String ps set String hospital ps set String hospital specialty equals Survey Result Bean ps set String specialty return loader load List ps execute Query catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java sql Timestamp import java util List import edu ncsu csc Util import edu ncsu csc beans Operational Profile import edu ncsu csc beans Transaction Bean import edu ncsu csc beans loaders Operational Profile Loader import edu ncsu csc beans loaders Transaction Bean Loader import edu ncsu csc dao Factory import edu ncsu csc enums Transaction Type import edu ncsu csc exception Exception Used logging mechanism stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Transaction private Factory factory private Transaction Bean Loader loader new Transaction Bean Loader private Operational Profile Loader operational Profile Loader new Operational Profile Loader typical constructor param factory link Factory associated used obtaining connections etc public Transaction Factory factory factory factory Returns whole transaction log return throws Exception public List Transaction Bean get Transactions throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Transaction Log time Logged Result Set rs ps execute Query return loader load List rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Log transaction giving person logged type param type link Transaction Type enum representing type transaction param logged user logged throws Exception public void log Transaction Transaction Type type long logged throws Exception log Transaction type logged Log transaction info meaning secondary added Info changes depending transaction type param type link Transaction Type enum representing type transaction param logged user logged param secondary Typically user acted upon param added Info note subtransaction specifics transaction posterity throws Exception public void log Transaction Transaction Type type long logged long secondary String added Info throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Transaction Log logged secondary transaction Code added Info ps set Long logged ps set Long secondary ps set Int type get Code ps set String added Info ps execute Update catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list transactions accessed given patient record param patient patient question return java util List transactions throws Exception public List Transaction Bean get Record Accesses long patient long dlhcp boolean get Role throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Transaction Log secondary transaction Code Transaction Type patient Viewable Str logged time Logged ps set Long patient ps set Long dlhcp Result Set rs ps execute Query List Transaction Bean tb List loader load List rs tb List add Sort Roles tb List patient get Role return tb List catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Thorough Fetch param mid logged user param dlhcp user param start Index start pulling entries param range Number entries retrieve return List range Transaction Beans affecting user starting start th entry throws Exception public List Transaction Bean get Transactions Affecting long mid long dlhcp java util Date start int range throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Transaction Log time Logged secondary transaction Code Transaction Type patient Viewable Str logged transaction Code logged transaction Code exclude specified Transaction Type dlhcp Hidden Str time Logged ps set String mid ps set String mid ps set Int Transaction Type get Code ps set Timestamp new Timestamp start get Time ps set Long dlhcp ps set Int range Result Set rs ps execute Query List Transaction Bean tb List loader load List rs return tb List catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Return list transactions accessed given patient record within dates param patient patient question param lower starting date java util Date param upper ending date java util Date return java util List transactions throws Exception public List Transaction Bean get Record Accesses long patient long dlhcp java util Date lower java util Date upper boolean get Role throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Transaction Log secondary transaction Code Transaction Type patient Viewable Str time Logged time Logged logged time Logged ps set Long patient ps set Timestamp new Timestamp lower get Time add day worth include upper ps set Timestamp new Timestamp upper get Time ps set Long dlhcp Result Set rs ps execute Query List Transaction Bean tb List loader load List rs tb List add Sort Roles tb List patient get Role return tb List catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns operation profile return Operational Profile bean throws Exception public Operational Profile get Operational Profile throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection ps conn prepare Statement Transaction Code count transaction Total Count count logged transaction null Patient Count count logged transaction null Personnel Count Transaction Log transaction Code transaction Code Result Set rs ps execute Query return operational Profile Loader load Single rs catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps param tb List param patient param sort Role return throws Exception private List Transaction Bean add Sort Roles List Transaction Bean tb List long patient boolean sort Role throws Exception Connection conn null Prepared Statement ps null try conn factory get Connection Transaction Bean tb List ps conn prepare Statement Role Users ps set Long get Logged Result Set rs ps execute Query String role rs next role rs get String Role role equals er role Emergency Responder else role equals uap role else role equals hcp role ps conn prepare Statement Patient Declared ps set Long get Logged Result Set rs ps execute Query rs next rs get Long Patient patient role break else role equals patient role Patient ps conn prepare Statement representee Representatives representer ps set Long get Logged Result Set rs ps execute Query rs next rs get Long representee patient role Personal Health Representative break set Role role sort Role Transaction Bean array new Transaction Bean tb List size array tb List get Transaction Bean int tb List size tb List get String role get Role int j array j null role compare Ignore Case array j get Role j int k k j k array k array k array j int size tb List size int size tb List set array return tb List catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
package edu ncsu csc risk import java util Array List import java util List import edu ncsu csc dao Factory import edu ncsu csc enums Ethnicity import edu ncsu csc exception Exception import edu ncsu csc exception Health Records Exception import edu ncsu csc risk factors Childhood Infection Factor import edu ncsu csc risk factors Ethnicity Factor import edu ncsu csc risk factors Family History Factor import edu ncsu csc risk factors Patient Risk Factor Checks see given patient risk Type Diabetes details method see link Risk Checker author Andy public class Type Diabetes Risks extends Risk Checker public Type Diabetes Risks Factory factory long patient throws Exception Health Records Exception super factory patient Override public boolean qualifies Disease return patient get Age Override protected List Patient Risk Factor get Disease Risk Factors List Patient Risk Factor factors new Array List Patient Risk Factor factors add new Ethnicity Factor patient Ethnicity Caucasian factors add new Family History Factor factory patient get factors add new Childhood Infection Factor factory patient get return factors Override public String get Name return Type Diabetes
package edu ncsu csc risk import static edu ncsu csc enums Ethnicity African American import static edu ncsu csc enums Ethnicity American Indian import static edu ncsu csc enums Ethnicity Asian import static edu ncsu csc enums Ethnicity Hispanic import java util Array List import java util List import edu ncsu csc dao Factory import edu ncsu csc exception Exception import edu ncsu csc exception Health Records Exception import edu ncsu csc risk factors Age Factor import edu ncsu csc risk factors Cholesterol Factor import edu ncsu csc risk factors Ethnicity Factor import edu ncsu csc risk factors Family History Factor import edu ncsu csc risk factors Hypertension Factor import edu ncsu csc risk factors Patient Risk Factor import edu ncsu csc risk factors Prior Diagnosis Factor import edu ncsu csc risk factors Weight Factor Checks see given patient risk Type Diabetes details method see link Risk Checker author Andy public class Type Diabetes Risks extends Risk Checker public Type Diabetes Risks Factory factory long patient throws Exception Health Records Exception super factory patient Override public boolean qualifies Disease return patient get Age Override protected List Patient Risk Factor get Disease Risk Factors List Patient Risk Factor factors new Array List Patient Risk Factor factors add new Age Factor patient factors add new Ethnicity Factor patient Hispanic African American American Indian Asian factors add new Weight Factor current Health Record factors add new Hypertension Factor current Health Record factors add new Cholesterol Factor current Health Record factors add new Prior Diagnosis Factor factory patient get factors add new Family History Factor factory patient get return factors Override public String get Name return Type Diabetes
package edu ncsu csc action import edu ncsu csc beans Procedure Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Codes import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Procedure Bean Validator Updates Code Medical Procedures List Used edit Procedure Codes jsp code set accurately describes medical surgical diagnostic services designed communicate uniform information medical services procedures among physicians coders patients accreditation organizations payers administrative financial analytical purposes see http www ama assn org ama pub physician resources solutions managing practice coding billing insurance cpt cpt shtml author laurenhayward public class Update Code List Action private Codes cpt private Procedure Bean Validator validator new Procedure Bean Validator param factory Factory used create Os used action param logged administrator updating Ts public Update Code List Action Factory factory long logged cpt factory get Codes Adds new cpt code med procedure param proc Procedure Bean holds new cpt code return status message throws Form Validation Exception public String add Code Procedure Bean proc throws Form Validation Exception validator validate proc try cpt add Code proc return Success proc get Code proc get Description added else return database become corrupt Please contact system administrator assistance catch Exception e e print Stack Trace return e get Message catch Trust Exception e return e get Message Updates procedure new information Procedure Bean param proc Procedure Bean new information code return Status message throws Form Validation Exception public String update Information Procedure Bean proc throws Form Validation Exception validator validate proc try int rows update Code proc rows return Error Code found edit actual code change description add new code old description else return Success rows row updated catch Exception e e print Stack Trace return e get Message Updates cpt code param proc code updated return updated code throws Exception private int update Code Procedure Bean proc throws Exception return cpt update Code proc
package edu ncsu csc action import edu ncsu csc beans Hospital Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Hospitals import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Hospital Bean Validator Handles updating list hospitals Used hospital Listing jsp author laurenhayward public class Update Hospital List Action private Hospitals hosp Set param factory Factory used create Os used action param performer person updating hospitals public Update Hospital List Action Factory factory long performer hosp factory get Hospitals Adds hosptial using Hospital Bean passed param param hosp new hospital listing return Status message throws Form Validation Exception public String add Hospital Hospital Bean hosp throws Form Validation Exception new Hospital Bean Validator validate hosp try hosp add Hospital hosp return Success hosp get Hospital hosp get Hospital Name added else return database become corrupt Please contact system administrator assistance catch Exception e e print Stack Trace return e get Message catch Trust Exception e return e get Message Updates hospital based hospital id using new information Hospital Bean passed param param hosp new hospital information hospital id return Status message throws Form Validation Exception public String update Information Hospital Bean hosp throws Form Validation Exception new Hospital Bean Validator validate hosp try int rows return rows update Hospital hosp Error Hospital found Success rows row updated catch Exception e e print Stack Trace return e get Message Updates hospital param hosp new information return id updated hospital throws Exception private int update Hospital Hospital Bean hosp throws Exception return hosp update Hospital hosp
package edu ncsu csc action import edu ncsu csc beans Diagnosis Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Codes import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Diagnosis Bean Validator Handles updating Code Diagnosis List Used edit Codes jsp International Statistical Classification Diseases Related Health Problems commonly known abbreviation provides codes classify diseases wide variety signs symptoms abnormal findings complaints social circumstances external causes injury disease see http www cdc gov nchs icd htm author laurenhayward public class Update Code List Action private Codes icd private Diagnosis Bean Validator validator new Diagnosis Bean Validator Set param factory Factory used create Os used action param performer person udpating Ds public Update Code List Action Factory factory long performer icd factory get Codes Adds new code diagnosis based Diagnosis Bean passed param param diagn new diagnosis code return Status message throws Form Validation Exception public String add Code Diagnosis Bean diagn throws Form Validation Exception validator validate diagn try icd add Code diagn return Success diagn get Code diagn get Description added else return database become corrupt Please contact system administrator assistance catch Exception e e print Stack Trace return e get Message catch Trust Exception e return e get Message Updates diagnosis new information Diagnosis Bean passed param param diagn new information update code return Status message throws Form Validation Exception public String update Information Diagnosis Bean diagn throws Form Validation Exception validator validate diagn try int rows icd update Code diagn rows return Error Code found else return Success rows row updated catch Exception e e print Stack Trace return e get Message
package edu ncsu csc action import java util List import edu ncsu csc beans Cbean import edu ncsu csc dao Factory import edu ncsu csc dao mysql import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Bean Validator Handles updating Used Logical Observation Identifiers Names Codes database universal standard identifying medical laboratory observations see http loinc org public class Update List Action private l private Bean Validator validator new Bean Validator Sets defaults param factory Factory used create Os used action param performer person updating Cs public Update List Action Factory factory long performer l factory get Adds new param diagn New return Status message throws Form Validation Exception public String add Cbean diagn throws Form Validation Exception Trust Exception validator validate diagn List Cbean lblist l get boolean correct false int lblist size lblist get get Lab Procedure Code equals diagn get Lab Procedure Code correct true lblist size correct throw new Form Validation Exception Error Code already exists l add diagn return Success diagn get Lab Procedure Code added Updates param diagn new information update code return Status message throws Form Validation Exception public String update Information Cbean diagn throws Form Validation Exception validator validate diagn try int rows l update diagn rows return Error Code found else return Success diagn get Lab Procedure Code updated catch Exception e e print Stack Trace return e get Message
package edu ncsu csc action import edu ncsu csc beans Medication Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Codes import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Medication Bean Validator Handles updating Code Prescription List Used edit Codes jsp National Drug Code universal product identifier used United States drugs intended human use see http www fda gov Drugs Information Drugs ucm htm author laurenhayward public class Update Code List Action private Codes nd private Medication Bean Validator validator new Medication Bean Validator Set defaults param factory Factory used create Os used action param performer user updating lists public Update Code List Action Factory factory long performer nd factory get Codes Adds new Code prescription list param med new Code added return Status message throws Form Validation Exception public String add Code Medication Bean med throws Form Validation Exception validator validate med try nd add Code med return Success med get Code med get Description added else return database become corrupt Please contact system administrator assistance catch Exception e e print Stack Trace return e get Message catch Trust Exception e return e get Message Updates Code new information Medication Bean param med Medication Bean holds new information code return status message throws Form Validation Exception public String update Information Medication Bean med throws Form Validation Exception validator validate med try int rows update Code med rows return Error Code found else return Success rows row updated catch Exception e e print Stack Trace return e get Message Medication information already validated param med return throws Exception private int update Code Medication Bean med throws Exception return nd update Code med Removes Code prescription list param med Code removed return Status message throws Exception public String remove Code Medication Bean med throws Exception try nd get Code med get Code null return Drug exist already removed database catch Exception e e print Stack Trace return e get Message try nd remove Code med return Success med get Code med get Description removed else return database become corrupt Please contact system administrator assistance catch Exception e e print Stack Trace return e get Message catch Trust Exception e return e get Message
page import java net Encoder page import edu ncsu csc dao Factory page import edu ncsu csc action Get User Name Action page import org apache commons lang String Escape Utils page import edu ncsu csc exception Trust Exception html head title Trust Find User title style type text css get User Body background color White border solid px f margin px color f white space nowrap width px height px overflow hidden get User Title width text align center background color b color White font weight bold font size pt padding px px px px get User Title Close float right display block position absolute top px left px get User Close Link font size px color Red get User Close Link hover text decoration none color White get User Search Button color White font weight bold width px background color b border solid px f get User Search Button hover background color e get User Name font size pt color Black font weight bold get User Correct border px solid ff background color eeffee color aa font weight bold get User Correct hover border px solid ee background color bbffbb get User Incorrect border px solid ff background color ffeeee color aa font weight bold get User Incorrect hover border px solid ee background color ffbbbb result Table tr td padding px px px px style head body class get User Body div class get User Title Trust User Search div class get User Title Close class get User Close Link href javascript void onclick parent get User Close Close div div form method post String mid request get Parameter mid String param request get Parameter mid null mid trim try String user Name new Get User Name Action Factory get Production Instance get User Name mid String action param null action parent set User param mid user Name table align center tr td style text align center white space nowrap Found User span class get User Name br String Escape Utils escape Html user Name span br br Please confirm user wish select br br style line height px input type button name correct value user correct class get User Correct onclick String Escape Utils escape Html action input type submit name incorrect value Find another user class get User Incorrect nbsp nbsp nbsp td tr table catch Trust Exception e response send Redirect get User jsp param error Encoder encode e get Message else table align center tr td colspan style text align center padding bottom px b Please enter User search b td tr tr td style text align right font weight bold color black User td td input name mid maxlength type text autocomplete td tr tr td colspan style text align center padding top px input type submit value Search User class get User Search Button td tr mid tr td colspan style text align center font weight bold color Red Please enter td tr else request get Parameter error null tr td colspan style text align center font weight bold color Red String Escape Utils escape Html request get Parameter error td tr table form body html
page import edu ncsu csc action Reset Password Action page import edu ncsu csc exception Form Validation Exception page import edu ncsu csc exception Trust Exception include file global jsp page Title Trust Reset Password include file header jsp h Reset Password h Reset Password Action action new Reset Password Action prod action Maxed request get Remote Addr response send Redirect Trust auth forward error many attempts long mid action check request get Parameter mid String role null try role action check Role mid request get Parameter role catch Trust Exception e span User exist role mid span form action Trust util reset Password jsp method post table mid role null tr td colspan b Please enter Role b td tr tr td Role td td select name role option value patient Patient option option value hcp option option value uap option option value er option option value pha option option value lt option select td tr tr td td td input type maxlength name mid td tr tr td colspan align center input type submit value Submit td tr else String answer action check Answer Null request get Parameter answer answer null try tr td colspan b String Escape Utils escape Html action get Security Question mid b td tr tr td Answer td td input type password maxlength name answer input type hidden name mid value String Escape Utils escape Html mid input type hidden name role value String Escape Utils escape Html role td tr tr td New Password td td input type password maxlength name password td tr tr td Confirm td td input type password maxlength name confirm Password td tr tr td colspan align center input type submit value Submit td tr catch Trust Exception e tr td font color red user set security question answer font td tr else String password request get Parameter password String confirm Password request get Parameter confirm Password String confirm try confirm action reset Password mid role answer password confirm Password request get Remote Addr confirm contains Password changed logging Action log Event Transaction Type mid mid catch Form Validation Exception e e print page Context get tr td href reset Password jsp h Please try h td tr tr td String Escape Utils escape Html confirm td tr table form include file footer jsp
package edu ncsu csc action import java util Array List import java util List import edu ncsu csc Email Util import edu ncsu csc beans Email import edu ncsu csc beans Patient Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Prescription Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc exception Trust Exception Handles retrieving beans view Prescription Records jsp author laurenhayward public class View Expired Prescriptions Action private Patient patient private Personnel personnel private Email Util emailer private long logged Set defaults param factory Factory used create Os used action param logged person viewing expired prescriptions public View Expired Prescriptions Action Factory factory long logged emailer new Email Util factory patient factory get Patient personnel factory get Personnel logged logged Gets Patient Bean param patient patient return Patient Bean given throws Trust Exception public Patient Bean get Patient long patient throws Trust Exception return patient get Patient patient Gets logged person representees return list Patient Beans holding representees throws Trust Exception public List Patient Bean get Representees throws Trust Exception return patient get Represented logged Returns prescribing prescription param prescription item question return prescribed prescription throws Trust Exception public Personnel Bean get Prescribing Doctor Prescription Bean prescription throws Trust Exception return personnel get Prescribing Doctor prescription Returns prescriptions given patient param patient patient question return list prescriptions patient throws Trust Exception public List Prescription Bean get Prescriptions Patient long patient throws Trust Exception Patient Bean patient patient get Patient patient logged patient return patient get Expired Prescriptions patient List String List new Array List String List add patient get Email List Patient Bean representatives patient get Representing patient Patient Bean representative representatives logged representative get return patient get Expired Prescriptions patient List add representative get Email List Personnel Bean dlhcps patient get Declared Ps patient Personnel Bean dlhcp dlhcps logged dlhcp get return patient get Expired Prescriptions patient List Personnel Bean uaps personnel get Ps dlhcp get Personnel Bean uap uaps logged uap get return patient get Prescriptions patient Email email new Email email set List List email set noreply com email set Subject Undesignated Personnel Accessed Prescription Records email set Body undesignated accessed prescription records information please log Trust emailer send Email email return patient get Prescriptions patient
package edu ncsu csc action import java text Parse Exception import java text Simple Date Format import java util Date import java util List import edu ncsu csc beans Patient Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Transaction Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Transaction import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception Handles retrieving log record accesses given user Used view Access Log jsp author laurenhayward public class View Access Log Action private Transaction trans private Patient patient private long logged Set param factory Factory used create Os used action param logged person retrieving logs public View Access Log Action Factory factory long logged logged logged trans factory get Transaction patient factory get Patient Returns list Transaction Beans two dates passed params param lower Date first date param upper Date second date return list Transaction Beans throws Exception throws Form Validation Exception public List Transaction Bean get Accesses String lower Date String upper Date String log boolean get Role throws Trust Exception Exception Form Validation Exception List Transaction Bean accesses stores log entries List Personnel Bean dlhcps get medical dependents signed user selected user signed user one dependents user n access log List Patient Bean patient Relatives get Represented logged long mid logged try mid Long parse Long log catch Exception e dlhcps patient get Declared Ps mid boolean mid Scope false Patient Bean pb patient Relatives pb get mid mid Scope true mid logged mid Scope selected user form scope ca n shown user throw new Form Validation Exception Log View user either Get one exists filtered results long dlhcp dlhcps Empty dlhcp dlhcps get get lower Date null upper Date null return trans get Record Accesses mid dlhcp get Role try Date lower new Simple Date Format dd yyyy parse lower Date Date upper new Simple Date Format dd yyyy parse upper Date lower upper throw new Form Validation Exception Start date must end date accesses trans get Record Accesses mid dlhcp lower upper get Role catch Parse Exception e throw new Form Validation Exception Enter dates dd yyyy return accesses Returns date first Transaction list passed param list empty otherwise returns today date param accesses java util List Transaction Beans accesses return String representing date first transaction public String get Default Start List Transaction Bean accesses String start Date accesses size start Date new Simple Date Format dd yyyy format new Date accesses get accesses size get Time Logged get Time else start Date new Simple Date Format dd yyyy format new Date return start Date Returns date last Transaction list passed param list empty otherwise returns today date param accesses java util List Transaction Beans storing access return String representation date last transaction public String get Default End List Transaction Bean accesses String end Date accesses size end Date new Simple Date Format dd yyyy format new Date accesses get get Time Logged get Time else end Date new Simple Date Format dd yyyy format new Date return end Date Return list patients pid represents param pid id personnel looking representees return list Patient Beans throws Trust Exception public List Patient Bean get Represented long pid throws Trust Exception return patient get Represented pid
package edu ncsu csc action import java sql Exception import java text Date Format import java text Parse Exception import java text Simple Date Format import java util Array List import java util Calendar import java util Date import java util List import edu ncsu csc beans Message Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Message import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc dao mysql Referral import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Action class View Messages jsp public class View Messages Action private long logged private Patient patient private Personnel personnel private Message message private Referral referral Set defaults param factory Factory used create Os used action param logged user viewing messages public View Messages Action Factory factory long logged logged logged patient factory get Patient personnel factory get Personnel message factory get Message referral factory get Referral Gets messages logged user return list user messages throws Exception public List Message Bean get Messages throws Exception return message get Messages logged Gets messages logged user sorts ascending time return list user messages throws Exception public List Message Bean get Messages Time Ascending throws Exception return message get Messages Time Ascending logged Gets messages logged user sorts names ascending order return list user messages throws Exception public List Message Bean get Messages Name Ascending throws Exception return message get Messages Name Ascending logged Gets messages logged user sorts name descending order return list user messages throws Exception public List Message Bean get Messages Name Descending throws Exception return message get Messages Name Descending logged Gets sent messages logged user return list user sent messages throws Exception public List Message Bean get Sent Messages throws Exception return message get Messages logged Gets messages logged user sorts ascending time return list user messages throws Exception public List Message Bean get Sent Messages Time Ascending throws Exception return message get Messages Time Ascending logged Gets messages logged user sorts names ascending order return list user messages throws Exception public List Message Bean get Sent Messages Name Ascending throws Exception return message get Messages Name Ascending logged Gets messages logged user sorts name descending order return list user messages throws Exception public List Message Bean get Sent Messages Name Descending throws Exception return message get Messages Name Descending logged public String validate Create Filter String filter String f filter split Date Format format new Simple Date Format dd yyyy Date null Date en null try f equals format parse f f equals en format parse f null en null en return Error end date start date catch Exception e return Error date formatted correctly please enter dates int f length f f replace f f replace f f replace String nf f f f f f f return nf Gets list messages user based filter criteria param messages List user Message Beans param filter String containing user filter criteria return List Message Beans meet criteria filter throws Trust Exception throws Parse Exception public List Message Bean filter Messages List Message Bean messages String filter throws Trust Exception Parse Exception List Message Bean filtered new Array List Message Bean String f filter split Message Bean messages Check sender filter field Exclude Message Bean match requested sender one specified f equals get Name get equals Ignore Case f continue Check subject filter field Exclude Message Bean match requested subject one specified f equals get Subject equals Ignore Case f continue Check body message certain words Exclude Message Bean contain words message body f equals get Subject Lower Case contains f Lower Case get Body Lower Case contains f Lower Case continue Check body message certain words Exclude Message Bean contain words message body f equals get Subject Lower Case contains f Lower Case get Body Lower Case contains f Lower Case continue Check start date filter field Exclude Message Bean sent date f equals Date Format format new Simple Date Format dd yyyy Date format parse f get Sent Date continue Check end date filter field Exclude Message Bean sent date f equals Date Format format new Simple Date Format dd yyyy Date format parse f Calendar c Calendar get Instance c set Time c add Calendar c get Time get Sent Date continue message eliminated filter fields add new list messages filtered add return filtered Gets patient name param mid patient return patient name throws Trust Exception public String get Name long mid throws Trust Exception mid return patient get Name mid else return personnel get Name mid Gets personnel name param mid personnel return personnel name throws Trust Exception public String get Personnel Name long mid throws Trust Exception return personnel get Name mid Set state Message Bean read read user param Bean Message Bean read public void set Read Message Bean Bean try message update Read Bean catch Exception e Auto generated catch block e print Stack Trace Get number unread messages current user return number unread messages throws Exception public int get Unread Count throws Exception List Message Bean messages get Messages int count Message Bean mb messages mb get Read count return count public long linked Referral long id throws Exception return referral Referral Message id
package edu ncsu csc action import java util Array List import java util List import edu ncsu csc beans Allergy Bean import edu ncsu csc beans Diagnosis Bean import edu ncsu csc beans Email import edu ncsu csc beans Family Member Bean import edu ncsu csc beans Health Record import edu ncsu csc beans Lab Procedure Bean import edu ncsu csc beans Office Visit Bean import edu ncsu csc beans Patient Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Procedure Bean import edu ncsu csc beans Report Request Bean import edu ncsu csc beans Cbean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Allergy import edu ncsu csc dao mysql Fake Email import edu ncsu csc dao mysql Family import edu ncsu csc dao mysql Health Records import edu ncsu csc dao mysql Lab Procedure import edu ncsu csc dao mysql Office Visit import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc dao mysql Procedures import edu ncsu csc dao mysql Report Request import edu ncsu csc dao mysql Survey import edu ncsu csc dao mysql Codes import edu ncsu csc dao mysql import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Handles patients viewing records Used view Records jsp author laurenhayward public class View Records Action private Patient patient private Personnel personnel private Allergy allergy private Family family private Health Records hr private Office Visit ov private Survey survey private Lab Procedure lab private Fake Email email private Codes icd private Report Request report Request private Procedures proc private loinc private long logged Set param factory Factory used create Os used action param logged person viewing records public View Records Action Factory factory long logged patient factory get Patient personnel factory get Personnel allergy factory get Allergy family factory get Family hr factory get Health Records ov factory get Office Visit survey factory get Survey lab factory get Lab Procedure email factory get Fake Email report Request factory get Report Request icd factory get Codes proc factory get Procedures loinc factory get logged logged public List Cbean get Procedure Name String lab Code throws Exception return loinc get Procedures lab Code Takes patient representee param returns long patient represents input param param input patient representee mid return representee mid long throws Trust Exception public long represent Patient String input throws Trust Exception try long reppee Long value input patient represents logged reppee logged reppee return reppee else throw new Trust Exception represent patient reppee catch Number Format Exception e throw new Trust Exception number Returns Patient Bean currently logged patient return Patient Bean currently logged patient throws Trust Exception public Patient Bean get Patient throws Trust Exception return patient get Patient logged Returns Patient Bean specified param mid id requested bean return Patient Bean specified throws Trust Exception public Patient Bean get Patient long mid throws Trust Exception return patient get Patient mid Returns Personnel Bean requested param mid id requested bean return Personnel Bean requested throws Trust Exception public Personnel Bean get Personnel long mid throws Trust Exception return personnel get Personnel mid Returns Patient Bean currently logged patient return Patient Bean currently logged patient throws Trust Exception public List Email get Email History throws Trust Exception return email get Emails Person get Patient get Email Returns list Allergy Beans currently logged patient return list Allergy Beans currently logged patient throws Trust Exception public List Allergy Bean get Allergies throws Trust Exception return allergy get Allergies logged Returns list Parents Siblings Children currently logged patient return list Family Member Beans public List Family Member Bean get Family throws Trust Exception List Family Member Bean fam new Array List Family Member Bean List Family Member Bean parents null try parents family get Parents logged fam add parents fam add family get Siblings logged fam add family get Children logged catch Exception e throw new Trust Exception e get Message parents null List Family Member Bean grandparents new Array List Family Member Bean Family Member Bean parent parents try grandparents add family get Parents parent get Mid catch Exception e throw new Trust Exception e get Message fam add grandparents Family Member Bean gp grandparents gp set Relation Grandparent return fam Returns list Parents Siblings Grand Parents currently logged patient return list Family Member Beans public List Family Member Bean get Family History throws Trust Exception List Family Member Bean fam new Array List Family Member Bean List Family Member Bean parents null try parents family get Parents logged fam add parents fam add family get Siblings logged catch Exception e throw new Trust Exception e get Message parents null List Family Member Bean grandparents new Array List Family Member Bean Family Member Bean parent parents try grandparents add family get Parents parent get Mid catch Exception e throw new Trust Exception e get Message fam add grandparents Family Member Bean gp grandparents gp set Relation Grandparent return fam Returns list Health Records currently logged patient return list Health Records currently logged patient throws Trust Exception public List Health Record get Health Records throws Trust Exception return hr get Health Records logged Returns list Health Records specified family member return list Health Records specified family member throws Trust Exception public List Health Record get Family Health Records long mid throws Trust Exception return hr get Health Records mid Returns list Office Visit Beans office visits currently logged patient return list Office Visit Beans office visits currently logged patient throws Trust Exception public List Office Visit Bean get Office Visits throws Trust Exception return ov get Office Visits logged Returns complete Office Visit Bean given visit return complete Office Visit Bean given visit throws Trust Exception public Office Visit Bean get Complete Office Visit long visit throws Trust Exception return ov get Office Visit visit public List Procedure Bean get Procedures long visit throws Exception return proc get List visit Returns list Patient Beans patients currently logged patient represents return list Patient Beans patients currently logged patient represents throws Trust Exception public List Patient Bean get Represented throws Trust Exception return patient get Represented logged Returns list Patient Beans patients currently logged patient represents return list Patient Beans patients currently logged patient represents throws Trust Exception public List Patient Bean get Representing throws Trust Exception return patient get Representing logged survey created office visit param visit office visit question return true survey completed otherwise false throws Trust Exception public boolean Survey Completed long visit throws Trust Exception return survey Survey Completed visit Returns list lab procedures return list lab procedures logged patient throws Exception public List Lab Procedure Bean get Labs throws Trust Exception return lab get Lab Procedures Patient logged public List Lab Procedure Bean get Specific Labs long id String loinc throws Exception return lab get Lab Procedures id loinc public void set Viewed List Lab Procedure Bean procs throws Exception Lab Procedure Bean b procs b set Viewed Patient true lab mark Viewed b Returns report requests logged patient return report requests logged patient throws Trust Exception public List Report Request Bean get Report Requests throws Trust Exception return report Request get Report Requests Patient logged Checks see family members high blood pressure param member family member question return true family member risk factor otherwise false throws Trust Exception public boolean Family Member High Family Member Bean member throws Trust Exception List Health Record records hr get Health Records member get Mid records size return false Health Record record records record get Blood Pressure Systolic record get Blood Pressure Diastolic return true return false Checks see family members high cholesterol param member family member question return true family member risk factor otherwise false throws Trust Exception public boolean Family Member High Cholesterol Family Member Bean member throws Trust Exception List Health Record records hr get Health Records member get Mid records size return false Health Record record records record get Cholesterol record get Cholesterol return true return false Checks see family members diabetes param member family member question return true family member risk factor otherwise false throws Trust Exception public boolean Family Member Diabetes Family Member Bean member throws Trust Exception List Diagnosis Bean diagnoses patient get Diagnoses member get Mid diagnoses size return false Diagnosis Bean diag diagnoses diag get Code starts return true return false Checks see family members cancer param member family member question return true family member risk factor otherwise false throws Trust Exception public boolean Family Member Cancer Family Member Bean member throws Trust Exception List Diagnosis Bean diagnoses patient get Diagnoses member get Mid diagnoses size return false Diagnosis Bean diag diagnoses diag get Code starts return true return false Checks see family members heart disease param member family member question return true family member risk factor otherwise false throws Trust Exception public boolean Family Member Heart Disease Family Member Bean member throws Trust Exception List Diagnosis Bean diagnoses patient get Diagnoses member get Mid diagnoses size return false Diagnosis Bean diag diagnoses diag get Code starts return true return false Checks see family members smoke param member family member question return true family member risk factor otherwise false throws Trust Exception public boolean Family Member Smoker Family Member Bean member throws Trust Exception List Health Record records hr get Health Records member get Mid records size return false Health Record record records record Smoker return true return false Checks see family member dead cause death param member family member question return cause death family member throws Trust Exception public String get Family Member Family Member Bean member throws Trust Exception Patient Bean patient patient get Patient member get Mid patient get Cause Death null return Diagnosis Bean diag icd get Code patient get Cause Death diag null return return diag get Description
package edu ncsu csc action import java text Parse Exception import java text Simple Date Format import java util Date import java util List import edu ncsu csc beans Remote Monitoring Data Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Auth import edu ncsu csc dao mysql Remote Monitoring import edu ncsu csc exception Exception import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception Handles retrieving patient data certain used view Telemedicine Data jsp public class View Remote Monitoring List Action private Remote Monitoring rm private Auth auth private long logged Constructor param factory Factory used create Os used action param logged retrieving patient data public View Remote Monitoring List Action Factory factory long logged logged logged rm factory get Remote Monitoring auth factory get Auth Returns list Remote Monitoring Data Beans logged return list Transaction Beans throws Exception throws Form Validation Exception public List Remote Monitoring Data Bean get Patients Data throws Exception return rm get Patients Data logged Returns list Remote Monitoring Data Beans logged return list Transaction Beans throws Exception throws Form Validation Exception public List Remote Monitoring Data Bean get Patient Data Date long patient String start Date String end Date throws Exception Form Validation Exception Date lower Date upper try lower new Simple Date Format dd yyyy parse start Date upper new Simple Date Format dd yyyy parse end Date lower upper throw new Form Validation Exception Start date must end date catch Parse Exception e throw new Form Validation Exception Enter dates dd yyyy return rm get Patient Data Date patient lower upper Returns list Remote Monitoring Data Beans logged based certain data type param patient param data Type return list Transaction Beans throws Exception throws Form Validation Exception public List Remote Monitoring Data Bean get Patient Data Type long patient String data Type throws Exception Form Validation Exception String types weight systolic Blood Pressure diastolic Blood Pressure glucose Level pedometer Reading boolean valid false String Type types Type equals data Type valid true break valid throw new Form Validation Exception Input must valid telemedicine data type return rm get Patient Data Type patient data Type public List Remote Monitoring Data Bean get Patient Data Without Logging throws Exception return rm get Patients Data logged returns patient name return patient name throws Exception throws Trust Exception public String get Patient Name long pid throws Exception Trust Exception return auth get User Name pid Useful figure monitoring given patient return list Ps monitoring patient throws Exception throws Trust Exception public List Personnel Bean get Monitoring Ps throws Exception Trust Exception return rm get Monitoring Ps logged
package edu ncsu csc action import java util Calendar import java util List import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Report Request Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Personnel import edu ncsu csc dao mysql Report Request import edu ncsu csc exception Trust Exception Action class View Reports jsp Allows user see reports public class View Report Requests Action private long logged private Report Request report Request private Personnel personnel private Factory factory Set param factory Factory used create Os used action param logged person viewing report requests public View Report Requests Action Factory factory long logged logged logged report Request factory get Report Request personnel factory get Personnel factory factory Returns reports currently logged return list reports logged throws Trust Exception public List Report Request Bean get Report Requests Requester throws Trust Exception return report Request get Report Requests Requester logged Returns list reports return list reports throws Trust Exception public List Report Request Bean get Report Requests throws Trust Exception return report Request get Report Requests Adds report request list param patient patient report request return throws Trust Exception public long add Report Request long patient throws Trust Exception long id report Request add Report Request logged patient Calendar get Instance get Time return id Approves report request list mail sent request approved param id request throws Trust Exception public void approve Report Request long throws Trust Exception Report Request Bean rr report Request get Report Request report Request approve Report Request logged Calendar get Instance get Time new Email Util factory send Email make Email App logged rr get Requester rr get Patient Sends e mail regarding approved request param admin admin approved request param hcp request param pid patient report return sent e mail throws Exception private Email make Email App long admin long hcp long pid throws Exception Patient Bean p new Patient factory get Patient pid Email email new Email email set reply com email set List Arrays List p get Email email set Subject Report generated Trust email set Body String format Dear n Trust Health Care Provider submitted request view full medical records Trust administrator approved one time viewing report notified chooses view p get Full Name hcp admin return email Rejects request list param id rejected request param comment request rejected throws Trust Exception public void reject Report Request long String comment throws Trust Exception report Request reject Report Request logged Calendar get Instance get Time comment Returns requested report param id requested report return requested report throws Trust Exception public Report Request Bean get Report Request int throws Trust Exception return report Request get Report Request Sets viewed status report report viewed must request new one see param id report throws Trust Exception public void set Viewed int throws Trust Exception Report Request Bean rr report Request get Report Request report Request set Viewed Calendar get Instance get Time new Email Util factory send Email make Email View rr get Approver rr get Requester rr get Patient Sends e mail regarding request patient param admin admin approved request param hcp request param pid patient report return sent e mail throws Exception private Email make Email View long admin long hcp long pid throws Exception Patient Bean p new Patient factory get Patient pid Email email new Email email set reply com email set List Arrays List p get Email email set Subject Report generated Trust email set Body String format Dear n Trust Health Care Provider chosen view full medical report approved Trust administrator report viewable one time longer available p get Full Name hcp admin return email Gets status request param id id request return request status throws Trust Exception public String get Long Status long id throws Trust Exception String Builder new String Builder Report Request Bean r report Request get Report Request id r get Status equals Report Request Bean Requested Personnel Bean p personnel get Personnel r get Requester append String format Request requested r get Requested Date String p get Full Name r get Status equals Report Request Bean Viewed Personnel Bean p personnel get Personnel r get Requester String full Name Unknown p null full Name p get Full Name append String format Request requested r get Requested Date String p get Full Name append removed br caused unit test fail seems purpose append String format viewed r get Viewed Date String full Name return String
package edu ncsu csc action import java util Array List import java util Iterator import java util List import java util Scanner import edu ncsu csc beans Office Visit Bean import edu ncsu csc beans Patient Bean import edu ncsu csc beans Patient Visit Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Office Visit import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Action class View Patient Office Visit History jsp public class View Patient Office Visit History Action private long logged private Patient patient private Personnel personnel private Office Visit officevisit private Array List Patient Visit Bean visits Set defaults param factory Factory used create Os used action param logged person viewing office visits public View Patient Office Visit History Action Factory factory long logged logged logged personnel factory get Personnel officevisit factory get Office Visit patient factory get Patient visits new Array List Patient Visit Bean Adds office visits logged list throws Trust Exception private void process Office Visits throws Trust Exception try List Office Visit Bean ovlist officevisit get Office Visits logged Iterator Office Visit Bean ovlist iterator Office Visit Bean ov Patient Visit Bean visit Bean Next visit Bean new Patient Visit Bean ov next Patient Bean pb pb patient get Patient ov get Patient visit Bean set Patient pb visit Bean set Patient Name pb get Full Name String date ov get Visit Date Str Scanner sc new Scanner date sc use Delimiter String month sc next String day sc next String year sc next visit Bean set Last Date month visit Bean set Last Date day visit Bean set Last Date year visit Bean set Last Date year month date visit Bean set Address pb get Street Address pb get Street Address visit Bean set Address pb get City pb get State pb get Zip boolean b Patient List pb date b false visits add visit Bean catch Exception dbe throw new Trust Exception dbe get Message Checks see patient list visits param pb patient check param date date visit return True patient list visits private boolean Patient List Patient Bean pb String date Iterator Patient Visit Bean visits iterator Patient Visit Bean visit Bean Next visit Bean next visit Bean get Patient Name equals pb get Full Name visit Bean get Last Date compare date visit Bean set Last Date date return true return false Get list patients office visits return list patients office visits throws Exception public List Patient Visit Bean get Patients throws Exception try process Office Visits catch Trust Exception ie return visits Returns Personnel Bean logged return Personnel Bean logged throws Trust Exception public Personnel Bean get Personnel throws Trust Exception return personnel get Personnel logged
package edu ncsu csc action import java util Array List import java util List import edu ncsu csc Email Util import edu ncsu csc beans Email import edu ncsu csc beans Patient Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Prescription Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc exception Trust Exception import edu ncsu csc Messages Handles retrieving beans view Prescription Records jsp author laurenhayward public class View Prescription Records Action private Patient patient private Personnel personnel private Email Util emailer private long logged Set defaults param factory Factory used create Os used action param logged person viewing prescription records public View Prescription Records Action Factory factory long logged emailer new Email Util factory patient factory get Patient personnel factory get Personnel logged logged Gets Patient Bean param patient patient return Patient Bean given throws Trust Exception public Patient Bean get Patient long patient throws Trust Exception return patient get Patient patient Gets logged person representees return list Patient Beans holding representees throws Trust Exception public List Patient Bean get Representees throws Trust Exception return patient get Represented logged Returns prescribing prescription param prescription item question return prescribed prescription throws Trust Exception public Personnel Bean get Prescribing Doctor Prescription Bean prescription throws Trust Exception return personnel get Prescribing Doctor prescription Returns prescriptions given patient param patient patient question return list prescriptions patient throws Trust Exception public List Prescription Bean get Prescriptions Patient long patient throws Trust Exception Patient Bean patient patient get Patient patient logged patient return patient get Prescriptions patient List String List new Array List String List add patient get Email List Patient Bean representatives patient get Representing patient Patient Bean representative representatives logged representative get return patient get Prescriptions patient List add representative get Email List Personnel Bean dlhcps patient get Declared Ps patient Personnel Bean dlhcp dlhcps logged dlhcp get return patient get Prescriptions patient List Personnel Bean uaps personnel get Ps dlhcp get Personnel Bean uap uaps logged uap get return patient get Prescriptions patient Email email new Email email set List List email set noreply com email set Subject Messages get String View Prescription Records Action email set Body Messages get String View Prescription Records Action emailer send Email email return patient get Prescriptions patient
package edu ncsu csc action import java util List import edu ncsu csc beans Patient Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Patient import edu ncsu csc exception Exception import edu ncsu csc Messages action returns list patients special diagnosis history logged whose medications going expire within seven days public class View Prescription Renewal Needs Action private Patient patient private long logged Set defaults param factory Factory used create Os used action param logged person viewing prescription renewals public View Prescription Renewal Needs Action Factory factory long logged patient factory get Patient logged logged Uses Patient helper class return list patients special diagnosis history logged whose medications going expire within seven days return list Patient Bean public List Patient Bean get Renewal Needs Patients try return patient get Renewal Needs Patients logged catch Exception e System println Messages get String View Prescription Renewal Needs Action System println e return null
package edu ncsu csc action import java util List import edu ncsu csc beans Diagnosis Bean import edu ncsu csc beans Patient Bean import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Prescription Bean import edu ncsu csc beans Procedure Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc exception Trust Exception Action class View Report jsp public class View Report Action private Patient patient private Personnel personnel Set defaults param factory Factory used create Os used action param logged person viewing report public View Report Action Factory factory long logged patient factory get Patient personnel factory get Personnel Get diagnosis list given patient param pid patient interest return list diagnoses throws Trust Exception public List Diagnosis Bean get Diagnoses long pid throws Trust Exception return patient get Diagnoses pid Get procedure list given patient param pid patient interest return list procedures throws Trust Exception public List Procedure Bean get Procedures long pid throws Trust Exception return patient get Procedures pid Get prescription list given patient param pid patient interest return list prescriptions throws Trust Exception public List Prescription Bean get Prescriptions long pid throws Trust Exception return patient get Current Prescriptions pid Get declared Ps list given patient param pid patient interest return list declared Ps throws Trust Exception public List Personnel Bean get Declared Ps long pid throws Trust Exception return patient get Declared Ps pid Returns Personnel Bean given param mid interest return Personnel Bean given throws Trust Exception public Personnel Bean get Personnel long mid throws Trust Exception return personnel get Personnel mid Returns Paitent Bean given param mid patient interest return Patient Bean given throws Trust Exception public Patient Bean get Patient long mid throws Trust Exception return patient get Patient mid
package edu ncsu csc action import java util List import edu ncsu csc beans Survey Result Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Survey Result import edu ncsu csc exception Form Validation Exception import edu ncsu csc exception Trust Exception import edu ncsu csc validate Survey Search Validator class used handle retrieving survey results database also logs transaction public class View Survey Result Action private Survey Result survey Result private Survey Search Validator validator long logged Set defaults param factory Factory used create Os used action param logged person retrieving survey results public View Survey Result Action Factory factory long logged survey Result factory get Survey Result logged logged validator new Survey Search Validator Retrieves survey results whole hospital param bean Survey Result Bean containing survey result specs return java util List Survey Results throws Trust Exception throws Form Validation Exception public List Survey Result Bean get Survey Results Hospital Survey Result Bean bean throws Trust Exception Form Validation Exception return survey Result get Survey Results Hospital bean get Phospital bean get Pspecialty Retrieves survey results given zip code param bean Survey Result Bean containing survey result specs return java util List Survey Results throws Trust Exception throws Form Validation Exception public List Survey Result Bean get Survey Results Zip Survey Result Bean bean throws Trust Exception Form Validation Exception validator validate bean return survey Result get Survey Results Zip bean get Pzip bean get Pspecialty
package edu ncsu csc action import java util Date import java util Linked Hash Map import java util List import java util Array List import edu ncsu csc beans Personnel Bean import edu ncsu csc beans Office Visit Bean import edu ncsu csc beans Visit Bean import edu ncsu csc dao Factory import edu ncsu csc dao mysql Patient import edu ncsu csc dao mysql Personnel import edu ncsu csc dao mysql Office Visit import edu ncsu csc exception Exception import edu ncsu csc exception Trust Exception Action class View Visited Ps jsp public class View Visited Ps Action private long patient private Personnel doc private Office Visit visit private Patient patient private Array List Visit Bean visits private Declare Action declare Action private Array List Personnel Bean filter List Set defaults param factory Factory used create Os used action param logged person viewing visited Ps public View Visited Ps Action Factory factory long logged patient logged doc factory get Personnel visit factory get Office Visit patient factory get Patient visits new Array List Visit Bean declare Action new Declare Action factory logged filter List new Array List Personnel Bean Create Visit Bean given Personnel Bean office visit date param pb Personnel Bean visited param visit Date date visit may empty string return new Visit Bean throws Exception private Visit Bean make Visit Bean Personnel Bean pb String visit Date throws Exception long hcpid pb get Visit Bean visit Bean new Visit Bean visit Bean set hcpid visit Bean set Name pb get Full Name visit Bean set Date visit Date visit Bean set Specialty pb get Specialty visit Bean set Addr pb get Street Address pb get Street Address pb get City pb get State pb get Zip visit Bean set Designated patient check Declared patient hcpid return visit Bean Checks see Personnel Bean matches given set criteria param pb Personnel Bean check param last Name last name check May null empty string ignore param specialty specialty check May null empty string ignore param zip zip code check May null empty string ignore return true Personnel Bean matches given parameters false otherwise private boolean match Personnel Personnel Bean pb String last Name String specialty String zip last Name null last Name equals pb get Last Name starts last Name return false specialty null specialty equals specialty equals pb get Specialty return false zip null zip equals zip equals pb get Zip return false return true Get list Ps visited designated current user list optionally filtered doctor last name specialty zip code param last Name last name part doctor search null empty string accept doctors param specialty specialty doctor search null empty string accept doctors param zip zip code doctor search null empty string accept doctors return list Visit Beans represents one visited designated throws Trust Exception private List Visit Bean get Visited Ps String last Name String specialty String zip throws Trust Exception Visited Ps case includes Ps visited Ps designated patient two groups retrieved different ways combined List Visit Bean visits new Array List Visit Bean try List Office Visit Bean ovlist visit get Office Visits patient get recent office visit provider Linked Hash Map Long Office Visit Bean Recent Visits new Linked Hash Map Long Office Visit Bean Office Visit Bean ov ovlist long id ov get Hcp Recent Visits contains Key id Recent Visits put id ov else Office Visit Bean old Recent Visits get id Date ov Date ov get Visit Date Date old Date old get Visit Date old Date ov Date Recent Visits put id ov Get visited Ps Office Visit Bean ov Recent Visits values long hcpid ov get Hcp Personnel Bean pb doc get Personnel hcpid match Personnel pb last Name specialty zip Visit Bean visit Bean make Visit Bean pb Recent Visits get hcpid get Visit Date Str visits add visit Bean Get designated Ps designated may visited ensure already list List Personnel Bean dhcps patient get Declared Ps patient next Personnel Bean pb dhcps match Personnel pb last Name specialty zip long hcpid pb get already visits list skip Visit Bean hv visits hv get hcpid continue next String date Visit Bean visit Bean make Visit Bean pb date visits add visit Bean catch Exception dbe throw new Trust Exception dbe get Message return visits Returns list visited designated Ps return list visited Ps public List Visit Bean get Visited Ps List Visit Bean visits try visits get Visited Ps null null null catch Trust Exception ie visits new Array List Visit Bean return visits Given name return corresponding Visit Bean param name return public Visit Bean get Named String name Visit Bean r new Visit Bean Visit Bean bean get Visited Ps name equals bean get Name r bean break return r Set given undeclared param name undeclare return empty string throws Trust Exception public String undeclare String name throws Trust Exception Visit Bean visit get Visited Ps visit get Name Lower Case compare name Lower Case Long mid Long value visit get declare Action undeclare mid String visit set Designated false visit get Date compare remove visit return Set given declared param name declare return empty string throws Trust Exception public String declare String name throws Trust Exception boolean match false Visit Bean visit get Visited Ps visit get Name Lower Case compare name Lower Case match true Long mid Long value visit get patient check Declared patient visit get declare Action declare mid String visit set Designated true match List Personnel Bean doclist doc get Personnel Personnel Bean ele doclist name compare ele get Full Name Visit Bean visit Bean visit Bean new Visit Bean visit Bean set ele get visit Bean set Name ele get Full Name visit Bean set Date visit Bean set Specialty ele get Specialty visit Bean set Addr ele get Street Address ele get Street Address ele get City ele get State ele get Zip visit Bean set Designated true Long mid Long value ele get patient check Declared patient mid declare Action declare mid String visits add visit Bean return Check see given declared param mid check return true declared otherwise false public boolean check Declared long mid throws Exception return patient check Declared patient mid Filter list Ps last name specialty zip code param doc Filter last Name May null empty string ignore param specialty Filter specialty May null empty string ignore param zip Filter zip May null empty string ignore return Filtered list Ps public List Visit Bean filter List String last Name String specialty String zip List Visit Bean visits try visits get Visited Ps last Name specialty zip catch Trust Exception ie visits new Array List Visit Bean return visits
package edu ncsu csc dao mysql import java sql Connection import java sql Prepared Statement import java sql Result Set import java sql Exception import java util Array List import java util List import edu ncsu csc Util import edu ncsu csc Date Util import edu ncsu csc beans Visit Flag import edu ncsu csc beans forms Visit Reminder Return Form import edu ncsu csc beans loaders Visit Reminder Return Form Loader import edu ncsu csc dao Factory import edu ncsu csc exception Exception Used queries related patient reminders stands Database Access Object Os intended reflections database one per table database time complex sets queries extra Os added Os assume data validated correct Os never setters parameter constructor factory Os accessed Factory see link Factory every factory obtaining connections accessing Os author Andy public class Visit Reminders private Factory factory typical constructor param factory link Factory associated used obtaining connections etc public Visit Reminders Factory factory factory factory Returns list patients associated given param hcpid question return java util List Visit Reminder Forms public List Visit Reminder Return Form get Patients long hcpid throws Exception Visit Reminder Return Form temp Visit Reminder Return Form Loader loader new Visit Reminder Return Form Loader List Visit Reminder Return Form patients new Array List Visit Reminder Return Form Connection conn null Prepared Statement ps null Result Set rs null try conn factory get Connection ps conn prepare Statement hid dhcp patientid p last Name p first Name p phone p phone p phone Patients p declaredhcp dhcp dhcp hcpid p dhcp patientid p dateofdeath null p dateofbirth ps set Long hcpid ps set Long hcpid rs ps execute Query rs next temp loader load Single rs patients add temp catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps return patients Returns list patients need visit means Alive patient office visit yr diagnosed Diabetes xx Asthma xx Circulatory System Disease param hcpid question return java util List visit reminders public List Visit Reminder Return Form get Diagnosed Visit Needers long hcpid throws Exception Connection conn null Prepared Statement ps null Result Set rs null try conn factory get Connection ps conn prepare Statement hid last Name first Name phone phone phone Dcode visit Date hid p p last Name p first Name p phone p phone p phone ovd Dcode Patients p Office Visits ov Diagnosis ovd p ov Patient p Date Death null ov ovd Visit ovd Code ovd Code ovd Code p p Patients p Office Visits ov p ov Patient ov visit Date p ov visit Date visit Date Patients p Office Visits ov p ov Patient p mid b last Name first Name Dcode ps set Long hcpid ps set Float f ps set Float f ps set Float f ps set Float f ps set Float f ps set Float f rs ps execute Query List Visit Reminder Return Form patients new Array List Visit Reminder Return Form Visit Reminder Return Form temp null Visit Reminder Return Form Loader loader new Visit Reminder Return Form Loader long last Id rs next last Id rs get Long patients get patients size add Visit Flag new Visit Flag Visit Flag rs get String else last Id rs get Long temp loader load Single rs temp add Visit Flag new Visit Flag Visit Flag rs get String temp add Visit Flag new Visit Flag Visit Flag rs get String patients add temp return patients catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps Returns list old people need flu shot Alive patient years old flu shot months current calendar year b months last calendar year Determines current date calls one two private methods methods return different sets people people n flu shot yet year need one b people missed last year flu shot need check return java util List Visit Reminder Forms param hcpid question param patient Birthday birthday patient question throws Exception public List Visit Reminder Return Form get Flu Shot Delinquents long hcpid throws Exception Connection conn null Prepared Statement ps null Result Set rs null Fall Bug Fix Use correct range zero based calendar eg January boolean Year Date Util currently Month Range String flag Type Year Visit Flag Visit Flag java sql Date september new java sql Date l december new java sql Date l Date Util set Month Range september Year december Year try conn factory get Connection ps conn prepare Statement hid p mid patientid p lastname p firstname p phone p phone p phone Office Visits ov Patients p ov patientid p mid p mid ov patientid Office Visits ov p dateofdeath p dateofbirth p mid patientid mid Office Visits ov Procedure op ov id op visitid Code ov visitdate ov visitdate lastname firstname p mid ps conn prepare Statement hid ov patientid p lastname p firstname p phone p phone p phone Office Visits ov Patients p ov patientid p mid p dateofdeath p dateofbirth patientid patientid Office Visits ov Medication om ov id om visitid Code Start Date End Date lastname firstname ov patientid ps set Long hcpid ps set Date september ps set Date december ps set Date september ps set Date december rs ps execute Query List Visit Reminder Return Form patients new Array List Visit Reminder Return Form Visit Reminder Return Form temp Visit Reminder Return Form Loader loader new Visit Reminder Return Form Loader rs next temp loader load Single rs temp add Visit Flag new Visit Flag flag Type Flu Shot patients add temp return patients catch Exception e e print Stack Trace throw new Exception e finally Util close Connection conn ps
